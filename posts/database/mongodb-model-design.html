<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>MongoDB - 模式设计 - 程序员翔仔</title><meta name=Description content="程序员翔仔，一个记录了翔仔个人编程笔记的地方"><meta property="og:title" content="MongoDB - 模式设计"><meta property="og:description" content="虽然说 MongoDB 是无模式的，但实际上模式设计在 MongoDB 中也非常重要。在实际开发中，大多数性能问题都可以追溯到糟糕的模式设计。"><meta property="og:type" content="article"><meta property="og:url" content="https://fatedeity.cn/posts/database/mongodb-model-design.html"><meta property="og:image" content="https://fatedeity.cn/favicon-32x32.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-26T09:11:34+08:00"><meta property="article:modified_time" content="2023-02-02T14:38:50+08:00"><meta property="og:site_name" content="程序员翔仔"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://fatedeity.cn/favicon-32x32.png"><meta name=twitter:title content="MongoDB - 模式设计"><meta name=twitter:description content="虽然说 MongoDB 是无模式的，但实际上模式设计在 MongoDB 中也非常重要。在实际开发中，大多数性能问题都可以追溯到糟糕的模式设计。"><meta name=application-name content="程序员翔仔"><meta name=apple-mobile-web-app-title content="程序员翔仔"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://fatedeity.cn/posts/database/mongodb-model-design.html><link rel=prev href=https://fatedeity.cn/posts/database/mongodb-model-design-pattern.html><link rel=next href=https://fatedeity.cn/posts/database/mongodb-replica-set-introduction.html><link rel=stylesheet href=/css/style.min.68f5de0d22e326dedf4dfe8e806e9640b9919ae9e1b50df254df92f9036a799d59ba1cff1530486374bc022352a3adb1bab3b30a35aeafa690009183d4d51c2f.css integrity="sha512-aPXeDSLjJt7fTf6OgG6WQLmRmunhtQ3yVN+S+QNqeZ1Zuhz/FTBIY3S8AiNSo62xurOzCjWur6aQAJGD1NUcLw=="><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><meta name=google-site-verification content="NSfr_TOb9-BVneo8k_7eO6vn7dy9XsG3KB7jBQD8hiA"><meta name=baidu-site-verification content="code-jrerrcwoiq"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"MongoDB - 模式设计","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/fatedeity.cn\/posts\/database\/mongodb-model-design.html"},"genre":"posts","keywords":"NoSQL, MongoDB","wordcount":2729,"url":"https:\/\/fatedeity.cn\/posts\/database\/mongodb-model-design.html","datePublished":"2022-12-26T09:11:34+08:00","dateModified":"2023-02-02T14:38:50+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"翔仔"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=程序员翔仔><img class="lazyload logo" src=/svg/loading.min.svg data-src=/logo-40x40.png data-srcset="/logo-40x40.png, /logo-40x40.png 1.5x, /logo-40x40.png 2x" data-sizes=auto alt=/logo-40x40.png title=/logo-40x40.png>程序员翔仔</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/>首页 </a><a class=menu-item href=/categories.html>分类 </a><a class=menu-item href=/tags.html>标签 </a><a class=menu-item href=/posts.html>归档 </a><a class=menu-item href=/about.html>关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=程序员翔仔><img class="lazyload logo" src=/svg/loading.min.svg data-src=/logo-40x40.png data-srcset="/logo-40x40.png, /logo-40x40.png 1.5x, /logo-40x40.png 2x" data-sizes=auto alt=/logo-40x40.png title=/logo-40x40.png>程序员翔仔</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/ title>首页</a><a class=menu-item href=/categories.html title>分类</a><a class=menu-item href=/tags.html title>标签</a><a class=menu-item href=/posts.html title>归档</a><a class=menu-item href=/about.html title>关于</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">MongoDB - 模式设计</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>翔仔</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%80%E6%9C%AF.html><i class="far fa-folder fa-fw" aria-hidden=true></i>数据库技术</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-12-26>2022-12-26</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 2729 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 6 分钟&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#注意事项>注意事项</a><ul><li><a href=#限制条件>限制条件</a></li><li><a href=#访问模式>访问模式</a></li><li><a href=#关系类型>关系类型</a></li></ul></li><li><a href=#范式化和反范式化>范式化和反范式化</a><ul><li><a href=#基本概念>基本概念</a></li><li><a href=#范式化选择>范式化选择</a></li></ul></li><li><a href=#模型设计小技巧>模型设计小技巧</a><ul><li><a href=#指导原则>指导原则</a></li><li><a href=#删除旧数据>删除旧数据</a></li><li><a href=#一致性管理>一致性管理</a></li><li><a href=#模式迁移>模式迁移</a></li><li><a href=#模式管理>模式管理</a></li><li><a href=#编写代码来处理数据完整性问题>编写代码来处理数据完整性问题</a></li></ul></li></ul></nav></div></div><div class=content id=content><p>虽然说 MongoDB 是无模式的，但实际上模式设计在 MongoDB 中也非常重要。在实际开发中，大多数性能问题都可以追溯到糟糕的模式设计。</p><h2 id=注意事项>注意事项</h2><p>模式设计，即在文档中表示数据的方式，对于数据表示来说时非常关键的。</p><p>为 MongoDB 做模式设计时，在性能、可伸缩性和简单性方面是重中之重，也需要考虑一些特别的注意事项。</p><h3 id=限制条件>限制条件</h3><p>与常见的 SQL 相比而言，MongoDB 有自己的限制条件：</p><ul><li>文档最大限制为 16M 大小</li><li>从磁盘读写完整文档</li><li>更新会重写整个文档</li><li>在文档级别进行原子更新</li></ul><h3 id=访问模式>访问模式</h3><p>设计模式时最需要关注的就是数据库的读操作，在数据库运行过程中，应尽量减少查询的数量，这就需要在设计时确保一起查询的数据存储在同一个文档中。</p><p>其实，就是考虑是否是否可以将动态（读/写）数据和静态（主要是读）数据分离开，如未经常使用的数据应该移到不同的集合中。</p><p>在进行模式设计时，提高最常见查询的优先级会获得最佳的性能。</p><h3 id=关系类型>关系类型</h3><p>数据之间的关系影响着文档之间应该是内嵌还是引用。</p><p>比如说，需要弄清楚如何在不执行其他查询的情况下引用文档，以及当关系发生变化时需要更新多少文档。</p><p>关系基数对于文档之间的关系非常重要，如一对一、一对多、多对多、一对百万、多对百万等等关系基础，影响的程度差距非常大，应选取最佳格式去做建模。</p><p>在关系基数的基础上，还需关注访问的情况、重要数据更新与读取的比例，这些充分考虑之后，将有助于确定应采用内嵌文档还是引用文档。</p><h2 id=范式化和反范式化>范式化和反范式化</h2><h3 id=基本概念>基本概念</h3><p>通常来说，多文档之间的关系可以使用反范式化（内嵌）或范式化（引用）。</p><p>范式化是指在文档中引用外部数据的标识，同一份数据只存在一个地方。</p><p>在查询时，查询完整的数据需要做 JOIN 的操作，需要查询多次才可能获取到所需内容；但是在更改时仅需修改一处地方，不需要担心破坏数据的完整性。</p><p>反范式化是指将外部数据复制一份存储在文档中，也就是说同一份数据存在多处地方。</p><p>在查询时，只需查询一次即可得到所需内容，查询效率比较可观；而在更改时，需要更新多处地方，可能会出现数据不一致的情况，不能保证完整性。</p><h3 id=范式化选择>范式化选择</h3><p>决定何时采用范式化以及何时采用反范式化是比较困难的：通常，范式化的写入速度更快，而反范式化的读取速度更快。</p><p>通过判断以下因素可决策选择使用范式化还是反范式化：</p><table><thead><tr><th style=text-align:center>更适合范式化</th><th style=text-align:center>更适合反范式化</th></tr></thead><tbody><tr><td style=text-align:center>较大子文档</td><td style=text-align:center>较小子文档</td></tr><tr><td style=text-align:center>数据经常变更</td><td style=text-align:center>数据不经常变更</td></tr><tr><td style=text-align:center>数据要强一致</td><td style=text-align:center>数据最终一致即可</td></tr><tr><td style=text-align:center>文档数据大幅增加</td><td style=text-align:center>文档数据小幅增加</td></tr><tr><td style=text-align:center>数据通常不包含在结果中</td><td style=text-align:center>数据通常需要执行二次查询才能获得</td></tr><tr><td style=text-align:center>快速写入</td><td style=text-align:center>快速读取</td></tr></tbody></table><h2 id=模型设计小技巧>模型设计小技巧</h2><h3 id=指导原则>指导原则</h3><p>通常来说，具有类似模式的文档应该保存在同一个集合中。</p><p>对于集合来说，需要考虑的一个大问题是锁机制（每个文档都有一个读/写锁）和存储。</p><p>当使用 <code>--directoryperdb</code> 选项时，每个数据库都可以保留在自己的目录中，这允许你将不同的数据库挂载到不同的卷中。</p><p>同一个应用程序连接的数据库可以根据业务进行划分，也许可以将高价值的业务数据存储在 SSD 上，或者是使用 RAID10 进行存储，而低价值的数据可以存储在 RAID0 上。</p><h3 id=删除旧数据>删除旧数据</h3><p>有些数据只在短时间内比较重要，过了这段时间，保存这些数据只是再浪费存储空间。</p><p>删除旧数据有 3 种常见的方式：使用固定集合、使用 TTL 索引、使用多个集合。</p><p>最简单的方式是使用固定集合：将集合大小设置成一个较大的值，并让旧数据从固定集合的末尾被“删除”。</p><p>第二种方式是使用 TTL 集合：TTL 集合可以更精确地控制删除文档的时间，但其在写入量过大的集合中操作速度不够快。</p><p>最后一种方式是使用多个集合：例如每个月的文档都单独使用一个集合。</p><h3 id=一致性管理>一致性管理</h3><p>MongoDB 支持多种一致性级别，从总是能够读取自己所写的数据到读取不确定的旧数据。</p><p>其内部实现是服务器端为每一个数据库连接都维护了请求队列，同一个连接发来的请求都会被添加到队列的末尾，连接中的任何后续请求都将依次得到处理。</p><p>这个管理方式涉及到多个客户端连接会出现并发问题，在一个连接中插入文档后，在另一个连接的后续查询却不一定会返回这个文档（实际上已经插入成功）。</p><p>同样的一致性问题在 MongoDB 拥有副本集时也会出现，副本节点的数据与主节点的数据总是会有时间差，高并发的请求同样存在读取到旧数据的风险。</p><p>MongoDB 提供了 <code>readConcern</code> 选项来控制被读取数据的一致性和隔离性。它通常与 <code>writerConcern</code> 组合使用，以控制为应用程序提供的一致性和可用性保证：</p><p>如果 <code>readConcern=local</code>，从当前实例查询并返回结果，不能保证数据已经写入大多数副本集成员。默认在主库读，如果本次读取使用了 <code>causally consistent</code> 则在从库读。</p><p>如果 <code>readConcern=available</code>，从当前实例查询并返回结果，不能保证数据已经写入大多数副本集成员。默认在从库读，并且此选项与 <code>causally consistent</code> 不能同时使用。</p><p>如果 <code>readConcern=majority</code>，查询结果返回被副本集的大多数成员确认的数据，读操作返回的文档是持久化的。前提是 MongoDB 必须是 WiredTiger 存储引擎。</p><p>如果 <code>readConcern=linearizable</code>，查询可能会等待并发执行的写操作传播到大多数副本集成员，然后再返回结果。</p><p>如果 <code>readConcern=snapshot</code>，这是适用于多文档事务中的操作，通常情况下使用较少。</p><h3 id=模式迁移>模式迁移</h3><p>随着应用程序的增长和需求的变化，数据库模式也可能需要随之增长和改变。理想情况下，如果可以的话，应该考虑使用文档版本控制模式。</p><p>最简单的方式是根据应用程序的需要改进数据库模式，以确保应用程序支持所有的旧版模式。但是这种方式可能会导致混乱，特别是当不同版本的模式存在冲突时。</p><p>为了以一种更结构化的方式处理不断变化的需求，可以在每个文档中包含一个 <code>version</code> 字段，并使用它来确定应用程序将接受的文档结构。</p><p>最后一种方式是在模式变更时迁移所有数据。但这通常不是一个好主意：会给系统带来压力，还必须确保所有文档都被更新成功。</p><h3 id=模式管理>模式管理</h3><p>MongoDB 3.2 引入了模式验证，其可以在更新和插入操作期间对数据进行验证。</p><p>MongoDB 3.6 又通过 <code>$jsonSchema</code> 运算符添加了 JSON 模式验证，现在这是 MongoDB 中所有模式验证的推荐方法。</p><p>只有当文档被更改时，验证功能才会检查这些文档，并且此功能是每个集合都需要单独配置的。</p><p>要向现有集合添加验证功能，可以在 <code>collMod</code> 命令中使用 <code>validator</code> 选项。在使用 <code>db.createCollection()</code> 时，可以通过指定 <code>validator</code> 选项将验证添加到新集合中。</p><p>MongoDB 还提供了两个额外的选项：</p><ul><li><code>validationLevel</code>: 决定了在更新过程中验证规则对现有文档检查的严格程度</li><li><code>validationAction</code>: 决定了是应该在发生错误时拒绝请求，还是允许请求并发出警告</li></ul><p>当然，更详细的相关内容可以查看 <a href=https://www.mongodb.com/docs/v6.0/core/schema-validation/specify-json-schema/ target=_blank rel="noopener noreffer">官方文档</a>。</p><h3 id=编写代码来处理数据完整性问题>编写代码来处理数据完整性问题</h3><p>为保证 MongoDB 数据的完整性，有可能需要在应用程序中增加必要的逻辑代码进行处理，也需要增加定时任务来保持数据的一致性。</p><p>有可能需要有以下的任务：</p><ul><li>一致性修复程序：检查计算和重复数据以确保每个人都具有一致的值</li><li>预填充器：创建将来需要的文档</li><li>聚合：保持内联聚合为最新</li><li>架构检查器：确保当前使用的文档集都具有一组字段，可以自动更正它们</li><li>定时备份：定期锁定和转储数据库</li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2023-02-02</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/posts/database/mongodb-model-design.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/nosql.html>NoSQL</a>,&nbsp;<a href=/tags/mongodb.html>MongoDB</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/database/mongodb-model-design-pattern.html class=prev rel=prev title="MongoDB - 数据模型的设计模式"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>MongoDB - 数据模型的设计模式</a>
<a href=/posts/database/mongodb-replica-set-introduction.html class=next rel=next title="MongoDB - 副本集简介">MongoDB - 副本集简介<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=giscus class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app>Giscus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.110.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>翔仔</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><a href=https://beian.miit.gov.cn/ target=_blank>粤ICP备2021076569号</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.7b0408f98c705b0bc4a799d0202fa56eb3205ac5921eabd9361c0b6788f342f09cb993017c67db1e9a9cc94773fbd5719a10c007bda24312630eb81919b8b8a1.js integrity="sha512-ewQI+YxwWwvEp5nQIC+lbrMgWsWSHqvZNhwLZ4jzQvCcuZMBfGfbHpqcyUdz+9VxmhDAB72iQxJjDrgZGbi4oQ=="></script><script type=text/javascript src=/lib/lunr/lunr.zh.min.918bdd059e2c518e24c32fb5fd89144a49778f21f2166db93bf1e2ed311b3589660feb5777210257aee209f6d8bdde8c296883e34ff8bf4d5338f4be53132976.js integrity="sha512-kYvdBZ4sUY4kwy+1/YkUSkl3jyHyFm25O/Hi7TEbNYlmD+tXdyECV67iCfbYvd6MKWiD40/4v01TOPS+UxMpdg=="></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript src=/js/baidu_tongji.b0e0519286d388eaa2ec7550b8dbb0df7488e085ea2e108bbd48ca6171b7696797554da5cdf808f754e5dae27659b75d83402926da5821c7ae2409445a7b488e.js integrity="sha512-sOBRkobTiOqi7HVQuNuw33SI4IXqLhCLvUjKYXG3aWeXVU2lzfgI91Tl2uJ2Wbddg0ApJtpYIceuJAlEWntIjg=="></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:50},comment:{giscus:{category:"Announcements",categoryId:"DIC_kwDOIa-wYs4CSg4a",darkTheme:"dark",emitMetadata:"0",inputPosition:"top",lang:"zh-CN",lazyLoading:!0,lightTheme:"light",mapping:"pathname",reactionsEnabled:"1",repo:"fatedeity/blog-comment",repoId:"R_kgDOIa-wYg"}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/lib/lunr/lunr.segmentit.js",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.2970a33d719df7cd89cebf586152b32a8ed30012227fa81b44282950146e0f595d1c733779e4d423dda1004bdcf707ee64d0fadc3d21229cd66b960788f84bdb.js integrity="sha512-KXCjPXGd982Jzr9YYVKzKo7TABIif6gbRCgpUBRuD1ldHHM3eeTUI92hAEvc9wfuZND63D0hIpzWa5YHiPhL2w=="></script></body></html>