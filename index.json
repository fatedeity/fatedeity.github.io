[{"content":"ç®€ä»‹ ç¿”ä»”ï¼Œä¸€åå¦„æƒ³ç”¨åŠªåŠ›å¥‹æ–—æ¥æ©é¥°è‡ªå·±å¹³åº¸çš„ç¨‹åºå‘˜ã€‚\nåœ¨æŠ€æœ¯è¿™æ¡è·¯ä¸Šï¼Œè™½ç„¶å·²ç»æœ‰å¾ˆå¤šå‰è¾ˆï¼Œä½†å› è‡ªå·±çš„æ€§æ ¼æ‰€è‡´ï¼Œä¸€ç›´ä¹Ÿæ˜¯è¸½è¸½ç‹¬è¡Œã€‚\næœ¬å°±ä¸å¤ªä¼šè¯´è¯ï¼Œå³ä½¿å†™ä¹Ÿå†™ä¸å‡ºä»€ä¹ˆå¥½çš„æ–‡ç« ï¼Œå¸Œæœ›ç”¨è¿™æ ·çš„æ–¹å¼ï¼Œèƒ½å¤Ÿæå‡è‡ªå·±å†™ä½œçš„æ°´å¹³ã€‚\nç°åœ¨çš„èƒ½åŠ›ä¸€èˆ¬ï¼Œä½†ä»ç„¶æƒ³ç€åšå®ˆï¼šã€Œä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆã€ã€‚\næƒ³è¦æ¢è®¨æŠ€æœ¯é—®é¢˜ï¼Œå¯ä»¥è”ç³»æˆ‘ï¼š799298142@qq.com\næŠ€æœ¯æ ˆ 2018-2021: åˆšæ¯•ä¸šåˆå…¥åˆ°ã€Œå¥½åˆ†æ•°ã€ï¼Œå…¬å¸å†…ä½¿ç”¨ nodejs ä½œä¸ºä¸»è¦ç¼–ç¨‹è¯­è¨€ï¼Œä¹Ÿé™†é™†ç»­ç»­å­¦ä¼š Expressã€MongoDBã€Redisã€RabbitMQã€ElasticSearch ç­‰ç­‰ç›¸å…³æŠ€æœ¯ã€‚\n2021-2022: åœ¨çº¿æ•™è‚²çš„æ›´è¿­å¤§èƒŒæ™¯ä¸‹ï¼Œç¦»èŒåè¿›å…¥åˆ°ã€Œæ¢è¿¹ã€ï¼Œå…¬å¸å†…ä½¿ç”¨ Python ä½œä¸ºä¸»è¦ç¼–ç¨‹è¯­è¨€ï¼Œå…¶è¿‡ç¨‹ä½¿ç”¨ Flaskã€MongoDBã€ElasticSearch ç­‰æŠ€æœ¯æ›´å¤šã€‚\nä½œä¸ºä¸€ååç«¯å¼€å‘ç¨‹åºå‘˜ï¼Œä¸€ç›´æœ‰ç€æƒ³è¦æˆä¸ºæ¶æ„å¸ˆçš„æ¢¦ï¼Œå½“ç„¶ï¼Œæ›´å¤šçš„æ˜¯æƒ³è¦è‡ªå·±ä¸å†åšæ‰“å·¥äººğŸ¤¡ã€‚\n","permalink":"https://fatedeity.cn/about.html","title":"å…³äº"},{"content":"éšç€åšå®¢çš„æ–‡ç« è¶Šæ¥è¶Šå¤šï¼ŒåŸæœ¬æ²¡æœ‰æœç´¢åŠŸèƒ½çš„åšå®¢å˜å¾—éš¾ä»¥ä½¿ç”¨èµ·æ¥ï¼Œåšå®¢æ·»åŠ ä¸€ä¸ªæœç´¢åŠŸèƒ½åŠ¿åœ¨å¿…è¡Œå•Šã€‚\nèµ·å›  æˆ‘çš„åšå®¢ä½¿ç”¨äº† hugo ä½œä¸ºé™æ€ç”Ÿæˆå·¥å…·ï¼Œè‡ªå¸¦çš„ä¸»é¢˜é‡Œä¹Ÿæ²¡æœ‰é™„å¸¦æœç´¢åŠŸèƒ½ã€‚çœ‹æ¥ï¼Œè¿˜æ˜¯å¾—è‡ªå·±ç»™åšå®¢æ·»åŠ ä¸€ä¸ªæœç´¢åŠŸèƒ½ã€‚\nç»è¿‡å¤šæ–¹æŸ¥æ‰¾ï¼Œä» Hugo Fast Search Â· GitHub æ‰¾åˆ°ä¸€ç‰‡è¯¦ç»†ã€å¯ç”¨çš„æ•™ç¨‹ï¼ˆè™½ç„¶åé¢é­”æ”¹äº†ä¸€äº›ï¼‰ã€‚\nå®é™…æ¡ˆä¾‹ æ­¥éª¤ åœ¨ config.toml æ–‡ä»¶åšå¥½ç›¸å…³é…ç½®ï¼› æ·»åŠ å¯¼å‡º JSON æ ¼å¼æ–‡ä»¶çš„è„šæœ¬ï¼Œå³åœ¨ layouts/_default ç›®å½•ä¸‹æ·»åŠ  index.json æ–‡ä»¶ï¼› å¢åŠ ä¾èµ–çš„ JS è„šæœ¬ï¼ŒåŒ…å«è‡ªå·±çš„ search.js å’Œ fuse.js æ–‡ä»¶ï¼› æ·»åŠ ç›¸å…³ HTML ä»£ç ï¼› æ·»åŠ ç›¸å…³ CSS æ ·å¼ã€‚ é…ç½® [params] # æ˜¯å¦å¼€å¯æœ¬åœ°æœç´¢ fastSearch = true [outputs] # å¢åŠ  JSON é…ç½® home = [\u0026quot;HTML\u0026quot;, \u0026quot;RSS\u0026quot;, \u0026quot;JSON\u0026quot;] æ·»åŠ  index.json æ–‡ä»¶ {{- $.Scratch.Add \u0026quot;index\u0026quot; slice -}} {{- range .Site.RegularPages -}} {{- $.Scratch.Add \u0026quot;index\u0026quot; (dict \u0026quot;title\u0026quot; .Title \u0026quot;permalink\u0026quot; .Permalink \u0026quot;content\u0026quot; .Plain) -}} {{- end -}} {{- $.Scratch.Get \u0026quot;index\u0026quot; | jsonify -}} æ·»åŠ ä¾èµ– é¦–å…ˆï¼Œå¯ä»¥å…ˆæ·»åŠ  fuse.js ä¾èµ–ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è½»é‡çº§æ¨¡ç³Šæœç´¢åº“ï¼Œå¯ä»¥åˆ° å®˜ç½‘ è®¿é—®æ›´å¤šä¿¡æ¯ï¼š\n{{- if .Site.Params.fastSearch -}} \u0026lt;script src=\u0026quot;https://cdn.jsdelivr.net/npm/fuse.js@6.4.6\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; {{- end -}} ç„¶åï¼Œå°±æ˜¯æ·»åŠ è‡ªå®šä¹‰çš„ search.js æ–‡ä»¶ä»¥å®ç°æœç´¢åŠŸèƒ½ï¼Œæ–‡ä»¶æ”¾ç½®åœ¨ assets/js ç›®å½•ä¸‹ã€‚\nè¿™é‡Œçš„ä»£ç å’Œ Gist ä¸Šçš„æœ‰äº›è®¸ä¸åŒï¼Œç»è¿‡äº†è‡ªå·±çš„é­”æ”¹ã€‚\nvar fuse; // holds our search engine var searchVisible = false; var firstRun = true; // allow us to delay loading json data unless search activated var list = document.getElementById('searchResults'); // targets the \u0026lt;ul\u0026gt; var first = list.firstChild; // first child of search list var last = list.lastChild; // last child of search list var maininput = document.getElementById('searchInput'); // input box for search var resultsAvailable = false; // Did we get any search results? // ========================================== // The main keyboard event listener running the show // document.addEventListener(\u0026quot;click\u0026quot;, event =\u0026gt; { var cDom = document.getElementById(\u0026quot;fastSearch\u0026quot;); var sDom = document.getElementById('search-click'); var tDom = event.target; if (sDom == tDom || sDom.contains(tDom)) { showSearchInput(); } else if (cDom == tDom || cDom.contains(tDom)) { // ... } else if (searchVisible) { cDom.style.display = \u0026quot;none\u0026quot; searchVisible = false; } }); document.addEventListener('keydown', function(event) { // CMD-/ to show / hide Search if (event.metaKey \u0026amp;\u0026amp; event.which === 191) { showSearchInput() } // Allow ESC (27) to close search box if (event.keyCode == 27) { if (searchVisible) { document.getElementById(\u0026quot;fastSearch\u0026quot;).style.display = \u0026quot;none\u0026quot;; document.activeElement.blur(); searchVisible = false; } } // DOWN (40) arrow if (event.keyCode == 40) { if (searchVisible \u0026amp;\u0026amp; resultsAvailable) { event.preventDefault(); // stop window from scrolling if ( document.activeElement == maininput) { first.focus(); } // if the currently focused element is the main input --\u0026gt; focus the first \u0026lt;li\u0026gt; else if ( document.activeElement == last ) { last.focus(); } // if we're at the bottom, stay there else { document.activeElement.parentElement.nextSibling.firstElementChild.focus(); } // otherwise select the next search result } } // UP (38) arrow if (event.keyCode == 38) { if (searchVisible \u0026amp;\u0026amp; resultsAvailable) { event.preventDefault(); // stop window from scrolling if ( document.activeElement == maininput) { maininput.focus(); } // If we're in the input box, do nothing else if ( document.activeElement == first) { maininput.focus(); } // If we're at the first item, go to input box else { document.activeElement.parentElement.previousSibling.firstElementChild.focus(); } // Otherwise, select the search result above the current active one } } }); // ========================================== // execute search as each character is typed // document.getElementById(\u0026quot;searchInput\u0026quot;).onkeyup = function(e) { executeSearch(this.value); } function showSearchInput() { // Load json search index if first time invoking search // Means we don't load json unless searches are going to happen; keep user payload small unless needed if(firstRun) { loadSearch(); // loads our json data and builds fuse.js search index firstRun = false; // let's never do this again } // Toggle visibility of search box if (!searchVisible) { document.getElementById(\u0026quot;fastSearch\u0026quot;).style.display = \u0026quot;block\u0026quot;; // show search box document.getElementById(\u0026quot;searchInput\u0026quot;).focus(); // put focus in input box so you can just start typing searchVisible = true; // search visible } else { document.getElementById(\u0026quot;fastSearch\u0026quot;).style.display = \u0026quot;none\u0026quot;; // hide search box document.activeElement.blur(); // remove focus from search box searchVisible = false; // search not visible } } // ========================================== // fetch some json without jquery // function fetchJSONFile(path, callback) { var httpRequest = new XMLHttpRequest(); httpRequest.onreadystatechange = function() { if (httpRequest.readyState === 4) { if (httpRequest.status === 200) { var data = JSON.parse(httpRequest.responseText); if (callback) callback(data); } } }; httpRequest.open('GET', path); httpRequest.send(); } // ========================================== // load our search index, only executed once // on first call of search box (CMD-/) // function loadSearch() { fetchJSONFile('/index.json', function(data){ var options = { // fuse.js options; check fuse.js website for details includeMatches: true, shouldSort: true, ignoreLocation: true, keys: [ { name: 'title', weight: 1, }, { name: 'content', weight: 0.6, }, ], }; fuse = new Fuse(data, options); // build the index from the json file }); } // ========================================== // using the index we loaded on CMD-/, run // a search query (for \u0026quot;term\u0026quot;) every time a letter is typed // in the search box // function executeSearch(term) { if (term.length == 0) { document.getElementById(\u0026quot;searchResults\u0026quot;).setAttribute(\u0026quot;style\u0026quot;, \u0026quot;\u0026quot;); return; } let results = fuse.search(term); // the actual query being run using fuse.js let searchItems = ''; // our results bucket if (results.length === 0) { // no results based on what was typed into the input box resultsAvailable = false; searchItems = '\u0026lt;li class=\u0026quot;noSearchResult\u0026quot;\u0026gt;æ— ç»“æœ\u0026lt;/li\u0026gt;'; } else { // build our html permalinkList = [] searchItemCount = 0 for (let item in results) { if (permalinkList.includes(results[item].item.permalink)) { continue; } // å»é‡ permalinkList.push(results[item].item.permalink); searchItemCount += 1; title = results[item].item.title; content = results[item].item.content.slice(0, 50); for (const match of results[item].matches) { if (match.key == 'title') { startIndex = match.indices[0][0]; endIndex = match.indices[0][1] + 1; highText = '\u0026lt;span class=\u0026quot;search-highlight\u0026quot;\u0026gt;' + match.value.slice(startIndex, endIndex) + '\u0026lt;/span\u0026gt;'; title = match.value.slice(0, startIndex) + highText + match.value.slice(endIndex); } else if (match.key == 'content') { startIndex = match.indices[0][0]; endIndex = match.indices[0][1] + 1; highText = '\u0026lt;span class=\u0026quot;search-highlight\u0026quot;\u0026gt;' + match.value.slice(startIndex, endIndex) + '\u0026lt;/span\u0026gt;'; content = match.value.slice(Math.max(0, startIndex - 30), startIndex) + highText + match.value.slice(endIndex, endIndex + 30); } } searchItems = searchItems + '\u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;' + results[item].item.permalink + '\u0026quot;\u0026gt;' + '\u0026lt;span class=\u0026quot;title\u0026quot;\u0026gt;' + title + '\u0026lt;/span\u0026gt;\u0026lt;br /\u0026gt; \u0026lt;span class=\u0026quot;sc\u0026quot;\u0026gt;'+ content +'\u0026lt;/span\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt;'; // only show first 5 results if (searchItemCount \u0026gt;= 5) { break; } } resultsAvailable = true; } document.getElementById(\u0026quot;searchResults\u0026quot;).setAttribute(\u0026quot;style\u0026quot;, \u0026quot;display: block;\u0026quot;); document.getElementById(\u0026quot;searchResults\u0026quot;).innerHTML = searchItems; if (results.length \u0026gt; 0) { first = list.firstChild.firstElementChild; // first result container â€” used for checking against keyboard up/down location last = list.lastChild.firstElementChild; // last result container â€” used for checking against keyboard up/down location } } æœ€åï¼Œéœ€è¦å°† search.js ä¾èµ–å¼•å…¥ï¼Œå¦‚ä¸‹æ˜¯å¼•å…¥çš„ä»£ç ï¼š\n{{ $search := resources.Get \u0026quot;js/search.js\u0026quot; | minify | fingerprint }} \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;{{ $search.RelPermalink }}\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; æ·»åŠ  HTML ä»£ç  HTML é¡µé¢çš„ä»£ç åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šæœç´¢çš„æŒ‰é’®ã€æœç´¢æ¡†å’Œç»“æœå±•ç¤ºã€‚\næˆ‘è¿™é‡Œå°†æœç´¢çš„æŒ‰é’®æ”¾åˆ°çš„èœå•æ ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªå¯ç‚¹å‡»çš„æŒ‰é’®ï¼š\n{{ if .Site.Params.fastSearch -}} \u0026lt;li id=\u0026quot;search-click\u0026quot; class=\u0026quot;menu-item\u0026quot;\u0026gt; \u0026lt;a class=\u0026quot;menu-item-link\u0026quot; href=\u0026quot;javascript:void(0)\u0026quot;\u0026gt;æœç´¢\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; {{- end }} å¯¹äºæœç´¢æ¡†ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯å¼¹å‡ºå¼çš„çª—å£ï¼Œè¿™é‡Œæ¯”è¾ƒé‡è¦çš„æ˜¯æ ‡ç­¾çš„ ID éœ€è¦å’Œ search.js è„šæœ¬ä¸€è‡´ï¼š\n{{ if .Site.Params.fastSearch -}} \u0026lt;div id=\u0026quot;fastSearch\u0026quot;\u0026gt; \u0026lt;input id=\u0026quot;searchInput\u0026quot;\u0026gt; \u0026lt;ul id=\u0026quot;searchResults\u0026quot;\u0026gt;\u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; {{- end }} æ·»åŠ  CSS æ ·å¼ é¡µé¢æ ·å¼è¿™éƒ¨åˆ†ï¼Œä¸»è¦æ˜¯çœ‹ä¸ªäººçš„å–œå¥½ï¼Œè¿™é‡Œåªæ”¾å‡ºè‡ªå·±çš„æ ·å¼ï¼š\n#fastSearch { display: none; position: fixed; left: 50%; top: calc(5vw + 40px); transform: translateX(-50%); z-index: 4; width: 650px; background-color: #fff; box-shadow: 0 1px 2px #3c40434d, 0 2px 6px 2px #3c404326; border-radius: 4px; overflow: hidden; input { padding: 10px; width: 100%; height: 30px; font-size: 18px; line-height: 30px; border: none; outline: none; font-family: inherit; } #searchResults { display: none; overflow-y: auto; max-height: 60vh; padding-left: 0; margin: 0; border-top: 1px dashed #ddd; .search-highlight { color: red; } li { list-style: none; margin: 0; a { text-decoration: none; color: inherit; padding: 6px 10px; display: block; font-size: 14px; letter-spacing: .04em; } a:hover, a:focus { filter: brightness(93%); outline: 0; background-color: rgb(240, 240, 240); } .title { font-weight: 600; } } li.noSearchResult { text-align: center; margin: 8px 0; color: #888; } } } æ ·ä¾‹å±•ç¤º æ€»ç»“ ç»è¿‡ä¸¤å¤©æ—¶é—´çš„å¥‹æ–—ï¼Œç»ˆäºæ˜¯å°†æœç´¢åŠŸèƒ½ç»™ä¸Šçº¿äº†ã€‚\nä¸å¾—ä¸è¯´ï¼Œç†æƒ³æ€»æ˜¯ä¸€å¼€å§‹ç¾å¥½ï¼Œæœ€åˆä»¥ä¸ºæ˜¯ä¸€ä¸ªå®Œæ•´ã€å¯ç”¨çš„æ•™ç¨‹ï¼Œå´æ²¡æƒ³åˆ°å¤åˆ¶åˆ°ä»£ç ä¹‹åå°±ä¸å¯ç”¨äº†ï¼Œæœ€ç»ˆæ˜¯ç»è¿‡è‡ªå·±çš„é­”æ”¹æ‰å¾—ä»¥ä½¿ç”¨ã€‚\næ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œæ²¡æœ‰å®è·µå°±æ²¡æœ‰è¯è¯­æƒï¼Œåƒä¸‡ä¸è¦åšç®¡ä¸­çª¥è±¹çš„é‚£ä¸ªäººã€‚\n","permalink":"https://fatedeity.cn/posts/z-turn/hugo-add-local-search.html","title":"ç»™ hugo åšå®¢æ·»åŠ æœç´¢åŠŸèƒ½"},{"content":"å‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§æ•°æ®é©±åŠ¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå±äºè¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ã€‚é€šè¿‡ä½¿ç”¨å‘½ä»¤æ¨¡å¼ï¼Œå¯ä»¥æå¤§åœ°é™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ã€‚\nç®€ä»‹ å‘½ä»¤è®¾è®¡æ¨¡å¼ï¼ˆCommand Design Patternï¼‰å¯ä»¥å°†è¯·æ±‚å‘é€è€…å’Œæ¥æ”¶è€…å®Œå…¨è§£è€¦ã€‚å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´æ²¡æœ‰ç›´æ¥å¼•ç”¨å…³ç³»ï¼Œå‘é€è¯·æ±‚çš„å¯¹è±¡åªéœ€è¦çŸ¥é“å¦‚ä½•å‘é€è¯·æ±‚ï¼Œè€Œä¸å¿…çŸ¥é“å¦‚ä½•å®Œæˆè¯·æ±‚ã€‚\nå…¶å®šä¹‰æ˜¯ï¼Œå°†è¯·æ±‚ï¼ˆå‘½ä»¤ï¼‰å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œå¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼ˆå°†ä¸åŒè¯·æ±‚ä¾èµ–æ³¨å…¥åˆ°å…¶ä»–å¯¹è±¡ï¼‰ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ”¯æŒè¯·æ±‚ï¼ˆå‘½ä»¤ï¼‰çš„æ’é˜Ÿæ‰§è¡Œã€è®°å½•æ—¥å¿—ã€æ’¤é”€ç­‰ï¼ˆé™„åŠ æ§åˆ¶ï¼‰åŠŸèƒ½ã€‚\nå…¸å‹å®ç° é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªæŠ½è±¡å‘½ä»¤ Command æ¥å£ï¼Œé€šå¸¸ä»…å£°æ˜ä¸€ä¸ªæ‰§è¡Œå‘½ä»¤çš„æ–¹æ³•ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic interface Command { // ä¸šåŠ¡å¤„ç†æ–¹æ³• void execute(); } å…·ä½“å‘½ä»¤ä¼šå®ç°å„ç§ç±»å‹çš„è¯·æ±‚ï¼Œå…¶è‡ªèº«å¹¶ä¸å®Œæˆå·¥ä½œï¼Œè€Œæ˜¯å°†è°ƒç”¨å§”æ´¾ç»™ä¸€ä¸ªä¸šåŠ¡é€»è¾‘å¯¹è±¡ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class ConcreteCommand implements Command { // ç»´æŒä¸€ä¸ªå¯¹è¯·æ±‚è€…å¯¹è±¡çš„å¼•ç”¨ private final Receiver receiver; public ConcreteCommand(Receiver receiver) { this.receiver = receiver; } // è°ƒç”¨è¯·æ±‚æ¥æ”¶è€…çš„ä¸šåŠ¡å¤„ç†æ–¹æ³• public void execute() { this.receiver.action(); } } æ¥æ”¶è€…æ˜¯çœŸæ­£å‘½ä»¤æ‰§è¡Œçš„å¯¹è±¡ï¼Œæ˜¯å®¢æˆ·ç«¯ç›´æ¥æ“ä½œçš„å¯¹è±¡ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class Receiver { public void action() { // å…·ä½“æ“ä½œ } } æœ€åï¼Œéœ€è¦å®šä¹‰çš„æ˜¯è°ƒç”¨è€… Invoker ç±»ï¼Œå…¶ä½œç”¨æ˜¯è´Ÿè´£å¯¹è¯·æ±‚è¿›è¡Œåˆå§‹åŒ–ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class Invoker { private final List\u0026lt;Command\u0026gt; commandList; public Invoker() { this.commandList = new ArrayList\u0026lt;\u0026gt;(); } public Invoker(Command command) { this(); this.commandList.add(command); } // æ·»åŠ å‘½ä»¤ public void pushCommand(Command command) { this.commandList.add(command); } // æ‰§è¡Œå‘½ä»¤ public void executeAll() { for (Command command : commandList) { command.execute(); } commandList.clear(); } } å¯¹äºå®¢æˆ·ç«¯è€Œè¨€ï¼Œéœ€è¦çŸ¥é“è‡ªå·±éœ€è¦æ“ä½œçš„æ¥æ”¶è€…å¯¹è±¡æ˜¯ä»€ä¹ˆã€å¯ä»¥æ‰§è¡Œçš„å‘½ä»¤æœ‰å“ªäº›ã€é€šè¿‡è°ƒç”¨è€…å¦‚ä½•å»æ‰§è¡Œè¿™äº›å‘½ä»¤ã€‚\nå¦‚ä¸‹æ˜¯å®¢æˆ·ç«¯ä½¿ç”¨å‘½ä»¤æ¨¡å¼çš„ä»£ç ç¤ºä¾‹ï¼š\npublic class CommandDemo { public static void main(String[] args) { // æ“ä½œçš„æ¥æ”¶è€…å¯¹è±¡æ˜¯ä»€ä¹ˆ Receiver receiver = new Receiver(); // å¯ä»¥æ‰§è¡Œçš„å‘½ä»¤æœ‰å“ªäº› Command command = new ConcreteCommand(receiver); // é€šè¿‡è°ƒç”¨è€…å¦‚ä½•å»æ‰§è¡Œè¿™äº›å‘½ä»¤ Invoker invoker = new Invoker(command); invoker.executeAll(); } } æ€»ç»“ ä¼˜ç‚¹ å‘½ä»¤æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\né™ä½è¯·æ±‚è€…å’Œæ¥æ”¶è€…çš„è€¦åˆåº¦ æ–°çš„å‘½ä»¤å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åŠ å…¥åˆ°ç³»ç»Ÿä¸­ å¯ä»¥æ¯”è¾ƒå®¹æ˜“åœ°è®¾è®¡ä¸€ä¸ªå‘½ä»¤é˜Ÿåˆ—æˆ–è€…å®å‘½ä»¤ï¼ˆç»„åˆå‘½ä»¤ï¼‰ ä¸ºè¯·æ±‚çš„æ’¤é”€å’Œæ¢å¤æ“ä½œæä¾›äº†ä¸€ç§è®¾è®¡å’Œå®ç°æ–¹æ¡ˆ ç¼ºç‚¹ å‘½ä»¤æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿä¸­æœ‰è¿‡å¤šçš„å…·ä½“å‘½ä»¤ç±» é€‚ç”¨åœºæ™¯ å‘½ä»¤æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nç³»ç»Ÿéœ€è¦å°†è¯·æ±‚è°ƒç”¨è€…å’Œè¯·æ±‚æ¥æ”¶è€…è§£è€¦ï¼Œä½¿å¾—è°ƒç”¨è€…å’Œæ¥æ”¶è€…ä¸ç›´æ¥äº¤äº’ ç³»ç»Ÿéœ€è¦åœ¨ä¸åŒçš„æ—¶é—´æŒ‡å®šè¯·æ±‚ã€å°†è¯·æ±‚æ’é˜Ÿå’Œæ‰§è¡Œè¯·æ±‚ ç³»ç»Ÿéœ€è¦æ”¯æŒå‘½ä»¤çš„æ’¤é”€æ“ä½œå’Œæ¢å¤æ“ä½œ ç³»ç»Ÿéœ€è¦å°†ä¸€ç»„æ“ä½œç»„åˆåœ¨ä¸€èµ·å½¢æˆå®å‘½ä»¤ æºç  åœ¨ JDK ä¸­ï¼ŒRunnable æ¥å£å°±ç±»ä¼¼äºå‘½ä»¤æ¨¡å¼çš„å‘½ä»¤æ¥å£ã€‚\nåªè¦å®ç°äº† Runnable æ¥å£çš„ç±»éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªçº¿ç¨‹ç±»ï¼Œç›¸å½“äºå‘½ä»¤æ¨¡å¼ä¸­å…·ä½“å‘½ä»¤ç±»çš„è§’è‰²ã€‚è€Œå®ç°äº† Runnable æ¥å£çš„ Thread ç±»æ—¢å¯ä»¥ä½œä¸ºå…·ä½“å‘½ä»¤ç±»ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè°ƒç”¨è€…ã€‚\nå¦‚ä¸‹æ˜¯å®¢æˆ·ç«¯ä½¿ç”¨ Runnable å’Œ Thread çš„ä»£ç ç¤ºä¾‹ï¼š\npublic class ThreadDemo { public static void main(String[] args) { Runnable command = new Runnable() { @Override public void run() { System.out.println(\u0026quot;command çº¿ç¨‹æ‰§è¡Œ\u0026quot;); } }; Thread thread = new Thread(command); // command çº¿ç¨‹æ‰§è¡Œ thread.start(); } } ","permalink":"https://fatedeity.cn/posts/programming-pattern/command-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - å‘½ä»¤æ¨¡å¼"},{"content":"æœ€è¿‘æ€»æ˜¯æƒ³åšäº›å°ä¸œè¥¿ä»¥æ‰“å‘è‡ªå·±çš„æŠ˜è…¾ä¹‹å¿ƒï¼Œæ€»æ˜¯åœ¨æƒ³æ€ä¹ˆå°†è‡ªå·±çš„ä»£ç çŸ¥è¯†å¼•å…¥åˆ°ç”Ÿæ´»å½“ä¸­ã€‚é€šè¿‡ Github Action å®ç°å®šæ—¶æ¨é€å¤©æ°”é¢„æŠ¥å°±æ˜¯ä¸€ä¸ªç®€å•çš„å°è¯•ï¼Œå¸Œæœ›æ˜¯ä¸€ä¸ªå¥½çš„å¼€å¤´ã€‚\nå¶ç„¶é—´ï¼Œçœ‹åˆ° GitHub Actions æ•™ç¨‹ï¼šå®šæ—¶å‘é€å¤©æ°”é‚®ä»¶ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— è¿™ç¯‡æ–‡ç« ï¼Œæ²¡é”™ï¼Œè¿™ä¸ªæ­£å¥½èƒ½æ‰“å‘è‡ªå·±çš„æŠ˜è…¾ä¹‹å¿ƒï¼Œä¹Ÿèƒ½é€šè¿‡ä»£ç ç»™ç”Ÿæ´»å¼•å…¥ä¸€äº›å˜åŒ–ã€‚\nè¿˜æ˜¯åœ¨è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹å®ç°è¿‡ç¨‹å§ã€‚\nç¬¬ä¸€æ­¥ è·å–å¤©æ°”é¢„æŠ¥å‡ºç°é—®é¢˜ æŒ‰ç…§é˜®ä¸€å³°çš„æ•™ç¨‹èµ°ï¼Œä¸€å¼€å§‹ä½¿ç”¨äº† wttr çš„ç»“æœä½œä¸ºæ•°æ®æ¥æºï¼Œä¹Ÿåœ¨ æ–‡æ¡£ ä¸Šç ”ç©¶äº†å¾ˆä¹…ï¼Œæœ€ç»ˆçš„ç»“æœæ€»æ˜¯ä¸å°½å¦‚äººæ„ã€‚\næœ€ç»ˆå±•ç°åˆ°é‚®ä»¶ä¸Šçš„ç»“æœå¦‚ä¸‹ï¼š\nä»ä¸Šé¢å°±å¯ä»¥çœ‹å‡ºä¸€äº›é—®é¢˜ï¼š\nå±•ç¤ºåˆ°é‚®ä»¶ä¸­çš„æ˜¯ä¸€ä¸ª HTML é¡µé¢ï¼Œç™½è‰²çš„èƒŒæ™¯ä½¿å¾—ç»“æœå±•ç¤ºä¸ç†æƒ³ é»˜è®¤è¿”å›çš„ç»“æœæ¯”è¾ƒå¤šï¼Œæ ¹æ®é…ç½®åšè°ƒæ•´ä¹‹åè¿”å›çš„ç»“æœåˆæ¯”è¾ƒå°‘ï¼Œç»“æœä¸å°½å¦‚äººæ„ ä»é¡µé¢ä¸Šçœ‹è¿”å›çš„éƒ½æ˜¯ä¸å¤ªå¥½ç†è§£çš„å•ä½ï¼Œä¸èƒ½è®©äººä¸€çœ¼å°±èƒ½ç†è§£ \u0026hellip;\u0026hellip; å…¶å®è¿˜æœ‰å¾ˆå¤šé—®é¢˜ï¼Œæœ€ä¸»è¦çš„åŸå› è¿˜æ˜¯å…¶ API çš„ç»“æœæ›´ç¬¦åˆå›½å¤–çš„ç†è§£ï¼Œè€Œä¸é€‚åˆæˆ‘ç”¨ã€‚\nç¬¬äºŒæ­¥ å¯»æ‰¾æ–°çš„æ•°æ®æ¥æº é€šè¿‡åœ¨ç½‘ä¸Šå¯»æ‰¾ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†ä¸€ä¸ª å¢¨è¿¹å¤©æ°” çš„ API ä½œä¸ºæ•°æ®æ¥æºï¼Œè™½ç„¶æ²¡æœ‰æ‰¾åˆ°å‡ºå¤„ï¼Œä½†æ˜¯æš‚æ—¶è¿˜å¯ç”¨ã€‚\nå…¶è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œå¯æ ¹æ®è‡ªå·±çš„éœ€æ±‚å»ç»„è£…ã€‚ä¸‹é¢æ˜¯è¿”å›çš„ç¤ºä¾‹ï¼š\n{ \u0026quot;code\u0026quot;: 0, \u0026quot;msg\u0026quot;: \u0026quot;æ“ä½œæˆåŠŸ\u0026quot;, \u0026quot;data\u0026quot;: { \u0026quot;total\u0026quot;: 7, \u0026quot;sourceName\u0026quot;: \u0026quot;å¢¨è¿¹å¤©æ°”\u0026quot;, \u0026quot;list\u0026quot;: [ { \u0026quot;city\u0026quot;: \u0026quot;å¹¿å·\u0026quot;, \u0026quot;lastUpdateTime\u0026quot;: \u0026quot;2022-10-13 08:55:08\u0026quot;, \u0026quot;date\u0026quot;: \u0026quot;2022-10-13\u0026quot;, \u0026quot;weather\u0026quot;: \u0026quot;æ™´\u0026quot;, \u0026quot;temp\u0026quot;: 20.0, \u0026quot;humidity\u0026quot;: \u0026quot;35%\u0026quot;, \u0026quot;wind\u0026quot;: \u0026quot;ä¸œåŒ—é£3çº§\u0026quot;, \u0026quot;pm25\u0026quot;: 29.0, \u0026quot;pm10\u0026quot;: 43.0, \u0026quot;low\u0026quot;: 20.0, \u0026quot;high\u0026quot;: 30.0, \u0026quot;airData\u0026quot;: \u0026quot;43\u0026quot;, \u0026quot;airQuality\u0026quot;: \u0026quot;ä¼˜\u0026quot;, \u0026quot;dateLong\u0026quot;: 1665590400000, \u0026quot;weatherType\u0026quot;: 0, \u0026quot;windLevel\u0026quot;: 3, \u0026quot;province\u0026quot;: \u0026quot;å¹¿ä¸œ\u0026quot; }, { \u0026quot;city\u0026quot;: \u0026quot;å¹¿å·\u0026quot;, \u0026quot;lastUpdateTime\u0026quot;: \u0026quot;2022-10-13 08:00:00\u0026quot;, \u0026quot;date\u0026quot;: \u0026quot;2022-10-14\u0026quot;, \u0026quot;weather\u0026quot;: \u0026quot;æ™´\u0026quot;, \u0026quot;humidity\u0026quot;: \u0026quot;æœªçŸ¥\u0026quot;, \u0026quot;wind\u0026quot;: \u0026quot;å¾®é£\u0026quot;, \u0026quot;pm25\u0026quot;: 0.0, \u0026quot;low\u0026quot;: 21.0, \u0026quot;high\u0026quot;: 30.0, \u0026quot;airData\u0026quot;: \u0026quot;80\u0026quot;, \u0026quot;airQuality\u0026quot;: \u0026quot;è‰¯\u0026quot;, \u0026quot;dateLong\u0026quot;: 1665676800000, \u0026quot;weatherType\u0026quot;: 0, \u0026quot;windLevel\u0026quot;: 1, \u0026quot;province\u0026quot;: \u0026quot;å¹¿ä¸œ\u0026quot; }, { \u0026quot;city\u0026quot;: \u0026quot;å¹¿å·\u0026quot;, \u0026quot;lastUpdateTime\u0026quot;: \u0026quot;2022-10-13 08:00:00\u0026quot;, \u0026quot;date\u0026quot;: \u0026quot;2022-10-15\u0026quot;, \u0026quot;weather\u0026quot;: \u0026quot;æ™´\u0026quot;, \u0026quot;humidity\u0026quot;: \u0026quot;æœªçŸ¥\u0026quot;, \u0026quot;wind\u0026quot;: \u0026quot;åŒ—é£\u0026quot;, \u0026quot;pm25\u0026quot;: 0.0, \u0026quot;low\u0026quot;: 21.0, \u0026quot;high\u0026quot;: 31.0, \u0026quot;airData\u0026quot;: \u0026quot;80\u0026quot;, \u0026quot;airQuality\u0026quot;: \u0026quot;è‰¯\u0026quot;, \u0026quot;dateLong\u0026quot;: 1665763200000, \u0026quot;weatherType\u0026quot;: 0, \u0026quot;windLevel\u0026quot;: 3, \u0026quot;province\u0026quot;: \u0026quot;å¹¿ä¸œ\u0026quot; }, { \u0026quot;city\u0026quot;: \u0026quot;å¹¿å·\u0026quot;, \u0026quot;lastUpdateTime\u0026quot;: \u0026quot;2022-10-13 08:00:00\u0026quot;, \u0026quot;date\u0026quot;: \u0026quot;2022-10-16\u0026quot;, \u0026quot;weather\u0026quot;: \u0026quot;å¤šäº‘\u0026quot;, \u0026quot;humidity\u0026quot;: \u0026quot;æœªçŸ¥\u0026quot;, \u0026quot;wind\u0026quot;: \u0026quot;åŒ—é£\u0026quot;, \u0026quot;pm25\u0026quot;: 0.0, \u0026quot;low\u0026quot;: 22.0, \u0026quot;high\u0026quot;: 32.0, \u0026quot;airData\u0026quot;: \u0026quot;70\u0026quot;, \u0026quot;airQuality\u0026quot;: \u0026quot;è‰¯\u0026quot;, \u0026quot;dateLong\u0026quot;: 1665849600000, \u0026quot;weatherType\u0026quot;: 1, \u0026quot;windLevel\u0026quot;: 4, \u0026quot;province\u0026quot;: \u0026quot;å¹¿ä¸œ\u0026quot; } ], \u0026quot;logoUrl\u0026quot;: \u0026quot;http://iflycar.hfdn.openstorage.cn/xfypicture/dev/logo/moji.png\u0026quot; } } æ ¹æ®ä¸Šè¿°çš„è¿”å›ç»“æœï¼Œç®€å•ç»„è£…äº†ä¸€ä¸ªè‡ªå·±æƒ³è¦çš„ç»“æœï¼š\nä½ç½®ï¼šå¹¿ä¸œ-å¹¿å· ä»Šå¤©ï¼š2022-10-11 å½“å‰ï¼š15.0Â°C æœ€ä½ï¼š15.0Â°C æœ€é«˜ï¼š26.0Â°C ç©ºæ°”è´¨é‡ï¼šä¼˜ æ¹¿åº¦ï¼š29% é£å‘ï¼šä¸œåŒ—é£4çº§ PM2.5ï¼š17.0 ä½ç½®ï¼šå¹¿è¥¿-æ¡‚æ— ä»Šå¤©ï¼š2022-10-11 å½“å‰ï¼š11.0Â°C æœ€ä½ï¼š11.0Â°C æœ€é«˜ï¼š25.0Â°C ç©ºæ°”è´¨é‡ï¼šä¼˜ æ¹¿åº¦ï¼š30% é£å‘ï¼šåŒ—é£5çº§ PM2.5ï¼š23.0 å®é™…ä¸Šæ˜¯éå¸¸ç®€é™‹çš„ï¼Œä½†å´ä¹Ÿæš‚æ—¶å¤Ÿç”¨äº†ï¼Œåç»­æœ‰ç›¸å…³çš„éœ€æ±‚å†åŠ å†…å®¹ä¸Šå»ã€‚\nç¬¬ä¸‰æ­¥ é€šè¿‡è„šæœ¬ç®€åŒ– è§£å†³äº†æ•°æ®æ¥æºå’Œå±•ç¤ºæ–‡æœ¬ä¹‹åï¼Œå…¶å®å·²ç»æ˜¯è§£å†³äº†éœ€æ±‚ç«¯çš„é—®é¢˜ï¼Œç„¶åæ¥åˆ°ç¨‹åºå‘˜çš„å®ç°ç«¯ã€‚\nç°åœ¨ï¼Œæˆ‘ä»¬å…ˆå°†éœ€æ±‚åšæ‹†è§£ï¼Œè½å®åˆ°ç¨‹åºä¸Šåº”è¯¥æœ‰ä»¥ä¸‹å·¥ä½œè¦åšï¼š\né€šè¿‡ API è·å–åˆ°æ•°æ®æ¥æºï¼Œç»„è£…æˆæ¨é€çš„æ–‡æœ¬æ ¼å¼ å®šæ—¶è§¦å‘ï¼Œå¯ä»¥é€šè¿‡ Github Action ç™½å«– å‘é€é‚®ä»¶ï¼Œå¯ä»¥é€šè¿‡ QQ é‚®ç®±ç™½å«– ä¸Šè¿°å·¥ä½œä¸­çš„ç¬¬ä¸€æ­¥ï¼Œæˆ‘æœ€ç»ˆæ˜¯é€‰æ‹©ä½¿ç”¨ Python å¯¹å…¶è„šæœ¬åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼š\nimport sys import requests def generate_weather_text(weather: dict) -\u0026gt; str: ret = [ f'ä½ç½®ï¼š{weather.get(\u0026quot;province\u0026quot;)}-{weather.get(\u0026quot;city\u0026quot;)} ä»Šå¤©ï¼š{weather.get(\u0026quot;date\u0026quot;)}', f'å½“å‰ï¼š{weather.get(\u0026quot;temp\u0026quot;)}Â°C æœ€ä½ï¼š{weather.get(\u0026quot;low\u0026quot;)}Â°C æœ€é«˜ï¼š{weather.get(\u0026quot;high\u0026quot;)}Â°C', f'ç©ºæ°”è´¨é‡ï¼š{weather.get(\u0026quot;airQuality\u0026quot;)} æ¹¿åº¦ï¼š{weather.get(\u0026quot;humidity\u0026quot;)}', f'é£å‘ï¼š{weather.get(\u0026quot;wind\u0026quot;)} PM2.5ï¼š{weather.get(\u0026quot;pm25\u0026quot;)}', ] return '\\n'.join(ret) def get_weather(city: str) -\u0026gt; dict: url = 'http://autodev.openspeech.cn/csp/api/v2.1/weather' params = { 'openId': 'aiuicus', 'clientType': 'android', 'sign': 'android', 'city': city, } res = requests.get(url, params=params).json() return res['data']['list'][0] def get_weather_text(city: str) -\u0026gt; str: weather = get_weather(city) return generate_weather_text(weather) if __name__ == '__main__': if len(sys.argv) \u0026gt;= 2: ret = [get_weather_text(_) for _ in sys.argv[1:]] print('\\n\\n'.join(ret)) else: print('è¯·æ±‚å‚æ•°é”™è¯¯') ç¬¬å››æ­¥ é…ç½® Github Action Github Action çš„é…ç½®æ–‡ä»¶è¶‹åŒäºé˜®ä¸€å³°çš„æ•™ç¨‹ï¼Œä¸‹é¢æ˜¯è¿™ä¸ªé…ç½®æ–‡ä»¶çš„ä¸€äº›è§£é‡Šã€‚\nå®šæ—¶è§¦å‘ name: \u0026quot;å¤©æ°”é¢„æŠ¥\u0026quot; on: push: schedule: # éœ€è¦å‡ 8 ä¸ªå°æ—¶ - cron: \u0026quot;0 23 * * *\u0026quot; è¿™é‡Œæ¯”è¾ƒå¥½ç†è§£ï¼Œname æ˜¯åç§°ï¼Œon æ˜¯è§¦å‘çš„æ—¶æœºï¼Œpush æ˜¯æˆ‘ä»¬æäº¤ä»£ç åˆ° Github æ—¶è§¦å‘ï¼Œschedule æ˜¯å®šæ—¶è§¦å‘ï¼Œéœ€è¦æ³¨æ„çš„æ—¶å€™ï¼Œå®šæ—¶è§¦å‘çš„æ—¶é—´éœ€è¦å‡æ‰ 8 ä¸ªå°æ—¶ï¼Œå…¶éµå¾ªå›½é™…æ ‡å‡†æ—¶é—´è€Œä¸æ˜¯åŒ—äº¬æ—¶é—´ã€‚\nè¿è¡Œæµç¨‹ runs-on: ubuntu-latest steps: - name: \u0026quot;åˆ‡æ¢ä»£ç \u0026quot; uses: actions/checkout@v3 è¿›å…¥åˆ° jobs è¿è¡Œæµç¨‹ä¸­ï¼Œruns-on æŒ‡å®šè¿è¡Œç¯å¢ƒæ˜¯æœ€æ–°çš„ Ubuntu å³å¯ï¼Œactions/checkout@v3 ç”¨ä½œä»ä»£ç ä»“åº“è·å–ä»£ç ã€‚\nè·å–æ—¶é—´ - name: \u0026quot;è·å–æ—¶é—´\u0026quot; run: echo \u0026quot;WEATHER_REPORT_DATE=$(TZ=':Asia/Shanghai' date '+%Y-%m-%d %T')\u0026quot; \u0026gt;\u0026gt; $GITHUB_ENV ç›´æ¥é€šè¿‡ Linux å‘½ä»¤è·å–å½“å‰æ—¶é—´ï¼Œç„¶åè½¬æ¢æˆåŒ—äº¬æ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´ä¸»è¦æ˜¯ç”¨äºåç»­å†™å…¥åˆ°é‚®ä»¶çš„æ ‡é¢˜å½“ä¸­ã€‚\nåœ¨è¿™é‡Œï¼Œé€šè¿‡ echo \u0026quot;{environment_variable_name}={value}\u0026quot; \u0026gt;\u0026gt; $GITHUB_ENV çš„æ–¹å¼å†™å…¥ç¯å¢ƒå˜é‡ï¼Œåœ¨åç»­çš„æ­¥éª¤ä¸­éƒ½å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªç¯å¢ƒå˜é‡ã€‚\næ‰§è¡Œè„šæœ¬ - uses: actions/setup-python@v4 with: python-version: \u0026quot;3.10\u0026quot; - run: pip install -r requirements.txt - name: \u0026quot;è·å–å¤©æ°”ç»“æœ\u0026quot; run: 'echo \u0026quot;$(python open_api/weather.py å¹¿å· æ¡‚æ—)\u0026quot; \u0026gt; output.txt' è¿™é‡Œæœ‰ä¸¤ä¸ªæ­¥éª¤ï¼Œä¸€ä¸ªæ˜¯æŒ‡å®š Python çš„è¿è¡Œç¯å¢ƒå¹¶ä¸”å®‰è£…å¥½ç›¸å…³çš„ä¾èµ–ï¼Œç¬¬äºŒä¸ªæ˜¯æ‰§è¡Œ Python çš„è„šæœ¬è·å–ç»“æœã€‚\nåœ¨è¿™é‡Œï¼Œä¸ºäº†æ–¹ä¾¿å°†è„šæœ¬çš„æ‰§è¡Œç»“æœç»™åˆ°åç»­çš„æ­¥éª¤ï¼Œé€‰æ‹©å°†æ‰§è¡Œç»“æœå†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶å½“ä¸­ã€‚å½“ç„¶ï¼Œé€‰æ‹©æ€æ ·çš„æ–¹å¼ä¸»è¦çœ‹è‡ªå·±ã€‚\nå‘é€é‚®ä»¶ - name: \u0026quot;å‘é€é‚®ä»¶\u0026quot; uses: dawidd6/action-send-mail@v3 with: server_address: smtp.qq.com server_port: 465 username: ${{ secrets.SENDER_USER }} password: ${{ secrets.SENDER_PASSWORD }} subject: å¤©æ°”é¢„æŠ¥ - ${{env.WEATHER_REPORT_DATE}} from: GitHub Actions to: fatedeity@qq.com body: file://output.txt æŒ‰ç…§é˜®ä¸€å³°çš„è„šæœ¬ï¼Œä½¿ç”¨ Send email Â· Actions å‘é€é‚®ä»¶ï¼Œå’Œå…¶ä¸åŒçš„å°±æ˜¯ç›¸å…³çš„é…ç½®ã€‚\nå½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å°†å‘é€é‚®ä»¶ç›´æ¥å†™å…¥åˆ° Python è„šæœ¬å½“ä¸­ï¼Œå®ƒä»¬å„æœ‰è‡ªå·±çš„ä¼˜åŠ¿ã€‚\nä½¿ç”¨ GIthub Action å‘é€é‚®ä»¶æ›´æ˜“æ‡‚ï¼Œåªéœ€è¦å¡«å†™é…ç½®å³å¯ï¼Œä¹Ÿå¯ä»¥å°†è„šæœ¬å’Œå‘é€é‚®ä»¶è§£è€¦ã€‚\nä½¿ç”¨ Python å‘é€é‚®ä»¶å¯ä»¥çœä¸‹ Github Action çš„æ­¥éª¤ï¼Œç›´æ¥é€šè¿‡è„šæœ¬ä¸€æ­¥åˆ°ä½ï¼Œè€¦åˆå°±æ¯”è¾ƒé«˜ã€‚\næ€»ç»“ é€šè¿‡è¿™ä¸€æ¬¡çš„å°è¯•ï¼Œä½¿ç”¨ Github Action å®ç°äº†è‡ªåŠ¨åŒ–åŠå®šæ—¶ï¼Œä¹Ÿæ˜¯ä¸ºä»¥åå®ç°è‡ªå·±çš„è‡ªåŠ¨åŒ–åšé“ºå«ã€‚æœ¬ç¯‡æ–‡ç« çš„æºç å¯ä»¥é€šè¿‡ GitHub - fatedeity/weather-action è®¿é—®ã€‚\nç”Ÿå‘½åœ¨äºæŠ˜è…¾ï¼Œçœ‹ä¼¼æ— ç”¨çš„ä¸€æ¬¡å°è¯•ï¼Œå¸Œæœ›èƒ½ç»™è‡ªå·±å¸¦æ¥ç¾å¥½çš„æœªæ¥ã€‚\n","permalink":"https://fatedeity.cn/posts/z-turn/github-action-weather-push.html","title":"é€šè¿‡ Github Action å®ç°å®šæ—¶æ¨é€å¤©æ°”é¢„æŠ¥"},{"content":"ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§éå¸¸å®¹æ˜“ç†è§£çš„è®¾è®¡æ¨¡å¼ï¼Œå…¶æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯æ˜¯ï¼Œåˆ©ç”¨å®ƒæ¥é¿å…å†—é•¿çš„ if-else æˆ– switch åˆ†æ”¯åˆ¤æ–­ã€‚\nç®€ä»‹ ç­–ç•¥è®¾è®¡æ¨¡å¼ï¼ˆStrategy Design Patternï¼‰å®é™…ä¸Šèµ·åˆ°ä¸€ä¸ªè§£è€¦çš„ä½œç”¨ï¼Œè§£è€¦äº†ç­–ç•¥çš„å®šä¹‰ã€åˆ›å»ºã€ä½¿ç”¨ä¸‰éƒ¨åˆ†ã€‚\nå…¶æ¦‚å¿µæ˜¯ï¼Œå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ç±»ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶è®©å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ã€‚\nä»ä»£ç çš„å±‚é¢ä¸Šç†è§£å°±æ˜¯ï¼Œå°†é¢å‘è¿‡ç¨‹ç¼–ç¨‹ä¸­çš„åˆ†æ”¯ï¼ˆå¦‚ if-else æˆ– switch åˆ†æ”¯ï¼‰ä»£ç ï¼Œè½¬æ¢æˆé¢å‘å¯¹è±¡çš„ç®—æ³•ç±»ï¼Œé€šè¿‡æ„å»ºè¿™äº›ç±»çš„å…³ç³»ä»¥å®ç°ä¸åŒåˆ†æ”¯çš„é€‰æ‹©ï¼Œå®ç°è¿è¡Œæ—¶é€‰æ‹©ç­–ç•¥ã€‚\nå…·ä½“å®ç° åœ¨è¿™é‡Œï¼Œä½¿ç”¨ä¸€ä¸ªåŠ ã€å‡ã€ä¹˜çš„æ¡ˆä¾‹æ¥å±•ç¤ºç­–ç•¥æ¨¡å¼çš„åº”ç”¨ã€‚\né¦–å…ˆï¼Œå¯¹åŠ ã€å‡ã€ä¹˜è¿ç®—æŠ½è±¡å‡ºä¸€ä¸ªå…¬å…±çš„æ–¹æ³•ï¼Œå®šä¹‰ä¸€ä¸ª Strategy ç­–ç•¥æ¥å£ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic interface Strategy { // åŠ ã€å‡ã€ä¹˜ã€é™¤éƒ½æ˜¯å¯¹ä¸¤ä¸ªæ•°è¿›è¡Œå¤„ç† int doOperation(int num1, int num2); } å¯¹äºåŠ æ³•ï¼Œå®ç° Strategy ç­–ç•¥æ¥å£ï¼Œå®šä¹‰ä¸€ä¸ª OperationAdd ç­–ç•¥ç±»ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class OperationAdd implements Strategy { @Override public int doOperation(int num1, int num2) { return num1 + num2; } } å¯¹äºå‡æ³•ï¼Œå®ç° Strategy ç­–ç•¥æ¥å£ï¼Œå®šä¹‰ä¸€ä¸ª OperationSubtract ç­–ç•¥ç±»ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class OperationSubtract implements Strategy { @Override public int doOperation(int num1, int num2) { return num1 - num2; } } å¯¹äºä¹˜æ³•ï¼Œå®ç° Strategy ç­–ç•¥æ¥å£ï¼Œå®šä¹‰ä¸€ä¸ª OperationMultiply ç­–ç•¥ç±»ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class OperationMultiply implements Strategy { @Override public int doOperation(int num1, int num2) { return num1 * num2; } } é€šå¸¸ï¼Œä¼šå®šä¹‰ä¸€ä¸ª Context ç±»ç”¨äºæ±‡æ€»ç­–ç•¥ç±»ï¼Œä»¥æ–¹ä¾¿å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class Context { private final Strategy strategy; public Context(Strategy strategy) { this.strategy = strategy; } public int executeStrategy(int num1, int num2) { return strategy.doOperation(num1, num2); } } å¯¹äºå®¢æˆ·ç«¯è€Œè¨€ï¼Œéœ€è¦ç†è§£ Context ç±»å¦‚ä½•ä½¿ç”¨ï¼Œä»¥åŠçŸ¥é“æ‰€æœ‰çš„ç­–ç•¥ç±»ï¼Œé€šè¿‡æ³¨å…¥ä¸åŒçš„ Strategy å¯¹è±¡ä»¥è¾¾åˆ°é€‰æ‹©ä¸åŒç­–ç•¥çš„æ•ˆæœã€‚\nå¦‚ä¸‹æ˜¯å®¢æˆ·ç«¯ä½¿ç”¨ç­–ç•¥æ¨¡å¼çš„ä»£ç ç¤ºä¾‹ï¼š\npublic class StrategyDemo { public static void main(String[] args) { Context context = new Context(new OperationAdd()); // 10 + 5 = 15 System.out.println(\u0026quot;10 + 5 = \u0026quot; + context.executeStrategy(10, 5)); context = new Context(new OperationSubtract()); // 10 - 5 = 5 System.out.println(\u0026quot;10 - 5 = \u0026quot; + context.executeStrategy(10, 5)); context = new Context(new OperationMultiply()); // 10 * 5 = 50 System.out.println(\u0026quot;10 * 5 = \u0026quot; + context.executeStrategy(10, 5)); } } æ€»ç»“ ä¼˜ç‚¹ ç­–ç•¥æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶è¯­å¥ï¼Œå¦‚ if-else æˆ– switch è¯­å¥ ç­–ç•¥æ¨¡å¼æä¾›äº†ç®¡ç†ç›¸å…³ç®—æ³•æ—çš„åŠæ³•ï¼Œå¦‚æ°å½“åœ°ä½¿ç”¨ç»§æ‰¿æŠŠç®—æ³•æ—çš„å…¬å…±ä»£ç è½¬ç§»åˆ°çˆ¶ç±»ä¸­ ç­–ç•¥æ¨¡å¼æä¾›äº†ç›¸åŒè¡Œä¸ºçš„ä¸åŒå®ç°ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚ä½¿ç”¨ä¸åŒçš„ç­–ç•¥ å¯ä»¥åœ¨ä¸æ›´æ”¹åŸä»£ç çš„æ¨¡å¼ä¸‹ï¼Œçµæ´»å¢åŠ æ–°çš„ç®—æ³•ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ ç­–ç•¥æ¨¡å¼æŠŠç®—æ³•çš„ä½¿ç”¨æ”¾åˆ°ç¯å¢ƒç±»ä¸­ï¼ŒæŠŠå®ç°æ”¾åˆ°å…·ä½“ç­–ç•¥ç±»ä¸­ï¼ŒæŠŠå®šä¹‰æ”¾åˆ°å®¢æˆ·ç«¯ä¸­ï¼Œå®ç°äº†ä¸‰è€…çš„è§£è€¦ ç¼ºç‚¹ ç­–ç•¥æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nå®¢æˆ·ç«¯å¿…é¡»çŸ¥é“æ‰€æœ‰çš„ç­–ç•¥ç±»ï¼Œå¹¶è‡ªè¡Œå†³å®šä½¿ç”¨å“ªä¸€ä¸ªç­–ç•¥ç±» ç­–ç•¥æ¨¡å¼é€ æˆå¾ˆå¤šç­–ç•¥ç±»ï¼Œå¢åŠ äº†ç»´æŠ¤éš¾åº¦ é€‚ç”¨åœºæ™¯ ç­–ç•¥æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§æ—¶ï¼Œå¯å°†æ¯ä¸ªç®—æ³•å°è£…åˆ°ç­–ç•¥ç±»ä¸­ å¯¹äºå¤šé‡æ¡ä»¶è¯­å¥ï¼Œä½¿ç”¨ç­–ç•¥æ¨¡å¼å°†è¿™äº›è¡Œä¸ºè½¬ç§»åˆ°ç›¸åº”çš„å…·ä½“ç­–ç•¥ç±»ä¸­ï¼Œä»¥æ›¿ä»£è¿™äº›æ¡ä»¶è¯­å¥ ç³»ç»Ÿè¦æ±‚ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ç«¯ä¸åº”è¯¥çŸ¥é“å…¶æ“ä½œçš„æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥å°è£…ç®—æ³•åŠå…¶æ•°æ®ç»“æ„ æºç  åœ¨ JDK ä¸­ï¼ŒComparator æ¥å£å°±æ˜¯ä¸€ä¸ªç­–ç•¥æ¨¡å¼çš„åº”ç”¨ã€‚\nå®é™…ä½¿ç”¨æ—¶ï¼ŒComparator å°±æ˜¯ç­–ç•¥æ¥å£ï¼Œä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ¥å®ç°å…·ä½“ç­–ç•¥ç±»ã€‚å¦‚ä¸‹æ˜¯ä½¿ç”¨çš„ç¤ºä¾‹ä»£ç ï¼š\nimport java.util.Arrays; import java.util.Comparator; public class ComparatorDemo { public static void main(String[] args) { String[] names = {\u0026quot;å¼ ä¸‰\u0026quot;, \u0026quot;æå››\u0026quot;, \u0026quot;å°æ˜\u0026quot;}; Comparator\u0026lt;String\u0026gt; comparator = new Comparator\u0026lt;\u0026gt;() { @Override public int compare(String o1, String o2) { return o1.compareTo(o2); } }; Arrays.sort(names, comparator); // [å°æ˜, å¼ ä¸‰, æå››] System.out.println(Arrays.toString(names)); } } ","permalink":"https://fatedeity.cn/posts/programming-pattern/strategy-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - ç­–ç•¥æ¨¡å¼"},{"content":"è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œç”¨äºå»ºç«‹å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚\nç®€ä»‹ è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ï¼ˆObserver Design Patternï¼‰çš„åˆ«åæœ‰å¾ˆå¤šï¼Œå¦‚å‘å¸ƒ - è®¢é˜…ï¼ˆPublish/Subscribeï¼‰æ¨¡å¼ã€æ¨¡å‹ - è§†å›¾ï¼ˆModel/Viewï¼‰æ¨¡å¼ã€æº - ç›‘å¬ï¼ˆSource/Listenerï¼‰æ¨¡å¼æˆ–ä»å±è€…ï¼ˆDependentsï¼‰æ¨¡å¼ã€‚\næ— è®ºæ˜¯ä½•ç§åç§°ï¼Œå…¶æ„å›¾éƒ½æ˜¯åœ¨å¯¹è±¡ä¹‹é—´å®šä¹‰ä¸€ä¸ªä¸€å¯¹å¤šçš„ä¾èµ–ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜çš„æ—¶å€™ï¼Œæ‰€æœ‰ä¾èµ–çš„å¯¹è±¡éƒ½ä¼šè‡ªåŠ¨æ”¶åˆ°é€šçŸ¥ã€‚\nå…¶ä¸»è¦è§£å†³äº†ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜ä¹‹åç»™å…¶ä»–å¯¹è±¡é€šçŸ¥çš„é—®é¢˜ï¼Œè€Œä¸”è€ƒè™‘åˆ°æ˜“ç”¨æ€§å’Œä½è€¦åˆï¼Œä¿è¯é«˜åº¦çš„åä½œæ€§ã€‚\nå…¸å‹å®ç° åœ¨å‘å¸ƒ - è®¢é˜…æ¨¡å¼å½“ä¸­ï¼Œè§‚å¯Ÿè€…å°±æ˜¯è®¢é˜…è€…ï¼Œä¸€èˆ¬æ˜¯éœ€è¦å®šä¹‰ä¸€ä¸ªæŠ½è±¡çš„è§‚å¯Ÿè€…æ¥å£ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic interface Observer { void update(); } å…·ä½“çš„è§‚å¯Ÿè€…ç±»ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ç®€å•å®ç°æ¥å£å³å¯ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class ConcreteObserver implements Observer { // å®ç°å“åº”æ–¹æ³• public void update() { // å…·ä½“å“åº”ä»£ç  } } å®šä¹‰å®Œè®¢é˜…è€…ï¼Œå…¶æ¬¡å°±æ˜¯å‘å¸ƒè€…ï¼Œé€šå¸¸æ˜¯å°†ä¹‹å®šä¹‰ä¸ºä¸€ä¸ªæŠ½è±¡çš„ç›®æ ‡ç±»ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic abstract class Subject { // å®šä¹‰ä¸€ä¸ªè§‚å¯Ÿè€…é›†åˆå­˜å‚¨æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ protected List\u0026lt;Observer\u0026gt; observers = new ArrayList\u0026lt;\u0026gt;(); // æ³¨å†Œæ–¹æ³•ï¼Œç”¨äºå‘è§‚å¯Ÿè€…é›†åˆå¢åŠ ä¸€ä¸ªè§‚å¯Ÿè€… public void attach(Observer observer) { observers.add(observer); } // æ³¨é”€æ–¹æ³•ï¼Œç”¨äºå‘è§‚å¯Ÿè€…é›†åˆåˆ é™¤ä¸€ä¸ªè§‚å¯Ÿè€… public void detach(Observer observer) { observers.remove(observer); } // å£°æ˜æŠ½è±¡çš„é€šçŸ¥æ–¹æ³•ï¼Œéœ€è¦ç”±å­ç±»å…·ä½“å®ç° abstract void notifyObservers(); } æ ¹æ®ä¸åŒçš„åœºæ™¯å®šä¹‰ä¸ä¸€æ ·çš„å…·ä½“ç›®æ ‡ç±»ï¼Œå¦‚ä¸‹æ˜¯ä¸€ç§ä»£ç ç¤ºä¾‹ï¼š\npublic class ConcreteSubject extends Subject { // å®ç°å…·ä½“çš„é€šçŸ¥æ–¹æ³• @Override public void notifyObservers() { // éå†è§‚å¯Ÿè€…é›†åˆï¼Œè°ƒç”¨æ¯ä¸€ä¸ªè§‚å¯Ÿè€…çš„å“åº”æ–¹æ³• for (Observer ob : observers) { ob.update(); } } } æ€»ç»“ ä¼˜ç‚¹ è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nè§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥å®ç°è¡¨ç¤ºå±‚å’Œæ•°æ®é€»è¾‘å±‚çš„åˆ†ç¦» è§‚å¯Ÿè€…æ¨¡å¼åœ¨è§‚å¯Ÿç›®æ ‡å’Œè§‚å¯Ÿè€…ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªæŠ½è±¡çš„è€¦åˆ è§‚å¯Ÿè€…æ¨¡å¼æ”¯æŒå¹¿æ’­é€šä¿¡ï¼Œç®€åŒ–äº†ä¸€å¯¹å¤šç³»ç»Ÿè®¾è®¡çš„éš¾åº¦ å¢åŠ æ–°çš„å…·ä½“è§‚å¯Ÿè€…æ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ ç¼ºç‚¹ è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nå¦‚æœç›®æ ‡å¯¹è±¡çš„è§‚å¯Ÿè€…æœ‰å¾ˆå¤šï¼Œå°†æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½é€šçŸ¥åˆ°ä¼šéå¸¸è€—æ—¶ å¦‚æœç›®æ ‡å¯¹è±¡å’Œè§‚å¯Ÿè€…å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œè§‚å¯Ÿç›®æ ‡ä¼šè§¦å‘å®ƒä»¬ä¹‹é—´è¿›è¡Œå¾ªç¯è°ƒç”¨ï¼Œæœ€ç»ˆå¯¼è‡´ç³»ç»Ÿå´©æºƒ é€‚ç”¨åœºæ™¯ è§‚å¯Ÿè€…æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nå°†å…·æœ‰ä¾èµ–å…³ç³»çš„ä¸¤ç§æŠ½è±¡æ¨¡å‹ç‹¬ç«‹å‡ºæ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨ ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜å°†å¯¼è‡´ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–å¯¹è±¡ä¹Ÿå‘ç”Ÿæ”¹å˜ï¼Œä½†å¹¶ä¸çŸ¥é“å…·ä½“æœ‰å¤šå°‘å¯¹è±¡å°†å‘ç”Ÿæ”¹å˜ï¼Œä¹Ÿä¸çŸ¥é“è¿™äº›å¯¹è±¡æ˜¯è° å¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼åˆ›å»ºä¸€ç§é“¾å¼è§¦å‘æœºåˆ¶ æºç  åœ¨ JDK çš„ java.util åŒ…ä¸­ï¼Œæä¾›äº† Observer æ¥å£å’Œ Observable ç±»ï¼Œå®ƒä»¬æ„æˆäº† JDK å¯¹è§‚å¯Ÿè€…æ¨¡å¼çš„æ”¯æŒã€‚\nå¦‚ä¸‹æ˜¯ Observer æ¥å£çš„æºç ï¼š\n@Deprecated(since = \u0026quot;9\u0026quot;) public interface Observer { void update(Observable o, Object arg); } å¦‚ä¸‹æ˜¯ Observable ç±»çš„éƒ¨åˆ†æºç ï¼š\n@Deprecated(since = \u0026quot;9\u0026quot;) public class Observable { private boolean changed = false; private Vector\u0026lt;Observer\u0026gt; obs; public Observable() { obs = new Vector\u0026lt;\u0026gt;(); } // æ³¨å†Œè§‚å¯Ÿè€…ï¼Œçº¿ç¨‹å®‰å…¨ public synchronized void addObserver(Observer o) { if (o == null) throw new NullPointerException(); // æ³¨å†Œæ—¶å»é‡ if (!obs.contains(o)) { obs.addElement(o); } } // æ³¨é”€è§‚å¯Ÿè€…ï¼Œçº¿ç¨‹å®‰å…¨ public synchronized void deleteObserver(Observer o) { obs.removeElement(o); } // é€šçŸ¥è§‚å¯Ÿè€…ï¼Œæ— å‚æ•°æ¨¡å¼ public void notifyObservers() { notifyObservers(null); } // é€šçŸ¥è§‚å¯Ÿè€…ï¼Œå¸¦å‚æ•°æ¨¡å¼ public void notifyObservers(Object arg) { // ä¿å­˜è§‚å¯Ÿè€…çš„çŠ¶æ€ï¼Œå¤‡å¿˜å½•æ¨¡å¼çš„ç®€å•åº”ç”¨ Object[] arrLocal; // è·å–è§‚å¯Ÿè€…æ—¶å€™é”ä½ synchronized (this) { if (!changed) return; arrLocal = obs.toArray(); clearChanged(); } // é€ä¸€è°ƒç”¨è§‚å¯Ÿè€…çš„å¤„ç†æ–¹æ³• for (int i = arrLocal.length - 1; i \u0026gt;= 0; i--) ((Observer) arrLocal[i]).update(this, arg); } public synchronized void deleteObservers() { obs.removeAllElements(); } protected synchronized void setChanged() { changed = true; } protected synchronized void clearChanged() { changed = false; } public synchronized boolean hasChanged() { return changed; } public synchronized int countObservers() { return obs.size(); } } éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ JDK 9 ä¹‹åå·²ç»ä¸æ¨èä½¿ç”¨ Observer æ¥å£å’Œ Observable ç±»ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/observer-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - è§‚å¯Ÿè€…æ¨¡å¼"},{"content":"é¡¾åæ€ä¹‰ï¼Œè¿­ä»£å™¨å°±æ˜¯ç”¨äºè¿­ä»£æ“ä½œçš„å¯¹è±¡ï¼Œå…¶èƒ½å¤Ÿåƒæœ‰åºåºåˆ—ä¸€æ ·è¿­ä»£è·å–é›†åˆä¸­å¯¹è±¡ï¼Œå¹¶ä¸”èƒ½å¤Ÿè®°å½•ä¸‹å½“å‰æ‰€åœ¨ä½ç½®ï¼Œå› æ­¤ä¹Ÿç§°æ¸¸æ ‡ã€‚\nç®€ä»‹ è¿­ä»£å™¨è®¾è®¡æ¨¡å¼ï¼ˆIterator Design Patternï¼‰ï¼Œä¹Ÿå«ä½œæ¸¸æ ‡è®¾è®¡æ¨¡å¼ï¼ˆCursor Design Patternï¼‰ã€‚\nè¿­ä»£å™¨æ¨¡å¼å°†é›†åˆå¯¹è±¡çš„éå†æ“ä½œä»é›†åˆç±»ä¸­æ‹†åˆ†å‡ºæ¥ï¼Œæ”¾åˆ°è¿­ä»£å™¨ç±»ä¸­ï¼Œè®©ä¸¤è€…çš„èŒè´£æ›´åŠ å•ä¸€ã€‚\nå…¶å®šä¹‰æ˜¯ï¼Œæä¾›ä¸€ç§æ–¹æ³•æ¥è®¿é—®èšåˆå¯¹è±¡ï¼Œè€Œä¸æš´éœ²è¿™ä¸ªå¯¹è±¡çš„å†…éƒ¨å®ç°ã€‚\nå…¸å‹å®ç° é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªç”¨äºéå†èšåˆå¯¹è±¡ä¸­æ‰€å­˜å‚¨å…ƒç´ çš„æŠ½è±¡è¿­ä»£å™¨æ¥å£ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic interface Iterator { // å°†æ¸¸æ ‡æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´  public void first(); // å°†æ¸¸æ ‡æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´  public void next(); // åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‹ä¸€ä¸ªå…ƒç´  public boolean hasNext(); // è·å–æ¸¸æ ‡æŒ‡å‘çš„å½“å‰å…ƒç´  public Object currentItem(); } ç„¶åï¼Œæˆ‘ä»¬é€šå¸¸å°†å­˜å‚¨æ•°æ®çš„ç±»ç§°ä½œä¸ºèšåˆç±»ï¼Œä¸€èˆ¬ä¼šåœ¨èšåˆç±»ä¸­åˆ›å»ºè¿­ä»£å™¨å¯¹è±¡ï¼Œå¦‚ä¸‹æ˜¯æŠ½è±¡èšåˆæ¥å£çš„ä»£ç ç¤ºä¾‹ï¼š\npublic interface Aggregate { public Iterator creteIterator(); } åœ¨å…·ä½“è¿­ä»£å™¨ç±»ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ³¨å…¥èšåˆå¯¹è±¡ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨è¿­ä»£å™¨æ—¶èƒ½è®¿é—®åˆ°å…¶æ•°æ®ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class ConcreteIterator implements Iterator { private Aggregate objects; private Object cursor; public ConcreteIterator(Aggregate objects) { this.objects = objects; } // å°†æ¸¸æ ‡æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´  public void first() {} // å°†æ¸¸æ ‡æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´  public void next() {} // åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‹ä¸€ä¸ªå…ƒç´  public boolean hasNext() {} // è·å–æ¸¸æ ‡æŒ‡å‘çš„å½“å‰å…ƒç´  public Object currentItem() {} } åœ¨å…·ä½“èšåˆç±»ä¸­ï¼Œé€šå¸¸æ˜¯å®ç°å­˜å‚¨æ•°æ®çš„é€»è¾‘ï¼Œä»¥åŠæŒ‡å®šå…·ä½“è¿­ä»£å™¨çš„å¯¹è±¡ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class ConcreteAggregate implements Aggregate { public Iterator creteIterator() { return new ConcreteIterator(this); } } æ€»ç»“ ä¼˜ç‚¹ è¿­ä»£å™¨æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nå°è£…æ€§è‰¯å¥½ï¼Œè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡çš„å†…å®¹è€Œæ— éœ€æš´éœ²å®ƒçš„å†…éƒ¨å®ç° å°†éå†æ“ä½œäº¤ç»™è¿­ä»£å™¨ï¼Œç®€åŒ–äº†å¤æ‚èšåˆç±»çš„è®¾è®¡ æ”¯æŒä»¥ä¸åŒçš„æ–¹å¼éå†èšåˆå¯¹è±¡ï¼Œåœ¨åŒä¸€ä¸ªèšåˆå¯¹è±¡ä¸Šå¯ä»¥å®šä¹‰å¤šç§éå†æ–¹å¼ å¢åŠ æ–°çš„èšåˆç±»å’Œè¿­ä»£å™¨ç±»éƒ½å¾ˆæ–¹ä¾¿ï¼Œæ»¡è¶³å¼€é—­åŸåˆ™ ç¼ºç‚¹ è¿­ä»£å™¨æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nè¿­ä»£å™¨æ¨¡å¼å°†å­˜å‚¨æ•°æ®å’Œéå†æ•°æ®çš„èŒè´£åˆ†ç¦»ï¼Œå¢åŠ æ–°çš„èšåˆç±»éœ€è¦å¯¹åº”å¢åŠ æ–°çš„è¿­ä»£å™¨ç±»ï¼Œç±»çš„ä¸ªæ•°æˆå¯¹å¢åŠ  æŠ½è±¡è¿­ä»£å™¨çš„è®¾è®¡éš¾åº¦è¾ƒå¤§ï¼Œéœ€è¦å……åˆ†è€ƒè™‘ç³»ç»Ÿå°†æ¥çš„æ‰©å±• é€‚ç”¨åœºæ™¯ è¿­ä»£å™¨æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡çš„å†…å®¹è€Œæ— éœ€æš´éœ²å®ƒçš„å†…éƒ¨å®ç° éœ€è¦ä¸ºä¸€ä¸ªèšåˆå¯¹è±¡æä¾›å¤šç§éå†æ–¹å¼ ä¸ºéå†ä¸åŒçš„èšåˆå¯¹è±¡æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ æºç  åœ¨ Java ä¸­ï¼Œè¿­ä»£å™¨çš„åº”ç”¨éå¸¸å¹¿ã€‚\næœ€é¡¶å±‚çš„ Collection é›†åˆæ¥å£ç»§æ‰¿äº† Iterable æ¥å£ï¼Œå…¶å®è¡¨æ˜äº†æ‰€æœ‰çš„é›†åˆå¯¹è±¡éƒ½æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå¹¶ä¸”éƒ½éœ€è¦å®ç°è·å– Iterator å¯¹è±¡çš„æ–¹æ³•ã€‚\nå°†è¿™ä¸ªæºç æ˜ å°„åˆ°å…¸å‹å®ç°ä¸­ï¼ŒIterable æ¥å£å’Œ Collection æ¥å£å°±æ˜¯æŠ½è±¡èšåˆæ¥å£ï¼ŒIterator æ¥å£åˆ™æ˜¯æŠ½è±¡è¿­ä»£å™¨æ¥å£ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/iterator-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - è¿­ä»£å™¨æ¨¡å¼"},{"content":"äº«å…ƒè®¾è®¡æ¨¡å¼ï¼ˆFlyweight Design Patternï¼‰é€šè¿‡å…±äº«æŠ€æœ¯å®ç°ç›¸åŒæˆ–ç›¸ä¼¼å¯¹è±¡çš„é‡ç”¨ï¼ŒèŠ‚çœå†…å­˜ï¼Œå‰ææ˜¯äº«å…ƒå¯¹è±¡æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚\nç®€ä»‹ å¤ä»£çš„æ´»å­—å°åˆ·æœ¯å°±æœ‰ç‚¹åƒäº«å…ƒæ¨¡å¼ï¼Œæ´»å­—å°åˆ·å°±æ˜¯å°†æ¯ä¸ªå­—æ¨¡åšå‡ºæ¥ï¼Œå†å°åˆ·æ—¶å†é€‰å–éœ€è¦çš„å­—æ¨¡åˆ°å°åˆ·æ¿ä¸Šï¼Œè¿™æ ·å°±æ„æˆäº†ä¸€é¡µä¹¦çš„å°åˆ·æ¿ã€‚è¿™æ ·çš„æ´»å­—å°åˆ·å¤§å¤§æå‡äº†æ•ˆç‡ï¼Œå‡å°‘äº†å°åˆ·æ¿çš„ç©ºé—´ã€‚\nåœ¨äº«å…ƒæ¨¡å¼ä¸­ï¼Œå­˜å‚¨å…±äº«å®ä¾‹å¯¹è±¡çš„åœ°æ–¹ç§°ä¸ºäº«å…ƒæ± ï¼ˆFlyweight Poolï¼‰ã€‚ç±»æ¯”åˆ°ä¸Šè¿°çš„æ´»å­—å°åˆ·æœ¯ä¸­ï¼Œæ”¾ç½®å­—æ¨¡çš„åœ°æ–¹å°±æ˜¯äº«å…ƒæ± ã€‚\näº«å…ƒæ¨¡å¼èƒ½åšåˆ°å…±äº«çš„å…³é”®æ˜¯åŒºåˆ†äº†å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ï¼Œå®ƒä»¬çš„ç®€å•é‡Šä¹‰æ˜¯ï¼š\nå†…éƒ¨çŠ¶æ€ï¼šå­˜å‚¨åœ¨äº«å…ƒå¯¹è±¡å†…éƒ¨ä¸”ä¸è·Ÿéšç¯å¢ƒå˜åŒ–è€Œæ”¹å˜çš„çŠ¶æ€ï¼Œå†…éƒ¨çŠ¶æ€å¯ä»¥åœ¨å¯¹è±¡ä¹‹é—´å…±äº« å¤–éƒ¨çŠ¶æ€ï¼šé€šå¸¸ç”±å®¢æˆ·ç«¯ä¿å­˜ï¼Œå½“éœ€è¦æ—¶å†ä¼ å…¥äº«å…ƒå¯¹è±¡ä¸­çš„çŠ¶æ€ï¼Œä¼šè·Ÿéšç¯å¢ƒå˜åŒ–è€Œæ”¹å˜ï¼Œä¸å¯ä»¥åœ¨å¯¹è±¡ä¹‹é—´å…±äº«ã€‚ å…¸å‹ç¤ºä¾‹ ä¸€ä¸ªå…¸å‹çš„äº«å…ƒå·¥å‚ç±»çš„ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class FlyweightFactory { // ä½¿ç”¨ HashMap å®šä¹‰äº«å…ƒæ±  private final HashMap\u0026lt;String, Flyweight\u0026gt; flyweights = new HashMap\u0026lt;\u0026gt;(); public Flyweight getFlyweight(String key) { // å¦‚æœå¯¹è±¡å­˜åœ¨ï¼Œç›´æ¥ä»äº«å…ƒæ± ä¸­è·å– if (flyweights.containsKey(key)) { return (Flyweight) flyweights.get(key); } else { // å¦‚æœå¯¹è±¡ä¸å­˜åœ¨ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡æ·»åŠ åˆ°äº«å…ƒæ± ä¸­ï¼Œç„¶åè¿”å› Flyweight fw = new ConcreteFlyweight(); flyweights.put(key, fw); return fw; } } } ä¸€ä¸ªå…¸å‹çš„äº«å…ƒæŠ½è±¡ç±»çš„ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic abstract class Flyweight { // å†…éƒ¨çŠ¶æ€ä½œä¸ºæˆå‘˜å¯¹è±¡ï¼ŒåŒä¸€ä¸ªäº«å…ƒå¯¹è±¡å…¶å†…éƒ¨çŠ¶æ€æ˜¯ä¸€è‡´çš„ protected Object intrinsicState; public Flyweight(Object intrinsicState) { this.intrinsicState = intrinsicState; } public void operation(Object extrinsicState) { // å¤–éƒ¨çŠ¶æ€åœ¨ä½¿ç”¨æ—¶ç”±å¤–éƒ¨æä¾›ï¼Œæ¯ä¸€æ¬¡éƒ½å¯ä»¥ä¸åŒ } } é€šå¸¸ï¼Œå®é™…ä¼šæ ¹æ®ä¸šåŠ¡æƒ…å†µå®šä¹‰å…·ä½“äº«å…ƒç±»ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class ConcreteFlyweight extends Flyweight { public ConcreteFlyweight(Object intrinsicState) { super(intrinsicState); } @Override public void operation(Object extrinsicState) { // ç»“åˆå†…éƒ¨çŠ¶æ€ intrinsicState ä»¥åŠæ–¹æ³•å‚æ•°ä¼ å…¥çš„ extrinsicState å®Œæˆå…·ä½“é€»è¾‘ } } æ€»ç»“ ä¼˜ç‚¹ äº«å…ƒæ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\næå¤§åœ°å‡å°‘å†…å­˜ä¸­å¯¹è±¡çš„æ•°é‡ï¼ŒèŠ‚çº¦äº†ç³»ç»Ÿèµ„æºï¼Œæé«˜äº†ç³»ç»Ÿæ€§èƒ½ äº«å…ƒæ¨¡å¼çš„å¤–éƒ¨çŠ¶æ€ç›¸å¯¹ç‹¬ç«‹ï¼Œè€Œä¸”ä¸ä¼šå½±å“å…¶å†…éƒ¨çŠ¶æ€ï¼Œä»è€Œä½¿å¾—äº«å…ƒå¯¹è±¡å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­è¢«å…±äº« ç¼ºç‚¹ äº«å…ƒæ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\näº«å…ƒæ¨¡å¼éœ€è¦åˆ†ç¦»å‡ºå†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ï¼Œä»è€Œä½¿å¾—ç³»ç»Ÿå˜å¾—å¤æ‚ï¼Œè¿™ä½¿å¾—ç¨‹åºçš„é€»è¾‘å¤æ‚åŒ– ä¸ºäº†ä½¿å¯¹è±¡å¯ä»¥å…±äº«ï¼Œäº«å…ƒå¯¹è±¡éœ€è¦å°†éƒ¨åˆ†çŠ¶æ€å¤–éƒ¨åŒ–ï¼Œè€Œè¯»å–å¤–éƒ¨çŠ¶æ€å°†ä½¿å¾—è¿è¡Œæ—¶é—´å˜é•¿ é€‚ç”¨åœºæ™¯ äº«å…ƒæ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nä¸€ä¸ªç³»ç»Ÿæœ‰å¤§é‡ç›¸åŒæˆ–ç›¸ä¼¼çš„å¯¹è±¡ï¼Œé€ æˆå†…å­˜å¤§é‡è€—è´¹ æºç  åœ¨ Java ç±»åº“ä¸­çš„ String ç±»å°±ä½¿ç”¨äº†äº«å…ƒæ¨¡å¼ï¼Œä½¿ç”¨å­—é¢é‡åˆ›å»ºçš„å¯¹è±¡æ˜¯å…±äº«çš„ï¼Œè€Œä¸ä¼šé‡æ–°ä¸ºæ­¤åˆ†é…å†…å­˜ç©ºé—´ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/flyweight-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - äº«å…ƒæ¨¡å¼"},{"content":"ç»„åˆè®¾è®¡æ¨¡å¼ï¼ˆComposite Design Patternï¼‰å…¶åº”ç”¨åœºæ™¯éå¸¸ç‰¹æ®Šï¼Œä¸»è¦ç”¨äºå¤„ç†æ ‘å½¢ç»“æ„æ•°æ®ï¼Œå®ƒå¯ä»¥è®©å¶å­å¯¹è±¡å’Œå®¹å™¨å¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚\nç®€ä»‹ ç»„åˆæ¨¡å¼å°±æ˜¯ç»„åˆå¤šä¸ªå¯¹è±¡å½¢æˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºå…·æœ‰â€œéƒ¨åˆ† - æ•´ä½“â€å…³ç³»çš„å±‚æ¬¡ç»“æ„ã€‚ç»„åˆæ¨¡å¼å¯¹å•ä¸ªå¯¹è±¡ï¼ˆå¶å­å¯¹è±¡ï¼‰å’Œç»„åˆå¯¹è±¡ï¼ˆå®¹å™¨å¯¹è±¡ï¼‰çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚\nç»„åˆæ¨¡å¼çš„å…³é”®æ˜¯å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ„ä»¶ç±»ï¼Œå®ƒæ—¢å¯ä»¥ä»£è¡¨å¶å­ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨å®¹å™¨ã€‚å®¢æˆ·ç«¯é’ˆå¯¹è¯¥æŠ½è±¡æ„ä»¶è¿›è¡Œç¼–ç¨‹ï¼Œæ— éœ€çŸ¥é“å®ƒåˆ°åº•è¡¨ç¤ºçš„æ˜¯å¶å­è¿˜æ˜¯å®¹å™¨ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚\nå…·ä½“å®ç° å¯¹äºç»„åˆæ¨¡å¼çš„æŠ½è±¡æ„ä»¶è§’è‰²ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic abstract class Component { // å¢åŠ æˆå‘˜ public abstract void add(Component c); // åˆ é™¤æˆå‘˜ public abstract void remove(Component c); // è·å–æˆå‘˜ public abstract Component getChild(int i); // ä¸šåŠ¡æ–¹æ³• public abstract void operation(); } å¦‚æœç»§æ‰¿æŠ½è±¡æ„ä»¶ç±»çš„æ˜¯å¶å­æ„ä»¶ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class Leaf extends Component { @Override public void add(Component c) { // å¢åŠ æˆå‘˜ // å¼‚å¸¸å¤„ç†æˆ–ä¸šåŠ¡æç¤º } @Override public void remove(Component c) { // åˆ é™¤æˆå‘˜ // å¼‚å¸¸å¤„ç†æˆ–ä¸šåŠ¡æç¤º } @Override public Component getChild(int i) { // è·å–æˆå‘˜ // å¼‚å¸¸å¤„ç†æˆ–ä¸šåŠ¡æç¤º } @Override public void operation() { // ä¸šåŠ¡æ–¹æ³• // å¶å­æ„ä»¶å…·ä½“ä¸šåŠ¡æ–¹æ³•çš„å®ç° } } å¦‚æœç»§æ‰¿æŠ½è±¡æ„ä»¶ç±»çš„æ˜¯å®¹å™¨æ„ä»¶ï¼Œå…¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\nimport java.util.ArrayList; public class Composite extends Component { private final ArrayList\u0026lt;Component\u0026gt; list = new ArrayList\u0026lt;\u0026gt;(); @Override public void add(Component c) { // å¢åŠ æˆå‘˜ list.add(c); } @Override public void remove(Component c) { // åˆ é™¤æˆå‘˜ list.remove(c); } @Override public Component getChild(int i) { // è·å–æˆå‘˜ return (Component) list.get(i); } @Override public void operation() { // ä¸šåŠ¡æ–¹æ³• // å¶å­æ„ä»¶å…·ä½“ä¸šåŠ¡æ–¹æ³•çš„å®ç° // é€’å½’è°ƒç”¨æˆå‘˜æ„ä»¶çš„ä¸šåŠ¡æ–¹æ³• for (Component obj : list) { obj.operation(); } } } åˆ†ç±» åœ¨ä½¿ç”¨ç»„åˆæ¨¡å¼æ—¶ï¼Œæ ¹æ®æŠ½è±¡æ„ä»¶ç±»çš„å®šä¹‰å½¢å¼ï¼Œå¯ä»¥å°†ç»„åˆæ¨¡å¼åˆ†ä¸ºé€æ˜ç»„åˆæ¨¡å¼å’Œå®‰å…¨ç»„åˆæ¨¡å¼ä¸¤ç§ã€‚\né€æ˜ç»„åˆæ¨¡å¼ åœ¨é€æ˜ç»„åˆæ¨¡å¼ä¸­ï¼ŒæŠ½è±¡æ„ä»¶ç±»å£°æ˜äº†æ‰€æœ‰ç”¨äºç®¡ç†æˆå‘˜çš„æ–¹æ³•ï¼Œå¦‚ add()ã€remove()ã€getChild() ç­‰æ‰€æœ‰æ–¹æ³•ã€‚\né€æ˜ç»„åˆæ¨¡å¼ä¹Ÿæ˜¯ç»„åˆæ¨¡å¼çš„æ ‡å‡†å½¢å¼ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ç¡®ä¿æ‰€æœ‰çš„æ„ä»¶ç±»éƒ½ä½¿ç”¨ç›¸åŒçš„æ¥å£ã€‚\nå…¶ç¼ºç‚¹å°±æ˜¯ä¸å¤Ÿå®‰å…¨ï¼Œå› ä¸ºå¶å­å¯¹è±¡å’Œå®¹å™¨å¯¹è±¡æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ï¼Œå¯¹å¶å­å¯¹è±¡æä¾› add()ã€remove()ã€getChild() ç­‰æ–¹æ³•æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå¦‚æœæ²¡æœ‰æä¾›ç›¸åº”çš„é”™è¯¯å¤„ç†ä»£ç ï¼Œåœ¨è¿è¡Œé˜¶æ®µæœ‰å¯èƒ½ä¼šå‡ºé”™ã€‚\nå®‰å…¨ç»„åˆæ¨¡å¼ åœ¨å®‰å…¨ç»„åˆæ¨¡å¼ä¸­ï¼ŒæŠ½è±¡æ„ä»¶ç±»æ²¡æœ‰å£°æ˜ä»»ä½•ç®¡ç†æˆå‘˜çš„æ–¹æ³•ï¼Œåªå£°æ˜æŠ½è±¡çš„ä¸šåŠ¡æ–¹æ³•ã€‚\nè¿™æ ·çš„åšæ³•æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºæ ¹æœ¬ä¸å‘å¶å­å¯¹è±¡æä¾›è¿™äº›ç®¡ç†æˆå‘˜å¯¹è±¡çš„æ–¹æ³•ï¼Œå¯¹äºå¶å­å¯¹è±¡ï¼Œå®¢æˆ·ç«¯ä¸å¯èƒ½è°ƒç”¨åˆ°è¿™äº›æ–¹æ³•ã€‚\nç›¸å¯¹çš„ï¼Œå…¶ç¼ºç‚¹å°±æ˜¯ä¸å¤Ÿé€æ˜ï¼Œå› ä¸ºå¶å­æ„ä»¶å’Œå®¹å™¨æ„ä»¶å…·æœ‰ä¸åŒçš„æ–¹æ³•ï¼Œå®¢æˆ·ç«¯ä¸èƒ½å®Œå…¨é’ˆå¯¹æŠ½è±¡ç¼–ç¨‹ï¼Œå¿…é¡»æœ‰åŒºåˆ«åœ°å¯¹å¾…å¶å­æ„ä»¶å’Œå®¹å™¨æ„ä»¶ã€‚\næ€»ç»“ ä¼˜ç‚¹ ç»„åˆæ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nç»„åˆæ¨¡å¼ä¸ºæ ‘å½¢ç»“æ„çš„é¢å‘å¯¹è±¡å®ç°æä¾›äº†ä¸€ç§çµæ´»çš„è§£å†³æ–¹æ¡ˆ åœ¨ç»„åˆæ¨¡å¼ä¸­å¢åŠ æ–°çš„å¶å­æ„ä»¶å’Œå®¹å™¨æ„ä»¶éƒ½å¾ˆæ–¹ä¾¿ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ å®¢æˆ·ç«¯å¯ä»¥ä¸€è‡´åœ°ä½¿ç”¨ä¸€ä¸ªç»„åˆç»“æ„æˆ–å…¶ä¸­å•ä¸ªå¯¹è±¡ï¼Œç®€åŒ–äº†å®¢æˆ·ç«¯ä»£ç  ç¼ºç‚¹ ç»„åˆæ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nè®¾è®¡è¾ƒå¤æ‚ï¼Œå®¢æˆ·ç«¯éœ€è¦èŠ±è´¹æ›´å¤šæ—¶é—´ç†æ¸…ç±»ä¹‹é—´çš„å±‚æ¬¡å…³ç³» åœ¨å¢åŠ æ–°æ„ä»¶æ—¶å¾ˆéš¾å¯¹å®¹å™¨ä¸­çš„æ„ä»¶ç±»å‹è¿›è¡Œé™åˆ¶ï¼Œé€šå¸¸é€šè¿‡è¿è¡Œæ—¶è¿›è¡Œç±»å‹æ£€æŸ¥æ¥å®ç° é€‚ç”¨åœºæ™¯ ç»„åˆæ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nåœ¨å…·æœ‰æ•´ä½“å’Œéƒ¨åˆ†çš„å±‚æ¬¡ç»“æ„ä¸­ï¼Œå¸Œæœ›é€šè¿‡ä¸€ç§æ–¹å¼å¿½ç•¥æ•´ä½“å’Œéƒ¨åˆ†çš„å·®å¼‚ åœ¨ä¸€ä¸ªä½¿ç”¨é¢å‘å¯¹è±¡è¯­è¨€å¼€å‘çš„ç³»ç»Ÿä¸­éœ€è¦å¤„ç†ä¸€ä¸ªæ ‘å½¢ç»“æ„ æºç  åœ¨ JDK ä¸­ï¼ŒHashMap ä¹Ÿæ˜¯ç”¨åˆ°äº†ç»„åˆæ¨¡å¼ï¼Œå¦‚ä¸‹æ˜¯éƒ¨åˆ†ä»£ç ï¼š\npublic class HashMap\u0026lt;K,V\u0026gt; extends AbstractMap\u0026lt;K,V\u0026gt; implements Map\u0026lt;K,V\u0026gt;, Cloneable, Serializable { public void putAll(Map\u0026lt;? extends K, ? extends V\u0026gt; m) { putMapEntries(m, true); } final void putMapEntries(Map\u0026lt;? extends K, ? extends V\u0026gt; m, boolean evict) { int s = m.size(); if (s \u0026gt; 0) { if (table == null) { // pre-size float ft = ((float)s / loadFactor) + 1.0F; int t = ((ft \u0026lt; (float)MAXIMUM_CAPACITY) ? (int)ft : MAXIMUM_CAPACITY); if (t \u0026gt; threshold) threshold = tableSizeFor(t); } else { // Because of linked-list bucket constraints, we cannot // expand all at once, but can reduce total resize // effort by repeated doubling now vs later while (s \u0026gt; threshold \u0026amp;\u0026amp; table.length \u0026lt; MAXIMUM_CAPACITY) resize(); } for (Map.Entry\u0026lt;? extends K, ? extends V\u0026gt; e : m.entrySet()) { K key = e.getKey(); V value = e.getValue(); putVal(hash(key), key, value, false, evict); } } } } putAll() å’Œ putMapEntries() éƒ½æ¥å—ä¸€ä¸ª Map ç»“æ„å‚æ•°ï¼Œè¿™ä¸ª Map å°±æ˜¯ä¸€ä¸ªæŠ½è±¡æ„ä»¶ï¼ŒHashMap åŒæ ·æ˜¯å®ç°äº† Map ç»“æ„ï¼Œè½»æ˜“å®ç°ä¸€ä¸ªæ ‘å½¢çš„è°ƒç”¨ç»“æ„ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/composite-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - ç»„åˆæ¨¡å¼"},{"content":"å¤–è§‚æ¨¡å¼æ˜¯æœ€å¸¸ç”¨çš„ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œä¹Ÿæ˜¯ä¸€ç§éå¸¸å®¹æ˜“ç†è§£çš„è®¾è®¡æ¨¡å¼ï¼Œå…¶æ ¸å¿ƒå°±æ˜¯ä¸ºå¤šä¸ªå­ç³»ç»Ÿæä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œå°†è¿™ä¸ªæ¥å£çœ‹ä½œæ˜¯è¿™äº›å­ç³»ç»Ÿçš„é—¨é¢ã€‚\nç®€ä»‹ å¤–è§‚è®¾è®¡æ¨¡å¼ï¼ˆFacade Design Patternï¼‰åˆè¢«å«ä½œé—¨é¢æ¨¡å¼ï¼Œå…¶æè¿°æ˜¯ï¼Œé€šè¿‡ä¸ºå¤šä¸ªå¤æ‚çš„å­ç³»ç»Ÿæä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´å®¹æ˜“è¢«ä½¿ç”¨ã€‚\nåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œå¸¸å¸¸å­˜åœ¨åŠäº‹å¤æ‚çš„æƒ…å†µï¼Œå¦‚åŠç†æˆ¿äº§è¯æˆ–è€…æ³¨å†Œå…¬å¸ï¼Œæœ‰æ—¶éœ€è¦è·‘å‡ ä¸ªéƒ¨é—¨æ‰èƒ½åŠæˆï¼Œå¦‚æœè¿™äº›éƒ¨é—¨éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œæˆ–è€…æ˜¯æˆç«‹ä¸€ä¸ªç»¼åˆéƒ¨é—¨å°±æ–¹ä¾¿å¾ˆå¤šã€‚\nå¯¹äºä¸Šè¿°ä¾‹å­ï¼Œæˆç«‹ç»¼åˆéƒ¨åˆ†å°±ç›¸å½“äºä½¿ç”¨å¤–è§‚æ¨¡å¼ï¼Œä¸ºå®¢æˆ·ç«¯æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä»è€Œé™ä½çš„ç³»ç»Ÿçš„è€¦åˆåº¦ã€é™ä½å®¢æˆ·ç«¯çš„ä½¿ç”¨éš¾åº¦ã€‚\nå…·ä½“å®ç° åˆ›å»ºä¸€ä¸ªæŠ½è±¡çš„å›¾å½¢æ¥å£ï¼Œå®šä¹‰ä¸€ä¸ªç”»å›¾çš„è¡Œä¸ºï¼š\npublic interface Shape { void draw(); } å®ç°ä¸€ä¸ªç”»åœ†å½¢çš„å…·ä½“ç±»ï¼š\npublic class Circle implements Shape { @Override public void draw() { System.out.println(\u0026quot;åœ¨è¿™é‡Œç”»åœ†å½¢ï¼\u0026quot;); } } å®šä¹‰ä¸€ä¸ªç”»æ­£æ–¹å½¢çš„å…·ä½“ç±»ï¼š\npublic class Square implements Shape { @Override public void draw() { System.out.println(\u0026quot;åœ¨è¿™é‡Œç”»æ­£æ–¹å½¢ï¼\u0026quot;); } } éšç€å…·ä½“ç±»è¶Šæ¥è¶Šå¤šï¼Œå®¢æˆ·ç«¯è°ƒç”¨è¿™äº›ç±»ä¹Ÿå˜å¾—æ›´å¤šï¼Œåˆ™è€¦åˆåº¦å˜å¾—è¶Šæ¥è¶Šé«˜ã€‚è¿™æ—¶å°±å¯ä»¥é€šè¿‡å¤–è§‚æ¨¡å¼å°†è¿™äº›å…·ä½“ç±»æ±‡æ€»åˆ°åŒä¸€ä¸ªæ¥å£ä¸­ï¼Œå®¢æˆ·ç«¯åªéœ€æŒæ¡è¿™ä¸ªå¤–è§‚ç±»å³å¯ã€‚\nå®šä¹‰ä¸€ä¸ªå›¾å½¢ç±»çš„å¤–è§‚ç±»ï¼Œå°†å…·ä½“ç±»éƒ½æ³¨å…¥åˆ°å…¶ä¸­ï¼š\npublic class ShapeFacade { private final Shape circle = new Circle(); private final Shape square = new Square(); public void drawCircle() { circle.draw(); } public void drawSquare() { square.draw(); } } æ€»ç»“ ä¼˜ç‚¹ å¤–è§‚æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\né™ä½äº†å­ç³»ç»Ÿä¸å®¢æˆ·ç«¯çš„è€¦åˆåº¦ï¼Œä½¿å¾—å­ç³»ç»Ÿçš„å˜åŒ–ä¸ä¼šå½±å“è°ƒç”¨å®ƒçš„å®¢æˆ·ç«¯ å¯¹å®¢æˆ·ç«¯å±è”½äº†å­ç³»ç»Ÿç»„ä»¶ï¼Œå‡å°‘äº†å®¢æˆ·å¤„ç†çš„å¯¹è±¡æ•°ç›®ï¼Œä½¿å¾—å­ç³»ç»Ÿä½¿ç”¨èµ·æ¥æ›´åŠ ç®€ä¾¿ åªæ˜¯æä¾›äº†ä¸€ä¸ªè®¿é—®å­ç³»ç»Ÿçš„ç»Ÿä¸€å…¥å£ï¼Œå¹¶ä¸å½±å“å®¢æˆ·ç«¯ç›´æ¥ä½¿ç”¨å­ç³»ç»Ÿç±» ç¼ºç‚¹ å¤–è§‚æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nä¸èƒ½å¾ˆå¥½åœ°é™åˆ¶å®¢æˆ·ç«¯ä½¿ç”¨å­ç³»ç»Ÿç±»ï¼Œå¾ˆå®¹æ˜“å¸¦æ¥æœªçŸ¥é£é™© å¢åŠ æ–°çš„å­ç³»ç»Ÿç±»å¯èƒ½éœ€è¦ä¿®æ”¹å¤–è§‚ç±»æˆ–è€…å®¢æˆ·ç«¯çš„ä»£ç ï¼Œè¿èƒŒäº†å¼€é—­åŸåˆ™ é€‚ç”¨åœºæ™¯ å¤–è§‚æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nè§£å†³æ˜“ç”¨æ€§é—®é¢˜ï¼Œå½“éœ€è¦è®¿é—®ä¸€ç³»åˆ—å¤æ‚çš„å­ç³»ç»Ÿæ—¶ï¼Œå¤–è§‚æ¨¡å¼å¯ä»¥ä¸ºå®¢æˆ·ç«¯æä¾›ç®€å•çš„å…¥å£ è§£å†³æ€§èƒ½é—®é¢˜ï¼Œè°ƒç”¨å¤šä¸ªæ¥å£æ”¹æˆè°ƒç”¨ä¸€ä¸ªç»Ÿä¸€æ¥å£ï¼Œå¯ä»¥å‡å°‘ç½‘ç»œé€šä¿¡æˆæœ¬ è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œå¯¹äºä¸åŒæ¨¡å—è¿˜éœ€è¦ä¿æŒäº‹åŠ¡æ€§ï¼Œåˆ™å¯ä»¥è®¾è®¡ä¸€ä¸ªåŒ…æ‹¬ä¸¤ä¸ªæ“ä½œçš„æ–°æ¥å£åœ¨åŒä¸€ä¸ªäº‹åŠ¡é‡Œæ‰§è¡Œ æºç  å¤–è§‚æ¨¡å¼æ˜¯ä¸€ç§ä½¿ç”¨é¢‘ç‡éå¸¸é«˜çš„è®¾è®¡æ¨¡å¼ï¼Œå¦‚ JDK ä¸­çš„ java.util.logging.LogManager ç®€å•åœ°ä½¿ç”¨äº†å¤–è§‚æ¨¡å¼ï¼Œå…¶ä¸­ç»Ÿä¸€äº† SystemLoggerContext å’Œ LoggerContext è¿™ä¸¤ä¸ªå†…éƒ¨ç±»ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/facade-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - å¤–è§‚æ¨¡å¼"},{"content":"é€‚é…å™¨è®¾è®¡æ¨¡å¼ï¼ˆAdapter Design Patternï¼‰å¯ä»¥å°†ä¸å…¼å®¹çš„æ¥å£è½¬æ¢ä¸ºå¯å…¼å®¹çš„æ¥å£ï¼Œè®©åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚\nç®€ä»‹ é€‚é…å™¨åœ¨ç”Ÿæ´»ä¸­ç»å¸¸è§åˆ°ï¼Œå¦‚æ‰‹æœºã€ç¬”è®°æœ¬ç”µè„‘çš„ç”µæºé€‚é…å™¨ï¼ŒUSB è½¬æ¥å¤´éƒ½æ˜¯å¸¸è§çš„é€‚é…å™¨ã€‚\nåœ¨è®¾è®¡æ¨¡å¼å½“ä¸­ï¼Œé€‚é…å™¨æ¨¡å¼æ—¢å¯ä»¥ä½œä¸ºç±»ç»“æ„å‹æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚\nåœ¨ç±»é€‚é…å™¨æ¨¡å¼ä¸­ï¼Œé€‚é…å™¨ä¸é€‚é…è€…ä¹‹é—´æ˜¯ç»§æ‰¿ï¼ˆå®ç°ï¼‰å…³ç³»ï¼›åœ¨å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä¸­ï¼Œé€‚é…å™¨ä¸é€‚é…è€…ä¹‹é—´æ˜¯å…³è”å…³ç³»ã€‚\nå…·ä½“å®ç° ç±»é€‚é…å™¨æ¨¡å¼ å…¸å‹çš„ç±»é€‚é…å™¨æ¨¡å¼ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\nclass Adapter extends Adaptee implements Target { public void request() { // è½¬å‘è°ƒç”¨ super.specificRequest(); } } ä»ä¸Šè¿°çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œå…¸å‹çš„ç±»é€‚é…å™¨æ¨¡å¼å°±æ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼ï¼Œä½¿ç”¨å­ç±»æ–¹æ³•è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œä½¿ç”¨è€…åœ¨ä½¿ç”¨æ—¶é¢å¯¹çš„æ˜¯é€‚é…å™¨ç±»è€Œä¸æ˜¯åŸå§‹ç±»ã€‚\nå¯¹è±¡é€‚é…å™¨æ¨¡å¼ å…¸å‹çš„å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\nclass Adapter extends Target { // ç»´æŒä¸€ä¸ªå¯¹é€‚é…è€…çš„å¼•ç”¨ private Adaptee adaptee; public Adapter(Adaptee adaptee) { this.adaptee = adaptee; } public void request() { // è½¬å‘è°ƒç”¨ adaptee.specificRequest(); } } ä»£ç†ã€æ¡¥æ¥ã€è£…é¥°å™¨ã€é€‚é…å™¨çš„åŒºåˆ« ç¬¼ç»Ÿåœ°è¯´ï¼Œè¿™ 4 ç§è®¾è®¡æ¨¡å¼å¯ä»¥ç§°ä¸º Wrapper æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ Wrapper ç±»äºŒæ¬¡å°è£…åŸå§‹ç±»ã€‚\nå°½ç®¡å®ƒä»¬çš„ä»£ç ç»“æ„ç±»ä¼¼ï¼Œä½†è¿™ 4 ç§è®¾è®¡æ¨¡å¼çš„ç”¨æ„å®Œå…¨ä¸åŒï¼Œä»¥ä¸‹æ˜¯å®ƒä»¬ç®€è¦æè¿°ï¼š\nä»£ç†æ¨¡å¼ï¼šä»£ç†ç±»åœ¨ä¸æ”¹å˜åŸå§‹ç±»æ¥å£çš„æ¡ä»¶ä¸‹ï¼Œä¸ºåŸå§‹ç±»å®šä¹‰ä¸€ä¸ªä»£ç†ç±»ï¼Œä¸»è¦ç›®çš„æ˜¯æ§åˆ¶è®¿é—®ï¼Œè€ŒéåŠ å¼ºåŠŸèƒ½ï¼Œè¿™æ˜¯å®ƒä¸è£…é¥°å™¨æ¨¡å¼æœ€å¤§çš„ä¸åŒ æ¡¥æ¥æ¨¡å¼ï¼šæ¡¥æ¥æ¨¡å¼çš„ç›®çš„æ˜¯å°†æ¥å£éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä»è€Œè®©å®ƒä»¬å¯ä»¥è¾ƒä¸ºå®¹æ˜“ã€ä¹Ÿç›¸å¯¹ç‹¬ç«‹åœ°åŠ ä»¥æ”¹å˜ è£…é¥°å™¨æ¨¡å¼ï¼šè£…é¥°å™¨æ¨¡å¼åœ¨ä¸æ”¹å˜åŸå§‹ç±»æ¥å£çš„æƒ…å†µä¸‹ï¼Œå¯¹åŸå§‹ç±»åŠŸèƒ½è¿›è¡ŒåŠ å¼ºï¼Œå¹¶ä¸”æ”¯æŒå¤šä¸ªè£…é¥°å™¨çš„åµŒå¥—ä½¿ç”¨ é€‚é…å™¨æ¨¡å¼ï¼šé€‚é…å™¨æä¾›è·ŸåŸå§‹ç±»ä¸åŒçš„æ¥å£ï¼Œè€Œä»£ç†æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼æä¾›çš„éƒ½æ˜¯è·ŸåŸå§‹ç±»ç›¸åŒçš„æ¥å£ï¼Œé€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§äº‹åçš„è¡¥æ•‘ç­–ç•¥ æ€»ç»“ ä¼˜ç‚¹ é€‚é…å™¨æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nå°†ç›®æ ‡ç±»å’Œé€‚é…è€…ç±»è§£è€¦ å¢åŠ äº†ç±»çš„é€æ˜æ€§å’Œå¤ç”¨æ€§ çµæ´»æ€§å’Œæ‰©å±•æ€§éƒ½éå¸¸å¥½ é™¤ä¸Šè¿°ä»¥å¤–ï¼Œå¯¹è±¡é€‚é…å™¨æ¨¡å¼è¿˜æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š\nä¸€ä¸ªå¯¹è±¡é€‚é…å™¨å¯ä»¥æŠŠå¤šä¸ªä¸åŒçš„é€‚é…å™¨é€‚é…åˆ°åŒä¸€ä¸ªç›®æ ‡ å¯ä»¥é€‚é…ä¸€ä¸ªé€‚é…è€…çš„å­ç±» ç¼ºç‚¹ ç±»é€‚é…å™¨æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nå¯¹äºä¸æ”¯æŒå¤šé‡ç»§æ‰¿çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸€æ¬¡æœ€å¤šåªèƒ½é€‚é…ä¸€ä¸ªé€‚é…è€…ç±»ï¼Œä¸èƒ½åŒæ—¶é€‚é…å¤šä¸ªé€‚é…è€… é€‚é…è€…ç±»å¿…é¡»æ˜¯å¯è¢«ç»§æ‰¿çš„ å¯¹äºä¸æ”¯æŒå¤šé‡ç»§æ‰¿çš„ç¼–ç¨‹è¯­è¨€ï¼Œç±»é€‚é…å™¨æ¨¡å¼ä¸­çš„ç›®æ ‡æŠ½è±¡ç±»åªèƒ½ä¸ºæ¥å£ï¼Œä¸èƒ½ä¸ºç±»ï¼Œå…¶ä½¿ç”¨æœ‰ä¸€å®šçš„å±€é™æ€§ å¯¹è±¡é€‚é…å™¨æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nä¸ç±»é€‚é…å™¨æ¨¡å¼ç›¸æ¯”ï¼Œè¦åœ¨é€‚é…å™¨ä¸­ç½®æ¢é€‚é…è€…ç±»çš„æŸäº›æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ é€‚ç”¨åœºæ™¯ é€‚é…å™¨æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nå°è£…æœ‰ç¼ºé™·çš„æ¥å£è®¾è®¡ ç»Ÿä¸€å¤šä¸ªç±»çš„æ¥å£è®¾è®¡ æ›¿æ¢ä¾èµ–çš„æ¥å£è®¾è®¡ å…¼å®¹è€ç‰ˆæœ¬æ¥å£ é€‚é…ä¸åŒæ ¼å¼çš„æ•°æ® æºç  åœ¨ Java ä¸­ï¼ŒSLF4J æ—¥å¿—æ¡†æ¶ä¸ä»…ä»…æä¾›äº†ç»Ÿä¸€çš„æ¥å£å®šä¹‰ï¼Œè¿˜æä¾›äº†é’ˆå¯¹ä¸åŒæ—¥å¿—æ¡†æ¶çš„é€‚é…å™¨ã€‚å¯¹ä¸åŒæ—¥å¿—æ¡†æ¶çš„æ¥å£è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œé€‚é…æˆç»Ÿä¸€çš„ SLF4J æ¥å£å®šä¹‰ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/adapter-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - é€‚é…å™¨æ¨¡å¼"},{"content":"è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Design Patternï¼‰æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡å°†å¯¹è±¡æ”¾å…¥åŒ…å«è¡Œä¸ºçš„ç‰¹æ®Šå°è£…å¯¹è±¡ä¸­æ¥ä¸ºåŸå¯¹è±¡ç»‘å®šæ–°çš„è¡Œä¸ºã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„åŠŸèƒ½æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚\nç®€ä»‹ è£…é¥°å™¨æ¨¡å¼ä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœä½¿ç”¨å­ç±»ç»§æ‰¿çš„æ–¹å¼æ‰©å±•ä¸€ä¸ªç±»ï¼Œéšç€æ‰©å±•åŠŸèƒ½çš„å¢å¤šï¼Œå­ç±»ä¼šéå¸¸è†¨èƒ€ï¼ŒåŒ…æ‹¬å­ç±»çš„æ•°é‡æˆ–å­ç±»çš„æ–¹æ³•æ•°ã€‚\nè£…é¥°å™¨æ¨¡å¼å…¶æ ¸å¿ƒè¿˜æ˜¯â€œç”¨ç»„åˆæ›¿ä»£ç»§æ‰¿â€ï¼Œä½†æ˜¯ç›¸å¯¹äºæ™®é€šçš„ç»„åˆå…³ç³»ï¼Œè£…é¥°å™¨æ¨¡å¼è¿˜æœ‰ä¸¤ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„åœ°æ–¹ï¼š\nè£…é¥°å™¨ç±»å’ŒåŸå§‹ç±»ç»§æ‰¿åŒæ ·çš„çˆ¶ç±»ï¼Œè¿™æ ·å°±å¯ä»¥å¯¹åŸå§‹ç±»â€œåµŒå¥—â€å¤šä¸ªè£…é¥°å™¨ç±» è£…é¥°å™¨ç±»æ˜¯å¯¹åŠŸèƒ½çš„åŠ å¼ºï¼Œè¿™ä¹Ÿæ˜¯è£…é¥°å™¨æ¨¡å¼åº”ç”¨åœºæ™¯çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹ å…·ä½“å®ç° ä»¥å›¾ä¹¦é¦†çš„å›¾ä¹¦å’Œå€Ÿé˜…è€…ä¸ºä¾‹ï¼Œåœ¨å·²å®šä¹‰äº†å®ä½“ç±»çš„åŸºç¡€ä¸Šï¼Œå¢åŠ å€Ÿä¹¦è®¡æ•°çš„åŠŸèƒ½ã€‚\nå®šä¹‰å›¾ä¹¦é¦†çš„æŠ½è±¡ç±»ï¼š\npublic abstract class Library { // å€Ÿä¹¦ public abstract void borrowBook(); // è¿˜ä¹¦ public abstract void returnBook(); } å®šä¹‰å…·ä½“å›¾ä¹¦é¦†ç±»ç»§æ‰¿æŠ½è±¡å›¾ä¹¦é¦†ç±»ï¼š\npublic class ConcreteLibrary extends Library { @Override public void borrowBook() { // å®ç°ç±»å€Ÿä¹¦ System.out.println(\u0026quot;ConcreteLibrary borrowBook\u0026quot;); } @Override public void returnBook() { // å®ç°ç±»è¿˜ä¹¦ System.out.println(\u0026quot;ConcreteLibrary returnBook\u0026quot;); } } å®šä¹‰æŠ½è±¡è£…é¥°å™¨ç±»ç»§æ‰¿æŠ½è±¡å›¾ä¹¦é¦†ç±»ï¼š\npublic abstract class LibraryDecorator extends Library { protected Library library; public LibraryDecorator(Library library) { this.library = library; } @Override public void borrowBook() { this.library.borrowBook(); } @Override public void returnBook() { this.library.returnBook(); } } å†å®šä¹‰å…·ä½“çš„è£…é¥°å™¨ç±»ç»§æ‰¿æŠ½è±¡è£…é¥°å™¨ç±»ï¼š\npublic class CountingLibrary extends LibraryDecorator { private int counter = 0; public CountingLibrary(Library library) { super(library); } @Override public void borrowBook() { this.library.borrowBook(); this.counter++; this.printCounter(); } @Override public void returnBook() { this.library.returnBook(); this.counter--; this.printCounter(); } private void printCounter() { System.out.println(\u0026quot;å½“å‰çš„è®¡æ•°æ˜¯ï¼š\u0026quot; + this.counter); } } å…·ä½“åˆ†ç±» åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†å¯ä»¥å•ç‹¬è°ƒç”¨è£…é¥°å™¨ç±»æ–°å¢çš„æ–¹æ³•ï¼Œå®šä¹‰è¿™ç§å½¢å¼çš„è£…é¥°å™¨æ¨¡å¼ç§°ä¸ºåŠé€æ˜è£…é¥°å™¨æ¨¡å¼ï¼›è€Œæ ‡å‡†çš„è£…é¥°å™¨æ¨¡å¼æ˜¯é€æ˜è£…é¥°å™¨æ¨¡å¼ã€‚\né€æ˜è£…é¥°å™¨æ¨¡å¼ åœ¨é€æ˜è£…é¥°å™¨æ¨¡å¼ä¸­ï¼Œè¦æ±‚å®¢æˆ·ç«¯å®Œå…¨é’ˆå¯¹æŠ½è±¡ç¼–ç¨‹ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…·ä½“çš„è£…é¥°å™¨ç±»ä¸­å°†æ–°å¢è¡Œä¸ºéƒ½å®šä¹‰ä¸ºç§æœ‰æ–¹æ³•ã€‚\nå¦‚ä¸‹æ˜¯æ¨èçš„ä»£ç ç¤ºä¾‹ï¼š\n// ä½¿ç”¨æŠ½è±¡ç±»å‹å®šä¹‰å¯¹è±¡ Component component = new ConcreteComponent(); å¦‚ä¸‹æ˜¯ä¸æ¨èçš„ä»£ç ç¤ºä¾‹ï¼š\n// ä½¿ç”¨å…·ä½“ç±»å‹å®šä¹‰å¯¹è±¡ ConcreteComponent component = new ConcreteComponent(); é€æ˜è£…é¥°å™¨æ¨¡å¼å¯ä»¥è®©å®¢æˆ·ç«¯é€æ˜åœ°ä½¿ç”¨è£…é¥°å™¨ä¹‹å‰çš„å¯¹è±¡å’Œè£…é¥°ä¹‹åçš„å¯¹è±¡ï¼Œæ— éœ€å…³å¿ƒå®ƒä»¬çš„åŒºåˆ«ï¼Œä½¿ç”¨ä¸Šæ²¡æœ‰ä»»ä½•å·®åˆ«ã€‚å› ä¸ºï¼Œå¯¹äºæˆ‘ä»¬è€Œè¨€ï¼Œé¢å‘çš„æ€»æ˜¯æœ€é¡¶å±‚çš„æŠ½è±¡ç±»ã€‚\nåŠé€æ˜è£…é¥°å™¨æ¨¡å¼ ä¸ºäº†èƒ½å¤Ÿè°ƒç”¨åˆ°æ–°å¢æ–¹æ³•ï¼Œä¸å¾—ä¸ç”¨å…·ä½“è£…é¥°å™¨ç±»å‹æ¥å®šä¹‰è£…é¥°ä¹‹åçš„å¯¹è±¡ï¼Œè€Œè¢«è£…é¥°çš„å¯¹è±¡è¿˜æ˜¯å¯ä»¥ä½¿ç”¨æŠ½è±¡ç±»æ¥å®šä¹‰ã€‚\nå…¶å®ï¼Œä¹Ÿå°±æ˜¯å› ä¸ºä½¿ç”¨åˆ°å…·ä½“è£…é¥°å™¨æ–°å¢çš„æ–¹æ³•ï¼Œæ— æ³•ç¡®å®šè¿™ä¸ªæ–¹æ³•æ˜¯å¦åœ¨å…¶ä»–åŒç±»è£…é¥°å™¨ä¸Šä¹Ÿå­˜åœ¨ï¼Œå› æ­¤ï¼Œä¹Ÿå°±æ— æ³•åµŒå¥—ä½¿ç”¨è£…é¥°å™¨äº†ã€‚\nå¦‚ä¸‹æ˜¯åŠé€æ˜è£…é¥°å™¨æ¨¡å¼çš„ä»£ç ç¤ºä¾‹ï¼š\n// æ— è®ºæ˜¯ä½¿ç”¨å…·ä½“ç±»å‹å®šä¹‰å¯¹è±¡ ConcreteComponent component = new ConcreteComponent(); // æˆ–è€…æ˜¯ä½¿ç”¨æŠ½è±¡ç±»å‹å®šä¹‰å¯¹è±¡ Component component = new ConcreteComponent(); // ä½¿ç”¨å…·ä½“è£…é¥°å™¨ç±»å‹å®šä¹‰ ConcreteDecorator decorator = new ConcreteDecorator(component); // å†è°ƒç”¨å…·ä½“è£…é¥°å™¨è‡ªå®šä¹‰çš„æ–¹æ³• decorator.otherMethod(); åŠé€æ˜è£…é¥°å™¨æ¨¡å¼æ›´åŠ çµæ´»ï¼Œè®¾è®¡ç›¸å¯¹ç®€å•ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚\nä½†æ˜¯å…¶æœ€å¤§çš„ç¼ºç‚¹æ˜¯ä¸èƒ½å®ç°å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¤šæ¬¡è£…é¥°ï¼Œè€Œä¸”å®¢æˆ·ç«¯éœ€è¦æœ‰åŒºåˆ«åœ°åœ°å¯¹å¾…è£…é¥°ä¹‹å‰çš„å¯¹è±¡å’Œè£…é¥°ä¹‹åçš„å¯¹è±¡ã€‚\næ€»ç»“ ä¼˜ç‚¹ è£…é¥°å™¨æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nå¯¹äºæ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ï¼Œè£…é¥°å™¨æ¨¡å¼æ¯”ç»§æ‰¿æ›´åŠ çµæ´»ï¼Œä¸ä¼šå¯¼è‡´ç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ  å¯ä»¥é€šè¿‡ä¸€ç§åŠ¨æ€çš„æ–¹å¼æ¥æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ å¯ä»¥å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œå¤šæ¬¡è£…é¥° å…·ä½“ç±»å’Œå…·ä½“è£…é¥°å™¨ç±»å¯ä»¥ç‹¬ç«‹å˜åŒ–ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦å¢åŠ æ–°çš„å…·ä½“ç±»å’Œå…·ä½“è£…é¥°å™¨ç±»ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ ç¼ºç‚¹ è£…é¥°å™¨æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nä½¿ç”¨è£…é¥°å™¨æ¨¡å¼è¿›è¡Œç³»ç»Ÿè®¾è®¡æ—¶å°†äº§ç”Ÿå¾ˆå¤šå°å¯¹è±¡ï¼Œå¦‚ Java çš„ IO ç±»åº“ è£…é¥°å™¨æ¨¡å¼æ¯”ç»§æ‰¿æ›´åŠ çµæ´»ï¼Œä½†æ˜¯ä¹Ÿæ¯”ç»§æ‰¿æ›´åŠ å®¹æ˜“å‡ºé”™ï¼Œæ’é”™ä¹Ÿå¾ˆå›°éš¾ é€‚ç”¨åœºæ™¯ è£…é¥°å™¨æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nåœ¨ä¸å½±å“å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä»¥åŠ¨æ€ã€é€æ˜çš„æ–¹å¼ç»™å•ä¸ªå¯¹è±¡æ·»åŠ èŒè´£ ç±»å·²ç»è¢«å®šä¹‰ä¸ºä¸å¯è¢«ç»§æ‰¿ï¼Œä½†æ˜¯åˆéœ€è¦å¯¹ç±»è¿›è¡Œæ‰©å±•çš„æƒ…å†µ ç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡ç‹¬ç«‹çš„æ‰©å±•ï¼Œä¸ºæ”¯æŒæ¯ä¸€ç§æ‰©å±•æˆ–è€…æ‰©å±•ä¹‹é—´çš„ç»„åˆå°†äº§ç”Ÿå¤§é‡çš„å­ç±»ï¼Œä½¿å¾—å­ç±»æ•°ç›®å‘ˆçˆ†ç‚¸æ€§å¢é•¿ æºç  åœ¨ JDK ä¸­ï¼Œæä¾›çš„ IO ç±»åº“ä½¿ç”¨äº†è£…é¥°å™¨æ¨¡å¼ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/decorator-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - è£…é¥°å™¨æ¨¡å¼"},{"content":"æ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§åœ¨æ—¥å¸¸å¼€å‘ä¸­ä¸æ˜¯ç‰¹åˆ«å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œä¸»è¦æ˜¯å› ä¸ºä¸Šæ‰‹éš¾åº¦è¾ƒå¤§ï¼Œä½†æ˜¯å¯¹äºç†è§£é¢å‘å¯¹è±¡è®¾è®¡æœ‰éå¸¸å¤§çš„å¸®åŠ©ã€‚\nç®€ä»‹ æ¡¥æ¥è®¾è®¡æ¨¡å¼ï¼ˆBridge Design Patternï¼‰ä¹Ÿå«ä½œæ¡¥æ¢æ¨¡å¼ï¼Œå…¶æè¿°æ˜¯å°†å®ç°å’ŒæŠ½è±¡æ”¾åœ¨ä¸¤ä¸ªä¸åŒçš„ç±»å±‚æ¬¡ä¸­ï¼Œä½¿ä¸¤ä¸ªå±‚æ¬¡å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚\næ¡¥æ¥æ¨¡å¼é‡‡ç”¨æŠ½è±¡å…³è”å–ä»£äº†ä¼ ç»Ÿçš„å¤šå±‚ç»§æ‰¿ï¼Œå°†ç±»ä¹‹é—´çš„é™æ€ç»§æ‰¿å…³ç³»è½¬åŒ–ä¸ºåŠ¨æ€çš„å¯¹è±¡ç»„åˆå…³ç³»ï¼Œä½¿ç³»ç»Ÿæ›´åŠ çµæ´»ï¼Œå¹¶æ˜“äºæ‰©å±•ï¼ŒåŒæ—¶æœ‰æ•ˆæ§åˆ¶äº†ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°ã€‚\nåœ¨æ¡¥æ¥æ¨¡å¼ä¸­ï¼Œæœ‰ä»¥ä¸‹æ¦‚å¿µéœ€è¦ç†è§£ï¼š\næŠ½è±¡åŒ–ï¼šå°†å¯¹è±¡å…±åŒçš„æ€§è´¨æŠ½å–å‡ºå»è€Œå½¢æˆç±»çš„è¿‡ç¨‹ å®ç°åŒ–ï¼šå’ŒæŠ½è±¡åŒ–æ˜¯ä¸€ä¸ªäº’é€†çš„è¿‡ç¨‹ï¼Œå®ç°åŒ–æ˜¯å¯¹æŠ½è±¡åŒ–äº‹ç‰©çš„è¿›ä¸€æ­¥å…·ä½“åŒ– è„±è€¦ï¼šå°†æŠ½è±¡åŒ–å’Œå®ç°åŒ–ä¹‹é—´å¼ºå…³è”æ”¹æ¢æˆå¼±å…³è”ï¼Œå°†ä¸¤ä¸ªè§’è‰²ä¹‹é—´çš„ç»§æ‰¿å…³ç³»æ”¹ä¸ºå…³è”å…³ç³» æ¡¥æ¥æ¨¡å¼ä¸»è¦è§£å†³çš„æ˜¯å¤šç»´åº¦çš„æŒ‡æ•°çº§å˜åŒ–ã€‚\nå…·ä½“å®ç° ä»¥æ‰‹æœºä¸ºä¾‹ï¼Œæ‰‹æœºæ—¢å¯ä»¥æŒ‰ç…§å“ç‰Œåˆ†ç±»ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§æ‰‹æœºè½¯ä»¶æ¥åˆ†ç±»ï¼Œä¸¤ç§ç»´åº¦äº¤å‰çš„å˜åŒ–è¿œå¿…ä¸€ç§ç»´åº¦å¤šå¾—å¤šã€‚\næ‰‹æœºè½¯ä»¶ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\n// æŠ½è±¡ç±» public abstract class HandsetSoft { public abstract void run(); } // å®ç°ç±» public class HandsetGame extends HandsetSoft { @Override public void run() { System.out.println(\u0026quot;è¿è¡Œæ‰‹æœºæ¸¸æˆ\u0026quot;); } } public class HandsetAddressList extends HandsetSoft { @Override public void run() { System.out.println(\u0026quot;è¿è¡Œæ‰‹æœºé€šè®¯å½•\u0026quot;); } } æ‰‹æœºå“ç‰Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\n// æŠ½è±¡ç±» public abstract class HandsetBrand { protected HandsetSoft soft; // è®¾ç½®æ‰‹æœºè½¯ä»¶ public void setHandsetSoft(HandsetSoft soft) { this.soft = soft; } // è¿è¡Œ public abstract void run(); } // å®ç°ç±» public class HandsetBrandA extends HandsetBrand { @Override public void run() { soft.run(); } } public class HandsetBrandB extends HandsetBrand { @Override public void run() { soft.run(); } } å®¢æˆ·ç«¯ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class Client { public static void main(String[] args) { HandsetBrand ab; // A å“ç‰Œ ab = new HandsetBrandA(); ab.setHandsetSoft(new HandsetGame()); ab.run(); ab.setHandsetSoft(new HandsetAddressList()); ab.run(); // B å“ç‰Œ ab = new HandsetBrandB(); ab.setHandsetSoft(new HandsetGame()); ab.run(); ab.setHandsetSoft(new HandsetAddressList()); ab.run(); } } æ€»ç»“ ä¼˜ç‚¹ æ¡¥æ¥æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nå®ç°äº†æŠ½è±¡å’Œå®ç°éƒ¨åˆ†çš„åˆ†ç¦»ï¼Œä»è€Œæå¤§åœ°æé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§ ä½¿ç”¨æ¡¥æ¥æ¨¡å¼æ›¿ä»£å¤šå±‚ç»§æ‰¿æ–¹æ¡ˆï¼Œå¯ä»¥å‡å°‘å­ç±»çš„ä¸ªæ•°ï¼Œé™ä½ç³»ç»Ÿçš„ç®¡ç†å’Œç»´æŠ¤æˆæœ¬ æ¡¥æ¥æ¨¡å¼æé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ï¼Œåœ¨ä¸¤ä¸ªç»´åº¦ä¸­ä»»æ„æ‰©å±•ä¸€ä¸ªç»´åº¦ï¼Œéƒ½ä¸éœ€è¦ä¿®æ”¹åŸæœ‰ç³»ç»Ÿï¼Œç¬¦åˆå¼€é—­åŸåˆ™ ç¼ºç‚¹ æ¡¥æ¥æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nå¢åŠ äº†ç³»ç»Ÿçš„ç†è§£å’Œè®¾è®¡éš¾åº¦ï¼Œç”±äºèšåˆå…³è”å…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…é’ˆå¯¹æŠ½è±¡è¿›è¡Œè®¾è®¡å’Œç¼–ç¨‹ æ¡¥æ¥æ¨¡å¼è¦æ±‚æ­£ç¡®è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´æœ‰ä¸€å®šçš„å±€é™æ€§ é€‚ç”¨åœºæ™¯ æ¡¥æ¥æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nå¯¹äºé‚£äº›ä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿æˆ–å› ä¸ºå¤šå±‚æ¬¡ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ çš„ç³»ç»Ÿï¼Œæ¡¥æ¥æ¨¡å¼å°¤ä¸ºé€‚ç”¨ ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä¸”è¿™ä¸¤ä¸ªæˆ–å¤šä¸ªç»´åº¦éƒ½éœ€è¦ç‹¬ç«‹è¿›è¡Œæ‰©å±• æºç  æ¡¥æ¥æ¨¡å¼æ˜¯è®¾è®¡ Java è™šæ‹Ÿæœºå’Œå®ç° JDBC ç­‰é©±åŠ¨ç¨‹åºçš„æ ¸å¿ƒæ¨¡å¼ä¹‹ä¸€ï¼Œåº”ç”¨è¾ƒä¸ºå¹¿æ³›ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/bridge-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - æ¡¥æ¥æ¨¡å¼"},{"content":"ä»£ç†è®¾è®¡æ¨¡å¼ï¼ˆProxy Design Patternï¼‰æŒ‡çš„æ˜¯ï¼Œåœ¨ä¸æ”¹å˜åŸå§‹ç±»ï¼ˆæˆ–å«è¢«ä»£ç†ç±»ï¼‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å¼•å…¥ä»£ç†ç±»æ¥ç»™åŸå§‹ç±»é™„åŠ åŠŸèƒ½ï¼Œå³æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ã€‚\nç®€ä»‹ æ¦‚å¿µ ä¸¾ä¸ªç®€å•çš„ä¾‹è¯´æ˜ä»£ç†æ¨¡å¼å°±æ˜¯ï¼šå‡å¦‚ç°åœ¨éœ€è¦ä¹°ä¸€è¾†äºŒæ‰‹è½¦ï¼Œå¯ä»¥è‡ªå·±å»æ‰¾è½¦æºã€åšè´¨é‡æ£€æµ‹ç­‰ä¸€ç³»åˆ—è½¦è¾†è¿‡æˆ·çš„æµç¨‹ï¼Œä½†æ˜¯è¿™å®åœ¨å¤ªæµªè´¹æ—¶é—´å’Œç²¾åŠ›äº†ï¼Œå…¶å®å¯ä»¥é€šè¿‡æ‰¾ä¸­ä»‹çš„æ–¹å¼ï¼ŒåŒæ ·ä¼šæ‰¾è½¦æºã€åšè´¨é‡æ£€æµ‹ç­‰ä¸€ç³»åˆ—è½¦è¾†è¿‡æˆ·çš„æµç¨‹ï¼Œä½†æ˜¯è¿™æ ·è‡ªå·±å°±åªéœ€è¦é€‰è½¦ã€ä»˜é’±å³å¯ã€‚\nåˆ†ç±» åœ¨å®é™…å¼€å‘ä¸­ï¼Œä»£ç†æ¨¡å¼æ ¹æ®å…¶ç›®çš„å’Œå®ç°æ–¹å¼çš„ä¸åŒå¯åˆ†ä¸ºå¾ˆå¤šç§ç±»ï¼Œå¦‚ä¸‹æ˜¯å¸¸ç”¨çš„å‡ ç§ä»£ç†æ¨¡å¼ï¼š\nè¿œç¨‹ä»£ç†ï¼šä¸ºä¸€ä¸ªä½äºä¸åŒåœ°å€ç©ºé—´çš„å¯¹è±¡æä¾›ä¸€ä¸ªæœ¬åœ°çš„ä»£ç†å¯¹è±¡ï¼Œè¿™ä¸ªä¸åŒçš„åœ°å€ç©ºé—´å¯ä»¥åœ¨åŒä¸€å°ä¸»æœºä¸­ï¼Œä¹Ÿå¯ä»¥åœ¨å¦ä¸€å°ä¸»æœºä¸­ è™šæ‹Ÿä»£ç†ï¼šå¦‚æœéœ€è¦åˆ›å»ºä¸€ä¸ªèµ„æºæ¶ˆè€—è¾ƒå¤§çš„å¯¹è±¡ï¼Œå¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªæ¶ˆè€—ç›¸å¯¹è¾ƒå°çš„å¯¹è±¡æ¥è¡¨ç¤ºï¼ŒçœŸå®å¯¹è±¡åªæœ‰éœ€è¦æ—¶æ‰ä¼šè¢«çœŸæ­£åˆ›å»º ä¿æŠ¤ä»£ç†ï¼šæ§åˆ¶å¯¹ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œå¯ä»¥ç»™ä¸åŒç”¨æˆ·æä¾›ä¸åŒçº§åˆ«çš„ä½¿ç”¨æƒé™ ç¼“å†²ä»£ç†ï¼šä¸ºæŸä¸€ä¸ªç›®æ ‡æ“ä½œçš„ç»“æœæä¾›ä¸´æ—¶çš„å­˜å‚¨ç©ºé—´ï¼Œä»¥ä¾¿å¤šä¸ªå®¢æˆ·ç«¯å¯ä»¥å…±äº«è¿™äº›ç»“æœ æ™ºèƒ½å¼•ç”¨ä»£ç†ï¼šå½“ä¸€ä¸ªå¯¹è±¡è¢«å¼•ç”¨æ—¶ï¼Œæä¾›ä¸€äº›é¢å¤–çš„æ“ä½œï¼Œä¾‹å¦‚å°†å¯¹è±¡è¢«è°ƒç”¨çš„æ¬¡æ•°è®°å½•ä¸‹æ¥ç­‰ åŠŸèƒ½åˆ†ç±» è¿œç¨‹ä»£ç† è¿œç¨‹ä»£ç†æ˜¯ä¸€ç§å¸¸è§çš„ä»£ç†æ¨¡å¼ï¼Œè¿œç¨‹ä»£ç†å¯¹è±¡æ‰¿æ‹…äº†å¤§éƒ¨åˆ†çš„ç½‘ç»œé€šä¿¡å·¥ä½œï¼Œä½¿å¾—å®¢æˆ·ç«¯ç¨‹åºå¯ä»¥è®¿é—®åœ¨è¿œç¨‹ä¸»æœºä¸Šçš„å¯¹è±¡ã€‚\nå¯¹äºå®¢æˆ·ç«¯è€Œè¨€ï¼Œæ— éœ€å…³å¿ƒå®ç°å…·ä½“ä¸šåŠ¡çš„æ˜¯è°ï¼Œåªéœ€è¦æŒ‰ç…§æœåŠ¡æ¥å£æ‰€å®šä¹‰çš„æ–¹æ³•ç›´æ¥ä¸æœ¬åœ°ä¸»æœºä¸­çš„ä»£ç†å¯¹è±¡äº¤äº’å³å¯ã€‚\nåœ¨ Java è¯­è¨€ä¸­ï¼Œå¯ä»¥é€šè¿‡ RMI(Remote Method Invocation, è¿œç¨‹æ–¹æ³•è°ƒç”¨) æœºåˆ¶æ¥å®ç°è¿œç¨‹ä»£ç†ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\næœåŠ¡ç«¯éƒ¨åˆ†ä»£ç†\nimport java.net.MalformedURLException; import java.rmi.Naming; import java.rmi.Remote; import java.rmi.RemoteException; import java.rmi.registry.LocateRegistry; import java.rmi.server.UnicastRemoteObject; // è¿œç¨‹æ¥å£ public interface IMyRemote extends Remote { String SayHello() throws RemoteException; } // è¿œç¨‹æ¥å£å®ç° - è¿œç¨‹å¯¹è±¡ public class MyRemoteImpl extends UnicastRemoteObject implements IMyRemote { public MyRemoteImpl() throws RemoteException { super(); } @Override public String SayHello() throws RemoteException { return \u0026quot;Server says, 'Hey'\u0026quot;; } public static void main(String[] args) throws RemoteException, MalformedURLException { IMyRemote service = new MyRemoteImpl(); // å¯åŠ¨æœ¬åœ° RMI æœåŠ¡ï¼Œé»˜è®¤ç«¯å£æ˜¯ 1099 LocateRegistry.createRegistry(1099); // æ³¨å†Œè¿œç¨‹å¯¹è±¡ Naming.rebind(\u0026quot;rmi://localhost:1099/RemoteHello\u0026quot;, service); } } å®¢æˆ·ç«¯éƒ¨åˆ†ä»£ç†\nimport java.net.MalformedURLException; import java.rmi.Naming; import java.rmi.NotBoundException; import java.rmi.RemoteException; public class MyRemoteClient { private void go() throws RemoteException, NotBoundException, MalformedURLException { IMyRemote service = (IMyRemote) Naming.lookup(\u0026quot;rmi://localhost:1099/RemoteHello\u0026quot;); System.out.println(service.sayHello()); } public static void main(String[] args) throws RemoteException, NotBoundException, MalformedURLException { new MyRemoteClients().go(); } } è™šæ‹Ÿä»£ç† è™šæ‹Ÿä»£ç†ä¼šåœ¨çœŸå®å¯¹è±¡åˆ›å»ºæˆåŠŸä¹‹å‰æ‰®æ¼”å…¶æ›¿èº«ï¼Œè€Œå½“çœŸå®å¯¹è±¡åˆ›å»ºæˆåŠŸä¹‹åï¼Œè™šæ‹Ÿä»£ç†å†å°†ç”¨æˆ·çš„è¯·æ±‚è½¬å‘ç»™çœŸå®å¯¹è±¡ã€‚\nä½¿ç”¨è™šæ‹Ÿä»£ç†çš„åœºæ™¯éå¸¸å®¹æ˜“ç†è§£ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š\nç”±äºå¯¹è±¡æœ¬èº«çš„å¤æ‚æ€§æˆ–è€…ç½‘ç»œç­‰åŸå› å¯¼è‡´ä¸€ä¸ªå¯¹è±¡éœ€è¦è¾ƒé•¿çš„åŠ è½½æ—¶é—´ï¼Œæ­¤æ—¶å¯ä»¥ç”¨ä¸€ä¸ªåŠ è½½æ—¶é—´ç›¸å¯¹è¾ƒçŸ­çš„ä»£ç†å¯¹è±¡æ¥ä»£è¡¨çœŸå®å¯¹è±¡ï¼Œé€šå¸¸åœ¨å®ç°æ—¶ç»“åˆå¤šçº¿ç¨‹ä½¿ç”¨ å½“ä¸€ä¸ªå¯¹è±¡çš„åŠ è½½ååˆ†è€—è´¹ç³»ç»Ÿèµ„æºçš„æ—¶å€™ï¼Œä¹Ÿéå¸¸é€‚åˆä½¿ç”¨è™šæ‹Ÿä»£ç† å…·ä½“å®ç° ä»£ç†æ¨¡å¼çš„å…·ä½“å®ç°ä»è¿è¡Œæ—¶çš„è§’åº¦å¯ä»¥åˆ†æˆä¸¤ç§ï¼šä¸€ç§æ˜¯é™æ€ä»£ç†ï¼Œå³åœ¨ä»£ç è¿è¡Œä¹‹å‰å°±å·²ç»ç¡®å®šå¥½ä»£ç†å…³ç³»ï¼›å¦ä¸€ç§æ˜¯åŠ¨æ€ä»£ç†ï¼Œå¯ä»¥åœ¨ä»£ç è¿è¡Œæ—¶æ‰å†³å®šå¦‚ä½•å®ç°ä»£ç†å…³ç³»ã€‚\né™æ€ä»£ç† é™æ€ä»£ç†æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„å®ç°æ–¹å¼ï¼Œåœ¨è¿™ç§å®ç°æ–¹å¼ä¸­ï¼Œä»£ç†ç±»æ‰€å®ç°çš„æ¥å£å’Œæ‰€ä»£ç†çš„æ–¹æ³•éƒ½è¢«å›ºå®šï¼Œéœ€è¦åœ¨ç¼–è¯‘æœŸå°±é¢„å…ˆå¯¹åŸå§‹ç±»ç¼–å†™ä»£ç†ç±»ã€‚\nåŸºäºæ¥å£ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå‚è€ƒåŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹çš„è®¾è®¡æ€æƒ³ï¼Œä¸ºäº†è®©ä»£ç çš„æ”¹åŠ¨å°½é‡å°‘ï¼Œä»£ç†ç±»å’ŒåŸå§‹ç±»åº”è¯¥å®ç°åŒæ ·çš„æ¥å£ã€‚\nå¦‚ä¸‹æ˜¯ä½¿ç”¨å›¾ç‰‡å±•ç¤ºä½œä¸ºä¾‹å­çš„ä»£ç ç¤ºä¾‹ï¼š\nå›¾ç‰‡ Image æ¥å£ï¼šæè¿°å›¾ç‰‡å…·æœ‰çš„è¡Œä¸º\npublic interface Image { void display(); } å±•ç¤ºå›¾ç‰‡ ShowImage ç±»ï¼šå®é™…çš„å›¾ç‰‡åŸå§‹ç±»\npublic class ShowImage implements Image { public ShowImage() {} @Override public void display() { System.out.println(\u0026quot;ShowImage display!\u0026quot;); } } ä»£ç†å›¾ç‰‡ ProxyImage ç±»ï¼šåœ¨çœŸå®å›¾ç‰‡å‰åŒ…è£…ä¸€å±‚çš„ä»£ç†ç±»\npublic class ProxyImage implements Image { // é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼ private ShowImage showImage; public ProxyImage(ShowImage showImage) { this.showImage = showImage; } @Override public void display() { System.out.println(\u0026quot;ProxyImage display start!\u0026quot;); this.showImage.display(); System.out.println(\u0026quot;ProxyImage display end!\u0026quot;); } } åŸºäºç»§æ‰¿ å¦‚æœåŸå§‹ç±»å¹¶æ²¡æœ‰å®ç°æ¥å£ï¼Œå¹¶ä¸”åŸå§‹ç±»ä»£ç ç”±å…¶ä»–äººå¼€å‘ç»´æŠ¤ï¼Œå¯ä»¥é€šè¿‡ä»£ç†ç±»ç»§æ‰¿åŸå§‹ç±»çš„æ–¹æ³•æ¥å®ç°ä»£ç†æ¨¡å¼ã€‚\nå‡è®¾ä¸Šè¿°å±•ç¤ºå›¾ç‰‡ ShowImage ç±»æ²¡æœ‰å®ç°æ¥å£ï¼Œå¯ä»¥é‡æ–°å®šä¹‰ä»£ç†å›¾ç‰‡ ProxyImage ç±»å¦‚ä¸‹ï¼š\npublic class ProxyImage extends ShowImage { public ProxyImage() {} @Override public void display() { System.out.println(\u0026quot;ProxyImage display start!\u0026quot;); super.display(); System.out.println(\u0026quot;ProxyImage display end!\u0026quot;); } } åŠ¨æ€ä»£ç† é™æ€ä»£ç†éœ€è¦é’ˆå¯¹æ¯ä¸ªç±»éƒ½åˆ›å»ºä¸€ä¸ªä»£ç†ç±»ï¼Œå¹¶ä¸”æ¯ä¸ªä»£ç†ç±»ä¸­çš„ä»£ç éƒ½æœ‰ç‚¹åƒæ¨¡æ¿å¼çš„â€œé‡å¤â€ä»£ç ï¼Œå¢åŠ äº†å¼€å‘æˆæœ¬å’Œç»´æŠ¤æˆæœ¬ã€‚\nå¯¹äºé™æ€ä»£ç†å­˜åœ¨çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡åŠ¨æ€ä»£ç†æ¥è§£å†³ã€‚\nåŠ¨æ€ä»£ç†çš„åŸç†æ˜¯ï¼šä¸äº‹å…ˆä¸ºæ¯ä¸ªåŸå§‹ç±»ç¼–å†™ä»£ç†ç±»ï¼Œè€Œæ˜¯åœ¨ä»£ç è¿è¡Œçš„æ—¶å€™åŠ¨æ€åœ°åˆ›å»ºåŸå§‹ç±»å¯¹åº”çš„ä»£ç†ç±»ï¼Œç„¶ååœ¨ç³»ç»Ÿä¸­ç”¨ä»£ç†ç±»æ›¿æ¢æ‰åŸå§‹ç±»ã€‚\nåœ¨ Java ä¸­ï¼Œä¸»è¦å°±æ˜¯åˆ©ç”¨åå°„æœºåˆ¶åœ¨è¿è¡Œæ—¶åˆ›å»ºä»£ç†ç±»ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\n// å®šä¹‰æ¥å£ï¼Œæè¿°è¡Œä¸º public interface Subject { void hello(String param); } // å®ç°æ¥å£ public class SubjectImpl implements Subject { public SubjectImpl() {} @Override public void hello(String param) { System.out.println(\u0026quot;hello \u0026quot; + param); } } // åˆ›å»ºä»£ç†ç±» public class SubjectProxy implements InvocationHandler { private Subject subject; public SubjectProxy(Subject subject) { this.subject = subject; } @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { System.out.println(\u0026quot;----- Start -----\u0026quot;); Object invoke = method.invoke(subject, args); System.out.println(\u0026quot;----- End -----\u0026quot;); return invoke; } } // å®é™…è°ƒç”¨ public class Main { public static void main(String[] args) { Subject subject = new SubjectImpl(); InvocationHandler subjectProxy = new SubjectProxy(subject); // ä»£ç†ç±»çš„ç±»åŠ è½½å™¨ // è¢«ä»£ç†ç±»çš„æ¥å£ï¼Œå¦‚æœæœ‰å¤šä¸ªå°±æ˜¯ä»¥æ•°ç»„å½¢å¼ä¼ å…¥ // ä»£ç†ç±»å®ä¾‹ Subject proxyInstance = (Subject) Proxy.newProxyInstance( subjectProxy.getClass().getClassLoader(), subject.getClass().getInterfaces(), subjectProxy ); // æ‰§è¡Œä»£ç†æ–¹æ³• proxyInstance.hello(\u0026quot;world\u0026quot;); } } å¸¸è§çš„ Java åŠ¨æ€ä»£ç†å®ç°æ–¹å¼æœ‰ JDK ä»£ç†ã€CGLib ä»£ç†ã€‚åŸºäº JDK çš„åŠ¨æ€ä»£ç†å¿…é¡»å®ç°ä¸€ä¸ªæ¥å£ï¼Œè€Œ CGLib åŠ¨æ€ä»£ç†æ²¡æœ‰è¿™ä¸ªé™åˆ¶ï¼Œæ˜¯å¦ä¸€ç§ä¸é”™çš„é€‰æ‹©ã€‚\næ€»ç»“ ä¼˜ç‚¹ ä»£ç†æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nåè°ƒè°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³»ç»Ÿçš„è€¦åˆï¼Œæ»¡è¶³è¿ªç±³ç‰¹åŸåˆ™ å®¢æˆ·ç«¯å¯ä»¥é’ˆå¯¹æŠ½è±¡ä¸»é¢˜è§’è‰²è¿›è¡Œç¼–ç¨‹ï¼Œå¢åŠ å’Œæ›´æ¢ä»£ç†ç±»æ— éœ€ä¿®æ”¹æºä»£ç ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ å…¬å…±çš„äº‹åŠ¡ç”±ä»£ç†æ¥å®Œæˆï¼Œä½¿å¾—çœŸå®å¤„ç†çš„ä¸šåŠ¡æ›´åŠ çº¯ç²¹ï¼Œä¸å†å»å…³æ³¨å…¬å…±ä¸šåŠ¡ï¼Œè€Œå…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•æ—¶ä¹Ÿå˜å¾—æ›´åŠ é›†ä¸­å’Œæ–¹ä¾¿ ç¼ºç‚¹ ä»£ç†æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nåœ¨å®¢æˆ·ç«¯å’ŒçœŸå®ä¸»é¢˜ä¹‹é—´å¢åŠ ä»£ç†å¯¹è±¡ï¼Œæœ‰äº›ç±»å‹çš„ä»£ç†æ¨¡å¼å¯èƒ½ä¼šé€ æˆè¯·æ±‚çš„å¤„ç†é€Ÿåº¦å˜æ…¢ å®ç°ä»£ç†æ¨¡å¼éœ€è¦é¢å¤–çš„æˆæœ¬ï¼Œæœ‰äº›ä»£ç†æ¨¡å¼çš„å®ç°éå¸¸å¤æ‚ é€‚ç”¨åœºæ™¯ ä»£ç†æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nå½“å®¢æˆ·ç«¯å¯¹è±¡éœ€è¦è®¿é—®è¿œç¨‹ä¸»æœºä¸­çš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿œç¨‹ä»£ç† å½“éœ€è¦ç”¨ä¸€ä¸ªæ¶ˆè€—èµ„æºè¾ƒå°‘çš„å¯¹è±¡æ¥ä»£è¡¨ä¸€ä¸ªæ¶ˆè€—èµ„æºè¾ƒå¤šçš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è™šæ‹Ÿä»£ç† å½“éœ€è¦æ§åˆ¶ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œä¸ºä¸åŒç”¨æˆ·æä¾›ä¸åŒçº§åˆ«çš„çš„è®¿é—®æƒé™æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¿æŠ¤ä»£ç† å½“éœ€è¦ä¸ºæŸä¸€ä¸ªè¢«é¢‘ç¹è®¿é—®çš„æ“ä½œç»“æœæä¾›ä¸€ä¸ªä¸´æ—¶å­˜å‚¨ç©ºé—´ï¼Œä»¥ä¾›å¤šä¸ªå®¢æˆ·ç«¯å…±äº«è®¿é—®è¿™äº›ç»“æœæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç¼“å†²ä»£ç† å½“éœ€è¦ä¸ºä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ï¼ˆå¼•ç”¨ï¼‰æä¾›ä¸€äº›é¢å¤–çš„æ“ä½œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ™ºèƒ½å¼•ç”¨ä»£ç† æºç  åœ¨ JDK ä¸­ï¼Œæä¾›äº† java.lang.reflect.Proxy æ”¯æŒåˆ›å»ºåŠ¨æ€ä»£ç†ç±»ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/proxy-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - ä»£ç†æ¨¡å¼"},{"content":"åŸå‹æ¨¡å¼æ˜¯åˆ›å»ºå‹æ¨¡å¼çš„ä¸€ç§ï¼Œå…¶ç‰¹ç‚¹åœ¨äºé€šè¿‡ å¤åˆ¶ ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®ä¾‹æ¥è¿”å›æ–°çš„å®ä¾‹,è€Œä¸æ˜¯æ–°å»ºå®ä¾‹ã€‚\nç®€ä»‹ å¯¹äºå¤§éƒ¨åˆ†ç³»ç»Ÿæ¥è¯´ï¼Œåˆ›å»ºå¯¹è±¡åŒ…æ‹¬ç”³è¯·å†…å­˜ã€ç»™æˆå‘˜å˜é‡èµ‹å€¼ç­‰è¿‡ç¨‹ï¼Œè¿™äº›æ“ä½œè€—è´¹çš„æ—¶é—´åŸºæœ¬å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚\nå¦‚æœå¯¹è±¡ä¸­çš„æ•°æ®éœ€è¦ç»è¿‡å¤æ‚çš„è®¡ç®—æ‰èƒ½å¾—åˆ°ï¼ˆæ¯”å¦‚æ’åºã€è®¡ç®—å“ˆå¸Œå€¼ï¼‰ï¼Œæˆ–è€…éœ€è¦ä» RPCã€ç½‘ç»œã€æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿç­‰éå¸¸æ…¢é€Ÿçš„ IO ä¸­è¯»å–ï¼Œè¿™å…¶ä¸­è€—è´¹çš„æ—¶é—´æœ‰æ—¶æ˜¯æ— æ³•å®¹å¿çš„ã€‚\nå¦‚æœå¯¹è±¡çš„åˆ›å»ºæˆæœ¬æ¯”è¾ƒå¤§ï¼Œè€ŒåŒä¸€ä¸ªç±»çš„ä¸åŒå¯¹è±¡ä¹‹é—´å·®åˆ«ä¸å¤§ï¼ˆå¦‚å¤§éƒ¨åˆ†å­—æ®µéƒ½ç›¸åŒï¼‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥åˆ©ç”¨å¯¹å·²æœ‰å¯¹è±¡ï¼ˆåŸå‹ï¼‰è¿›è¡Œå¤åˆ¶çš„æ–¹å¼æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œä»¥è¾¾åˆ°èŠ‚çœåˆ›å»ºæ—¶é—´çš„ç›®çš„ã€‚\nè¿™ç§åŸºäºåŸå‹æ¥åˆ›å»ºå¯¹è±¡çš„æ–¹å¼å°±å«ä½œåŸå‹è®¾è®¡æ¨¡å¼ï¼ˆPrototype Design Patternï¼‰ã€‚\nå…·ä½“å®ç° åŸå‹æ¨¡å¼å…¶æ ¸å¿ƒå°±æ˜¯æ‹·è´ï¼Œè€Œåœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ‹·è´æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šæ·±æ‹·è´å’Œæµ…æ‹·è´ã€‚\næµ…æ‹·è´ æµ…æ‹·è´åªä¼šå¤åˆ¶å¯¹è±¡ä¸­åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œä¸ä¼šé€’å½’åœ°å¤åˆ¶å¼•ç”¨å¯¹è±¡ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡çš„å¼•ç”¨å¯¹è±¡â€¦â€¦\nå¯¹äºæµ…æ‹·è´æ¥è¯´ï¼Œå¦‚æœè¦æ‹·è´çš„å¯¹è±¡æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œæµ…æ‹·è´å…±äº«ä¸å¯å˜å¯¹è±¡æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯å¯¹äºå¯å˜å¯¹è±¡æ¥è¯´ï¼Œæµ…æ‹·è´å¾—åˆ°çš„å¯¹è±¡å’ŒåŸå§‹å¯¹è±¡ä¼šå…±äº«éƒ¨åˆ†æ•°æ®ï¼Œå°±æœ‰å¯èƒ½å‡ºç°æ•°æ®è¢«ä¿®æ”¹çš„é£é™©ã€‚\næ·±æ‹·è´ å’Œæµ…æ‹·è´ä¸åŒï¼Œæ·±æ‹·è´å¾—åˆ°çš„æ˜¯ä¸€ä»½å®Œå®Œå…¨å…¨ç‹¬ç«‹çš„å¯¹è±¡ï¼Œç›¸æ¯”æµ…æ‹·è´ï¼Œæ·±æ‹·è´æ›´åŠ è€—æ—¶ã€æ›´åŠ è€—å†…å­˜ç©ºé—´ã€‚\nå¸¸è§çš„æ·±æ‹·è´æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šé€’å½’æµ…æ‹·è´å¯¹è±¡ç›´åˆ°åªåŒ…å«åŸºæœ¬æ•°æ®ç±»å‹æ•°æ®ï¼›åºåˆ—åŒ–å¯¹è±¡å†ååºåˆ—åŒ–æˆæ–°çš„å¯¹è±¡ã€‚å®é™…å¼€å‘ä¸­æ›´æ¨èä½¿ç”¨åè€…ã€‚\né€’å½’æµ…æ‹·è´çš„ Java ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class DeepProtoType implements Cloneable { // String ç±»å‹ public String name; // å¼•ç”¨æ•°æ®ç±»å‹ public DeepCloneableTarget deepCloneableTarget; public DeepProtoType() { super(); } @Override protected Object clone() throws CloneNotSupportedException { Object deep = null; // è¿™é‡Œå®Œæˆå¯¹åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå±æ€§ï¼‰å’Œ String ç±»å‹çš„æ‹·è´ deep = super.clone(); // å¯¹å¼•ç”¨æ•°æ®ç±»å‹çš„å±æ€§è¿›è¡Œå•ç‹¬å¤„ç†ï¼Œå¦‚æœæœ‰å¤šå±æ€§ï¼Œéœ€è¦ä¸€ä¸€å¤„ç† DeepProtoType deepProtoType = (DeepProtoType)deep; deepProtoType.deepCloneableTarget = (DeepCloneableTarget)deepCloneableTarget.clone(); return deepProtoType; } } åºåˆ—åŒ–å¯¹è±¡çš„ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class DeepProtoType implements Serializable { // String ç±»å‹ public String name; // å¼•ç”¨æ•°æ®ç±»å‹ public DeepCloneableTarget deepCloneableTarget; public DeepProtoType() { super(); } public Object deepClone() { // åˆ›å»ºæµå¯¹è±¡ ByteArrayOutputStream bos = null; ObjectOutputStream oos = null; ByteArrayInputStream bis = null; ObjectInputStream ois = null; try { // åºåˆ—åŒ– bos = new ByteArrayOutputStream(); oos = new ObjectOutputStream(bos); // å½“å‰è¿™ä¸ªå¯¹è±¡ä»¥å¯¹è±¡æµçš„æ–¹å¼è¾“å‡º oos.writeObject(this); // ååºåˆ—åŒ– bis = new ByteArrayInputStream(bos.toByteArray()); ois = new ObjectInputStream(bis); DeepProtoType deepProtoType = (DeepProtoType) ois.writeObject(); return deepProtoType; } catch (Exception e) { e.printStackTrace(); return null; } finally { try { bos.close(); oos.close(); bis.close(); ois.close(); } catch (Exception e2) { System.out.println(e2.getMessage()); } } } } æ€»ç»“ ä¼˜ç‚¹ åŸå‹æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nå½“åˆ›å»ºæ–°çš„å¯¹è±¡å®ä¾‹è¾ƒä¸ºå¤æ‚æ—¶ï¼Œä½¿ç”¨åŸå‹æ¨¡å¼å¯ä»¥ç®€åŒ–å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œé€šè¿‡å¤åˆ¶ä¸€ä¸ªå·²æœ‰å®ä¾‹å¯ä»¥æé«˜æ–°å®ä¾‹çš„åˆ›å»ºæ•ˆç‡ å¯ä»¥ä½¿ç”¨æ·±æ‹·è´æ–¹å¼ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œä½¿ç”¨åŸå‹æ¨¡å¼å°†å¯¹è±¡å¤åˆ¶ä¸€ä»½ï¼Œå¹¶å°†å…¶çŠ¶æ€ä¿å­˜èµ·æ¥ åŸå‹æ¨¡å¼æä¾›äº†ç®€åŒ–çš„åˆ›å»ºç»“æ„ ç¼ºç‚¹ åŸå‹æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\néœ€è¦ä¸ºæ¯ä¸€ä¸ªç±»éƒ½é…ç½®ä¸€ä¸ªæ‹·è´æ–¹æ³• æ‹·è´æ–¹æ³•ä½äºç±»çš„å†…éƒ¨ï¼Œå½“å¯¹å·²æœ‰ç±»è¿›è¡Œæ”¹é€ çš„æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹ä»£ç ï¼Œè¿èƒŒäº†å¼€é—­åŸåˆ™ å½“å®ç°æ·±æ‹·è´çš„æ—¶å€™ï¼Œéœ€è¦ç¼–å†™è¾ƒä¸ºå¤æ‚çš„ä»£ç ï¼Œè€Œä¸”å½“å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤šé‡åµŒå¥—å¼•ç”¨æ—¶ï¼Œä¸ºäº†å®ç°æ·±æ‹·è´ï¼Œæ¯ä¸€å±‚å¯¹è±¡å¯¹åº”çš„ç±»éƒ½å¿…é¡»æ”¯æŒæ·±æ‹·è´ é€‚ç”¨åœºæ™¯ åŸå‹æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nåˆ›å»ºå¯¹è±¡çš„æˆæœ¬è¾ƒå¤§ï¼Œæ¯”å¦‚åˆå§‹åŒ–æ—¶é—´é•¿ï¼Œå ç”¨ CPU å¤ªå¤šï¼Œæˆ–è€…å ç”¨ç½‘ç»œèµ„æºå¤ªå¤šç­‰ å¦‚æœç³»ç»Ÿè¦ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œè€Œå¯¹è±¡çš„çŠ¶æ€å˜åŒ–å¾ˆå°ï¼Œæˆ–è€…å¯¹è±¡æœ¬èº«å ç”¨å†…å­˜è¾ƒå°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼é…åˆå¤‡å¿˜å½•æ¨¡å¼æ¥å®ç° å¦‚æœäº§ç”Ÿä¸€ä¸ªå¯¹è±¡éœ€è¦éå¸¸ç¹ççš„æ•°æ®å‡†å¤‡å’Œè®¿é—®æƒé™ï¼Œéœ€è¦æé«˜æƒé™æˆ–æé«˜å®‰å…¨æ€§ æºç  åœ¨ JDK ä¸­ï¼Œå¯¹è‡ªå®šä¹‰çš„ç±»é‡å†™ clone() æ–¹æ³•å°±æ˜¯å…¸å‹çš„åŸå‹æ¨¡å¼ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/prototype-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - åŸå‹æ¨¡å¼"},{"content":"é¡¾åæ€ä¹‰ï¼Œå¦‚ä½•å»ºæˆ¿å­ä¸€æ ·ï¼Œå»ºé€ è€…æ¨¡å¼å¯ä»¥å°†å¤æ‚å¯¹è±¡çš„å»ºé€ è¿‡ç¨‹æŠ½è±¡å‡ºæ¥ï¼Œä½¿ç”¨ç›¸åŒçš„æ„å»ºè¿‡ç¨‹å¯ä»¥æ„é€ å‡ºä¸åŒè¡¨ç°çš„å¯¹è±¡ã€‚\nç®€ä»‹ æ¦‚å¿µ å»ºé€ è€…è®¾è®¡æ¨¡å¼ï¼ˆBuilder Design Patternï¼‰åˆå«ä½œç”Ÿæˆå™¨æ¨¡å¼ï¼Œæ˜¯ä¸€ç§å¯¹è±¡æ„å»ºæ¨¡å¼ï¼Œå…¶æ ¸å¿ƒåœ¨äºå°†äº§å“å’Œäº§å“å»ºé€ è¿‡ç¨‹è§£è€¦ã€‚\nå»ºè®¾è€…æ¨¡å¼å…è®¸ç”¨æˆ·åªé€šè¿‡æŒ‡å®šå¤æ‚å¯¹è±¡çš„ç±»å‹å’Œå†…å®¹å°±å¯ä»¥ä¸€æ­¥ä¸€æ­¥åœ°æ„å»ºå‡ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹å½“ä¸­ï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“å†…éƒ¨çš„å…·ä½“æ„å»ºç»†èŠ‚ã€‚\nå› æ­¤ï¼Œå»ºé€ è€…æ¨¡å¼ç‰¹åˆ«é€‚åˆç”¨äºæ„å»ºå…·æœ‰å¤æ‚å†…éƒ¨ç»“æ„çš„å¯¹è±¡ï¼Œæˆ–è€…æ˜¯éœ€è¦ç”Ÿæˆå†…éƒ¨æœ¬èº«ç›¸äº’ä¾èµ–çš„å¯¹è±¡ã€‚\nä¸å·¥å‚æ¨¡å¼çš„åŒºåˆ« å·¥å‚æ¨¡å¼æ³¨é‡çš„æ˜¯æ•´ä½“å¯¹è±¡çš„åˆ›å»ºæ–¹æ³•ï¼Œè€Œå»ºé€ è€…æ¨¡å¼æ³¨é‡çš„æ˜¯å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œåˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹æ–¹æ³•å¯ä»¥åœ¨åˆ›å»ºæ—¶è‡ªç”±è°ƒç”¨ã€‚\nå®ƒä»¬çš„åŒºåˆ«è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„ç»å…¸ä¾‹å­è§£é‡Šï¼š\né¡¾å®¢èµ°è¿›ä¸€å®¶é¤å…ç‚¹é¤ï¼Œæ ¹æ®ç”¨æˆ·ä¸åŒçš„é€‰æ‹©ï¼Œå¯ä»¥åˆ©ç”¨å·¥å‚æ¨¡å¼æ¥åˆ¶ä½œä¸åŒçš„é£Ÿç‰©ï¼Œæ¯”å¦‚æŠ«è¨ã€æ±‰å ¡ã€æ²™æ‹‰ã€‚å¯¹äºæŠ«è¨æ¥è¯´ï¼Œç”¨æˆ·åˆæœ‰å„ç§é…æ–™å¯ä»¥å®šåˆ¶ï¼Œæ¯”å¦‚å¥¶é…ªã€è¥¿çº¢æŸ¿ã€èµ·å¸ï¼Œå¯ä»¥é€šè¿‡å»ºé€ è€…æ¨¡å¼æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„ä¸åŒé…æ–™æ¥åˆ¶ä½œæŠ«è¨ã€‚\nå®ç°æ–¹å¼ ä¼ ç»Ÿçš„å»ºé€ è€…æ¨¡å¼ä¼šåŒ…æ‹¬ä»¥ä¸‹ 4 éƒ¨åˆ†ï¼š\nå»ºé€ è€… Builder æŠ½è±¡ç±»ï¼šæ„å»ºå¯¹è±¡çš„æŠ½è±¡ç±»ï¼ŒåŒ…æ‹¬ buildPartXï¼ˆï¼‰ ç›¸å…³çš„æ„å»ºå¯¹è±¡æ–¹æ³•ï¼Œä»¥åŠ getResult() è¿™æ ·è·å–å®é™…å¯¹è±¡çš„æ–¹æ³• å»ºé€ è€… ConcreteBuilder å…·ä½“ç±»ï¼šç»§æ‰¿è‡ª Builder æŠ½è±¡ç±»ï¼Œå®Œå–„åŠæ„å»ºè‡ªå·±ç‰¹æ®Šçš„ buildPartX() æ–¹æ³• æŒ‡æŒ¥è€… Director å…·ä½“ç±»ï¼šä¸å®¢æˆ·ç«¯å¯¹æ¥ï¼Œç„¶åæ ¹æ®éœ€è¦åˆ›å»ºå‡ºæ‰€éœ€çš„å¯¹è±¡ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªä»£ç† äº§å“ Product å…·ä½“ç±»ï¼šå®é™…è¢«æ„å»ºå‡ºæ¥çš„å®é™…äº§å“ç±» ç®€å•çš„ Builder æŠ½è±¡ç±»ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic abstract class Builder { abstract void buildPartA(); abstract void buildPartB(); abstract Product createProduct(); } å…·ä½“çš„ ConcreteBuilder ç±»ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class ConcreteBuilder extends Builder { private Product product = new Product(); public void buildPartA() { product.setPartA(\u0026quot;A\u0026quot;); } public void buildPartB() { product.setPartB(\u0026quot;B\u0026quot;); } public Product createProduct() { return product; } } äº§å“ Product ç±»ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class Product { private String partA; private String partB; public void setPartA(String partA) { this.partA = partA; } public void setPartB(String partB) { this.partB = partB; } } æŒ‡æŒ¥è€… Director ç±»ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\npublic class Director { private Builder builder; public Director(Builder builder) { this.builder = builder; } public Product getProductA() { builder.buildPartA(); return builder.createProduct(); } public Product getProductB() { builder.buildPartB(); return builder.createProduct(); } } å…·ä½“å®ç° ä¼ ç»Ÿçš„å»ºé€ è€…æ¨¡å¼æ‰€éœ€çš„éƒ¨åˆ†è¾ƒå¤šï¼Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ˜¯éœ€è¦ç®€åŒ–ç³»ç»Ÿç»“æ„ï¼Œå‡å°‘ç¨‹åºå½“ä¸­ç±»çš„ä¸ªæ•°ï¼Œå¹¶ä¸”é™ä½ç”¨æˆ·çš„ä½¿ç”¨æˆæœ¬ã€‚\nå¦ä¸€ä¸ªå¸¸è§çš„ä½¿ç”¨æ–¹å¼æ˜¯ï¼Œé€šè¿‡ç›´æ¥å°† Builder ç±»ä½œä¸ºäº§å“ç±»çš„é™æ€å†…éƒ¨ç±»ï¼Œè¿™ç§æ–¹å¼æ›´å¤šçš„æ˜¯é™ä½è¾ƒå¤šæˆå‘˜å˜é‡æ—¶æ„å»ºå¯¹è±¡çš„å¤æ‚åº¦ã€‚\nä»¥ä¸‹æ˜¯åˆ›å»º ResourcePoolConfig ç±»çš„å»ºé€ è€…æ¨¡å¼ä»£ç ç¤ºä¾‹ï¼š\npublic class ResourcePoolConfig { private String name; private int maxTotal; private int maxIdle; private int minIdle; private ResourcePoolConfig(Builder builder) { this.name = builder.name; this.maxTotal = builder.maxTotal; this.maxIdle = builder.maxIdle; this.minIdle = builder.minIdle; } // å°† Builder ç±»è®¾è®¡æˆäº† ResourcePoolConfig çš„å†…éƒ¨ç±» // ä¹Ÿå¯ä»¥å°† Builder ç±»è®¾è®¡æˆç‹¬ç«‹çš„ ResourcePoolConfigBuilder éå†…éƒ¨ç±» public static class Builder { private static final int DEFAULT_MAX_TOTAL = 8; private static final int DEFAULT_MAX_IDLE = 8; private static final int DEFAULT_MIN_IDLE = 0; private String name; private int maxTotal = DEFAULT_MAX_TOTAL; private int maxIdle = DEFAULT_MAX_IDLE; private int minIdle = DEFAULT_MIN_IDLE; public ResourcePoolConfig build() { // æ ¡éªŒé€»è¾‘æ”¾åˆ°è¿™é‡Œæ¥åšï¼ŒåŒ…æ‹¬å¿…å¡«é¡¹æ ¡éªŒã€ä¾èµ–å…³ç³»æ ¡éªŒã€çº¦æŸæ¡ä»¶æ ¡éªŒç­‰ if (name == null || name.isEmpty()) { throw new IllegalArgumentException(\u0026quot;...\u0026quot;); } if (maxIdle \u0026gt; maxTotal) { throw new IllegalArgumentException(\u0026quot;...\u0026quot;); } if (minIdle \u0026gt; maxTotal || minIdle \u0026gt; maxIdle) { throw new IllegalArgumentException(\u0026quot;...\u0026quot;); } return new ResourcePoolConfig(this); } public Builder setName(String name) { if (name == null || name.isEmpty()) { throw new IllegalArgumentException(\u0026quot;...\u0026quot;); } this.name = name; return this; } public Builder setMaxTotal(int maxTotal) { if (maxTotal \u0026lt;= 0) { throw new IllegalArgumentException(\u0026quot;...\u0026quot;); } this.maxTotal = maxTotal; return this; } public Builder setMaxIdle(int maxIdle) { if (maxIdle \u0026lt; 0) { throw new IllegalArgumentException(\u0026quot;...\u0026quot;); } this.maxIdle = maxIdle; return this; } public Builder setMinIdle(int minIdle) { if (minIdle \u0026lt; 0) { throw new IllegalArgumentException(\u0026quot;...\u0026quot;); } this.minIdle = minIdle; return this; } } } ä»¥ä¸‹æ˜¯ ResourcePoolConfig ç±»å»ºé€ è€…æ¨¡å¼çš„ä½¿ç”¨æ–¹å¼ï¼š\nResourcePoolConfig config = new ResourcePoolConfig.Builder() .setName(\u0026quot;dbconnectionpool\u0026quot;) .setMaxTotal(16) .setMaxIdle(10) .setMinIdle(6) .build(); ä¸Šè¿°çš„ç¤ºä¾‹ä»£ç åªæ˜¯ä¼ å…¥ 4 ä¸ªå‚æ•°ï¼Œå°±å¯ä»¥çœ‹å¾—å‡ºæ„å»ºä¸€ä¸ªå¯¹è±¡çš„å¤æ‚æ€§äº†ï¼Œå¦‚æœæ‰€éœ€æ„å»ºå‚æ•°çš„æ•°é‡æ›´å¤šï¼Œä½¿ç”¨å»ºé€ è€…æ¨¡å¼çš„ä¼˜åŠ¿å°†ä¼šæ›´åŠ æ˜æ˜¾ï¼Œä¼ é€’å‚æ•°æ›´åŠ çµæ´»ï¼Œä»£ç å…·æœ‰æ›´é«˜çš„å¯è¯»æ€§ã€‚\næ€»ç»“ ä¼˜ç‚¹ å»ºé€ è€…æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nä½¿ç”¨å»ºé€ è€…æ¨¡å¼å¯ä»¥ä½¿å®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ å…·ä½“çš„å»ºé€ è€…ç±»ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œè¿™æœ‰åˆ©äºç³»ç»Ÿçš„æ‰©å±• å…·ä½“çš„å»ºé€ è€…ç›¸äº’ç‹¬ç«‹ï¼Œå› æ­¤å¯ä»¥å¯¹å»ºé€ çš„è¿‡ç¨‹é€æ­¥ç»†åŒ–ï¼Œè€Œä¸ä¼šå¯¹å…¶ä»–æ¨¡å—äº§ç”Ÿä»»ä½•å½±å“ ç¼ºç‚¹ å»ºé€ è€…æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nå»ºé€ è€…æ¨¡å¼æ‰€åˆ›å»ºçš„äº§å“ä¸€èˆ¬å…·æœ‰è¾ƒå¤šçš„å…±åŒç‚¹ï¼Œå…¶ç»„æˆéƒ¨åˆ†ç›¸ä¼¼ï¼Œå¦‚æœäº§å“ä¹‹é—´çš„å·®å¼‚æ€§å¾ˆå¤§ï¼Œåˆ™ä¸é€‚åˆä½¿ç”¨å»ºé€ è€…æ¨¡å¼ å¦‚æœäº§å“çš„å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´éœ€è¦å®šä¹‰å¾ˆå¤šå…·ä½“å»ºé€ è€…ç±»æ¥å®ç°è¿™ç§å˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿå˜å¾—å¾ˆåºå¤§ï¼Œå¢åŠ ç³»ç»Ÿçš„ç†è§£éš¾åº¦å’Œè¿è¡Œæˆæœ¬ é€‚ç”¨åœºæ™¯ å»ºé€ è€…æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nç±»çš„å†…éƒ¨éå¸¸å¤æ‚ï¼ŒåŒ…å«å¤šä¸ªæˆå‘˜å˜é‡ ç±»çš„å±æ€§ä¹‹é—´æœ‰ä¸€å®šçš„ä¾èµ–å…³ç³»æˆ–è€…çº¦æŸæ¡ä»¶ï¼Œéœ€è¦æŒ‡å®šå…¶ç”Ÿæˆé¡ºåº å¸Œæœ›åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œåœ¨å¯¹è±¡åˆ›å»ºä¹‹åä¸èƒ½ä¿®æ”¹å¯¹è±¡å†…éƒ¨çš„å±æ€§å€¼ï¼Œæš´éœ² setter() æ–¹æ³•çš„åˆ›å»ºå¯¹è±¡æ–¹å¼å°±ä¸é€‚ç”¨äº† æºç  åœ¨ JDK ä¸­ï¼Œjava.lang.StringBuilder æ˜¯ç»å…¸çš„å»ºé€ è€…æ¨¡å¼ã€‚\nå…¶ä¸­å…·ä½“çš„å¦‚ append()ã€delete()ã€reverse() ç­‰æ–¹æ³•éƒ½æ˜¯ç›´æ¥è¿”å›å½“å‰ StringBuilder å¯¹è±¡ï¼Œå…¶å¯ä»¥å†ç»§ç»­è°ƒåŠ¨ç±»ä¼¼çš„æ–¹æ³•ä»¥æ„å»ºå‡ºä¸€ä¸ªæƒ³è¦çš„ StringBuilder å¯¹è±¡ã€‚\nå¦‚ä¸‹æ˜¯ä½¿ç”¨ StringBuilder çš„ä¸€ä¸ªä»£ç ç¤ºä¾‹ï¼š\nStringBuilder stringBuilder = new StringBuilder() .append(\u0026quot;olleH\u0026quot;) .delete(0, 1) .insert(0, \u0026quot;o\u0026quot;) .reverse(); // Hello System.out.println(stringBuilder); ","permalink":"https://fatedeity.cn/posts/programming-pattern/builder-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - å»ºé€ è€…æ¨¡å¼"},{"content":"åˆ›å»ºå¯¹è±¡å¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„é‡å¤ä»£ç ï¼Œå¯èƒ½ä¼šéœ€è¦å¤åˆå¯¹è±¡è®¿é—®ä¸åˆ°çš„ä¿¡æ¯ï¼Œä¹Ÿå¯èƒ½æä¾›ä¸äº†è¶³å¤Ÿçº§åˆ«çš„æŠ½è±¡ï¼Œè¿˜å¯èƒ½å¹¶ä¸æ˜¯å¤åˆå¯¹è±¡æ¦‚å¿µçš„ä¸€éƒ¨åˆ†ã€‚å·¥å‚è®¾è®¡æ¨¡å¼é€šè¿‡å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚\nç®€ä»‹ å·¥å‚è®¾è®¡æ¨¡å¼ï¼ˆFactory Design Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ï¼Œæ˜¯ä¸€ç§ä»£æ›¿ new æ“ä½œç¬¦çš„ä¸€ç§æ¨¡å¼ã€‚\nåœ¨å·¥å‚æ¨¡å¼ä¸­ï¼Œåˆ›å»ºå¯¹è±¡ä¸ä¼šå¯¹å®¢æˆ·ç«¯æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œè€Œæ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå…±åŒçš„æ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚\nå·¥å‚æ¨¡å¼è¿˜å¯ä»¥ç»†åˆ†ä¸ºä¸‰ç§çš„ç±»å‹ï¼šç®€å•å·¥å‚æ¨¡å¼ã€å·¥å‚æ–¹æ³•æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼ã€‚\nç®€å•å·¥å‚æ¨¡å¼ æ¦‚å¿µ ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factory Patternï¼‰çš„å®šä¹‰æ˜¯ï¼Œç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§äº§å“ç±»çš„å®ä¾‹ï¼Œè¢«åˆ›å»ºçš„äº§å“ç±»å®ä¾‹å…·æœ‰å…±åŒçš„çˆ¶ç±»æˆ–å®ç°åŒæ ·çš„æ¥å£ã€‚\nå› ä¸ºåœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­ç”¨äºåˆ›å»ºå®ä¾‹çš„æ–¹æ³•é€šå¸¸æ˜¯é™æ€æ–¹æ³•ï¼Œå› æ­¤ç®€å•å·¥å‚æ¨¡å¼åˆè¢«ç§°ä¸ºé™æ€å·¥å‚æ¨¡å¼ï¼ˆStatic Factory Patternï¼‰ã€‚\nå®ç°æ–¹å¼ ä¸‹é¢æ˜¯ä½¿ç”¨æœæ±ç”Ÿäº§æ¥å±•ç¤ºç®€å•å·¥å‚æ¨¡å¼ï¼š\næœæ± FruitJuice æ¥å£ï¼šæè¿°ç”Ÿäº§æœæ±çš„å¿…è¦æ–¹æ³•\npublic interface FruitJuice { void make(); } è‹¹æœæ± AppleJuice ç±»ï¼šç”Ÿäº§è‹¹æœæ±çš„ç±»\npublic class AppleJuice implements FruitJuice { public AppleJuice() { this.make(); } @Override public void make() { System.out.println(\u0026quot;This is AppleJuice make!\u0026quot;); } } æ©™æ± OrangeJuice ç±»ï¼šç”Ÿäº§æ©™æ±çš„ç±»\npublic class OrangeJuice implements FruitJuice { public OrangeJuice() { this.make(); } @Override public void make() { System.out.println(\u0026quot;This is OrangeJuice make!\u0026quot;); } } æœæ±å·¥å‚ FruitJuiceFactory ç±»ï¼šè´Ÿè´£ç”Ÿäº§å„ç§æœæ±çš„ç±»\npublic class FruitJuiceFactory { public FruitJuiceFactory() {} public static FruitJuice createFruitJuice(String juiceType) { FruitJuice fruitJuice = null; if (juiceType.equals(\u0026quot;AppleJuice\u0026quot;)) { fruitJuice = new AppleJuice(); } else if (juiceType.equals(\u0026quot;OrangeJuice\u0026quot;)) { fruitJuice = new OrangeJuice(); } return fruitJuice; } } é€šè¿‡ if-else é€»è¾‘æ˜¯ç®€å•å·¥å‚çš„ç¬¬ä¸€ç§å®ç°æ–¹æ³•ï¼Œè¿˜å¯ä»¥é€šè¿‡é™æ€ä»£ç å—å’Œ Map ç»“æ„å®ç°ç®€å•å·¥å‚æ¨¡å¼ï¼Œå…·ä½“çš„ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\nimport java.util.Map; import java.util.HashMap; public class FruitJuiceFactory { // å­˜å‚¨äº§å“ç±»çš„æ˜ å°„å…³ç³» private static final Map\u0026lt;String, FruitJuice\u0026gt; cachedFruitJuice = new HashMap\u0026lt;\u0026gt;(); static { cachedFruitJuice.put(\u0026quot;AppleJuice\u0026quot;, new AppleJuice()); cachedFruitJuice.put(\u0026quot;OrangeJuice\u0026quot;, new OrangeJuice()); } public FruitJuiceFactory() {} public static FruitJuice createFruitJuice(String juiceType) { if (juiceType == null || juiceType.isEmpty()) { return null; } // ç›´æ¥ä» Map ç»“æ„ä¸­å–åˆ°å¯¹åº”çš„äº§å“ç±»å®ä¾‹ return cachedFruitJuice.get(juiceType.toLowerCase()); } } ä¼˜ç‚¹ ç®€å•å·¥å‚æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nç®€å•å·¥å‚æ¨¡å¼å®ç°äº†å¯¹è±¡åˆ›å»ºå’Œä½¿ç”¨çš„åˆ†ç¦» å®¢æˆ·ç«¯æ— éœ€çŸ¥é“æ‰€åˆ›å»ºçš„å…·ä½“äº§å“ç±»çš„ç±»åï¼Œåªéœ€è¦çŸ¥é“å…·ä½“äº§å“ç±»æ‰€å¯¹åº”çš„å‚æ•°å³å¯ å¯ä»¥åœ¨ä¸æ”¹å˜å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹æ›´æ¢æˆ–å¢åŠ æ–°çš„å…·ä½“äº§å“ç±» ç¼ºç‚¹ ç®€å•å·¥å‚æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nå·¥å‚ç±»é›†ä¸­äº†ç›¸ä¼¼äº§å“ç±»çš„åˆ›å»ºé€»è¾‘ï¼ŒèŒè´£è¿‡é‡ ç®€å•å·¥å‚æ¨¡å¼è¿åå¼€é—­åŸåˆ™ï¼Œæ–°å¢äº§å“ç±»æ—¶éœ€è¦æ”¹åŠ¨åˆ°å·¥å‚ç±» é€šå¸¸ä½¿ç”¨é™æ€æ–¹æ³•ä½œä¸ºåˆ›å»ºå®ä¾‹çš„æ–¹æ³•ï¼Œæ— æ³•å®ç°ç»§æ‰¿å…³ç³» é€‚ç”¨åœºæ™¯ ç®€å•å·¥å‚æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nå¯¹äºä¸€æ‰¹äº§å“ç±»ï¼Œå¹¶ä¸”ä¸ä¼šæ–°å¢äº§å“ç±»ï¼Œå¯ä»¥é€‰æ‹©ç®€å•å·¥å‚æ¨¡å¼ æºç  åœ¨ JDK ä¸­ï¼Œjava.util.Calendar ä½¿ç”¨äº†ç®€å•å·¥å‚æ¨¡å¼ã€‚å¦‚ä¸‹æ˜¯å…¶çš„ä¸€äº›å®ç°é€»è¾‘ï¼š\npublic abstract class Calendar implements Serializable, Cloneable, Comparable\u0026lt;Calendar\u0026gt; { private static Calendar createCalendar(TimeZone zone, Locale aLocale) { CalendarProvider provider = LocaleProviderAdapter.getAdapter(CalendarProvider.class, aLocale) .getCalendarProvider(); if (provider != null) { try { return provider.getInstance(zone, aLocale); } catch (IllegalArgumentException iae) { // fall back to the default instantiation } } Calendar cal = null; if (aLocale.hasExtensions()) { String caltype = aLocale.getUnicodeLocaleType(\u0026quot;ca\u0026quot;); if (caltype != null) { cal = switch (caltype) { case \u0026quot;buddhist\u0026quot; -\u0026gt; new BuddhistCalendar(zone, aLocale); case \u0026quot;japanese\u0026quot; -\u0026gt; new JapaneseImperialCalendar(zone, aLocale); case \u0026quot;gregory\u0026quot; -\u0026gt; new GregorianCalendar(zone, aLocale); default -\u0026gt; null; }; } } if (cal == null) { if (aLocale.getLanguage() == \u0026quot;th\u0026quot; \u0026amp;\u0026amp; aLocale.getCountry() == \u0026quot;TH\u0026quot;) { cal = new BuddhistCalendar(zone, aLocale); } else if (aLocale.getVariant() == \u0026quot;JP\u0026quot; \u0026amp;\u0026amp; aLocale.getLanguage() == \u0026quot;ja\u0026quot; \u0026amp;\u0026amp; aLocale.getCountry() == \u0026quot;JP\u0026quot;) { cal = new JapaneseImperialCalendar(zone, aLocale); } else { cal = new GregorianCalendar(zone, aLocale); } } return cal; } } å·¥å‚æ–¹æ³•æ¨¡å¼ æ¦‚å¿µ ç®€å•å·¥å‚æ¨¡å¼è¿èƒŒäº†å¼€é—­åŸåˆ™ï¼Œæ²¡æœ‰èƒ½å¤Ÿåšåˆ°â€œå¯¹æ‰©å±•å¼€æ”¾ã€å¯¹ä¿®æ”¹å…³é—­â€ï¼Œæ–°å¢äº§å“ç±»æ—¶éœ€è¦æ”¹åŠ¨åˆ°å·¥å‚ç±»ã€‚\nè€Œå·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Method Patternï¼‰æ˜¯å¯¹ç®€å•å·¥å‚æ¨¡å¼çš„è¿›ä¸€æ­¥æŠ½è±¡ï¼Œå…¶å¥½å¤„æ˜¯å¯ä»¥ä½¿ç³»ç»Ÿåœ¨ä¸ä¿®æ”¹åŸæ¥ä»£ç çš„æƒ…å†µä¸‹å¼•å…¥æ–°çš„äº§å“ç±»ï¼Œå³æ»¡è¶³å¼€é—­åŸåˆ™ã€‚\nå’Œç®€å•å·¥å‚æ¨¡å¼ä¸­å·¥å‚è´Ÿè´£ç”Ÿäº§æ‰€æœ‰çš„äº§å“ç›¸æ¯”ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼æŠ½è±¡å‡ºç®€å•å·¥å‚çš„æ¥å£ï¼Œç„¶åå°†ç”Ÿäº§å…·ä½“äº§å“çš„ä»»åŠ¡åˆ†å‘ç»™å…·ä½“çš„äº§å“å·¥å‚ï¼Œå³ç®€å•å·¥å‚çš„å·¥å‚ã€‚\nç”±äºå·¥å‚æ–¹æ³•æ¨¡å¼åˆ©ç”¨äº†é¢å‘å¯¹è±¡çš„å¤šæ€ç‰¹æ€§ï¼Œå› æ­¤åˆè¢«ç§°ä¸ºå¤šæ€å·¥å‚æ¨¡å¼ï¼ˆPolymorphic Factory Patternï¼‰ã€‚\nå®ç°æ–¹å¼ åœ¨ä¸Šè¿°ç®€å•å·¥å‚æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œå°†æœæ±ç”Ÿäº§æ”¹é€ æˆå·¥å‚æ–¹æ³•æ¨¡å¼ï¼š\næŠ½è±¡å·¥å‚ AbstractFactory æ¥å£ï¼šæè¿°ç”Ÿäº§æœæ±å·¥å‚çš„å¿…è¦æ–¹æ³•\npublic interface FruitJuiceFactory { FruitJuice createFruitJuice(); } è‹¹æœæ±å·¥å‚ AppleJuiceFactory ç±»ï¼šè¯¦ç»†çš„ç”Ÿäº§è‹¹æœæ±çš„ç±»\npublic class AppleJuiceFactory implements FruitJuiceFactory { public AppleJuiceFactory() {} @Override public FruitJuice createFruitJuice() { return new AppleJuice(); } } æ©™æ±å·¥å‚ OrangeJuiceFactory ç±»ï¼šè¯¦ç»†çš„ç”Ÿäº§æ©™æ±çš„ç±»\npublic class OrangeJuiceFactory implements FruitJuiceFactory { public OrangeJuiceFactory() {} @Override public FruitJuice createFruitJuice() { return new OrangeJuice(); } } ä¼˜ç‚¹ å·¥å‚æ–¹æ³•æ¨¡å¼é™¤äº†å…·æœ‰ç®€å•å·¥å‚æ¨¡å¼çš„ä¼˜ç‚¹ä¹‹å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š\nåœ¨ç³»ç»Ÿä¸­å¢åŠ æ–°çš„äº§å“ç±»æ—¶ï¼Œæ— éœ€ä¿®æ”¹åŸæœ‰çš„å·¥å‚ä»£ç ï¼Œåªéœ€æ·»åŠ ä¸€ä¸ªå…·ä½“äº§å“ç±»å’Œå…·ä½“å·¥å‚ç±» ç¼ºç‚¹ å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\næ·»åŠ æ–°çš„äº§å“ç±»æ—¶ï¼Œéœ€è¦åŒæ—¶æä¾›å…·ä½“äº§å“ç±»å’Œå¯¹åº”çš„å·¥å‚ç±»ï¼Œç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°å°†æˆå¯¹å¢åŠ  å·¥å‚æ–¹æ³•æ¨¡å¼å¼•å…¥äº†æŠ½è±¡å±‚ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„æŠ½è±¡æ€§å’Œç†è§£éš¾åº¦ é€‚ç”¨åœºæ™¯ å·¥å‚æ–¹æ³•æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nå®¢æˆ·ç«¯çŸ¥é“å…¶éœ€è¦çš„æ¥å£å®ç°ç±»ï¼Œä¸çŸ¥é“æ‰€éœ€è¦çš„å…·ä½“å¯¹è±¡ç±»ï¼Œå¯ä»¥é€šè¿‡å¯¹åº”çš„å·¥å‚åˆ›å»ºå®ä¾‹ æºç  åœ¨ JDK ä¸­ï¼Œjava.util.Collection æ¥å£ä¸­å®šä¹‰çš„ iterator() æ–¹æ³•å°±æ˜¯ä¸€ä¸ªå·¥å‚æ–¹æ³•ã€‚\næ‰€æœ‰å®ç°äº† Collection æ¥å£çš„ç±»ï¼Œéƒ½éœ€è¦æ˜¾å¼åœ°å®ç°æ­¤æ–¹æ³•å¹¶è¿”å›ä¸€ä¸ª Iterator å®ä¾‹ï¼Œä¸åŒçš„å®ç°ç±»å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„å®ç°é€»è¾‘ã€‚\næŠ½è±¡å·¥å‚æ¨¡å¼ æ¦‚å¿µ åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå…·ä½“å·¥å‚è´Ÿè´£ç”Ÿäº§å…·ä½“çš„äº§å“ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚å¯¹åº”ä¸€ç§å…·ä½“äº§å“ï¼Œå·¥å‚æ–¹æ³•å…·æœ‰å”¯ä¸€æ€§ã€‚\næŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰å®šä¹‰äº†ä¸€ä¸ªæ¥å£ç”¨äºåˆ›å»ºç›¸å…³æˆ–æœ‰ä¾èµ–å…³ç³»çš„å¯¹è±¡æ—ï¼Œè€Œæ— éœ€æŒ‡æ˜å…·ä½“çš„ç±»ï¼Œå…¶å¯ä»¥æ•´åˆç®€å•å·¥å‚æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼ã€‚\nå­¦ä¹ æŠ½è±¡å·¥å‚æ¨¡å¼éœ€è¦ç†è§£ä¸¤ä¸ªæ¦‚å¿µï¼šäº§å“ç­‰çº§ç»“æ„æŒ‡çš„æ˜¯äº§å“çš„ç»§æ‰¿ç»“æ„ï¼Œå¦‚æŠ½è±¡æœæ±å’Œå…·ä½“æœæ±ä¹‹é—´æ„æˆä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„ï¼›äº§å“æ—æŒ‡çš„æ˜¯ç”±åŒä¸€ä¸ªå·¥å‚ç”Ÿäº§çš„ï¼Œä½äºä¸åŒç­‰çº§ç»“æ„ä¸­çš„ä¸€ç»„äº§å“ï¼Œå¦‚åŒä¸€ä¸ªé¥®æ–™å·¥å‚ç”Ÿäº§çš„é…’å’Œæœæ±æ„æˆä¸€ä¸ªäº§å“æ—ã€‚\nä»ä¸Šè¿°æ¦‚å¿µä¸Šç†è§£ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼é’ˆå¯¹çš„æ˜¯ä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œè¦†ç›–äº†å¤šä¸ªå·¥å‚çš„äº§å“æ—ã€‚\nå®ç°æ–¹å¼ åœ¨ä¸Šè¿°ç®€å•å·¥å‚æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œä¸‹é¢ä½¿ç”¨æœæ±ç”Ÿäº§å’Œé…’ç”Ÿäº§æ¥å±•ç¤ºæŠ½è±¡å·¥å‚æ¨¡å¼ï¼š\né…’ Alcohol æ¥å£ï¼šæè¿°ç”Ÿäº§é…’çš„å¿…è¦æ–¹æ³•\npublic interface Alcohol { void make(); } è‘¡è„é…’ Wine ç±»ï¼šè¯¦ç»†çš„ç”Ÿäº§è‘¡è„é…’çš„ç±»\npublic class Wine implements Alcohol { public Wine() { this.make(); } @Override public void make() { System.out.println(\u0026quot;This is Wine make!\u0026quot;); } } å•¤é…’ Beer ç±»ï¼šè¯¦ç»†çš„ç”Ÿäº§å•¤é…’çš„ç±»\npublic class Beer implements Alcohol { public Beer() { this.make(); } @Override public void make() { System.out.println(\u0026quot;This is Beer make!\u0026quot;); } } æŠ½è±¡å·¥å‚ AbstractFactory æ¥å£ï¼šæè¿°ç”Ÿäº§æœæ±å’Œé…’çš„å¿…è¦æ–¹æ³•\npublic interface AbstractFactory { FruitJuice creatFruitJuice(); Alcohol createAlcohol(); } å…·ä½“å·¥å‚ ConcreteFactory ç±»ï¼šå¯ç”Ÿäº§æœæ±å’Œé…’çš„å·¥å‚çš„ç±»\npublic class ConcreteFactory implements AbstractFactory { public ConcreteFactory() {} @Override public FruitJuice creatFruitJuice(String juiceType) { FruitJuice fruitJuice = null; if (juiceType.equals(\u0026quot;AppleJuice\u0026quot;)) { fruitJuice = new AppleJuice(); } else if (juiceType.equals(\u0026quot;OrangeJuice\u0026quot;)) { fruitJuice = new OrangeJuice(); } return fruitJuice; } @Override public Alcohol createAlcohol(String alcoholType) { Alcohol alcohol = null; if (alcoholType.equals(\u0026quot;Wine\u0026quot;)) { alcohol = new Wine(); } else if (alcoholType.equals(\u0026quot;Beer\u0026quot;)) { alcohol = new Beer(); } return alcohol; } } ä¼˜ç‚¹ æŠ½è±¡å·¥å‚æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\nå½“ä¸€ä¸ªäº§å“æ—ä¸­çš„å¤šä¸ªå¯¹è±¡è¢«è®¾è®¡æˆä¸€èµ·å·¥ä½œæ—¶ï¼Œå®ƒèƒ½å¤Ÿä¿è¯å®¢æˆ·ç«¯å§‹ç»ˆåªä½¿ç”¨åŒä¸€ä¸ªäº§å“æ—ä¸­çš„å¯¹è±¡ å¢åŠ æ–°çš„äº§å“æ—å¾ˆæ–¹ä¾¿ï¼Œæ— éœ€ä¿®æ”¹å·²æœ‰ä»£ç ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ ç¼ºç‚¹ æŠ½è±¡å·¥å‚æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nå¢åŠ æ–°çš„äº§å“ç­‰çº§ç»“æ„éº»çƒ¦ï¼Œéœ€è¦å¯¹åŸæœ‰ç³»ç»Ÿè¿›è¡Œè¾ƒå¤§çš„ä¿®æ”¹ï¼Œç”šè‡³éœ€è¦ä¿®æ”¹æŠ½è±¡å±‚ä»£ç  é€‚ç”¨åœºæ™¯ æŠ½è±¡å·¥å‚æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nå½“éœ€è¦åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸€ç³»åˆ—ç›¸äº’å…³è”æˆ–ç›¸äº’ä¾èµ–çš„äº§å“æ—æ—¶ï¼Œä¾¿å¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ äº§å“ç­‰çº§ç»“æ„ç¨³å®šï¼Œè®¾è®¡å®Œæˆä¹‹åï¼Œä¸ä¼šå‘ç³»ç»Ÿä¸­å¢åŠ æ–°çš„äº§å“ç­‰çº§ç»“æ„æˆ–è€…åˆ é™¤å·²æœ‰çš„äº§å“ç­‰çº§ç»“æ„ æºç  åœ¨ JDK ä¸­ï¼Œjava.util.Collection æ¥å£å¯ä»¥çœ‹ä½œä¸€ä¸ªæŠ½è±¡å·¥å‚ã€‚\nCollection æ¥å£å®šä¹‰äº†è½¬æ¢æˆ Iterator å®ä¾‹çš„å·¥å‚æ–¹æ³•ï¼Œä¹Ÿå®šä¹‰äº†è½¬æ¢æˆ T[] å®ä¾‹çš„å·¥å‚æ–¹æ³•ï¼Œå¯ä»¥è®¤å®šå…¶åšäº†ä¸¤ä¸ªäº§å“æ—çš„å®šä¹‰ã€‚\næ€»ç»“ ä½¿ç”¨æ ‡å‡† å¯¹äºè¦ä¸è¦ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œå…¶æœ€æœ¬è´¨çš„å‚è€ƒæ ‡å‡†æœ‰ä»¥ä¸‹å››ä¸ªï¼š\nå°è£…å˜åŒ–ï¼šåˆ›å»ºé€»è¾‘æœ‰å¯èƒ½å˜åŒ–ï¼Œå°è£…æˆå·¥å‚ç±»ä¹‹åï¼Œåˆ›å»ºé€»è¾‘çš„å˜æ›´å¯¹è°ƒç”¨è€…é€æ˜ ä»£ç å¤ç”¨ï¼šåˆ›å»ºä»£ç æŠ½ç¦»åˆ°ç‹¬ç«‹çš„å·¥å‚ç±»ä¹‹åå¯ä»¥å¤ç”¨ éš”ç¦»å¤æ‚æ€§ï¼šå°è£…å¤æ‚çš„åˆ›å»ºé€»è¾‘ï¼Œè°ƒç”¨è€…æ— éœ€äº†è§£å¦‚ä½•åˆ›å»ºå¯¹è±¡ æ§åˆ¶å¤æ‚åº¦ï¼šå°†åˆ›å»ºä»£ç æŠ½ç¦»å‡ºæ¥ï¼Œè®©åŸæœ¬çš„å‡½æ•°æˆ–ç±»èŒè´£æ›´å•ä¸€ï¼Œä»£ç æ›´ç®€æ´ åº”ç”¨åœºæ™¯ å¯¹äºäº§å“ç§ç±»ç›¸å¯¹è¾ƒå°‘ã€ä¸”å¯é¢„è§æ€§åœ°ä¸ä¼šä¿®æ”¹çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼ã€‚ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼çš„å®¢æˆ·ç«¯åªéœ€ä¼ å…¥å·¥å‚ç±»çš„å‚æ•°ï¼Œä¸éœ€è¦å…³å¿ƒå¦‚ä½•åˆ›å»ºå¯¹è±¡çš„é€»è¾‘ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°åˆ›å»ºæ‰€éœ€äº§å“ã€‚\nç”±äºç®€å•å·¥å‚æ¨¡å¼ä¼šå°†æ‰€æœ‰åˆ›å»ºé€»è¾‘éƒ½æ”¾åœ¨ä¸€ä¸ªå·¥å‚ç±»ä¸­ï¼Œä¼šå¯¼è‡´è¿™ä¸ªå·¥å‚ç±»ä¼šå˜å¾—å¾ˆå¤æ‚ï¼Œå½“äº§å“çš„ç§ç±»æ˜¯å¯é¢„è§åœ°ä¼šå¢åŠ æ—¶ï¼Œè¿˜éœ€è¦å¯¹å·¥å‚ç±»åšæ›´æ”¹ï¼Œè¿™ç§æ—¶å€™å¯ä»¥é‡‡ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ä»¥è¾¾åˆ°ä¸éœ€è¦ä¿®æ”¹åŸæ¥ä»£ç çš„æƒ…å†µä¸‹å¼•è¿›æ–°çš„äº§å“ã€‚\næŠ½è±¡å·¥å‚æ¨¡å¼æœ€æ—©çš„åº”ç”¨æ˜¯ç”¨äºåˆ›å»ºå±äºä¸åŒæ“ä½œç³»ç»Ÿçš„è§†çª—æ„ä»¶ã€‚å½“éœ€è¦åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸€ç³»åˆ—ç›¸äº’å…³è”æˆ–ç›¸äº’ä¾èµ–çš„äº§å“æ—æ—¶ï¼Œæˆ–è€…æ˜¯åªä¼šæ–°å¢æ–°çš„äº§å“æ—è€Œä¸æ˜¯æ–°ç§ç±»çš„äº§å“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/factory-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - å·¥å‚æ¨¡å¼"},{"content":"å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®è¯¥å®ä¾‹çš„å…¨å±€èŠ‚ç‚¹ï¼Œæœ‰åŠ©äºåè°ƒç³»ç»Ÿæ•´ä½“çš„è¡Œä¸ºã€‚\nç®€ä»‹ ä¸€ä¸ªç±»åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–å®ä¾‹ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å°±æ˜¯ä¸€ä¸ªå•ä¾‹ç±»ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼ç§°ä½œå•ä¾‹è®¾è®¡æ¨¡å¼ï¼ˆSingleton Design Patternï¼‰ï¼Œç®€ç§°å•ä¾‹æ¨¡å¼ã€‚\nå•ä¾‹æ¨¡å¼ä¿è¯ç³»ç»Ÿå†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œéå¸¸èŠ‚çœç³»ç»Ÿèµ„æºï¼Œå¯¹äºä¸€äº›éœ€è¦é¢‘ç¹é”€æ¯çš„å¯¹è±¡ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼å¯ä»¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚\nä¸€ä¸ªæ™®é€šå•ä¾‹æ¨¡å¼çš„å®ç°æ–¹å¼ä¸»è¦æ˜¯ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š\nå°†å•ä¾‹ç±»çš„æ„é€ æ–¹æ³•å®šä¹‰ä¸ºç§æœ‰æ–¹æ³•ï¼Œç¦æ­¢å¤–éƒ¨ç›´æ¥è°ƒç”¨æ„é€ æ–¹æ³•æ¥å®ä¾‹åŒ–å•ä¾‹ç±»çš„å¯¹è±¡ï¼› åœ¨ç±»çš„å†…éƒ¨åˆ›å»ºå¹¶ä¿å­˜ç±»çš„å”¯ä¸€å®ä¾‹ï¼Œå¹¶è®¾ç½®æˆç§æœ‰å˜é‡ï¼Œç¦æ­¢å¤–éƒ¨ç›´æ¥è°ƒç”¨è¿™ä¸ªå®ä¾‹å˜é‡ï¼› åˆ›å»ºä¸€ä¸ªå…¬å¼€çš„é™æ€æ–¹æ³•ï¼Œå¯¹å¤–æš´éœ²ç±»çš„å”¯ä¸€å®ä¾‹ã€‚ å…·ä½“å®ç° é¥¿æ±‰å¼ é¥¿æ±‰å¼çš„å®ç°æ–¹å¼å°±æ˜¯ï¼Œåœ¨ç±»è£…è½½çš„æœŸé—´ï¼Œå°†ç±»çš„å®ä¾‹åˆå§‹åŒ–å¥½ï¼Œç„¶åé€šè¿‡é™æ€æ–¹æ³•æ‹¿åˆ°å®ä¾‹åŒ–çš„å¯¹è±¡ã€‚\nå¯¹åº”çš„ Java ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š\npublic class Singleton { // é™æ€å®ä¾‹åŒ– private static final Singleton instance = new Singleton(); // æ„é€ å™¨ç§æœ‰åŒ– private Singleton() {} // å…¬æœ‰é™æ€æ–¹æ³•ï¼Œè¿”å›å®ä¾‹å¯¹è±¡ public static Singleton getInstance() { return instance; } } é™¤äº†é€šè¿‡ä½¿ç”¨é™æ€å¸¸é‡åˆå§‹åŒ–å®ä¾‹çš„æ–¹å¼ä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡é™æ€ä»£ç å—çš„æ–¹å¼å®ç°é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼ã€‚\nå¯¹åº”çš„ Java ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š\npublic class Singleton { // é™æ€å˜é‡ private static final Singleton instance; // æ„é€ å™¨ç§æœ‰åŒ– private Singleton() {} // é™æ€ä»£ç å— static { instance = new Singleton(); } // å…¬æœ‰é™æ€æ–¹æ³•ï¼Œè¿”å›å®ä¾‹å¯¹è±¡ public static Singleton getInstance() { return instance; } } é¥¿æ±‰å¼çš„ä¼˜ç‚¹æ˜¯ï¼Œåœ¨ç±»è£…è½½çš„æ—¶å€™å°±å®Œæˆäº†å®ä¾‹åŒ–ï¼Œé¿å…äº†çº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚\nä½†æ˜¯ï¼Œè¿™æ ·çš„å®ç°æ–¹å¼ä¸æ”¯æŒå»¶è¿ŸåŠ è½½å®ä¾‹ï¼Œå¦‚æœä»å§‹è‡³ç»ˆæœªä½¿ç”¨è¿‡è¿™ä¸ªå®ä¾‹ï¼Œå°±ä¼šé€ æˆå†…å­˜æµªè´¹ã€‚\nå¹¶ä¸”ï¼Œé¥¿æ±‰å¼åœ¨ä¸€äº›åœºæ™¯ä¸­æ— æ³•ä½¿ç”¨ï¼šæ¯”å¦‚å•ä¾‹ç±»å®ä¾‹çš„åˆ›å»ºæ˜¯ä¾èµ–å‚æ•°æˆ–è€…é…ç½®æ–‡ä»¶çš„ï¼Œåœ¨é€šè¿‡ getInstance() æ–¹æ³•è·å–å®ä¾‹å¯¹è±¡ä¹‹å‰éœ€è¦è°ƒç”¨æŸä¸ªæ–¹æ³•è®¾ç½®å‚æ•°ç»™å¯¹è±¡å®ä¾‹ï¼Œåˆ™è¿™ç§æ–¹å¼å°†æ— æ³•ä½¿ç”¨ã€‚\næ‡’æ±‰å¼ æ‡’æ±‰å¼ç›¸å¯¹äºé¥¿æ±‰å¼çš„ä¼˜åŠ¿æ˜¯æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œå¯ä»¥åœ¨éœ€è¦ä½¿ç”¨å®ä¾‹çš„æ—¶å€™æ‰è¿›è¡Œåˆå§‹åŒ–ã€‚\nå¯¹åº”çš„ Java ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š\npublic class Singleton { // é™æ€å˜é‡ private static Singleton instance; // æ„é€ å™¨ç§æœ‰åŒ– private Singleton() {} public static Singleton getInstance() { if (instance == null) { // å®ä¾‹ä¸å­˜åœ¨æ—¶åˆå§‹åŒ– instance = new Singleton(); } return instance; } } ä¸Šè¿°çš„å®ç°æ–¹å¼æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥åˆ° getInstance() æ–¹æ³•ï¼Œå¹¶ä¸”æ­£å¥½éƒ½é€šè¿‡äº†åˆ¤æ–­è¯­å¥ï¼Œè¿™æ—¶ä¾¿ä¼šäº§ç”Ÿå¤šä¸ªå®ä¾‹ã€‚é€šå¸¸ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨çº¿ç¨‹ä¸å®‰å…¨çš„æ‡’æ±‰å¼åˆ›å»ºå•ä¾‹ç±»ã€‚\nä¸ºäº†åšåˆ°çº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥ç»™ getInstance() æ–¹æ³•åŠ ä¸€æŠŠé”ã€‚\nå¯¹åº”çš„ Java ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š\npublic class Singleton { // é™æ€å˜é‡ private static Singleton instance; // æ„é€ å™¨ç§æœ‰åŒ– private Singleton() {} // ä½¿ç”¨ synchronized å¯¹æ–¹æ³•è¿›è¡ŒåŠ é” public static synchronized Singleton getInstance() { if (instance == null) { // å®ä¾‹ä¸å­˜åœ¨æ—¶åˆå§‹åŒ– instance = new Singleton(); } return instance; } } ä¸Šè¿°åœ¨ getInstance() æ–¹æ³•åŠ é”çš„æ–¹å¼è§£å†³äº†çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜ï¼Œä½†æ˜¯ï¼Œç”±äºåŠ é”çš„ç²’åº¦è¾ƒå¤§ï¼Œå®é™…çš„æ•ˆç‡éå¸¸ä½ã€‚\nå¦‚æœè¿™ä¸ªå•ä¾‹ç±»å¶å°”ä¼šè¢«ä½¿ç”¨åˆ°ï¼Œé‚£è¿™ç§å®ç°æ–¹å¼è¿˜å¯ä»¥æ¥å—ã€‚ä½†æ˜¯ï¼Œå¦‚æœé¢‘ç¹åœ°ç”¨åˆ°ï¼Œé‚£é¢‘ç¹åŠ é”ã€é‡Šæ”¾é”åˆ™ä¼šå‡ºç°å¹¶å‘åº¦ä½çš„é—®é¢˜ï¼Œé€ æˆæ€§èƒ½ç“¶é¢ˆã€‚\nå› æ­¤ï¼Œä¹Ÿä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼åˆ›å»ºå•ä¾‹ç±»ã€‚\nåŒé‡æ£€æµ‹ é¥¿æ±‰å¼å’Œæ‡’æ±‰å¼çš„å®ç°æ–¹å¼éƒ½æœ‰ä¸€å®šçš„é™åˆ¶ï¼Œè€ŒåŒé‡æ£€æµ‹çš„å®ç°æ–¹å¼æ˜¯ä¸€ç§æ—¢æ”¯æŒå»¶è¿ŸåŠ è½½ã€åˆæ”¯æŒé«˜å¹¶å‘çš„å•ä¾‹å®ç°æ–¹å¼ã€‚\nå¯¹åº”çš„ Java ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š\npublic class Singleton { // é™æ€å˜é‡ private static Singleton instance; // æ„é€ å™¨ç§æœ‰åŒ– private Singleton() {} public static Singleton getInstance() { // ä¸€æ¬¡æ£€æµ‹ if (instance == null) { synchronized (Singleton.class) { // äºŒæ¬¡æ£€æµ‹ if (instance == null) { instance = new Singleton(); } } } return instance; } } å½“æœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥åˆ° getInstance() æ–¹æ³•æ—¶ï¼Œè™½ç„¶ä¼šå‡ºç°éƒ½é€šè¿‡ç¬¬ä¸€æ¬¡æ£€æŸ¥çš„åˆ¤æ–­è¯­å¥ï¼Œä½†æ˜¯åªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹è·å¾—é”å¹¶å®ä¾‹åŒ–å¯¹è±¡ï¼Œå³ä½¿åç»­å†æœ‰çº¿ç¨‹è¿›å…¥åˆ°åŒæ­¥ä»£ç å—ä¸­ï¼Œä¹Ÿä¼šè¢«ç¬¬äºŒæ¬¡æ£€æŸ¥çš„åˆ¤æ–­è¯­å¥æŒ¡åœ¨å¤–é¢ã€‚\nåŒé‡æ£€æµ‹æ–¹å¼åœ¨å¤šçº¿ç¨‹å¼€å‘ä¸­å¸¸ä½¿ç”¨åˆ°ï¼Œå…¶ä¼˜ç‚¹æ˜¯çº¿ç¨‹å®‰å…¨ã€æ”¯æŒå»¶è¿ŸåŠ è½½ã€æ•ˆç‡è¾ƒé«˜ã€‚åœ¨å®é™…å¼€å‘ä¸­æ¯”è¾ƒæ¨èä½¿ç”¨è¿™ç§æ–¹å¼å®ç°å•ä¾‹æ¨¡å¼ã€‚\né™æ€å†…éƒ¨ç±» é™æ€å†…éƒ¨ç±»æ˜¯ä¸€ç§æ¯”åŒé‡æ£€æµ‹æ›´åŠ ç®€å•çš„å®ç°æ–¹å¼ã€‚å®ƒæœ‰ç‚¹ç±»ä¼¼é¥¿æ±‰å¼ï¼Œä½†åˆèƒ½åšåˆ°å»¶è¿ŸåŠ è½½ã€‚\nå¯¹åº”çš„ Java ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š\npublic class Singleton { // é™æ€å†…éƒ¨ç±» private static class SingletonHolder { // åˆå§‹åŒ–å®ä¾‹ private static final Singleton instance = new Singleton(); } // æ„é€ å™¨ç§æœ‰åŒ– private Singleton() {} public static Singleton getInstance() { // è¿”å›å†…éƒ¨ç±»çš„é™æ€å®ä¾‹ return SingletonHolder.instance; } } è¿™ç§æ–¹å¼é‡‡ç”¨ç±»è£…è½½æœºåˆ¶æ¥ä¿è¯åˆå§‹åŒ–å®ä¾‹æ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚\né™æ€å†…éƒ¨ç±»æ–¹å¼åœ¨å•ä¾‹ç±»è¢«åŠ è½½çš„æ—¶å€™å¹¶ä¸ä¼šç«‹å³å®ä¾‹åŒ–ï¼Œè€Œæ˜¯åœ¨è°ƒç”¨ getInstance() æ–¹æ³•çš„æ—¶å€™ï¼Œæ‰ä¼šè£…è½½ SingletonHolder ç±»ï¼Œä»è€Œå®ç°å•ä¾‹ç±»çš„å®ä¾‹åŒ–ã€‚\nç±»çš„é™æ€å±æ€§åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½ç±»çš„æ—¶å€™åˆå§‹åŒ–ï¼Œå®ä¾‹çš„å”¯ä¸€æ€§ã€åˆ›å»ºè¿‡ç¨‹çš„çº¿ç¨‹å®‰å…¨æ€§ï¼Œéƒ½ç”± JVM æ¥ä¿è¯ã€‚\næ‰€ä»¥ï¼Œè¿™ç§å®ç°æ–¹æ³•æ—¢ä¿è¯äº†çº¿ç¨‹å®‰å…¨ï¼Œåˆèƒ½åšåˆ°å»¶è¿ŸåŠ è½½ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ï¼Œä¹Ÿæ˜¯ä¸€ç§æ¨èä½¿ç”¨çš„å®ç°æ–¹å¼ã€‚\næšä¸¾ åŸºäºæšä¸¾ç±»å‹çš„å•ä¾‹å®ç°ï¼Œæ˜¯æœ€ç®€å•çš„å®ç°æ–¹å¼ã€‚\nå¯¹åº”çš„ Java ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š\npublic enum Singleton { // å®ä¾‹å±æ€§ INSTANCE; public void doSomething() { // é€šè¿‡ä»¥ä¸‹æ–¹å¼è°ƒç”¨æ­¤æ–¹æ³• // Singleton.INSTANCE.doSomething(); } } è¿™ç§æ–¹å¼æ˜¯é€šè¿‡ Java æšä¸¾ç±»å‹æœ¬èº«çš„ç‰¹æ€§ï¼Œä¿è¯äº†å®ä¾‹åˆ›å»ºçš„çº¿ç¨‹å®‰å…¨æ€§å’Œå®ä¾‹çš„å”¯ä¸€æ€§ï¼Œè¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚\nè¿™ç§æ–¹å¼æ˜¯ Effective Javaä¸­æ–‡ç‰ˆï¼ˆç¬¬3ç‰ˆï¼‰ ä½œè€…æå€¡çš„æ–¹å¼ï¼Œæ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚\næ·±åº¦ç†è§£ å•ä¾‹æ¨¡å¼å”¯ä¸€æ€§çš„èŒƒå›´ å•ä¾‹ç±»åªå…è®¸åˆ›å»ºå”¯ä¸€å¯¹è±¡ï¼ˆæˆ–å®ä¾‹ï¼‰ï¼Œè¿™é‡Œå¯¹è±¡çš„å”¯ä¸€æ€§èŒƒå›´æŒ‡çš„æ˜¯è¿›ç¨‹å†…åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚\nè¿›ç¨‹ä¹‹é—´æ˜¯ä¸å…±äº«åœ°å€ç©ºé—´çš„ï¼Œå¦‚æœåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­åˆ›å»ºå¦ä¸€ä¸ªè¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿä¼šç»™æ–°è¿›ç¨‹åˆ†é…æ–°çš„åœ°å€ç©ºé—´ï¼Œå¹¶ä¸”å°†è€è¿›ç¨‹åœ°å€ç©ºé—´çš„æ‰€æœ‰å†…å®¹é‡æ–°æ‹·è´ä¸€ä»½åˆ°æ–°è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ï¼Œè¿™äº›å†…å®¹åŒ…æ‹¬ä»£ç ã€æ•°æ®ã€‚\næ‰€ä»¥ï¼Œå•ä¾‹ç±»åœ¨è€è¿›ç¨‹ä¸­å­˜åœ¨ä¸”åªèƒ½å­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨æ–°è¿›ç¨‹ä¸­ä¹Ÿä¼šå­˜åœ¨ä¸”åªèƒ½å­˜åœ¨ä¸€ä¸ªå¯¹è±¡ã€‚è€Œä¸”ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚\nå®ç°çº¿ç¨‹å”¯ä¸€çš„å•ä¾‹ â€œè¿›ç¨‹å”¯ä¸€â€æŒ‡çš„æ˜¯è¿›ç¨‹å†…å”¯ä¸€ï¼Œè¿›ç¨‹é—´ä¸å”¯ä¸€ã€‚ç±»æ¯”å¾—çŸ¥ï¼Œâ€œçº¿ç¨‹å”¯ä¸€â€æŒ‡çš„æ˜¯çº¿ç¨‹å†…å”¯ä¸€ï¼Œçº¿ç¨‹é—´ä¸å”¯ä¸€ã€‚\nå…¶å®ï¼Œâ€œè¿›ç¨‹å”¯ä¸€â€çš„å•ä¾‹åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„çº¿ç¨‹é—´å”¯ä¸€ï¼Œè‹¥è¦åšåˆ°â€œçº¿ç¨‹å”¯ä¸€â€ï¼Œä¸»è¦æ˜¯åšåˆ°çº¿ç¨‹é—´ä¿æŒä¸å”¯ä¸€ã€‚\nå®ç°çº¿ç¨‹å”¯ä¸€å•ä¾‹çš„ä»£ç å¾ˆç®€å•ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªé”®å€¼å¯¹åšå…³è”å­˜å‚¨ï¼Œå…¶ä¸­ key æ˜¯çº¿ç¨‹ IDï¼Œvalue æ˜¯å¯¹è±¡ã€‚\nå¯¹åº”çš„ Java ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š\nimport java.util.concurrent.ConcurrentHashMap; public class Singleton { // ä¿è¯çº¿ç¨‹å”¯ä¸€çš„é”®å€¼å¯¹ private static final ConcurrentHashMap\u0026lt;Long, Singleton\u0026gt; instanceMap = new ConcurrentHashMap\u0026lt;\u0026gt;(); // æ„é€ å™¨ç§æœ‰åŒ– private Singleton() {} public static Singleton getInstance() { Long currentThreadId = Thread.currentThread().getId(); instanceMap.putIfAbsent(currentThreadId, new Singleton()); return instanceMap.get(currentThreadId); } } å®ç°é›†ç¾¤å”¯ä¸€çš„å•ä¾‹ è¿™é‡Œçš„é›†ç¾¤è¡¨ç¤ºè¿›ç¨‹é›†ç¾¤ï¼Œç±»æ¯”å¯çŸ¥ï¼Œâ€œé›†ç¾¤å”¯ä¸€â€ç›¸å½“äºè¿›ç¨‹é—´ä¹Ÿå”¯ä¸€ï¼Œå³åœ¨ä¸åŒçš„è¿›ç¨‹é—´å…±äº«åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¸åˆ›å»ºåŒä¸€ä¸ªç±»çš„å¤šä¸ªå¯¹è±¡ã€‚\nå®ç°é›†ç¾¤å”¯ä¸€å•ä¾‹éœ€è¦ä¾èµ–åˆ°å¤–éƒ¨å…±äº«å­˜å‚¨åŒºï¼šå°†å•ä¾‹å¯¹è±¡åºåˆ—åŒ–å¹¶å­˜å‚¨åˆ°å¤–éƒ¨å…±äº«å­˜å‚¨åŒºï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªå•ä¾‹å¯¹è±¡çš„æ—¶å€™ï¼Œéœ€è¦å…ˆä»å¤–éƒ¨å…±äº«å­˜å‚¨åŒºä¸­å°†å®ƒè¯»å–åˆ°å†…å­˜ï¼Œå¹¶ååºåˆ—åŒ–æˆå¯¹è±¡ï¼Œç„¶åå†ä½¿ç”¨ï¼Œä½¿ç”¨å®Œæˆä¹‹åè¿˜éœ€è¦å†å­˜å‚¨å›å¤–éƒ¨å…±äº«å­˜å‚¨åŒºã€‚\nä¸ºäº†ä¿è¯ä»»ä½•æ—¶åˆ»åœ¨é›†ç¾¤ä¸­éƒ½åªæœ‰ä¸€ä»½å¯¹è±¡å­˜åœ¨ï¼Œä¸€ä¸ªè¿›ç¨‹åœ¨è·å–åˆ°å¯¹è±¡ä¹‹åï¼Œéœ€è¦å¯¹å¯¹è±¡åŠ é”ï¼Œé¿å…å…¶ä»–è¿›ç¨‹å†å°†å…¶è·å–ã€‚\nåœ¨è¿›ç¨‹ä½¿ç”¨å®Œè¿™ä¸ªå¯¹è±¡ä¹‹åï¼Œè¿˜éœ€è¦æ˜¾å¼åœ°å°†å¯¹è±¡ä»å†…å­˜ä¸­åˆ é™¤ï¼Œå¹¶ä¸”é‡Šæ”¾å¯¹è±¡çš„é”ã€‚\nå®ç°ä¸€ä¸ªå¤šä¾‹æ¨¡å¼ â€œå¤šä¾‹â€æŒ‡çš„æ˜¯ï¼Œä¸€ä¸ªç±»å¯ä»¥åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ä¸ªæ•°æ˜¯æœ‰é™åˆ¶çš„ï¼ŒåŒæ— é™ä¸ªæœ‰ä¸€äº›åŒºåˆ«ã€‚\nå¤šä¾‹æ¨¡å¼çš„å®ç°ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œé€šè¿‡ä¸€ä¸ªé”®å€¼å¯¹å­˜å‚¨ç´¢å¼•å’Œå¯¹è±¡ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œå¹¶ä¸”éœ€è¦æ§åˆ¶å¯¹è±¡çš„ä¸ªæ•°ã€‚\nå¯¹åº”çš„ Java ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š\nimport java.util.Map; import java.util.HashMap; import java.util.Random; public class Multipleton { // é™åˆ¶å®ä¾‹æ•°é‡ private static final int COUNT = 3; // å­˜å‚¨å¯¹åº”å…³ç³»çš„é”®å€¼å¯¹ private static final Map\u0026lt;Integer, Multipleton\u0026gt; instanceMap = new HashMap\u0026lt;\u0026gt;(); // é¥¿æ±‰å¼å®ç° static { instanceMap.put(0, new Multipleton()); instanceMap.put(1, new Multipleton()); instanceMap.put(2, new Multipleton()); } // æ„é€ å™¨ç§æœ‰åŒ– private Multipleton() {} // å…¬æœ‰é™æ€æ–¹æ³•ï¼Œè¿”å›å¯¹åº”ç´¢å¼•çš„å®ä¾‹å¯¹è±¡ public static Multipleton getInstance(Integer index) { return instanceMap.get(index); } // å…¬æœ‰é™æ€æ–¹æ³•ï¼Œè¿”å›éšæœºç´¢å¼•çš„å®ä¾‹å¯¹è±¡ public static Multipleton getRandomInstance() { Random random = new Random(); Integer index = random.nextInt(COUNT); return instanceMap.get(index); } } æ€»ç»“ ä¼˜ç‚¹ å•ä¾‹æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š\næä¾›äº†å¯¹å”¯ä¸€å®ä¾‹çš„å—æ§è®¿é—®ï¼Œå°è£…æ€§éå¸¸å¥½ ç³»ç»Ÿå†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥èŠ‚çœç³»ç»Ÿèµ„æº åŸºäºå•ä¾‹æ¨¡å¼ï¼Œå¯æ‰©å±•å®ç°å¤šä¾‹ç±»ï¼Œæ—¢èŠ‚çœç³»ç»Ÿèµ„æºï¼Œåˆè§£å†³äº†ç”±äºå•ä¾‹æ¨¡å¼å…±äº«è¿‡å¤šæœ‰æŸæ€§èƒ½çš„é—®é¢˜ ç¼ºç‚¹ å•ä¾‹æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ï¼š\nå•ä¾‹æ¨¡å¼å¯¹é¢å‘å¯¹è±¡ç‰¹æ€§çš„æ”¯æŒä¸å‹å¥½ï¼Œè¿èƒŒäº†åŸºäºæ¥å£è€Œéå®ç°çš„è®¾è®¡åŸåˆ™ å•ä¾‹æ¨¡å¼å¯¹ä»£ç çš„æ‰©å±•æ€§ä¸å‹å¥½ï¼Œå¦‚è¦æ‰©å±•åˆ™ä¼šå¯¼è‡´æ”¹åŠ¨è¾ƒå¤§ å¸¸è§„çš„å•ä¾‹æ¨¡å¼ä¸æ”¯æŒæœ‰å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œåªèƒ½é€šè¿‡å…¶ä»–æ–¹å¼æ”¹åŠ¨å•ä¾‹ç±»ä¸­çš„æˆå‘˜å˜é‡ å¯¹äºæœ‰ GC çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚æœé•¿æ—¶é—´ä¸ä½¿ç”¨å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œåˆ™å•ä¾‹å¯¹è±¡æœ‰å¯èƒ½ä¼šè¢«é”€æ¯ é€‚ç”¨åœºæ™¯ å•ä¾‹æ¨¡å¼çš„é€‚ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\nå•ä¾‹æ¨¡å¼ä¸»è¦é’ˆå¯¹éœ€è¦é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡ï¼Œå¯ä»¥ç†è§£æˆåˆ›å»ºå¯¹è±¡æ—¶è€—æ—¶è¿‡å¤šæˆ–è€—è´¹èµ„æºè¾ƒå¤§ä½†åˆç»å¸¸ç”¨åˆ°çš„å¯¹è±¡ã€‚å¦‚å·¥å…·ç±»å¯¹è±¡ã€é¢‘ç¹è®¿é—®çš„æ•°æ®åº“æˆ–æ–‡ä»¶å¯¹è±¡ ä»ä¸šåŠ¡æ¦‚å¿µä¸Šçœ‹ï¼Œæœ‰äº›æ•°æ®åœ¨ç³»ç»Ÿä¸­åªåº”è¯¥ä¿å­˜ä¸€ä»½ï¼Œå°±æ¯”è¾ƒé€‚åˆè®¾è®¡æˆå•ä¾‹ç±»ã€‚æ¯”å¦‚ï¼Œç³»ç»Ÿçš„é…ç½®ä¿¡æ¯ç±» å¯ä»¥ä½¿ç”¨å•ä¾‹è§£å†³èµ„æºè®¿é—®å†²çªçš„é—®é¢˜ï¼Œå•ä¾‹æ¨¡å¼å¯ä»¥åªæä¾›ä¸€ä¸ªå…¬å…±è®¿é—®ç‚¹ æºç  åœ¨ JDK ä¸­ï¼Œjava.lang.Runtime æ˜¯ç»å…¸çš„å•ä¾‹æ¨¡å¼ï¼Œå…¶ç”¨äºä¸ Java è¿è¡Œæ—¶ç¯å¢ƒè¿›è¡Œäº¤äº’ã€‚\nRuntime ç±»æ˜¯ä¸€ä¸ªå…¸å‹çš„é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼å®ç°ï¼Œå¦‚ä¸‹æ˜¯å…¶çš„ä¸€äº›å®ç°é€»è¾‘ï¼š\npublic class Runtime { // é™æ€å®ä¾‹åŒ– private static final Runtime currentRuntime = new Runtime(); private static Version version; // é™æ€æ–¹æ³•è·å–é™æ€å®ä¾‹ public static Runtime getRuntime() { return currentRuntime; } // æ„é€ å™¨ç§æœ‰åŒ– private Runtime() {} ","permalink":"https://fatedeity.cn/posts/programming-pattern/singleton-design-pattern.html","title":"åˆè¯†è®¾è®¡æ¨¡å¼ - å•ä¾‹æ¨¡å¼"},{"content":"é¢˜ç›®ä¿¡æ¯ æºåœ°å€ï¼šä¸‰æ•°ä¹‹å’Œ\nç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œcï¼Œä½¿å¾— a + b + c = 0ï¼Œè¯·ä½ æ‰¾å‡ºæ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚\næ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚\næç¤ºä¿¡æ¯ ç¤ºä¾‹ 1 è¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4] è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]] ç¤ºä¾‹ 2 è¾“å…¥ï¼šnums = [] è¾“å‡ºï¼š[] ç¤ºä¾‹ 3 è¾“å…¥ï¼šnums = [0] è¾“å‡ºï¼š[] é™åˆ¶ 0 \u0026lt;= nums.length \u0026lt;= 3000 -105 \u0026lt;= nums[i] \u0026lt;= 105 å®ç°é€»è¾‘ æš´åŠ›æšä¸¾ æœ€å…ˆæƒ³åˆ°çš„åº”è¯¥æ˜¯æš´åŠ›æšä¸¾çš„æ–¹æ³•ï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯æœ€ç®€å•çš„çš„æ–¹æ³•ã€‚\næ—¢ç„¶è¿™é‡Œè¦æ‰¾å‡ºç¬¦åˆè¦æ±‚çš„ä¸‰ä¸ªæ•°ï¼Œå½“ç„¶æ˜¯ä½¿ç”¨ä¸‰å±‚å¾ªç¯ä¾æ¬¡å»åŒ¹é…ï¼Œç¼ºç‚¹å°±æ˜¯æ—¶é—´å¤æ‚åº¦è¾¾åˆ°äº† $O(n^3)$ï¼Œå½“æ•°ç»„é•¿åº¦ç‰¹åˆ«é•¿çš„æ—¶å€™ï¼Œç¨‹åºè¿è¡Œæ—¶é—´ä¹Ÿä¼šç‰¹åˆ«é•¿ã€‚\nå“ˆå¸ŒåŒ¹é… ä»â€œä¸¤æ•°ä¹‹å’Œâ€é¢˜ç›®ä¸­å¯ä»¥çŸ¥é“ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨ç»“æ„é‡‡ç”¨ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼ï¼Œæ—¶é—´å¤æ‚åº¦èƒ½ä» $O(n^2)$ é™åˆ°äº† $O(n)$ã€‚\nå¦‚æœå°†è¿™ç§ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼ä»£å…¥è¿™ä¸ªé¢˜ç›®ï¼Œå¯ä»¥å°†æš´åŠ›ç ´è§£ $O(n^3)$ çš„æ—¶é—´å¤æ‚åº¦é™åˆ° $O(n^2)$ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æå‡ã€‚\næ’åº + åŒæŒ‡é’ˆ ç°åœ¨æ€è€ƒä¸€ä¸‹å¦‚ä½•å°†æ—¶é—´å¤æ‚åº¦ä» $O(n^2)$ é™ä¸‹å»ã€‚\né¦–å…ˆä¸€å±‚å¾ªç¯æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå› ä¸ºè‡³å°‘è¦å¯¹ç»™å®šçš„æ•°ç»„åšä¸€æ¬¡æšä¸¾ï¼› å‡å¦‚æ‹¿åˆ°æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œéœ€è¦æ€è€ƒä¸€ä¸‹æ€ä¹ˆä»æ•°ç»„å‰©ä¸‹çš„å…ƒç´ ä¸­æ‰¾åˆ°åŒ¹é…çš„ä¸¤ä¸ªå…ƒç´ ï¼Œæ¢ä¸€ä¸ªæ€è·¯å…¶å®å°±æ˜¯ä»å‰©ä¸‹çš„æ•°ç»„å…ƒç´ ä¸­æ‰¾åˆ°å’Œç­‰äºç¬¬ä¸€ä¸ªå…ƒç´ ç›¸åæ•°çš„ä¸¤ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥è¿™é‡Œé€€å˜æˆäº†â€œä¸¤æ•°ä¹‹å’Œâ€çš„é€»è¾‘ï¼› å¦‚æœå¯¹å‰©ä¸‹çš„å…ƒç´ é‡‡ç”¨å“ˆå¸ŒåŒ¹é…çš„æ–¹æ³•ï¼Œå…¶å®å°±å’Œä¸Šé¢çš„æ–¹æ³•ä¸€è‡´äº†ï¼Œç”±äºç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ï¼Œè¿™é‡Œå…ˆå¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œæ–¹ä¾¿åç»­è·³è¿‡ç›¸åŒçš„ç­”æ¡ˆï¼Œå†é‡‡ç”¨æ•°ç»„é¦–å°¾åŒæŒ‡é’ˆçš„æ–¹æ³•æŸ¥æ‰¾åŒ¹é…çš„ä¸¤ä¸ªæ•°ã€‚ package cn.fatedeity.algorithm.leetcode; import java.util.ArrayList; import java.util.Arrays; import java.util.List; public class ThreeSum { public List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; answer(int[] nums) { List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; result = new ArrayList\u0026lt;\u0026gt;(); Arrays.sort(nums); for (int i = 0; i \u0026lt; nums.length; i++) { if (i != 0 \u0026amp;\u0026amp; nums[i] == nums[i - 1]) { // ç­”æ¡ˆä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ï¼Œè¿™é‡Œç›¸åŒçš„æ•°ç›´æ¥è¿‡æ‰ continue; } int target = -nums[i]; int left = i + 1; int right = nums.length - 1; while (left \u0026lt; right) { int diff = target - (nums[left] + nums[right]); if (diff \u0026gt; 0) { left++; } else if (diff \u0026lt; 0) { right--; } else { boolean leftFlag = left == 0 || nums[left] != nums[left - 1]; boolean rightFlag = right == nums.length - 1 || nums[right] != nums[right + 1]; if (leftFlag || rightFlag) { // è¿™é‡Œçš„ if åˆ¤æ–­ä»ç„¶æ˜¯é¿å…ç­”æ¡ˆå‡ºç°é‡å¤çš„ä¸‰å…ƒç»„ List\u0026lt;Integer\u0026gt; list = new ArrayList\u0026lt;\u0026gt;(); list.add(nums[i]); list.add(nums[left]); list.add(nums[right]); result.add(list); } left++; right--; } } } return result; } } ä½¿ç”¨è¿™ä¸ªæ–¹å¼è§£å†³è¿™ä¸ªé¢˜ç›®ï¼Œè€—æ—¶çš„åœ°æ–¹æœ‰ä¸¤ä¸ªï¼šå¯¹åŸæ•°ç»„è¿›è¡Œæ’åºï¼›å¯¹æ’åºåçš„æ•°ç»„æŸ¥æ‰¾å‡ºå’Œä¸ºç›®æ ‡æ•°çš„ä¸¤ä¸ªæ•°ã€‚\næ’åºçš„æ—¶é—´å¤æ‚åº¦å¯ä»¥çœ‹åšæ˜¯ $O(n\\log_2n)$ï¼ŒæŸ¥æ‰¾å‡ºå‰©ä½™ä¸¤ä¸ªæ•°é‡‡ç”¨äº†éå†æ•°ç»„å¹¶åµŒå¥—ä½¿ç”¨åŒæŒ‡é’ˆéå†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n \\times n)$ï¼Œæœ€ç»ˆæ€»ä½“çš„æ—¶é—´å¤æ‚åº¦åœ¨ $O(n^2)$ã€‚\nåœ¨æ•´ä¸ªè¿‡ç¨‹å½“ä¸­ï¼Œé™¤äº†å­˜å‚¨ç­”æ¡ˆéœ€è¦é¢å¤–çš„ç©ºé—´ï¼Œå®é™…çš„ç©ºé—´å¤æ‚åº¦æ˜¯ $O(1)$ã€‚\n","permalink":"https://fatedeity.cn/posts/leetcode/three-sum.html","title":"LeetCode - ä¸‰æ•°ä¹‹å’Œ"},{"content":"è®¾è®¡åŸåˆ™ä¸ºæé«˜å¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§è€Œç”Ÿï¼Œæ¯ä¸€ç§è®¾è®¡æ¨¡å¼éƒ½ç¬¦åˆä¸€ä¸ªæˆ–å¤šä¸ªè®¾è®¡åŸåˆ™ï¼Œå› æ­¤è®¾è®¡åŸåˆ™ä¹Ÿæ˜¯è¯„ä»·ä¸€ä¸ªè®¾è®¡æ¨¡å¼ä½¿ç”¨æ•ˆæœçš„é‡è¦æŒ‡æ ‡ä¹‹ä¸€ã€‚\nç»å…¸è®¾è®¡åŸåˆ™é™¤äº† SOLID ä¹‹å¤–ï¼Œå¸¸è§çš„è¿˜åŒ…æ‹¬ KISSã€YAGNIã€DRYã€LODã€CRP ç­‰å‡ ç§ï¼š\nKISS(Keep It Simple \u0026amp; Stupid, å°½é‡ä¿æŒç®€å•) YAGNI(You Ain\u0026rsquo;t Gonna Need It, ä½ ä¸ä¼šéœ€è¦å®ƒ) DRY(Don\u0026rsquo;t Repeat Yourself, ä¸è¦é‡å¤è‡ªå·±) LOD(Law Of Demeter, è¿ªç±³ç‰¹æ³•åˆ™) CRP(Composite Reuse Principle, åˆæˆå¤ç”¨åŸåˆ™) KISS åŸåˆ™ ç†è§£ KISS åŸåˆ™çš„è‹±æ–‡æè¿°æœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œå¦‚ä¸‹ï¼š\nKeep It Simple \u0026amp; Stupid Keep It Sweet \u0026amp; Simple Keep It Short \u0026amp; Simple Keep It Simple \u0026amp; Straightforward å®ƒä»¬çš„å«ä¹‰éƒ½å·®ä¸å¤šï¼Œå…¶å®å°±æ˜¯â€œå°½é‡ä¿æŒç®€å•â€ã€‚\nä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯ä»£ç è¡Œæ•°è¶Šå°‘å°±è¶Šâ€œç®€å•â€ï¼Œè¿˜è¦è€ƒè™‘é€»è¾‘å¤æ‚åº¦ã€å®ç°éš¾åº¦ã€ä»£ç çš„å¯è¯»æ€§ç­‰ã€‚å¹¶ä¸”ï¼Œæœ‰äº›æœ¬èº«å°±å¤æ‚çš„é—®é¢˜ï¼Œç”¨å¤æ‚çš„æ–¹æ³•è§£å†³ï¼Œå¹¶ä¸èƒ½ç®—æ˜¯è¿èƒŒ KISS åŸåˆ™ã€‚\nä¼˜ç‚¹ éµå¾ª KISS åŸåˆ™ï¼Œå°†ä¼šæœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼š\nç®€å•åœ°ç¼–å†™ä»£ç ï¼Œç†è§£è¯¥ä»£ç ä¸ä¼šæœ‰ä»»ä½•å›°éš¾ï¼Œå°†æ›´å®¹æ˜“ä¿®æ”¹ï¼Œè€Œä¸”èŠ±è´¹çš„æ—¶é—´ä¹Ÿä¼šå¤§å¤§å‡å°‘ æœ€ä½³å®è·µ åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æƒ…å†µåˆ¤æ–­ä»£ç æ˜¯å¦æ»¡è¶³ KISS åŸåˆ™ï¼š\nä¸è¦ä½¿ç”¨åä½œè€…å¯èƒ½ä¸æ‡‚çš„æŠ€æœ¯æ¥å®ç°ä»£ç  ä¸è¦é‡å¤é€ è½®å­ï¼Œè¦å–„äºä½¿ç”¨å·²ç»æœ‰çš„å·¥å…·ç±» ä¸è¦è¿‡åº¦ä¼˜åŒ–ï¼Œç‰ºç‰²ä»£ç çš„å¯è¯»æ€§ YAGNI åŸåˆ™ ç†è§£ YAGNI åŸåˆ™çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ä¸è¦è¿‡åº¦è®¾è®¡ï¼Œå³ä¸è¦å»è®¾è®¡å½“å‰ç”¨ä¸åˆ°çš„åŠŸèƒ½ï¼Œä¸è¦å»ç¼–å†™å½“å‰ç”¨ä¸åˆ°çš„ä»£ç ã€‚\nä¼˜ç‚¹ éµå¾ª YAGNI åŸåˆ™ï¼Œå°†ä¼šæœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼š\nè¿‡åº¦è®¾è®¡å¾€å¾€ä¼šå»¶ç¼“å¼€å‘çš„è¿­ä»£é€Ÿåº¦ï¼Œå‡å°‘è¿‡åº¦è®¾è®¡å°†èƒ½æ”¯æŒåˆ›ä¸šå…¬å¸çš„å¿«é€Ÿè¿­ä»£ ç¼–å†™åªç¬¦åˆå½“å‰åœºæ™¯çš„ä»£ç è´¨é‡å¯èƒ½ä¼šæ›´é«˜ï¼Œè¿™ä¹Ÿæ˜¯ KISS åŸåˆ™çš„å¦ä¸€ç§å®è·µ æœ€ä½³å®è·µ è™½ç„¶è¯´ï¼Œåœ¨ä¸éœ€è¦æŸåŠŸèƒ½å‰ï¼Œä¸è¦æå‰å»å®ç°æ­¤åŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œåœ¨å¯é¢„è§çš„æƒ…å†µä¸‹ï¼Œéœ€è¦é¢„ç•™å¥½æ‰©å±•ç‚¹ï¼Œç­‰åˆ°å®ç°æ­¤åŠŸèƒ½æ—¶èƒ½æ— ç¼æ¥å…¥ã€‚\næ¯”å¦‚ï¼Œç³»ç»Ÿåœ¨å½“å‰åªéœ€è¦ä½¿ç”¨ Redis å­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œä»¥åæœ‰å¯èƒ½ä¼šç”¨åˆ° ZooKeeper å­˜å‚¨é…ç½®ä¿¡æ¯ã€‚æ ¹æ® YAGNI åŸåˆ™ï¼Œå½“å‰æ²¡æœ‰å¿…è¦ç¼–å†™ ZooKeeper çš„ä»£ç ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æŠ½è±¡å‡ºç»Ÿä¸€çš„é…ç½®å­˜å‚¨æ¥å£ä½œä¸ºæ‰©å±•ç‚¹ï¼Œæ–¹ä¾¿åç»­å¯ä»¥å¿«é€Ÿæ¥å…¥ã€‚\nDRY åŸåˆ™ ç†è§£ DRY åŸåˆ™å¯ä»¥ç†è§£æˆä¸è¦å†™é‡å¤çš„ä»£ç ï¼Œè§£å†³çš„æ˜¯ä»£ç çš„å¤ç”¨æ€§é—®é¢˜ã€‚\nä¼˜ç‚¹ éµå¾ª DRY åŸåˆ™ï¼Œå°†ä¼šæœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼š\nå¯¹äºé¢‘ç¹æ›´æ”¹éœ€æ±‚çš„æƒ…å†µï¼Œé‡å¤ä»£ç å°†ä¼šå¢åŠ ä¿®æ”¹ä»£ç çš„ç—›è‹¦ éµå¾ª DRY åŸåˆ™è¦æ±‚å¼€å‘è€…å…·å¤‡é«˜åº¦æŠ½è±¡æ€ç»´ï¼Œé«˜åº¦æŠ½è±¡çš„ä»£ç å…·å¤‡é«˜å¯ç»´æŠ¤æ€§ã€é«˜æ‰©å±•æ€§ æœ€ä½³å®è·µ å¸¸è§ä»£ç é‡å¤æƒ…å†µ å®ç°é€»è¾‘é‡å¤ï¼Œä½†åŠŸèƒ½è¯­ä¹‰ä¸é‡å¤çš„ä»£ç ï¼Œå¹¶ä¸è¿å DRY åŸåˆ™ã€‚\næ¯”å¦‚è¯´ï¼Œä¸€ä¸ªæ£€éªŒç”¨æˆ·åå’Œæ£€éªŒå¯†ç çš„ä»£ç åœ¨ç¼–å†™ä¸Šå®Œå…¨ä¸€è‡´ï¼Œå› æ­¤å†™äº† isValidUserName() å’Œ isValidPassword() ä¸¤ä¸ªå‡½æ•°ï¼Œä½†å…¶å®è¿™ä¸¤ä¸ªå‡½æ•°å¹¶ä¸èƒ½ç®—ä½œè¿å DRY åŸåˆ™ã€‚\nåŠŸèƒ½è¯­ä¹‰é‡å¤ï¼Œä½†å®ç°é€»è¾‘ä¸é‡å¤çš„ä»£ç ï¼Œè§†ä¸ºè¿å DRY åŸåˆ™ã€‚\nå…¶åŸåˆ™åœ¨äºï¼Œå¯¹äºå®Œå…¨ç›¸åŒçš„åŠŸèƒ½ï¼Œä¸å…è®¸å‡ºç°ä¸¤ä¸ªåŠå…¶ä»¥ä¸Šçš„å¯¹å¤–æ¥å£ï¼Œæ›´ä¸å…è®¸å‡ºç°ä¸åŒçš„ä»£ç è¡¨ç¤ºåŒä¸€ä¸ªåŠŸèƒ½ã€‚\néšè—çš„æ‰§è¡Œé‡å¤è¢«è®¤å®šè¿å DRY åŸåˆ™ã€‚\nå³å½“è¿è¡Œå®Œä¸€ä¸ªä»£ç æµç¨‹ä¹‹åï¼Œå‡ºç°ç›¸åŒçš„å‡½æ•°è¢«æ— æ„ä¹‰åœ°æ‰§è¡Œè¿‡ä¸¤æ¬¡åŠå…¶ä»¥ä¸Šï¼Œåˆ™è¢«ç§°ä¸ºæ‰§è¡Œé‡å¤ï¼Œè¿™æ˜¯ä¸€ç§éšè—çš„è¿å DRY åŸåˆ™çš„è¡Œä¸ºã€‚\nä»£ç å¤ç”¨æ€§ æ€»ç»“æœ‰ä»¥ä¸‹æ–¹æ³•å¯ä»¥æé«˜ä»£ç çš„å¯å¤ç”¨æ€§ï¼š\nå‡å°‘ä»£ç è€¦åˆ æ»¡è¶³å•ä¸€èŒè´£åŸåˆ™ å–„äºæ¨¡å—åŒ– ä¸šåŠ¡ä¸éä¸šåŠ¡é€»è¾‘åˆ†ç¦» é€šç”¨ä»£ç ä¸‹æ²‰ å–„ç”¨é¢å‘å¯¹è±¡çš„ç‰¹æ€§ åº”ç”¨è®¾è®¡æ¨¡å¼ äº‹ä¸è¿‡ä¸‰ â€œ3â€æ˜¯ä¸€ä¸ªéå¸¸ç¥å¥‡çš„æ•°å­—ï¼Œâ€œäº‹ä¸è¿‡ä¸‰â€æ˜¯å®ƒçš„ä¸€ç§ç‰¹æ®Šç”¨æ³•ï¼Œè¿™ä¸ªåŸåˆ™å¯ä»¥åº”ç”¨åœ¨ç¼–å†™å¯å¤ç”¨ä»£ç çš„æ—¶å€™ã€‚\nå¯ä»¥è¿™ä¹ˆç†è§£ï¼šç¬¬ä¸€æ¬¡å†™ä»£ç æ—¶ï¼Œå¦‚æœå½“ä¸‹æ²¡æœ‰å¤ç”¨çš„éœ€æ±‚ï¼Œè€Œæœªæ¥çš„å¤ç”¨éœ€æ±‚ä¹Ÿä¸æ˜¯å¾ˆæ˜ç¡®ï¼Œå¹¶ä¸”å¼€å‘å¯å¤ç”¨ä»£ç çš„æˆæœ¬æ¯”è¾ƒé«˜ï¼Œé‚£å°±ä¸éœ€è¦è€ƒè™‘ä»£ç çš„å¤ç”¨æ€§ï¼›ç¬¬äºŒæ¬¡é‡åˆ°å¤ç”¨åœºæ™¯çš„æ—¶å€™ï¼Œå†è¿›è¡Œé‡æ„ä½¿å…¶å˜å¾—å¯å¤ç”¨ã€‚\nLOD åŸåˆ™ ç†è§£ LOD(è¿ªç±³ç‰¹) åŸåˆ™ä¹Ÿè¢«å«ä½œæœ€å°çŸ¥è¯†æ³•åˆ™ï¼ˆLeast Knowledge Principle, LKPï¼‰ï¼Œå…¶å«ä¹‰æ˜¯ä¸è¯¥æœ‰ä¾èµ–çš„æ¨¡å—ä¹‹é—´ä¸è¦æœ‰ä¾èµ–ï¼Œæœ‰ä¾èµ–å…³ç³»çš„æ¨¡å—ä¹‹é—´å°½é‡åªä¾èµ–å¿…è¦çš„æ¥å£ã€‚\nè¿ªç±³ç‰¹åŸåˆ™æœ‰ç‚¹ç±»ä¼¼äºæ¥å£éš”ç¦»åŸåˆ™ï¼Œå¸Œæœ›èƒ½å‡å°‘ç±»ä¹‹é—´çš„è€¦åˆï¼Œè®©ç±»è¶Šç‹¬ç«‹è¶Šå¥½ã€‚\nä¼˜ç‚¹ éµå¾ªè¿ªç±³ç‰¹åŸåˆ™ï¼Œå°†ä¼šæœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼š\né™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜äº†æ¨¡å—çš„ç›¸å¯¹ç‹¬ç«‹æ€§ æé«˜ç±»çš„å¯å¤ç”¨ç‡å’Œç³»ç»Ÿçš„æ‰©å±•æ€§ æœ€ä½³å®è·µ è¿ªç±³ç‰¹åŸåˆ™è¿˜æœ‰å‡ ç§å®šä¹‰å½¢å¼ï¼šä¸è¦å’Œé™Œç”Ÿäººâ€œè¯´è¯â€ï¼Œåªä¸ä½ çš„ç›´æ¥æœ‹å‹é€šä¿¡ç­‰ã€‚\nåœ¨è¿ªç±³ç‰¹åŸåˆ™ä¸­ï¼Œå¯¹äºä¸€ä¸ªå¯¹è±¡ï¼Œå…¶â€œæœ‹å‹â€åŒ…æ‹¬ä»¥ä¸‹å‡ ç±»ï¼š\nå½“å‰å¯¹è±¡æœ¬èº« ä»¥å‚æ•°å½¢å¼ä¼ å…¥åˆ°å½“å‰å¯¹è±¡æ–¹æ³•ä¸­çš„å¯¹è±¡ å½“å‰å¯¹è±¡çš„æˆå‘˜å¯¹è±¡ å¦‚æœå½“å‰å¯¹è±¡çš„æˆå‘˜å¯¹è±¡æ˜¯ä¸€ä¸ªé›†åˆï¼Œé‚£ä¹ˆé›†åˆä¸­çš„å¯¹è±¡ä¹Ÿéƒ½æ˜¯æœ‹å‹ å½“å‰å¯¹è±¡æ‰€åˆ›å»ºçš„å¯¹è±¡ CRP åŸåˆ™ ç†è§£ CRP åŸåˆ™åˆç§°ä¸ºç»„åˆ/èšåˆå¤ç”¨åŸåˆ™ï¼Œå…¶å«ä¹‰æ˜¯ï¼Œå°½é‡ä½¿ç”¨å¯¹è±¡ç»„åˆï¼Œè€Œä¸æ˜¯ç»§æ‰¿æ¥è¾¾åˆ°å¤ç”¨çš„ç›®çš„ã€‚\né€šè¿‡ç»§æ‰¿æ¥è¿›è¡Œå¤ç”¨çš„ä¸»è¦é—®é¢˜åœ¨äºï¼Œç»§æ‰¿å¤ç”¨ä¼šç ´åç³»ç»Ÿçš„å°è£…æ€§ã€‚å½“åŸºç±»å‘ç”Ÿäº†æ”¹å˜ï¼Œç»§æ‰¿åŸºç±»çš„å­ç±»ä¹Ÿä¼šä¸å¯é¿å…åœ°å‘ç”Ÿæ”¹å˜ï¼Œä»åŸºç±»ç»§æ‰¿è€Œæ¥çš„å®ç°æ˜¯é™æ€çš„ï¼Œä¸å¯èƒ½åœ¨è¿è¡Œæ—¶å‘ç”Ÿå˜åŒ–ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„çµæ´»æ€§ã€‚\né€šè¿‡ç»„åˆæˆ–èšåˆå…³ç³»å¯ä»¥å°†å·²æœ‰çš„å¯¹è±¡çº³å…¥æ–°å¯¹è±¡ä¸­ï¼Œä½¿ä¹‹æˆä¸ºæ–°å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æ–°å¯¹è±¡å¯ä»¥è°ƒç”¨å·²æœ‰å¯¹è±¡çš„åŠŸèƒ½ï¼Œè¿™æ ·å…³ç³»ä¸ä¼šå°†å·²æœ‰å¯¹è±¡çš„å®ç°ç»†èŠ‚æš´éœ²ç»™æ–°å¯¹è±¡ã€‚\nç›¸å¯¹ç»§æ‰¿è€Œè¨€ï¼Œç»„åˆå’Œèšåˆå¤ç”¨çš„è€¦åˆåº¦æ›´ä½ï¼Œç›¸äº’ä¹‹é—´çš„å½±å“ä¸å¤§ï¼Œå®é™…å¼€å‘ä¸­å¯ä»¥æœ‰é€‰æ‹©æ€§åœ°è°ƒç”¨éœ€è¦çš„åŠŸèƒ½ã€‚\nä¼˜ç‚¹ éµå¾ª CRP åŸåˆ™ï¼Œå°†ä¼šæœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼š\nç³»ç»Ÿæ›´åŠ çµæ´»ï¼Œé™ä½äº†ç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œä¸€ä¸ªç±»çš„å˜åŒ–å¯¹å…¶ä»–ç±»é€ æˆçš„å½±å“ç›¸å¯¹è¾ƒå° æœ€ä½³å®è·µ ä¸€èˆ¬è€Œè¨€ï¼Œå¦‚æœä¸¤ä¸ªç±»ä¹‹é—´æ˜¯â€œHas-Aâ€çš„å…³ç³»ï¼Œåº”ä½¿ç”¨ç»„åˆæˆ–èšåˆï¼›å¦‚æœæ˜¯â€œIs-Aâ€çš„å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨ç»§æ‰¿ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/classic-design-principles.html","title":"ç»å…¸è®¾è®¡åŸåˆ™"},{"content":"SOLID åŸåˆ™æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œé¢å‘å¯¹è±¡è®¾è®¡çš„äº”ä¸ªåŸºæœ¬åŸåˆ™ã€‚å½“è¿™äº›åŸåˆ™è¢«ä¸€èµ·åº”ç”¨æ—¶ï¼Œå®ƒä»¬ä½¿å¾—ä¸€ä¸ªç¨‹åºå‘˜å¼€å‘ä¸€ä¸ªå®¹æ˜“è¿›è¡Œè½¯ä»¶ç»´æŠ¤å’Œæ‰©å±•çš„ç³»ç»Ÿå˜å¾—æ›´åŠ å¯èƒ½ã€‚\nSOLID è®¾è®¡åŸåˆ™åŒ…å«ä»¥ä¸‹ 5 ç§åŸåˆ™ï¼š\nå•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Principle, SRPï¼‰ å¼€é—­åŸåˆ™ï¼ˆOpen Closed Principle, OCPï¼‰ é‡Œå¼æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principle, LSPï¼‰ æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principle, ISPï¼‰ ä¾èµ–åè½¬åŸåˆ™ï¼ˆDependency Inversion Principle, DIPï¼‰ å•ä¸€èŒè´£åŸåˆ™ ç†è§£ å•ä¸€èŒè´£åŸåˆ™çš„æè¿°æ˜¯ï¼Œä¸€ä¸ªç±»æˆ–è€…æ¨¡å—åªè´Ÿè´£å®Œæˆä¸€ä¸ªèŒè´£ï¼ˆæˆ–åŠŸèƒ½ï¼‰ã€‚å½“ç„¶ï¼Œå•ä¸€èŒè´£åŸåˆ™ä¸æ­¢æ˜¯å¯ä»¥é’ˆå¯¹äºæ¨¡å—æˆ–ç±»ï¼Œå¯¹äºå¾ˆå¤šç²’åº¦éƒ½æœ‰æ•ˆæœï¼Œå¦‚å‡½æ•°ã€ç±»ã€æ¥å£ã€æ¨¡å—ç­‰ç­‰ï¼Œæ¨¡å—é€šå¸¸ç”±å¤šä¸ªç±»ç»„æˆã€‚\nèŒè´£å¯ä»¥æŒ‡æ¨¡å—å˜åŒ–çš„åŸå› ï¼Œä»è¿™ä¸ªè§’åº¦ç†è§£ï¼Œå•ä¸€èŒè´£åŸåˆ™è¡¨ç¤ºä¸è¦å­˜åœ¨è¶…è¿‡ä¸€ä¸ªå¯¼è‡´æ¨¡å—å˜æ›´çš„åŸå› ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸åŒçš„åº”ç”¨åœºæ™¯ã€ä¸åŒé˜¶æ®µçš„éœ€æ±‚èƒŒæ™¯ã€ä¸åŒçš„ä¸šåŠ¡å±‚é¢ï¼Œå¯¹åŒä¸€ä¸ªç±»çš„èŒè´£æ˜¯å¦å•ä¸€ï¼Œå¯èƒ½ä¼šæœ‰ä¸åŒçš„åˆ¤å®šç»“æœã€‚\nä¼˜ç‚¹ éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œå°†ä¼šæœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼š\næé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼šèŒè´£è¶Šå°‘ï¼Œå¤æ‚åº¦è¶Šä½ï¼Œå¯è¯»æ€§æ›´å¥½ï¼Œå¯ç»´æŠ¤æ€§å°±æ›´é«˜ é™ä½ä»£ç å˜æ›´çš„é£é™©ï¼šèŒè´£è¶Šå¤šï¼Œä»£ç å˜æ›´çš„å¯èƒ½æ€§å°±è¶Šé«˜ï¼Œå˜æ›´å¸¦æ¥çš„é£é™©ä¹Ÿå°±è¶Šå¤§ æœ€ä½³å®è·µ åœ¨å®é™…å¼€å‘ä¸­ï¼Œå‡ºç°ä»¥ä¸‹ç°è±¡æœ‰å¯èƒ½è¿åäº†å•ä¸€èŒè´£åŸåˆ™ï¼š\næ¨¡å—çš„å˜é‡ã€å±æ€§æˆ–ä»£ç è¡Œæ•°è¿‡å¤š æ¨¡å—çš„å†…éƒ¨å¯¹å¤–éƒ¨ä¾èµ–è¿‡å¤š æ¨¡å—çš„ç§æœ‰æ–¹æ³•è¿‡å¤š éš¾ä»¥ç»™æ¨¡å—å–ä¸€ä¸ªåˆç†çš„åç§° æ¨¡å—çš„å¤§éƒ¨åˆ†æ“ä½œåªé’ˆå¯¹å‡ ä¸ªå±æ€§ å¦‚å‡ºç°ä¸Šè¿°æƒ…å†µï¼Œåˆ™éœ€è¦åˆ¤æ–­æ˜¯å¦å¯¹ä»£ç åšèŒè´£åˆ†ç¦»ï¼Œä»¥éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œæœ€ç»ˆåº”ä»¥æé«˜å†…èšã€é™ä½è€¦åˆã€ä¿è¯ä»£ç çš„å¯ç»´æŠ¤æ€§ä¸ºä¸»ã€‚\nå¼€é—­åŸåˆ™ ç†è§£ å¼€é—­åŸåˆ™çš„æè¿°æ˜¯ï¼Œè½¯ä»¶å®ä½“ï¼ˆæ¨¡å—ã€ç±»ã€æ–¹æ³•ç­‰ï¼‰åº”è¯¥â€œå¯¹æ‰©å±•å¼€æ”¾ã€å¯¹ä¿®æ”¹å…³é—­â€ã€‚\nè¯¦ç»†çš„è§£é‡Šå°±æ˜¯ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½æ—¶ï¼Œåœ¨å·²æœ‰ä»£ç åŸºç¡€ä¸Šæ‰©å±•ä»£ç ï¼ˆæ–°å¢æ¨¡å—ã€ç±»ã€æ–¹æ³•ç­‰ï¼‰ï¼Œè€Œéä¿®æ”¹å·²æœ‰ä»£ç ï¼ˆä¿®æ”¹æ¨¡å—ã€ç±»ã€æ–¹æ³•ç­‰ï¼‰ã€‚æ›´å®½æ¾çš„ç†è§£æ˜¯ä»¥æœ€å°çš„ä¿®æ”¹ä»£ç çš„ä»£ä»·æ¥å®Œæˆæ–°åŠŸèƒ½çš„å¼€å‘ã€‚\nä¼˜ç‚¹ éµå¾ªå¼€é—­åŸåˆ™ï¼Œå°†ä¼šæœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼š\nå‡å°‘æµ‹è¯•èŒƒå›´ï¼šä¿®æ”¹çš„ä»£ç èŒƒå›´è¶Šå°ï¼Œæ¶‰åŠçš„æµ‹è¯•èŒƒå›´è¶Šå°ï¼Œæœªæ”¹åŠ¨çš„æµ‹è¯•ä»£ç ä»èƒ½æ­£å¸¸è¿è¡Œ é™ä½ç»´æŠ¤æˆæœ¬ï¼šè½¯ä»¶è§„æ¨¡è¶Šå¤§ã€å¯¿å‘½è¶Šé•¿ï¼Œåˆ™è½¯ä»¶çš„ç»´æŠ¤æˆæœ¬è¶Šé«˜ æœ€ä½³å®è·µ è‹¥è¦åšåˆ°â€œå¯¹æ‰©å±•å¼€å‘ã€å¯¹ä¿®æ”¹å…³é—­â€ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š\næ—¶åˆ»å…·å¤‡æ‰©å±•æ„è¯†ã€æŠ½è±¡æ„è¯†ã€å°è£…æ„è¯†ï¼Œå¤šèŠ±æ—¶é—´è®¾è®¡ä»£ç ç»“æ„ï¼Œäº‹å…ˆç•™å¥½æ‰©å±•ç‚¹ å¤§éƒ¨åˆ†ç»å…¸è®¾è®¡æ¨¡å¼éƒ½æ˜¯ä¸ºäº†è§£å†³ä»£ç çš„æ‰©å±•æ€§é—®é¢˜è€Œæ€»ç»“å‡ºæ¥çš„ï¼Œå¼€é—­åŸåˆ™æ˜¯å®ƒä»¬ä¸€ä¸ªé‡è¦çš„è¯„ä»·ä¾æ® é‡Œå¼æ›¿æ¢åŸåˆ™ ç†è§£ é‡Œå¼æ›¿æ¢åŸåˆ™çš„æè¿°æ˜¯ï¼Œå­ç±»å¯¹è±¡èƒ½å¤Ÿæ›¿æ¢ç¨‹åºä¸­çˆ¶ç±»å¯¹è±¡å‡ºç°çš„ä»»ä½•åœ°æ–¹ï¼Œå¹¶ä¸”ä¿è¯åŸæ¥ç¨‹åºçš„é€»è¾‘è¡Œä¸ºä¸å˜åŠæ­£ç¡®æ€§ä¸è¢«ç ´åã€‚\nä»ä»£ç å®ç°ä¸Šçœ‹ï¼Œé¢å‘å¯¹è±¡çš„å¤šæ€å’Œé‡Œå¼æ›¿æ¢åŸåˆ™æœ‰ç‚¹ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä»¬çš„å…³æ³¨ç‚¹ä¸ä¸€æ ·ï¼šé‡Œå¼æ›¿æ¢åŸåˆ™æ˜¯ç”¨æ¥æŒ‡å¯¼ç»§æ‰¿å…³ç³»ä¸­å­ç±»è¯¥å¦‚ä½•è®¾è®¡ï¼Œå­ç±»çš„è®¾è®¡è¦ä¿è¯åœ¨æ›¿æ¢çˆ¶ç±»çš„æ—¶å€™ï¼Œä¸æ”¹å˜åŸæœ‰ç¨‹åºçš„é€»è¾‘ä»¥åŠä¸ç ´ååŸæœ‰ç¨‹åºçš„æ­£ç¡®æ€§ã€‚\nä¼˜ç‚¹ éµå¾ªé‡Œå¼æ›¿æ¢åŸåˆ™ï¼Œå°†ä¼šæœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼š\nå®ç°æœ‰æ„ä¹‰çš„ç»§æ‰¿ï¼šä¿è¯äº†çˆ¶ç±»çš„å¤ç”¨æ€§ï¼Œä¹Ÿé™ä½äº†ç³»ç»Ÿå‡ºé”™è¯¯çš„æ•…éšœï¼Œé˜²æ­¢è¯¯æ“ä½œï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šç ´åç»§æ‰¿çš„æœºåˆ¶ å¢å¼ºç¨‹åºçš„å¥å£®æ€§ï¼šä¸åŒçš„å­ç±»å¯ä»¥å®Œæˆä¸åŒçš„ä¸šåŠ¡é€»è¾‘ï¼Œå³ä½¿å¢åŠ å­ç±»ä¹Ÿèƒ½ä¿æŒéå¸¸å¥½çš„å…¼å®¹æ€§ æœ€ä½³å®è·µ é€šå¸¸ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹è¿åé‡Œå¼æ›¿æ¢åŸåˆ™çš„ä»£ç ï¼š\nå­ç±»è¿èƒŒçˆ¶ç±»å£°æ˜è¦å®ç°çš„åŠŸèƒ½ï¼Œå¦‚å°†åŠ æ³•æ”¹æˆå‡æ³• å­ç±»è¿èƒŒçˆ¶ç±»å¯¹è¾“å…¥ã€è¾“å‡ºã€å¼‚å¸¸çš„çº¦å®šï¼Œå¦‚åŒä¸€æƒ…å†µæŠ›å‡ºçš„å¼‚å¸¸ä¸åŒç­‰ å­ç±»è¿èƒŒçˆ¶ç±»æ³¨é‡Šä¸­æ‰€ç½—åˆ—çš„ä»»ä½•ç‰¹æ®Šå£°æ˜ æ¥å£éš”ç¦»åŸåˆ™ ç†è§£ æ¥å£éš”ç¦»åŸåˆ™çš„æè¿°æ˜¯ï¼Œæ¥å£çš„è°ƒç”¨è€…æˆ–ä½¿ç”¨è€…ä¸åº”è¯¥è¢«å¼ºè¿«ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ã€‚\né€šè¿‡å¯¹æ¥å£çš„ç†è§£ä¸åŒï¼Œæ¥å£éš”ç¦»åŸåˆ™æœ‰ä»¥ä¸‹ä¸‰ç§ç†è§£ï¼š\n1ã€å¦‚æœæŠŠâ€œæ¥å£â€ç†è§£æˆä¸€ç»„æ¥å£é›†åˆï¼Œå¯ä»¥æ˜¯æŸä¸ªå¾®æœåŠ¡çš„æ¥å£ï¼Œä¹Ÿå¯ä»¥æ˜¯æŸä¸ªç±»åº“çš„æ¥å£ç­‰ã€‚å¦‚æœå­˜åœ¨éƒ¨åˆ†æ¥å£åªè¢«éƒ¨åˆ†è°ƒç”¨è€…ä½¿ç”¨ï¼Œå°±éœ€è¦å°†è¿™éƒ¨åˆ†æ¥å£éš”ç¦»å‡ºæ¥ï¼Œå•ç‹¬ç»™è¿™éƒ¨åˆ†è°ƒç”¨è€…ä½¿ç”¨ï¼Œè€Œä¸å¼ºè¿«å…¶ä»–è°ƒç”¨è€…ä¹Ÿä¾èµ–å…¶ä»–ä¸ä¼šç”¨åˆ°çš„æ¥å£ã€‚\n2ã€å¦‚æœæŠŠâ€œæ¥å£â€ç†è§£æˆå•ä¸ª API æ¥å£æˆ–å‡½æ•°ï¼Œéƒ¨åˆ†è°ƒç”¨è€…åªéœ€è¦å…¶ä¸­çš„éƒ¨åˆ†åŠŸèƒ½ï¼Œåˆ™éœ€è¦å°†è¿™ä¸ªå‡½æ•°æ‹†åˆ†æˆæ›´ç»†ç²’åº¦çš„å¤šä¸ªå‡½æ•°ï¼Œè®©è°ƒç”¨è€…åªä¾èµ–å®ƒéœ€è¦çš„é‚£ä¸ªç»†ç²’åº¦å‡½æ•°ã€‚\n3ã€å¦‚æœæŠŠâ€œæ¥å£â€ç†è§£æˆ OOP ä¸­çš„æ¥å£ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆä¸ºé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­çš„æ¥å£è¯­æ³•ï¼Œé‚£æ¥å£çš„è®¾è®¡è¦å°½é‡å•ä¸€ï¼Œä¸è¦è®©æ¥å£çš„å®ç°ç±»å’Œè°ƒç”¨è€…ä¾èµ–ä¸éœ€è¦çš„æ¥å£å‡½æ•°ã€‚\næ¥å£éš”ç¦»åŸåˆ™å’Œå•ä¸€èŒè´£åŸåˆ™æœ‰ç‚¹ç±»ä¼¼ï¼Œä½†æ¥å£éš”ç¦»åŸåˆ™æ›´ä¾§é‡äºæ¥å£çš„è®¾è®¡ï¼Œé€šå¸¸æ˜¯é€šè¿‡è°ƒç”¨è€…å¦‚ä½•ä½¿ç”¨æ¥å£æ¥å®šä¹‰è¿™ä¸ªæ¥å£çš„è®¾è®¡æ˜¯å¦è¶³å¤ŸèŒè´£å•ä¸€ã€‚\nä¼˜ç‚¹ éµå¾ªæ¥å£éš”ç¦»åŸåˆ™ï¼Œå°†ä¼šæœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼š\né«˜å†…èšï¼Œä½è€¦åˆï¼šæ‹†åˆ†æˆæ›´å°ç²’åº¦çš„æ¥å£ï¼Œå‡å°‘å¯¹å¤–çš„äº¤äº’ï¼Œé¢„é˜²å¤–æ¥çš„å˜æ›´ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ å¯è¯»æ€§é«˜ï¼Œæ˜“äºç»´æŠ¤ï¼šåˆç†çš„æ¥å£æ‹†åˆ†ç²’åº¦èƒ½ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œå‡å°‘é¡¹ç›®å·¥ç¨‹çš„ä»£ç å†—ä½™ æœ€ä½³å®è·µ é‡‡ç”¨æ¥å£éš”ç¦»åŸåˆ™å¯¹æ¥å£è¿›è¡Œçº¦æŸæ—¶ï¼Œè¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š\næ¥å£å°½é‡å°ï¼Œä½†æ˜¯è¦æœ‰é™åº¦ã€‚å®šä¹‰è¿‡å°ï¼Œåˆ™ä¼šé€ æˆæ¥å£æ•°é‡è¿‡å¤šï¼Œä½¿è®¾è®¡å¤æ‚åŒ–ï¼›å®šä¹‰å¤šå¤§ï¼Œçµæ´»æ€§é™ä½ æ¯ä¸ªé¡¹ç›®å’Œäº§å“éƒ½æœ‰é€‰å®šçš„ç¯å¢ƒå› ç´ ï¼Œç¯å¢ƒä¸åŒï¼Œæ¥å£æ‹†åˆ†çš„æ ‡å‡†å°±ä¸åŒï¼Œæ·±å…¥äº†è§£ä¸šåŠ¡é€»è¾‘ ä¾èµ–åè½¬åŸåˆ™ ç†è§£ ä¾èµ–åè½¬åŸåˆ™ä¹Ÿè¢«å«ä½œä¾èµ–å€’ç½®åŸåˆ™ï¼Œå…¶å«ä¹‰æ˜¯ï¼šé«˜å±‚æ¨¡å—ä¸è¦ä¾èµ–åº•å±‚æ¨¡å—ï¼Œé«˜å±‚æ¨¡å—å’Œåº•å±‚æ¨¡å—åº”è¯¥é€šè¿‡æŠ½è±¡æ¥äº’ç›¸ä¾èµ–ï¼›æŠ½è±¡ä¸è¦ä¾èµ–å…·ä½“å®ç°ç»†èŠ‚ï¼Œå…·ä½“å®ç°ç»†èŠ‚ä¾èµ–æŠ½è±¡ã€‚\nTomcat æ˜¯è¿è¡Œ Java Web åº”ç”¨ç¨‹åºçš„å®¹å™¨ï¼Œç¼–å†™çš„ Web åº”ç”¨ç¨‹åºä»£ç åªéœ€è¦éƒ¨ç½²åœ¨ Tomcat å®¹å™¨ä¸­ä¸‹ï¼Œä¾¿å¯è¢« Tomcat å®¹å™¨è°ƒç”¨æ‰§è¡Œã€‚åœ¨è¿™é‡Œï¼ŒTomcat å®¹å™¨å°±æ˜¯é«˜å±‚æ¨¡å—ï¼ŒWeb åº”ç”¨ç¨‹åºå°±æ˜¯åº•å±‚æ¨¡å—ã€‚Tomcat å®¹å™¨å’Œ Web åº”ç”¨ç¨‹åºæ²¡æœ‰ç›´æ¥çš„ä¾èµ–å…³ç³»ï¼Œè€Œæ˜¯é€šè¿‡ Servlet è§„èŒƒå®ç°äº’ç›¸ä¾èµ–ï¼Œè€Œ Servlet è§„èŒƒä¹Ÿä¸ä¼šä¾èµ–å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œè€Œæ˜¯ Tomcat å’Œ Web åº”ç”¨ç¨‹åºä¾èµ– Servlet è§„èŒƒã€‚\næ§åˆ¶åè½¬ æ§åˆ¶åè½¬ï¼ˆInversion Of Control, IoCï¼‰æŒ‡çš„æ˜¯å°†ç¨‹åºå‘˜è‡ªå·±å¯¹ç¨‹åºæ‰§è¡Œæµç¨‹çš„æ§åˆ¶åè½¬æˆé€šè¿‡æ¡†æ¶æ§åˆ¶ã€‚æ§åˆ¶åè½¬å¹¶ä¸æ˜¯ä¸€ç§å…·ä½“çš„è®¾è®¡æŠ€å·§ï¼Œè€Œæ˜¯ä¸€ç§ç¬¼ç»Ÿçš„è®¾è®¡æ€æƒ³ï¼Œä¸€èˆ¬ç”¨æ¥æŒ‡å¯¼æ¡†æ¶å±‚é¢çš„è®¾è®¡ã€‚\nå®ç°æ§åˆ¶åè½¬ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼šä¾èµ–æ³¨å…¥å’Œä¾èµ–æŸ¥æ‰¾ã€‚ä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼Œå‰è€…æ˜¯è¢«åŠ¨çš„æ¥æ”¶å¯¹è±¡ï¼Œåœ¨ç±» A çš„å®ä¾‹åˆ›å»ºè¿‡ç¨‹ä¸­å³åˆ›å»ºäº†ä¾èµ–çš„ B å¯¹è±¡ï¼Œé€šè¿‡ç±»å‹æˆ–åç§°æ¥åˆ¤æ–­å°†ä¸åŒçš„å¯¹è±¡æ³¨å…¥åˆ°ä¸åŒçš„å±æ€§ä¸­ï¼Œè€Œåè€…æ˜¯ä¸»åŠ¨ç´¢å–ç›¸åº”ç±»å‹çš„å¯¹è±¡ï¼Œè·å¾—ä¾èµ–å¯¹è±¡çš„æ—¶é—´ä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­è‡ªç”±æ§åˆ¶ã€‚\nä¾èµ–æ³¨å…¥ ä¾èµ–æ³¨å…¥ï¼ˆDependency Injection, DIï¼‰æ˜¯ä¸€ç§å…·ä½“çš„ç¼–ç æŠ€å·§ã€‚\nå…¶è¯¦ç»†æ¦‚æ‹¬å°±æ˜¯ï¼šä¸é€šè¿‡ new çš„æ–¹å¼åœ¨ç±»çš„å†…éƒ¨åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œè€Œæ˜¯å°†ä¾èµ–çš„ç±»å¯¹è±¡åœ¨å¤–éƒ¨åˆ›å»ºå¥½ä¹‹åï¼Œé€šè¿‡æ„é€ å‡½æ•°ã€å‡½æ•°å‚æ•°ç­‰æ–¹å¼ä¼ é€’ï¼ˆæˆ–æ³¨å…¥ï¼‰ç»™ç±»ä½¿ç”¨ã€‚\nä¸€ä¸ªç®€å•çš„ä¾èµ–æ³¨å…¥ä»£ç ä¾‹å­å¦‚ä¸‹ï¼š\npackage cn.fatedeity.designpattern.philosophy; /** * ä¾èµ–æ³¨å…¥æ¡ˆä¾‹ */ public class DependencyInjectionCase { private MessageSender messageSender; public DependencyInjectionCase(MessageSender messageSender) { this.messageSender = messageSender; } public void sendMessage(String phone, String message) { this.messageSender.send(phone, message); } public static void main(String[] args) { MessageSender smsSender = new SmsSender(); DependencyInjectionCase dependencyInjectionCase0 = new DependencyInjectionCase(smsSender); // SmsSender sms send sms message dependencyInjectionCase0.sendMessage(\u0026quot;sms\u0026quot;, \u0026quot;sms message\u0026quot;); MessageSender inboxSender = new InboxSender(); DependencyInjectionCase dependencyInjectionCase1 = new DependencyInjectionCase(inboxSender); // InboxSender inbox send inbox message dependencyInjectionCase1.sendMessage(\u0026quot;inbox\u0026quot;, \u0026quot;inbox message\u0026quot;); } } class InboxSender implements MessageSender { @Override public void send(String phone, String message) { System.out.println(\u0026quot;InboxSender \u0026quot; + phone + \u0026quot; send \u0026quot;+ message); } } class SmsSender implements MessageSender { @Override public void send(String phone, String message) { System.out.println(\u0026quot;SmsSender \u0026quot; + phone + \u0026quot; send \u0026quot;+ message); } } interface MessageSender { void send(String phone, String message); } ä¼˜ç‚¹ éµå¾ªä¾èµ–åè½¬åŸåˆ™ï¼Œå°†ä¼šæœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼š\næŸ¥è¯¢ä¾èµ–å’Œåº”ç”¨ä»£ç åˆ†ç¦»ï¼Œå¤§é‡é™ä½å·¥å‚ç±»å’Œå•ä¾‹ç±»çš„æ•°é‡ï¼Œä»£ç å±‚æ¬¡æ›´åŠ æ¸…æ™° æ²¡æœ‰ä¾µå…¥æ€§ï¼Œæ— é¡»ä¾èµ–å®¹å™¨çš„ APIï¼Œä¹Ÿæ— é¡»å®ç°ä¸€äº›ç‰¹æ®Šæ¥å£ æœ€ä½³å®è·µ é€šè¿‡ä¾èµ–æ³¨å…¥æä¾›çš„æ‰©å±•ç‚¹ï¼Œç®€å•é…ç½®ä¸€ä¸‹æ‰€æœ‰éœ€è¦çš„ç±»åŠå…¶ç±»ä¹‹é—´ä¾èµ–å…³ç³»ï¼Œå°±å¯ä»¥å®ç°ç”±æ¡†æ¶æ¥è‡ªåŠ¨åˆ›å»ºå¯¹è±¡ã€ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€ä¾èµ–æ³¨å…¥ç­‰åŠŸèƒ½ã€‚\nç°æˆçš„ä¾èµ–æ³¨å…¥åˆ›å»ºæœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ Google Guideã€Java Springã€Pico Containerã€Butterfly Container ç­‰ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/classic-design-principles-solid.html","title":"ç»å…¸è®¾è®¡åŸåˆ™ - SOLID"},{"content":"é¢˜ç›®ä¿¡æ¯ æºåœ°å€ï¼šæœ€é•¿å…¬å…±å‰ç¼€\nç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾å­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚\nå¦‚æœä¸å­˜åœ¨å…¬å…±å‰ç¼€ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸² \u0026quot;\u0026quot;ã€‚\næç¤ºä¿¡æ¯ ç¤ºä¾‹ 1 è¾“å…¥ï¼šstrs = [\u0026quot;flower\u0026quot;,\u0026quot;flow\u0026quot;,\u0026quot;flight\u0026quot;] è¾“å‡ºï¼š\u0026quot;fl\u0026quot; æç¤º 2 è¾“å…¥ï¼šstrs = [\u0026quot;dog\u0026quot;,\u0026quot;racecar\u0026quot;,\u0026quot;car\u0026quot;] è¾“å‡ºï¼š\u0026quot;\u0026quot; è§£é‡Šï¼šè¾“å…¥ä¸å­˜åœ¨å…¬å…±å‰ç¼€ã€‚ æç¤º 1 \u0026lt;= strs.length \u0026lt;= 200 0 \u0026lt;= strs[i].length \u0026lt;= 200 strs[i] ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ å®ç°é€»è¾‘ é€ä¸€å¯¹æ¯” æ­¤æ–¹æ³•å¦‚å…¶åç§°ï¼Œå³å°†æ•°ç»„ä¸­çš„å­—ç¬¦ä¸²é€ä¸€è¿›è¡Œå¯¹æ¯”ï¼Œå…ˆæ‰¾å‡ºç¬¬ä¸€ã€ç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å‰ç¼€ï¼Œå†æ‰¾å‡ºç¬¬äºŒã€ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å‰ç¼€ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´è‡³å®Œæˆæ‰€æœ‰å­—ç¬¦ä¸²çš„æ¯”è¾ƒã€‚\nå½“ç„¶ï¼Œå½“åœ¨å¯¹æ¯”è¿‡ç¨‹ä¸­å‘ç°æœ€é•¿å…¬å…±å‰ç¼€å·²ç»ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›å³å¯ã€‚\næ­¤æ–¹å¼æ˜¯è¾ƒä¸ºå¸¸è§„çš„æ€è·¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(mn)$ï¼Œå…¶ä¸­ m æ˜¯å­—ç¬¦ä¸²æ•°ç»„ä¸­å­—ç¬¦ä¸²çš„å¹³å‡é•¿åº¦ï¼Œn æ˜¯å­—ç¬¦ä¸²æ•°ç»„çš„é•¿åº¦ï¼Œæœ€åæƒ…å†µä¸‹ï¼Œå­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²éƒ½ä¼šè¢«æ¯”è¾ƒä¸€æ¬¡ã€‚\næ ¹æ®ä»£ç çš„å†™æ³•ä¸åŒï¼Œè‹¥åˆ©ç”¨é¢å¤–çš„ç©ºé—´åˆ™ç©ºé—´å¤æ‚åº¦æ˜¯ $O(n)$ï¼Œè‹¥ä½¿ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²åšç›¸å…³å¢å‡ï¼Œåˆ™ç©ºé—´å¤æ‚åº¦æ˜¯ $O(1)$ã€‚\npackage cn.fatedeity.algorithm.leetcode; public class LongestCommonPrefix { public String answer(String[] strs) { StringBuilder stringBuilder = new StringBuilder(); for (int i = 0; i \u0026lt; strs.length; i++) { if (stringBuilder.length() \u0026gt; strs[i].length()) { stringBuilder.setLength(strs[i].length()); } for (int j = 0; j \u0026lt; strs[i].length(); j++) { char c = strs[i].charAt(j); if (i == 0) { stringBuilder.append(c); continue; } else if (stringBuilder.charAt(j) != c) { stringBuilder.replace(j, stringBuilder.length(), \u0026quot;\u0026quot;); } if (j \u0026gt;= stringBuilder.length() - 1) { break; } } if (stringBuilder.isEmpty()) { return stringBuilder.toString(); } } return stringBuilder.toString(); } } åŒæ—¶å¯¹æ¯” åŒæ—¶å¯¹æ¯”æŒ‡çš„æ˜¯ï¼Œæ¯ä¸€æ¬¡å¯¹æ¯”çš„æ—¶å€™ï¼Œéƒ½å°†æ•°ç»„ä¸­æ‰€æœ‰çš„å­—ç¬¦ä¸²æ‹¿å‡ºæ¥è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚åŒæ—¶æ¯”è¾ƒæ•°ç»„ä¸­æ‰€æœ‰å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œç„¶åæ¯”è¾ƒæ•°ç»„ä¸­æ‰€æœ‰å­—ç¬¦ä¸²çš„ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å·²å¯¹æ¯”å®Œæ•´ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ–è€…æ‰€åœ¨ä½ç½®çš„å­—ç¬¦æœ‰æ‰€ä¸åŒã€‚\næ­¤æ–¹æ³•ä¹Ÿæ˜¯å¸¸è§„æ€è·¯ä¸­çš„ä¸€ç§ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(mn)$ï¼Œå…¶ä¸­ m æ˜¯å­—ç¬¦ä¸²æ•°ç»„ä¸­å­—ç¬¦ä¸²çš„æœ€å°é•¿åº¦ï¼Œn æ˜¯å­—ç¬¦ä¸²æ•°ç»„çš„é•¿åº¦ï¼Œæœ€åæƒ…å†µä¸‹ï¼Œå­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²éƒ½ä¼šè¢«æ¯”è¾ƒä¸€æ¬¡ã€‚\nç©ºé—´å¤æ‚åº¦åŒé€ä¸€å¯¹æ¯”æ–¹æ³•ä¸€æ ·ï¼Œæœ€ä½å¯ä»¥åšåˆ° $O(1)$ çš„ç©ºé—´å¤æ‚åº¦ã€‚\npackage cn.fatedeity.algorithm.leetcode; public class LongestCommonPrefix { public String answer(String[] strs) { StringBuilder commonStr = new StringBuilder(strs[0]); if (strs.length == 1) { return strs[0]; } for (int i = 0; i \u0026lt; strs[0].length(); i++) { for (int j = 1; j \u0026lt; strs.length; j++) { if (strs[j].length() == i || commonStr.charAt(i) != strs[j].charAt(i)) { commonStr.replace(i, commonStr.length(), \u0026quot;\u0026quot;); return commonStr.toString(); } } } return commonStr.toString(); } } é€ä¸€å¯¹æ¯”ä¼˜åŒ– è¿™é‡Œæ˜¯ä¸€ä¸ªä¼˜åŒ–çš„é€ä¸€å¯¹æ¯”æ–¹æ³•ï¼Œå…¶å®ä¹Ÿæ˜¯ä½¿ç”¨äº†ç¼–ç¨‹è¯­è¨€çš„ä¸€äº›ç‰¹æ€§ï¼Œç›´æ¥åˆ¤æ–­å½“å‰çš„å…¬å…±å‰ç¼€æ˜¯å¦æ˜¯ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€ï¼Œåªæœ‰æ»¡è¶³æ‰€æœ‰å­—ç¬¦ä¸²è¦æ±‚çš„å‰ç¼€æ‰æ˜¯æœ€ç»ˆç»“æœã€‚\nå®é™…è½å®åˆ°ä»£ç ä¸­å°±æ˜¯ï¼Œæ²¡æœ‰è‡ªå·±å°†å­—ç¬¦ä¸²çš„æ¯ä¸€ä¸ªå­—ç¬¦éƒ½åšæ¯”è¾ƒï¼Œè€Œæ˜¯ä½¿ç”¨ç¼–ç¨‹ä»£ç ä¸­å·²æœ‰çš„æ–¹æ³•åšæ¯”è¾ƒï¼Œå®é™…çš„æ—¶é—´å¤æ‚åº¦æ²¡æœ‰è„±ç¦» $O(mn)$ çš„èŒƒç•´ï¼Œä½†å®é™…æ•ˆæœæ¯”è‡ªè¡Œå¼€å‘çš„æ¯”è¾ƒè¦å¥½ã€‚\npackage cn.fatedeity.algorithm.leetcode; public class LongestCommonPrefix { public String answer(String[] strs) { if (strs.length == 1) { return strs[0]; } String prefix = strs[0]; for (String str : strs) { while (!str.startsWith(prefix)) { prefix = prefix.substring(0, prefix.length() - 1); if (prefix.length() == 0) { return \u0026quot;\u0026quot;; } } } return prefix; } } ","permalink":"https://fatedeity.cn/posts/leetcode/longest-common-prefix.html","title":"LeetCode - æœ€é•¿å…¬å…±å‰ç¼€"},{"content":"â€œåŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹â€æ˜¯ä¸€æ¡æ¯”è¾ƒæŠ½è±¡ã€æ³›åŒ–çš„è®¾è®¡æ€æƒ³ï¼Œå…¶çš„å¦ä¸€ä¸ªè¡¨è¿°æ˜¯â€œåŸºäºæŠ½è±¡è€Œéå®ç°ç¼–ç¨‹â€ã€‚ä»è¿™æ¡è®¾è®¡æ€æƒ³ä¸­è¡ç”Ÿçš„ç†è§£å°±æ˜¯ï¼Œè¶ŠæŠ½è±¡ã€è¶Šé¡¶å±‚ã€è¶Šè„±ç¦»å…·ä½“æŸä¸€å®ç°çš„è®¾è®¡ï¼Œè¶Šèƒ½æé«˜ä»£ç çš„çµæ´»æ€§ï¼Œè¶Šèƒ½åº”å¯¹æœªæ¥çš„éœ€æ±‚å˜åŒ–ã€‚\næŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ« åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹å½“ä¸­ï¼ŒæŠ½è±¡ç±»å’Œæ¥å£æ˜¯ä¸ºæŠ½è±¡è€Œç”Ÿè€Œçš„ä¸¤ä¸ªæ¦‚å¿µï¼Œåœ¨åˆå­¦æ—¶ç‰¹åˆ«å®¹æ˜“ææ··å®ƒä»¬ä¿©ã€‚\nJava æ—¢æ”¯æŒæ¥å£ï¼Œä¹Ÿæ”¯æŒæŠ½è±¡ç±»ï¼Œè¿™é‡Œä¸»è¦æ‹¿ Java çš„æ¥å£å’ŒæŠ½è±¡ç±»åšæ¯”è¾ƒã€‚ç®€å•åœ°åœ¨ Java ä¸­å®šä¹‰è¿™ä¸¤ä¸ªæ¦‚å¿µå°±æ˜¯ï¼ŒæŠ½è±¡ç±»æ˜¯åŒ…å«æŠ½è±¡æ–¹æ³•çš„ç±»ï¼Œæ¥å£æ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡ã€‚\næŠ½è±¡ç±» åœ¨ Java ä¸­ï¼ŒæŠ½è±¡ç±»ä»ç„¶ä»¥ class å®šä¹‰ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ  abstract ä¿®é¥°ï¼Œå¦‚ä¸‹æ˜¯æŠ½è±¡ç±»çš„å®šä¹‰ï¼š\n[public|protected] abstract class ClassName { abstract void fun(); } ä»å®šä¹‰ä¸Šçœ‹ï¼ŒJava ä¸­çš„æŠ½è±¡ç±»å°±æ˜¯ç”¨æ¥ç»§æ‰¿çš„ï¼Œæ²¡æœ‰è¢«ç»§æ‰¿çš„æŠ½è±¡ç±»æ²¡æœ‰ä»»ä½•å®é™…çš„ä½œç”¨ã€‚è€Œä¸”ï¼ŒæŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•åªæ˜¯èµ·åˆ°ä¸€ä¸ªé™åˆ¶çš„ä½œç”¨ï¼Œå¹¶æ²¡æœ‰æä¾›å®é™…çš„æ–¹æ³•ä½“ï¼Œè¿™ä¹Ÿè¦æ±‚å­ç±»å»å®ç°è‡ªå·±çš„æ–¹æ³•ä½“ã€‚\nå°†æŠ½è±¡ç±»çš„ç‰¹å¾æ€»ç»“ä¸€ä¸‹ï¼Œå¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\næŠ½è±¡ç±»ä¸å…è®¸è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿ æŠ½è±¡ç±»å¯ä»¥åŒ…å«å±æ€§å’Œæ–¹æ³•ï¼Œæ–¹æ³•é‡Œæ—¢å¯ä»¥åŒ…å«å…·ä½“å®ç°ï¼Œä¹Ÿå¯ä»¥ä¸åŒ…å«å…·ä½“å®ç°ï¼Œä¸åŒ…å«å…·ä½“å®ç°çš„æ–¹æ³•ç§°ä¸ºæŠ½è±¡æ–¹æ³• å­ç±»ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå¿…é¡»å®ç°æŠ½è±¡ç±»çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³• æ¥å£ åœ¨ Java ä¸­ï¼Œæ¥å£ä»¥ interface å®šä¹‰ï¼Œä¸ class å®šä¹‰çš„ç±»ä¸åŒï¼Œå¦‚ä¸‹æ˜¯æ¥å£çš„å®šä¹‰ï¼š\n[public|protected] interface InterfaceName { void func(); } æ¥å£å®é™…ä¸Šä¹Ÿå¯ä»¥åŒ…å«å˜é‡å’Œæ–¹æ³•ï¼Œä½†æ˜¯ï¼Œæ¥å£ä¸­çš„å˜é‡ä¼šè¢«éšå¼åœ°æŒ‡å®šä¸º public static final ä¿®é¥°çš„ä¸å¯å˜é‡ï¼Œæ¥å£ä¸­çš„æ–¹æ³•ä¼šè¢«éšå¼åœ°æŒ‡å®šä¸º public abstract ä¿®é¥°çš„æ–¹æ³•ã€‚\nå°†æ¥å£çš„ç‰¹æ€§æ€»ç»“ä¸€ä¸‹ï¼Œå¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\næ¥å£ä¸èƒ½å£°æ˜å±æ€§ï¼Œå¯ä»¥å£°æ˜çš„æ˜¯é™æ€å˜é‡ æ¥å£å£°æ˜çš„æ–¹æ³•ä¸åŒ…å«å…·ä½“å®ç° ç±»å®ç°æ¥å£çš„æ—¶å€™ï¼Œå¿…é¡»å®ç°æ¥å£ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³• åŒºåˆ« ä»ä¸Šè¿°å¯¹æŠ½è±¡ç±»å’Œæ¥å£çš„ç®€å•åˆ†æçœ‹ï¼ŒæŠ½è±¡ç±»å’Œæ¥å£çš„æ¦‚å¿µéå¸¸ç›¸ä¼¼ï¼Œä»æ˜é¢ä¸Šçœ‹ï¼Œå…¶æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼ŒæŠ½è±¡ç±»æ˜¯ç”¨æ¥ç»§æ‰¿çš„ï¼Œæ¥å£æ˜¯ç”¨æ¥å®ç°çš„ã€‚\nä»æ›´æ·±å±‚æ¬¡çš„è§’åº¦ä¸Šçœ‹ï¼ŒæŠ½è±¡ç±»æ˜¯ä¸èƒ½è¢«å®ä¾‹åŒ–çš„ç±»ï¼Œåªèƒ½è¢«å­ç±»ç»§æ‰¿ï¼Œç»§æ‰¿å…³ç³»è¡¨ç¤ºçš„æ˜¯ä¸€ç§ is-A çš„å…³ç³»ï¼Œæ¥å£è¡¨ç¤ºçš„æ˜¯ä¸€ç§ has-A å…³ç³»ã€‚\nåœ¨ä½¿ç”¨æ—¶ï¼ŒæŠ½è±¡ç±»å¯ä»¥å®šä¹‰ä¸€äº›å…¬å…±çš„å±æ€§ã€æ–¹æ³•ï¼ŒæŠ½è±¡æ–¹æ³•ç”¨äºå£°æ˜å­ç±»ç»§æ‰¿çš„çº¦æŸï¼›æ¥å£çš„ä¸»è¦ä½œç”¨å°±æ˜¯å£°æ˜å®ç°çš„åè®®ï¼Œä½†æ˜¯ç›¸æ¯”æŠ½è±¡ç±»çš„ä¼˜åŠ¿å°±æ˜¯ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚\næŠ½è±¡ç±»å’Œæ¥å£çš„ä½¿ç”¨ æŠ½è±¡ç±»çš„ä½¿ç”¨ é¦–å…ˆï¼Œåªèƒ½è¢«å­ç±»ç»§æ‰¿çš„æŠ½è±¡ç±»èƒ½è§£å†³ä»£ç å¤ç”¨çš„é—®é¢˜ã€‚\nç„¶åï¼ŒæŠ½è±¡ç±»è¡¨è¾¾çš„æ˜¯ä¸€ç§æŠ½è±¡æ¦‚å¿µï¼Œé€‚ç”¨äºè¡¨ç¤ºç°å®ç”Ÿæ´»ä¸­çš„æŠ½è±¡æ¦‚å¿µã€‚å¦‚ç‹—æ˜¯å…·ä½“å¯¹è±¡ï¼ŒåŠ¨ç‰©åˆ™æ˜¯æŠ½è±¡æ¦‚å¿µã€‚\nä½¿ç”¨æŠ½è±¡æ–¹æ³•ï¼Œè€Œéç©ºçš„æ–¹æ³•ä½“ï¼Œåˆ›å»ºå­ç±»æ—¶å°±çŸ¥é“ä»–å¿…é¡»è¦é‡å†™è¯¥æ–¹æ³•ï¼Œè€Œä¸èƒ½å¿½ç•¥ã€‚\nä½¿ç”¨æŠ½è±¡ç±»ï¼Œç±»çš„ä½¿ç”¨è€…åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå°±çŸ¥é“ä»–å¿…é¡»è¦ä½¿ç”¨æŸä¸ªå…·ä½“å­ç±»ï¼Œè€Œä¸æ˜¯æŠ½è±¡ç±»æœ¬èº«ã€‚\nä½¿ç”¨æŠ½è±¡ç±»æé«˜äº†å®‰å…¨æ€§ï¼Œé™ä½äº†å¼€å‘è€…çŠ¯é”™çš„æ¦‚ç‡ï¼Œæ˜¯ä¸€ç§æ›´ä¼˜é›…çš„ç¼–ç æ–¹å¼ã€‚\næŠ½è±¡ç±»æ›´å¤šçš„ä½œç”¨æ˜¯å¼•å¯¼ä½¿ç”¨è€…æ­£ç¡®ä½¿ç”¨ï¼Œé¿å…è¢«è¯¯ç”¨ã€‚\næ¥å£çš„ä½¿ç”¨ æ¥å£æ˜¯å¯¹è¡Œä¸ºçš„ä¸€ç§æŠ½è±¡ï¼Œç›¸å½“äºä¸€ç»„åè®®ï¼Œæ›´ä¾§é‡äºè§£è€¦ã€‚\nè°ƒç”¨è€…åªéœ€è¦å…³æ³¨æŠ½è±¡çš„æ¥å£ï¼Œä¸éœ€è¦äº†è§£å…·ä½“çš„å®ç°ï¼Œå…·ä½“çš„å®ç°ä»£ç å¯¹è°ƒç”¨è€…é€æ˜ã€‚æ¥å£å®ç°äº†çº¦å®šå’Œå®ç°ç›¸åˆ†ç¦»ï¼Œå¯ä»¥é™ä½ä»£ç é—´çš„è€¦åˆï¼Œæé«˜ä»£ç çš„æ‰©å±•æ€§ã€‚\né…åˆä½¿ç”¨ å¦‚æœæŠ½è±¡ç±»åªå®šä¹‰æŠ½è±¡æ–¹æ³•ï¼Œé‚£æŠ½è±¡ç±»å’Œæ¥å£éå¸¸ç›¸ä¼¼ã€‚ä½†æ¥å£å’ŒæŠ½è±¡ç±»åœ¨æ ¹æœ¬ä¸Šæ˜¯ä¸åŒçš„ï¼Œä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä½†åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ã€‚\næŠ½è±¡ç±»å’Œæ¥å£æ˜¯é…åˆè€Œä¸æ˜¯æ›¿ä»£ï¼Œå®ƒä»¬ç»å¸¸ä¸€èµ·ä½¿ç”¨ï¼Œæ¥å£å£°æ˜èƒ½åŠ›ï¼ŒæŠ½è±¡ç±»æä¾›é»˜è®¤å®ç°ï¼Œå®ç°å…¨éƒ¨æˆ–éƒ¨åˆ†æ–¹æ³•ï¼Œä¸€ä¸ªæ¥å£ç»å¸¸æœ‰ä¸€ä¸ªå¯¹åº”çš„æŠ½è±¡ç±»ã€‚\næ¯”å¦‚ï¼Œåœ¨ Java ç±»åº“ä¸­æœ‰ä»¥ä¸‹å…³ç³»ï¼š\nCollection æ¥å£å’Œå¯¹åº”çš„ AbstractCollection æŠ½è±¡ç±» List æ¥å£å’Œå¯¹åº”çš„ AbstractList æŠ½è±¡ç±» Map æ¥å£å’Œå¯¹åº”çš„ AbstractMap æŠ½è±¡ç±» æ¨¡æ‹ŸæŠ½è±¡ç±»å’Œæ¥å£ é€šè¿‡æŠ½è±¡ç±»å®ç°æ¥å£ æ¥å£æ²¡æœ‰æˆå‘˜å˜é‡ï¼Œæ²¡æœ‰æ–¹æ³•å®ç°ï¼Œåªæœ‰æ–¹æ³•å£°æ˜ï¼Œå®ç°æ¥å£çš„ç±»å¿…é¡»å®ç°æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ã€‚\nåªè¦æ»¡è¶³ä¸Šè¿°å‡ ä¸ªç‰¹ç‚¹ï¼Œä»è®¾è®¡çš„è§’åº¦ä¸Šè®²ï¼Œå®ƒå°±å¯ä»¥å«ä½œæ¥å£ã€‚\nåœ¨ Java ä¸­ï¼Œä½¿ç”¨æŠ½è±¡ç±»å®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå³æŠ½è±¡ç±»åªå®šä¹‰æŠ½è±¡æ–¹æ³•å³å¯ï¼Œç¼ºé™·å°±æ˜¯å­ç±»æ— æ³•ç»§æ‰¿å¤šä¸ªæŠ½è±¡ç±»ã€‚\nç”¨æ™®é€šç±»æ¨¡æ‹Ÿæ¥å£ æ™®é€šçš„ç±»æ˜¯å¯ä»¥åŒ…å«å…·ä½“å®ç°çš„ï¼Œè¿™ä¸ç¬¦åˆæ¥å£çš„å®šä¹‰ã€‚ä½†æ˜¯ï¼Œå¯ä»¥è®©ç±»ä¸­çš„æ–¹æ³•æŠ›å‡º NoSuchMethodError é”™è¯¯æ¥æ¨¡æ‹Ÿä¸åŒ…å«å®ç°çš„æ¥å£ï¼Œå¹¶ä¸”å¼ºè¿«å­ç±»åœ¨ç»§æ‰¿è¿™ä¸ªçˆ¶ç±»æ—¶éƒ½å»ä¸»åŠ¨å®ç°çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¦åˆ™å°±ä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸ã€‚\nä¸ºäº†é¿å…æ™®é€šçš„ç±»è¢«å®ä¾‹åŒ–ï¼Œéœ€è¦å°†è¿™ä¸ªç±»çš„æ„é€ å‡½æ•°å£°æ˜æˆ protected è®¿é—®æƒé™ã€‚\nå…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š\npublic class MockInterface { protected MockInterface() {} public void funcA() { throw new NoSuchMethodError(); } } åŒæ ·çš„ï¼Œæ— è®ºæ˜¯ä½¿ç”¨æŠ½è±¡ç±»è¿˜æ˜¯æ™®é€šç±»ï¼Œå®ç°çš„æ¥å£éƒ½æ— æ³•æ»¡è¶³æ¥å£çš„æ‰€æœ‰ç‰¹æ€§ï¼Œè¿™é‡Œä¹Ÿä»…åšä¸€äº›äº†è§£ã€‚\nåŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹ åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæœ€å¤§çš„æŒ‘æˆ˜ä¹‹ä¸€å°±æ˜¯éœ€æ±‚çš„ä¸æ–­å˜åŒ–ï¼Œå› æ­¤ï¼Œå¼€å‘æ—¶ä¸€å®šè¦å…·æœ‰æŠ½è±¡æ„è¯†ã€å°è£…æ„è¯†ã€æ¥å£æ„è¯†ã€‚\nè¶ŠæŠ½è±¡ã€è¶Šé¡¶å±‚ã€è¶Šè„±ç¦»å…·ä½“æŸä¸€å®ç°çš„è®¾è®¡ï¼Œè¶Šèƒ½æé«˜ä»£ç çš„çµæ´»æ€§ã€æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§ã€‚\nè¿™ä¸ªæ—¶å€™ï¼Œæ¥å£çš„å­˜åœ¨å°±éå¸¸å¿…è¦äº†ï¼Œé€šè¿‡ä½¿ç”¨æ¥å£å®šä¹‰å®ç°ç±»çš„åè®®ï¼Œå°†çº¦å®šå’Œå®ç°åˆ†ç¦»ï¼Œåšåˆ°äº†è§£è€¦çš„æ•ˆæœã€‚\nåœ¨å®šä¹‰æ¥å£çš„æ—¶å€™ï¼Œä¸€äº›æ³¨æ„äº‹é¡¹å°±æ˜¯ï¼šå‘½åä¸€å®šè¦è¶³å¤Ÿé€šç”¨ï¼Œä¸èƒ½åŒ…å«è·Ÿå…·ä½“å®ç°ç›¸å…³çš„å­—çœ¼ï¼›å¦ä¸€æ–¹é¢ï¼Œä¸ç‰¹å®šå®ç°ç›¸å…³çš„æ–¹æ³•ä¸è¦å®šä¹‰åœ¨æ¥å£ä¸­ã€‚\né€šå¸¸ï¼Œè¶Šæ˜¯ä¸ç¨³å®šçš„ç³»ç»Ÿï¼Œè¶Šæ˜¯è¦åœ¨ä»£ç çš„æ‰©å±•æ€§ã€ç»´æŠ¤æ€§ä¸Šä¸‹åŠŸå¤«ã€‚ç›¸åï¼ŒæŸä¸ªç³»ç»Ÿç‰¹åˆ«ç¨³å®šï¼Œåœ¨å¼€å‘å®Œæˆä¹‹åï¼ŒåŸºæœ¬ä¸éœ€è¦åšç»´æŠ¤ï¼Œåˆ™æ²¡æœ‰å¿…è¦ä¸ºå…¶æ‰©å±•æ€§ã€ç»´æŠ¤æ€§æŠ•å…¥ä¸å¿…è¦çš„å¼€å‘æ—¶é—´ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/base-interface-not-implementation.html","title":"åŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹"},{"content":"é¢å‘å¯¹è±¡æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘çš„ç¼–ç¨‹èŒƒå¼ã€‚å…¶æ¦‚å¿µå’Œåº”ç”¨å·²è¶…è¶Šäº†ç¨‹åºè®¾è®¡å’Œè½¯ä»¶å¼€å‘ï¼Œæ‰©å±•åˆ°å¦‚æ•°æ®åº“ç³»ç»Ÿã€äº¤äº’å¼ç•Œé¢ã€åº”ç”¨ç»“æ„ã€åº”ç”¨å¹³å°ã€åˆ†å¸ƒå¼ç³»ç»Ÿã€ç½‘ç»œç®¡ç†ç»“æ„ã€CAD æŠ€æœ¯ã€äººå·¥æ™ºèƒ½ç­‰é¢†åŸŸã€‚\né¢å‘å¯¹è±¡ é¢å‘å¯¹è±¡ç¼–ç¨‹ é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject Oriented Programming, OOPï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼æˆ–ç¼–ç¨‹é£æ ¼ï¼Œå®ƒä»¥ç±»æˆ–å¯¹è±¡ä½œä¸ºç»„ç»‡ä»£ç çš„åŸºæœ¬å•å…ƒï¼Œå¹¶ä»¥å°è£…ã€ç»§æ‰¿ã€å¤šæ€è¿™ä¸‰ä¸ªç‰¹æ€§ä½œä¸ºä»£ç è®¾è®¡å’Œå®ç°çš„åŸºçŸ³ã€‚\né¢å‘å¯¹è±¡çš„ç±»æ˜¯æè¿°äº†ä¸€ç»„æœ‰ç›¸åŒç‰¹å¾ï¼ˆå±æ€§ï¼‰å’Œç›¸åŒè¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰çš„ä¸€ç»„å¯¹è±¡çš„é›†åˆï¼›å¯¹è±¡æ˜¯ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œæ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€å’Œè¡Œä¸ºã€‚\né¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼ˆObject Oriented Programming Language, OOPLï¼‰æ˜¯æ”¯æŒä»¥ç±»æˆ–å¯¹è±¡çš„è¯­æ³•æœºåˆ¶ï¼Œå¹¶æœ‰ç°æˆçš„è¯­æ³•æœºåˆ¶ï¼Œèƒ½æ–¹ä¾¿åœ°å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹æ€§ï¼ˆå°è£…ã€ç»§æ‰¿ã€å¤šæ€ï¼‰çš„ç¼–ç¨‹è¯­è¨€ã€‚\né¢å‘å¯¹è±¡ç¼–ç¨‹è®¾è®¡å’Œåˆ†æ é¢å‘å¯¹è±¡åˆ†æï¼ˆObject Oriented Analysis, OOAï¼‰å°±æ˜¯è¦ææ¸…æ¥šæ˜¯ä»€ä¹ˆã€ä¸ºä»€ä¹ˆè¦åšã€‚\né¢å‘å¯¹è±¡è®¾è®¡ï¼ˆObject Oriented Design, OODï¼‰å°±æ˜¯è¦ææ¸…æ¥šç”±è°æ¥åšã€ä»€ä¹ˆæ—¶å€™åšã€åœ¨å“ªé‡Œåšã€æ€ä¹ˆåšã€åšåˆ°æ€æ ·çš„ç¨‹åº¦ã€‚\nè®¾è®¡å’Œåˆ†æå°±æ˜¯ä¸€ä¸ªå°†æƒ³æ³•ä»˜è¯¸äºå®é™…çš„è¿‡ç¨‹ï¼Œå› æ­¤ï¼Œå…¶ä¸­çš„æ¯ä¸€æ­¥éƒ½éå¸¸é‡è¦ï¼Œå½±å“åˆ°ç¨‹åºè¿™é¡¹å·¥ç¨‹çš„ç»´æŠ¤ã€‚\né¢å‘å¯¹è±¡çš„ä¼˜ç‚¹ é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š\nå¯é‡ç”¨æ€§ï¼šä»£ç é‡å¤å¯ç”¨ï¼Œå‡å°‘ä»£ç é‡ï¼Œæé«˜å¼€å‘æ•ˆç‡ å¯æ‰©å±•æ€§ï¼šæ–°çš„åŠŸèƒ½å¯ä»¥å¾ˆå®¹æ˜“åœ°åŠ å…¥åˆ°ç³»ç»Ÿä¸­æ¥ï¼Œä¾¿äºè½¯ä»¶çš„ä¿®æ”¹ å¯ç®¡ç†æ€§ï¼šèƒ½å¤Ÿå°†åŠŸèƒ½å’Œæ•°æ®ç»“åˆï¼Œæ–¹ä¾¿ç®¡ç† æ ¸å¿ƒç‰¹æ€§ å°è£… å°è£…çš„å«ä¹‰ å°è£…ä¹Ÿå«ä½œä¿¡æ¯éšè—æˆ–æ•°æ®è®¿é—®ä¿æŠ¤ã€‚è¯¦ç»†åœ°è¯´ï¼Œå°±æ˜¯æ•°æ®è¢«ä¿æŠ¤åœ¨æŠ½è±¡æ•°æ®ç±»å‹çš„å†…éƒ¨ï¼Œå°½å¯èƒ½å¯¹å¤–éšè—å†…éƒ¨çš„ç»†èŠ‚ï¼Œåªä¿ç•™ä¸€äº›ç»Ÿä¸€çš„æ–¹æ³•ä¾›å¤–éƒ¨ä½¿ç”¨ã€‚\næ¯”å¦‚è¯´ï¼Œå¯¹äºä¸€ä¸ªé’±åŒ…ç±»ï¼Œé‡Œé¢æœ‰ä½™é¢ã€å¸ç§è¿™ä¸¤ä¸ªå±æ€§ï¼Œé€šå¸¸æ˜¯ä¸å…è®¸å¤–éƒ¨ç›´æ¥æ›´æ–°ä½™é¢æˆ–è€…ç›´æ¥æ›´æ–°å¸ç§ï¼Œè€Œæ˜¯ä»¿ç…§ç°å®äº¤æ˜“çš„æ‰¾è¡¥é›¶é’±çš„æ–¹å¼ï¼Œå¯¹å¤–æä¾›ä¸€ä¸ªæ‰¾è¡¥é›¶é’±çš„æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ ¹æ®æä¾›çš„å‚æ•°æ¥æ›´æ–°ä½™é¢å’Œå¸ç§ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚\nå°è£…çš„ä¼˜ç‚¹ å°è£…å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š\næé«˜äº†ä»£ç çš„å®‰å…¨æ€§ï¼Œé˜»æ­¢å¤–éƒ¨éšæ„ä¿®æ”¹ï¼Œé¿å…é€ æˆæ•°æ®ä¸ä¸€è‡´ æé«˜äº†ä»£ç çš„æ˜“ç”¨æ€§ï¼Œç®€åŒ–å¤–éƒ¨è°ƒç”¨ï¼Œä¾¿äºæ‰©å±•å’Œåä½œ æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œå°è£…å†…éƒ¨ç»†èŠ‚ï¼Œæ–¹ä¾¿ä¿®æ”¹å†…éƒ¨ä»£ç  ç»§æ‰¿ ç»§æ‰¿çš„å«ä¹‰ ç»§æ‰¿æŒ‡çš„æ˜¯å­ç±»æ‹¥æœ‰çˆ¶ç±»çš„å…¨éƒ¨ç‰¹å¾å’Œè¡Œä¸ºï¼Œç”¨æ¥è¡¨ç¤ºç±»ä¹‹é—´ is-A çš„å…³ç³»ã€‚\næ¯”å¦‚è¯´ï¼Œæ±½è½¦æ˜¯ä¸€ç§äº¤é€šå·¥å…·ï¼Œæ±½è½¦ä¼šæœ‰äº¤é€šå·¥å…·çš„ä¸€äº›ç‰¹æ€§å’ŒåŠŸèƒ½ï¼Œäº¤é€šå·¥å…·ç‹­ä¹‰ä¸ŠæŒ‡ä¸€åˆ‡äººé€ çš„ç”¨äºäººç±»ä»£æ­¥æˆ–è¿è¾“çš„è£…ç½®ï¼Œæ±½è½¦å°±å±äºè¿™ç±»å·¥å…·ä¸­çš„ä¸€ç§ã€‚\nå•ç»§æ‰¿å’Œå¤šç»§æ‰¿ ä»ç»§æ‰¿çš„å¤šå‘æ€§æ¥è®²ï¼Œç»§æ‰¿å¯åˆ†ä¸ºä¸¤ç§æ¨¡å¼ï¼šå•ç»§æ‰¿å’Œå¤šç»§æ‰¿ã€‚\nå•ç»§æ‰¿è¡¨ç¤ºä¸€ä¸ªå­ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œå¤šç»§æ‰¿è¡¨ç¤ºä¸€ä¸ªå­ç±»å¯ä»¥ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ã€‚ä»ç°å®ä¸–ç•Œçš„è§’åº¦ä¸Šçœ‹ï¼Œå¤šç»§æ‰¿æ›´ç¬¦åˆç°å®ï¼Œæ¯”å¦‚è¯´ï¼ŒçŒ«æ—¢æ˜¯å“ºä¹³åŠ¨ç‰©ï¼Œåˆæ˜¯çˆ¬è¡ŒåŠ¨ç‰©ã€‚\nä½†æ˜¯ï¼Œä»è½¯ä»¶å¼€å‘çš„è§’åº¦ä¸Šçœ‹ï¼Œå•ç»§æ‰¿çš„ä¼˜ç‚¹åœ¨äºå±‚æ¬¡ç»“æ„æ¸…æ™°ï¼Œè®¾è®¡ä¸Šæ›´å®¹æ˜“æŠŠæ¡ï¼›å¤šç»§æ‰¿å¯ä»¥è®©å­ç±»å…·å¤‡å¤šä¸ªçˆ¶ç±»çš„ç‰¹å¾ï¼Œæ‹¥æœ‰æ›´ä¸°å¯Œçš„æ–¹æ³•ï¼Œä½†æ˜¯å¤šç»§æ‰¿ä¼šå‡ºç°è±å½¢ç»§æ‰¿çš„é—®é¢˜ã€‚\nç®€å•åœ°ç†è§£è±å½¢ç»§æ‰¿å°±æ˜¯ï¼Œå‡è®¾å­ç±» B å’Œå­ç±» C éƒ½ç»§æ‰¿è‡ªçˆ¶ç±» Aï¼Œä¸”éƒ½é‡å†™äº†çˆ¶ç±» A ä¸­çš„æ–¹æ³• funcï¼Œè€Œå­™å­ç±» D åŒæ—¶ç»§æ‰¿äº†å­ç±» B å’Œå­ç±» Cï¼Œå¯¹äºæ–¹æ³• func è€Œè¨€ï¼Œå­™å­ç±» D ä¼šå‡ºç°æ­§ä¹‰ã€‚\nç»§æ‰¿çš„ä¼˜ç¼ºç‚¹ ç»§æ‰¿æœ€å¤§çš„å¥½å¤„å°±æ˜¯ä»£ç å¤ç”¨ï¼Œå­ç±»å¯ä»¥ç›´æ¥é‡ç”¨çˆ¶ç±»ä¸­çš„ä»£ç ï¼Œé¿å…ä»£ç é‡å¤å†™å¤šéã€‚\nä½†æ˜¯è¿‡åº¦åœ°ä½¿ç”¨ç»§æ‰¿ä¼šå¯¼è‡´ä»£ç å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å˜å·®ï¼Œæœ‰å¯èƒ½å‡ºç°â€œçˆ¶ç±»ã€çˆ¶ç±»çš„çˆ¶ç±»â€¦â€¦â€çš„ä»£ç ã€‚\né€šå¸¸ï¼Œå¯ä»¥åœ¨å±‚æ¬¡ç®€å•ã€å…³ç³»ä¸å¤æ‚çš„æ—¶å€™ä½¿ç”¨ç»§æ‰¿ï¼Œåä¹‹ä½¿ç”¨ç»„åˆä»£æ›¿ç»§æ‰¿ã€‚\nå¤šæ€ å¤šæ€çš„å«ä¹‰ å¤šæ€æŒ‡çš„æ˜¯ä¸ºä¸åŒæ•°æ®ç±»å‹çš„å®ä½“æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œæˆ–ä½¿ç”¨ä¸€ä¸ªå•ä¸€çš„ç¬¦å·æ¥è¡¨ç¤ºå¤šä¸ªä¸åŒçš„ç±»å‹ã€‚\né€šè¿‡ç»§æ‰¿å®ç° å¤šæ€å¯ä»¥é€šè¿‡ç»§æ‰¿çš„æ–¹å¼å®ç°ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»ä¹‹åï¼Œå¹¶é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œåœ¨åˆå§‹åŒ–å­ç±»çš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥å°†å¯¹è±¡å®šä¹‰ä¸ºçˆ¶ç±»çš„æ•°æ®ç±»å‹ï¼Œè¿™æ—¶çš„å¯¹è±¡è°ƒç”¨çš„ä¼šæ˜¯é‡å†™åçš„å­ç±»æ–¹æ³•ã€‚\nå¦‚ä¸‹è¿°ä»£ç æ‰€ç¤ºï¼š\npackage cn.fatedeity.designpattern.polymorphism; /** * é€šè¿‡ç»§æ‰¿å®ç°å¤šæ€ */ public class ExtendCase { private static void test(Base base) { System.out.println(base.getSize()); } public static void main(String[] args) { Base baseAddOne = new BaseAddOne(); // 1 test(baseAddOne); Base baseAddTwo = new BaseAddTow(); // 2 test(baseAddTwo); } } class BaseAddTow extends Base { @Override public int getSize() { return this.size + 2; } } class BaseAddOne extends Base { @Override public int getSize() { return this.size + 1; } } class Base { protected int size = 0; public int getSize() { return size; } } é€šè¿‡æ¥å£å®ç° å¤šæ€è¿˜å¯ä»¥é€šè¿‡æ¥å£çš„æ–¹å¼å®ç°ï¼Œå½“æ¥å£è¢«å®ç°ä¹‹åï¼Œåœ¨åˆå§‹åŒ–å®ç°ç±»çš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥ç›´æ¥å°†è¿™ä¸ªå¯¹è±¡å®šä¹‰ä¸ºæ¥å£ç±»å‹ï¼Œè¿™æ—¶çš„å¯¹è±¡è°ƒç”¨çš„ä¼šæ˜¯å®ç°ç±»çš„æ–¹æ³•ã€‚\nå¦‚ä¸‹è¿°ä»£ç æ‰€ç¤ºï¼š\npackage cn.fatedeity.designpattern.polymorphism; /** * é€šè¿‡æ¥å£å®ç°å¤šæ€ */ public class ImplementsCase { private static void test(InterfaceBase base) { System.out.println(base.toString()); } public static void main(String[] args) { InterfaceBase interfaceOne = new InterfaceOne(); // This is InterfaceOne test(interfaceOne); InterfaceBase interfaceTwo = new InterfaceTow(); // This is InterfaceTwo test(interfaceTwo); } } class InterfaceTow implements InterfaceBase { @Override public String toString() { return \u0026quot;This is InterfaceTwo\u0026quot;; } } class InterfaceOne implements InterfaceBase { @Override public String toString() { return \u0026quot;This is InterfaceOne\u0026quot;; } } interface InterfaceBase { String toString(); } é€šè¿‡é¸­å­ç±»å‹å®ç° æ‰€è°“çš„é¸­å­ç±»å‹ï¼ŒæŒ‡çš„æ˜¯åªå…³å¿ƒäº‹ç‰©çš„å¤–éƒ¨è¡Œä¸ºè€Œéå†…éƒ¨ç»“æ„ï¼Œå³ä¸å…³å¿ƒå¯¹è±¡æ˜¯ä»€ä¹ˆç±»å‹ï¼Œåªå…³å¿ƒè¯¥å¯¹è±¡æ˜¯å¦æ‹¥æœ‰æŒ‡å®šæ–¹æ³•ã€‚\né€šè¿‡é¸­å­ç±»å‹å®ç°å¤šæ€æ›´åŠ çµæ´»ï¼Œä¸éœ€è¦ç±»ä¹‹é—´æœ‰ç»§æ‰¿ã€æ¥å£å®ç°çš„å…³ç³»ï¼Œåªéœ€è¦å®ƒä»¬åŒæ—¶å®šä¹‰äº†ç›¸åŒçš„æ–¹æ³•å³å¯ã€‚å¦‚ä¸‹è¿°çš„ Python ä»£ç æ‰€ç¤ºï¼š\nclass Logger: def record(self): print('I write a log into file.') class DB: def record(self): print('I insert data into db.') def test(recorder): recorder.record() def demo(): logger = Logger() # I write a log into file. test(logger) db = DB() # I insert data into db. test(db) å¤šæ€çš„æ„ä¹‰ å¯¹äºç¬¬ä¸€ä¸ªä¾‹å­çš„ä»£ç ï¼Œä»…ç”¨ä¸€ä¸ª test() æ–¹æ³•å³å¯æµ‹è¯• Base ç±»çš„å­ç±»ï¼Œå³ä½¿è¦æ–°å¢ä¸€ä¸ª BaseAddThree å­ç±»ï¼ŒåŒæ ·ä¸éœ€è¦æ›´æ”¹ test() æ–¹æ³•ï¼Œä»…éœ€é‡å†™è‡ªå·±çš„ getSize() æ–¹æ³•å³å¯ï¼Œè¿™é‡Œæé«˜äº†ä»£ç çš„æ‰©å±•æ€§ã€‚\nåŒæ ·çš„ï¼Œä»…ç”¨ä¸€ä¸ª test() å³å¯å®Œæˆæ‰€æœ‰çš„æµ‹è¯•ï¼Œè€Œä¸éœ€å¯¹æ¯ä¸€ä¸ªå­ç±»éƒ½å†™ä¸€éæµ‹è¯•ä»£ç ï¼Œè¿™é‡Œæ˜¾ç„¶æé«˜äº†ä»£ç çš„å¤ç”¨æ€§ã€‚\né™¤æ­¤ä¹‹å¤–ï¼Œå¤šæ€è¿˜æ˜¯å¾ˆå¤šè®¾è®¡æ¨¡å¼ã€è®¾è®¡åŸåˆ™ã€ç¼–ç¨‹æŠ€å·§çš„ä»£ç å®ç°åŸºç¡€ã€‚\né¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹ ä¸ºä»€ä¹ˆä½¿ç”¨é¢å‘å¯¹è±¡è€Œä¸æ˜¯é¢å‘è¿‡ç¨‹ï¼Ÿ é¢å‘è¿‡ç¨‹æ˜¯ä¸€ç§æµç¨‹åŒ–çš„æ€ç»´æ¨¡å¼ï¼Œé¢å‘å¯¹è±¡æ˜¯ä¸€ç§è‡ªåº•å‘ä¸Šçš„æŠ½è±¡åŒ–çš„æ€ç»´æ¨¡å¼ã€‚\nç›¸æ¯”ä¹‹ä¸‹ï¼Œé¢å‘å¯¹è±¡æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š\né¢å‘å¯¹è±¡ç¼–ç¨‹æ›´åŠ èƒ½å¤Ÿåº”å¯¹å¤§è§„æ¨¡å¤æ‚ç¨‹åºçš„å¼€å‘ï¼Œå®ƒæä¾›äº†ä¸€ç§æ¸…æ™°çš„ã€æ¨¡å—åŒ–çš„ä»£ç ç»„ç»‡æ–¹å¼ é¢å‘å¯¹è±¡ç¼–ç¨‹çš„çš„ä¸‰å¤§ç‰¹æ€§æé«˜äº†ä»£ç çš„æ˜“ç»´æŠ¤æ€§ã€æ‰©å±•æ€§ã€å¤ç”¨æ€§ï¼Œå¹¶ä¸”å¤§éƒ¨åˆ†è®¾è®¡æ¨¡å¼éƒ½ä»¥é¢å‘å¯¹è±¡ä¸ºåŸºç¡€ é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€æ›´åŠ äººæ€§åŒ–ã€æ›´åŠ é«˜çº§ã€æ›´åŠ æ™ºèƒ½ï¼Œé¢å‘è¿‡ç¨‹çš„æµç¨‹åŒ–æ˜¯ä¸€ç§è®¡ç®—æœºæ€ç»´æ–¹æ³•ï¼Œè€Œé¢å‘å¯¹è±¡çš„æŠ½è±¡åŒ–æ˜¯ä¸€ç§äººç±»æ€ç»´æ–¹æ³• è¿åé¢å‘å¯¹è±¡ç¼–ç¨‹é£æ ¼çš„å…¸å‹ä»£ç è®¾è®¡ æ»¥ç”¨ setter() æ–¹æ³•å’Œ getter() æ–¹æ³•ä½¿å°è£…å¤±å»ä½œç”¨ å®šä¹‰å¤§è€Œå…¨çš„ Constants ç±»ã€Utils ç±»ä¹Ÿç ´åäº†å°è£…ç‰¹æ€§ MVC æ¨¡å¼æ˜¯åŸºäºè´«è¡€æ¨¡å‹çš„å¼€å‘æ¨¡å¼ï¼Œæ•°æ®å’Œæ“ä½œåˆ†å¼€ï¼Œæ˜¯å½»åº•çš„é¢å‘è¿‡ç¨‹ç¼–ç¨‹é£æ ¼ ","permalink":"https://fatedeity.cn/posts/programming-pattern/object-oriented-basic.html","title":"é¢å‘å¯¹è±¡çš„åŸºç¡€çŸ¥è¯†"},{"content":"ä½œä¸ºä¸€ä¸ªå¼€å‘äººå‘˜ï¼Œéƒ½æƒ³å†™å‡ºä¸€æ‰‹å¥½çš„ä»£ç ï¼Œè€Œä¸æ˜¯åˆ«äººç§°çš„â€œå±å±±â€ï¼Œè®¾è®¡æ¨¡å¼æä¾›äº†ä¸€ç³»åˆ—å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡åˆ©ç”¨è®¾è®¡æ¨¡å¼æ¥å°½å¯èƒ½ç»Ÿä¸€è§„èŒƒï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§ã€å¯æ‰©å±•æ€§ã€‚\næ¦‚å¿µåŸºç¡€ ç»å…¸å®šä¹‰ æ¨¡å¼èµ·æºäºå»ºç­‘ä¸šè€Œéè½¯ä»¶ä¸šï¼Œä¸‹é¢æ˜¯æœ€æ—©ç ”ç©¶æ¨¡å¼çš„ Christopher Alexander åšå£«å¯¹æ¨¡å¼ä¸‹çš„å®šä¹‰ï¼š\nA pattern is a successful or efficient solution to a recurring problem within a content.\næ¨¡å¼æ˜¯åœ¨ç‰¹å®šç¯å¢ƒä¸‹äººä»¬è§£å†³æŸç±»é‡å¤å‡ºç°é—®é¢˜çš„ä¸€å¥—æˆåŠŸæˆ–æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚\nåœ¨è½¯ä»¶ä¸šå½“ä¸­ï¼Œæœ€ç»å…¸çš„è®¾è®¡æ¨¡å¼ç ”ç©¶äººå‘˜è«è¿‡äºâ€œå››äººç»„â€ï¼ˆGoFï¼‰ï¼Œä»–ä»¬å¯¹è®¾è®¡æ¨¡å¼çš„å®šä¹‰å¦‚ä¸‹ï¼š\nDesign patterns are descriptions of comminicating objects and classes that are customized to solve a general design problem in a particular context.\nè®¾è®¡æ¨¡å¼æ˜¯åœ¨ç‰¹å®šç¯å¢ƒä¸‹ä¸ºè§£å†³æŸä¸€é€šç”¨è½¯ä»¶è®¾è®¡é—®é¢˜æä¾›çš„ä¸€å¥—å®šåˆ¶çš„è§£å†³æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆæè¿°äº†å¯¹è±¡å’Œç±»ä¹‹é—´çš„ç›¸äº’ä½œç”¨ã€‚\nè®¾è®¡æ¨¡å¼ç»“æ„ è®¾è®¡æ¨¡å¼æ˜¯å’Œæ•°æ®ç»“æ„ä¸ç®—æ³•åŒå±‚æ¬¡çš„çŸ¥è¯†ç‚¹ï¼Œåˆ©ç”¨æ•°æ®ç»“æ„ä¸ç®—æ³•å¯ä»¥å†™å‡ºé«˜æ•ˆçš„ä»£ç ï¼Œåˆ©ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å†™å‡ºå¯æ‰©å±•ã€å¯è¯»ã€å¯ç»´æŠ¤çš„é«˜è´¨é‡ä»£ç ã€‚\nåœ¨è½¯ä»¶ä¸šå½“ä¸­ï¼Œè®¾è®¡æ¨¡å¼ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯è½¯ä»¶æ¨¡å¼ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œè´Ÿè´£ä¼˜åŒ–ç¼–ç ã€å®ç°é«˜è´¨é‡ä»£ç çš„ä¸€éƒ¨åˆ†ã€‚\nè®¾è®¡æ¨¡å¼å’Œè½¯ä»¶æ¨¡å¼ç±»ä¼¼ï¼ŒåŸºæœ¬ç»“æ„ä¸»è¦ç”± 4 ä¸ªéƒ¨åˆ†æ„æˆï¼š\næ¨¡å¼åç§°ï¼šç®€æ˜“æè¿°æ¨¡å¼çš„é—®é¢˜å‘ˆç°ã€è§£å†³æ–¹æ¡ˆæˆ–å®ç°æ•ˆæœ é—®é¢˜å‘ˆç°ï¼šæè¿°ä½•æ—¶ä½¿ç”¨æ¨¡å¼ï¼ŒåŒ…å«äº†è®¾è®¡ä¸­å­˜åœ¨çš„é—®é¢˜ä»¥åŠé—®é¢˜å­˜åœ¨çš„åŸå›  è§£å†³æ–¹æ¡ˆï¼šæè¿°ç»„æˆæˆåˆ†ä»¥åŠè¿™äº›ç»„æˆæˆåˆ†ä¹‹é—´çš„ç›¸äº’å…³ç³»ã€å„è‡ªçš„èŒè´£å’Œåä½œæ–¹å¼ å®ç°æ•ˆæœï¼šåº”ç”¨æ¨¡å¼ä¹‹åçš„æ•ˆæœä»¥åŠåœ¨ä½¿ç”¨æ¨¡å¼æ—¶åº”æƒè¡¡çš„é—®é¢˜ ç›®çš„å’Œä¼˜ç‚¹ æŒæ¡è®¾è®¡æ¨¡å¼ä¹‹åï¼Œåœ¨ä»¥ä¸‹åœºæ™¯çš„ä½œç”¨éå¸¸å¤§ï¼š\nä½¿ç”¨è®¾è®¡æ¨¡å¼ä½œä¸ºç¼–ç æ ‡å‡†ï¼Œèƒ½æ–¹ä¾¿å¼€å‘è¿‡ç¨‹ä¸­çš„æ²Ÿé€šå’Œäº¤æµ é¢å¯¹å¤æ‚ä»£ç ã€åŠŸèƒ½ã€ç³»ç»Ÿçš„è®¾è®¡å’Œå¼€å‘ï¼Œä¹Ÿèƒ½å¤Ÿå¾—å¿ƒåº”æ‰‹ã€æ¸¸åˆƒæœ‰ä½™ åˆ©ç”¨è®¾è®¡æ¨¡å¼ç¼–å†™å¥½çš„ä»£ç ï¼Œå¯ä»¥åœ¨å›¢é˜Ÿä¸­è„±é¢–è€Œå‡ºï¼Œå‘Šåˆ«è¢«åˆ«äººåæ§½ä»£ç å†™å¾—çƒ‚ ä¼˜ç§€çš„å¼€æºé¡¹ç›®ä¼šä½¿ç”¨å¾ˆå¤šè®¾è®¡åŸåˆ™ã€è®¾è®¡æ¨¡å¼æˆ–è®¾è®¡æ€æƒ³ï¼Œç†Ÿæ‚‰è¿™äº›å¯ä»¥åœ¨é˜…è¯»ä»£ç æ—¶æ›´è½»æ¾ é¢è¯•æ—¶ä¼šæœ‰é—®è®¾è®¡æ¨¡å¼çš„æƒ…å†µï¼ŒæŒæ¡è®¾è®¡æ¨¡å¼å¯ä»¥è½»æ¾åº”å¯¹ èŒä¸šå‘å±•åˆ°æ›´é«˜çº§çš„å·¥ç¨‹å¸ˆï¼Œä»£ç çš„è´¨é‡å½±å“ç€æ—¥å¸¸å¼€å‘ï¼Œä½œä¸ºé¢è¯•å®˜ä¹Ÿéœ€è¦äº†è§£ è¯„ä»·ç¼–ç è´¨é‡ å­¦ä¹ è®¾è®¡æ¨¡å¼å°±æ˜¯ä¸ºäº†æé«˜ä»£ç çš„è´¨é‡ï¼Œåœ¨å­¦ä¹ è®¾è®¡æ¨¡å¼ä¹‹å‰ï¼Œåº”å½“å…ˆäº†è§£ç¼–ç è´¨é‡çš„æ¦‚å¿µå’Œè¯„ä»·æ ‡å‡†ã€‚\nä»£ç è´¨é‡æ˜¯ä¸€ä¸ªç»¼åˆå„ç§æ ‡å‡†å¾—åˆ°çš„ç»“è®ºï¼Œä¸èƒ½é€šè¿‡å•ä¸€çš„ç»´åº¦å»è¯„ä»·ä¸€æ®µä»£ç å†™å¾—å¥½åã€‚å³ä½¿æ˜¯å¯æ‰©å±•æ€§éå¸¸å¥½çš„ä»£ç ï¼Œä½†æ˜¯å¯è¯»æ€§éå¸¸å·®ï¼Œå¹¶ä¸èƒ½è¯„ä»·è¿™æ®µä»£ç è´¨é‡é«˜ã€‚\nå¦‚ä½•è¯„ä»· å¯¹ç¼–ç è´¨é‡çš„å¸¸è§è¯„ä»·æ ‡å‡†éå¸¸å¤šï¼Œè€Œå®ƒä»¬åˆå­˜åœ¨ç€åŒ…å«ã€é‡å ã€ç›¸äº’å½±å“çš„å…³ç³»ï¼Œå¦‚ä¸€æ®µä»£ç çš„å¯è¯»æ€§ã€å¯æ‰©å±•æ€§éå¸¸å¥½ï¼Œä¹Ÿæ„å‘³ç€è¿™æ®µä»£ç çš„å¯ç»´æŠ¤æ€§éå¸¸å¥½ã€‚\nåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œé€šå¸¸æ˜¯æ— æ³•å®¢è§‚åœ°å»è¯„ä»·ä»£ç çš„è´¨é‡é«˜ä½ï¼Œå¯¹äºåŒä¸€æ®µä»£ç ï¼Œé«˜çº§å¼€å‘å·¥ç¨‹å¸ˆå¯èƒ½è§‰å¾—å¯è¯»æ€§éå¸¸å¥½ï¼Œè€Œåˆçº§å¼€å‘å·¥ç¨‹å¸ˆå°±ä¼šè§‰å¾—éš¾ä»¥é˜…è¯»ï¼Œä»–ä»¬çš„è¯„ä»·æ ‡å‡†è‚¯å®šæ˜¯ä¸ä¸€æ ·çš„ã€‚\nè¯„ä»·æ ‡å‡† ä»£ç è´¨é‡çš„è¯„ä»·è¯è¯­éå¸¸å¤šï¼Œä½†ä½¿ç”¨æ—¶åº”å°½é‡é¿å…è¿‡äºæŠ½è±¡æˆ–è¿‡äºç»†èŠ‚çš„è¯„ä»·ï¼Œå°½é‡ä½¿ç”¨è¾ƒä¸ºç²¾å‡†çš„è¯è¯­ã€‚\nå¦‚ä¸‹æ˜¯å¸¸ç”¨çš„å‡ ä¸ªè¯„ä»·æ ‡å‡†ï¼š\nå¯ç»´æŠ¤æ€§ (maintainability)ï¼šæŒ‡çš„æ˜¯å¯ä»¥åœ¨ä¸ç ´ååŸæœ‰è®¾è®¡ã€ä¸å¼•å…¥æ–° bug çš„å‰æä¸‹å¿«é€Ÿä¿®æ”¹æˆ–è€…æ·»åŠ ä»£ç  å¯è¯»æ€§ (readability)ï¼šé€šè¿‡çœ‹ä»£ç æ˜¯å¦ç¬¦åˆç¼–ç è§„èŒƒã€å‘½åæ˜¯å¦è¾¾æ„ã€æ³¨é‡Šæ˜¯å¦è¯¦å°½ã€æ¨¡å—åˆ’åˆ†æ˜¯å¦æ¸…æ™°ã€æ˜¯å¦ç¬¦åˆé«˜å†…èšä½è€¦åˆç­‰ç­‰ å¯æ‰©å±•æ€§ (extensibility)ï¼šæŒ‡çš„æ˜¯åœ¨ä¸ä¿®æ”¹æˆ–å°‘é‡ä¿®æ”¹åŸæœ‰ä»£ç çš„å‰æä¸‹ï¼Œé€šè¿‡æ‰©å±•çš„æ–¹å¼æ·»åŠ æ–°çš„åŠŸèƒ½ä»£ç  ç®€æ´æ€§ (simplicity)ï¼šä»£ç è¦å°½é‡ç®€å•ï¼Œé€»è¾‘æ¸…æ™°ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—ä»£ç æ˜“è¯»ã€æ˜“ç»´æŠ¤ å¯å¤ç”¨æ€§ (reusability)ï¼šå°½é‡å‡å°‘é‡å¤ä»£ç çš„ç¼–å†™ï¼Œå¤ç”¨å·²æœ‰çš„ä»£ç ï¼Œè§£è€¦ã€é«˜å†…èšã€æ¨¡å—åŒ–éƒ½èƒ½æé«˜ä»£ç çš„å¯å¤ç”¨æ€§ å¯æµ‹è¯•æ€§ (testability)ï¼šä»£ç å¯æµ‹è¯•æ€§çš„å¥½åï¼Œèƒ½ä»ä¾§é¢ä¸Šéå¸¸å‡†ç¡®åœ°åæ˜ ä»£ç è´¨é‡çš„å¥½å å…¶ä¸­å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§ã€å¯æ‰©å±•æ€§æ˜¯æœ€é‡è¦çš„ä¸‰ä¸ªè¯„ä»·æ ‡å‡†ã€‚\nå†…èšã€è€¦åˆ å†…èšæŒ‡çš„æ˜¯ä¸€ä¸ªæ¨¡å—å†…éƒ¨å„æˆåˆ†ä¹‹é—´ç›¸å…³è”ç¨‹åº¦çš„åº¦é‡ã€‚æ‰€è°“é«˜å†…èšï¼Œå°±æ˜¯ç›¸è¿‘çš„åŠŸèƒ½åº”è¯¥æ”¾åœ¨ä¸€ä¸ªæ¨¡å—å†…ï¼Œä¸ç›¸è¿‘çš„åŠŸèƒ½ä¸è¦æ”¾åœ¨ä¸€ä¸ªæ¨¡å—å†…ã€‚\nè€¦åˆæŒ‡çš„æ˜¯ä¸¤ä¸ªæ¨¡å—ä¹‹é—´çš„å…³è”ç¨‹åº¦ã€‚æ‰€è°“æ¾è€¦åˆæŒ‡çš„æ˜¯ï¼Œä¸¤ä¸ªæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ç®€å•æ¸…æ™°ï¼Œå³ä½¿ä¸¤ä¸ªæ¨¡å—æœ‰ä¾èµ–å…³ç³»ï¼Œä¸€ä¸ªæ¨¡å—çš„æ”¹åŠ¨ä¸ä¼šæˆ–è€…å¾ˆå°‘å½±å“åˆ°å¦ä¸€ä¸ªæ¨¡å—ã€‚\né«˜å†…èšå’Œæ¾è€¦åˆé€šå¸¸æ˜¯ä¸€èµ·å‡ºç°çš„ï¼Œé«˜å†…èšæœ‰åŠ©äºæ¾è€¦åˆï¼Œæ¾è€¦åˆåˆéœ€è¦é«˜å†…èšçš„æ”¯æŒã€‚é«˜å†…èšå’Œæ¾è€¦åˆçš„ç¨‹åºåœ¨å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§ã€å¯æ‰©å±•æ€§ä¸Šéƒ½ä¼šå¥½å¾ˆå¤šã€‚\né«˜è´¨é‡ç¼–ç  è¦æƒ³ç¼–å†™é«˜è´¨é‡çš„ä»£ç ï¼Œå¯ä»¥ä»è®¾è®¡é£æ ¼ã€è®¾è®¡åŸåˆ™ã€è®¾è®¡æ¨¡å¼ã€ç¼–ç¨‹è§„èŒƒã€é‡æ„æŠ€å·§ç­‰ç­‰æ–¹å‘ç€æ‰‹ã€‚\nè®¾è®¡é£æ ¼ ç°åœ¨ä¸»æµçš„ç¼–ç¨‹é£æ ¼åˆ†ä¸ºä¸‰ç§ï¼šé¢å‘è¿‡ç¨‹ã€é¢å‘å¯¹è±¡ã€å‡½æ•°å¼ç¼–ç¨‹ã€‚\né¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯å…¶ä¸­ç›¸å¯¹æµè¡Œçš„é£æ ¼ï¼Œè€Œä¸”å¤§éƒ¨åˆ†çš„è®¾è®¡åŸåˆ™ã€è®¾è®¡æ¨¡å¼éƒ½æ˜¯åŸºäºé¢å‘å¯¹è±¡ç¼–ç¨‹å®ç°çš„ã€‚\nè®¾è®¡åŸåˆ™ è®¾è®¡åŸåˆ™å¯ä»¥æŒ‡å¯¼ä»£ç è®¾è®¡ï¼Œå®ƒä»¬éƒ½éå¸¸æŠ½è±¡ï¼Œé€šå¸¸æ˜¯åœ¨å¼€å‘æ—¶ç»™äºˆæŒ‡å¯¼æ„ä¹‰ã€‚\nå¸¸è§çš„è®¾è®¡åŸåˆ™æœ‰ SOLID åŸåˆ™ã€DRP åŸåˆ™ã€KISS åŸåˆ™ã€YAGNI åŸåˆ™ã€LOD åŸåˆ™ç­‰ã€‚\nè®¾è®¡æ¨¡å¼ å¤§éƒ¨åˆ†è®¾è®¡æ¨¡å¼è§£å†³çš„æ˜¯ä»£ç çš„å¯æ‰©å±•æ€§é—®é¢˜ã€‚\nåœ¨è®¾è®¡æ¨¡å¼é¢†åŸŸï¼Œç‹­ä¹‰çš„è®¾è®¡æ¨¡å¼å°±æ˜¯æŒ‡ GoF çš„ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸºç¡€ã€‹ä¸€ä¹¦ä¸­åŒ…å«çš„ 23 ç§ç»å…¸çš„è®¾è®¡æ¨¡å¼ã€‚\nè¿™ 23 ç§è®¾è®¡æ¨¡å¼æ ¹æ®ç›®çš„ï¼ˆæ¨¡å¼æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼‰å¯åˆ†ä¸º 3 ç§ç±»å‹ï¼šåˆ›å»ºå‹ã€ç»“æ„å‹ã€è¡Œä¸ºå‹ï¼š\nåˆ›å»ºå‹è®¾è®¡æ¨¡å¼ä¸»è¦è§£å†³â€œå¯¹è±¡çš„åˆ›å»ºâ€é—®é¢˜ ç»“æ„å‹è®¾è®¡æ¨¡å¼ä¸»è¦è§£å†³â€œç±»æˆ–å¯¹è±¡çš„ç»„åˆæˆ–ç»„è£…â€é—®é¢˜ è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ä¸»è¦è§£å†³â€œç±»æˆ–å¯¹è±¡ä¹‹é—´çš„äº¤äº’â€é—®é¢˜ æŒ‰ç…§æˆ‘è‡ªå·±å¯¹è¿™äº›è®¾è®¡æ¨¡å¼çš„ç†è§£ç¨‹åº¦å¯¹è®¾è®¡æ¨¡å¼åšæ’åºï¼Œå®ƒä»¬çš„è¯¦ç»†åˆ†ç±»å¦‚ä¸‹ï¼š\nåˆ›é€ å‹è®¾è®¡æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼ã€å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€åŸå‹æ¨¡å¼ ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼šé€‚é…å™¨æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€è£…é¥°æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€ä»£ç†æ¨¡å¼ è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼šè§£é‡Šå™¨æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€èŒè´£é“¾æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ ç¼–ç¨‹è§„èŒƒ ç¼–ç¨‹è§„èŒƒå·²ç»æ·±å…¥åˆ°ç¼–ç å½“ä¸­ï¼Œæ˜¯ä¸€ç§æ›´å…·ä½“çš„è§£å†³ä»£ç å¯è¯»æ€§é—®é¢˜çš„æ–¹æ³•ã€‚\nç¼–ç¨‹è§„èŒƒæ›´æ³¨é‡ä»£ç ç»†èŠ‚ï¼Œæ¯”å¦‚ï¼Œå¦‚ä½•ç»™å˜é‡ã€ç±»ã€å‡½æ•°å‘½ä»¤ï¼Œå¦‚ä½•å†™ä»£ç æ³¨é‡Šï¼Œå‡½æ•°ä¸å®œè¿‡é•¿ã€å‚æ•°ä¸å®œè¿‡å¤šç­‰ã€‚\né‡æ„æŠ€å·§ é‡æ„æ˜¯ä»£ç å¼€å‘ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªç¯èŠ‚ï¼ŒæŒç»­é‡æ„æ˜¯ä¿æŒä»£ç è´¨é‡ä¸ä¸‹é™çš„æœ‰æ•ˆæ‰‹æ®µã€‚\nå…¶å®é‡æ„å·²ç»ä¸ç®—æ˜¯æ–¹æ³•è®ºäº†ï¼Œè€Œæ˜¯ä¸€ç§è¡Œä¸ºï¼Œé€šå¸¸é‡æ„æ˜¯åŸºäºè®¾è®¡é£æ ¼ã€è®¾è®¡åŸåˆ™ã€è®¾è®¡æ¨¡å¼ã€ç¼–ç¨‹è§„èŒƒè¿™äº›ç†è®ºæ‰èƒ½åšå¾—æ›´å¥½ã€‚\n","permalink":"https://fatedeity.cn/posts/programming-pattern/design-pattern-basic.html","title":"è®¾è®¡æ¨¡å¼çš„åŸºç¡€çŸ¥è¯†"},{"content":"é¢˜ç›®ä¿¡æ¯ æºåœ°å€ï¼šå¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°\nç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ ä¸­ä½æ•°ã€‚\nç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º $O(log (m+n))$ã€‚\næç¤ºä¿¡æ¯ ç¤ºä¾‹ 1 è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2] è¾“å‡ºï¼š2.00000 è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2 ç¤ºä¾‹ 2 è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4] è¾“å‡ºï¼š2.50000 è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5 æç¤º nums1.length == m nums2.length == n 0 \u0026lt;= m \u0026lt;= 1000 0 \u0026lt;= n \u0026lt;= 1000 1 \u0026lt;= m + n \u0026lt;= 2000 -10^6 \u0026lt;= nums1[i], nums2[i] \u0026lt;= 10^6 å®ç°é€»è¾‘ å½’å¹¶æ³• æœ€å…ˆæƒ³åˆ°çš„è§£é¢˜æ–¹æ³•å°±æ˜¯ï¼Œå°†ä¸¤ä¸ªæœ‰åºæ•°ç»„åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œç„¶åå†å¯¹ç»“æœé›†è®¡ç®—ä¸­ä½æ•°ã€‚è¿™ç§æ–¹æ³•ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒç›´æ¥çš„æ€è·¯ã€‚\nä½†æ˜¯ï¼Œåˆå¹¶ä¸¤ä¸ªæ•°ç»„æ˜¯æ­¤æ–¹æ³•æœ€è€—æ—¶çš„æ“ä½œï¼Œå¹¶ä¸”è¾¾åˆ° $O(m+n)$ çš„æ—¶é—´å¤æ‚åº¦ï¼Œå› æ­¤ï¼Œå¹¶ä¸ç¬¦åˆé¢˜ç›®ä¸­ç®—æ³•æ—¶é—´å¤æ‚åº¦è¾¾åˆ° $O(log (m+n))$ çš„è¦æ±‚ã€‚\nè€Œä¸”ï¼Œé‡‡ç”¨æ­¤æ–¹æ³•çš„ç©ºé—´å¤æ‚åº¦ï¼Œä¹Ÿè¾¾åˆ°äº† $O(m+n)$ çš„ç¨‹åº¦ï¼Œå…¶ç©ºé—´å ç”¨ä¹Ÿä¸ç®—ä¼˜ã€‚\npackage cn.fatedeity.algorithm.leetcode; public class MedianOfTwoSortedArrays { public double answer(int[] nums1, int[] nums2) { int i = 0, j = 0; int[] numbers = new int[nums1.length + nums2.length]; int index = 0; while (i \u0026lt; nums1.length || j \u0026lt; nums2.length) { if (i == nums1.length) { for (int k = j; k \u0026lt; nums2.length; k++) { numbers[index++] = nums2[k]; } break; } else if (j == nums2.length) { for (int k = i; k \u0026lt; nums1.length; k++) { numbers[index++] = nums1[k]; } break; } if (nums1[i] \u0026lt; nums2[j]) { numbers[index++] = nums1[i++]; } else if (nums2[j] \u0026lt; nums1[i]) { numbers[index++] = nums2[j++]; } else { numbers[index++] = nums1[i++]; numbers[index++] = nums2[j++]; } } if ((numbers.length \u0026amp; 1) == 0) { // æ•°ç»„é•¿åº¦æ˜¯å¶æ•° int mid = numbers.length \u0026gt;\u0026gt; 1; return (numbers[mid - 1] + numbers[mid]) / 2f; } else { return numbers[numbers.length \u0026gt;\u0026gt; 1]; } } } åŒæŒ‡é’ˆ é¢å¯¹ä¸¤ä¸ªæ•°ç»„ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨åŒæŒ‡é’ˆçš„æ–¹å¼ï¼Œåªè¦æ‰¾åˆ°ä¸­ä½æ•°çš„ä½ç½®å³å¯ã€‚ç”±äºä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦å·²çŸ¥ï¼Œå› æ­¤ä¸­ä½æ•°å¯¹åº”çš„ä¸¤ä¸ªæ•°ç»„çš„ä¸‹æ ‡ä¹‹å’Œä¹Ÿæ˜¯å·²çŸ¥ã€‚\nåŸºæœ¬æ€è·¯å°±æ˜¯ï¼Œé€šè¿‡åŒæŒ‡é’ˆå°†ä¸¤ä¸ªæ•°ç»„ä¸­è¾ƒå°çš„å€¼ä¸€ä¸ªä¸€ä¸ªåœ°è¿‡æ»¤æ‰ï¼Œç›´åˆ°è¿‡æ»¤åˆ°ä¸­ä½æ•°çš„ä¸‹æ ‡ä½ç½®ï¼Œå³å¯å¾—åˆ°ä¸¤ä¸ªæ•°ç»„çš„ä¸­ä½æ•°ã€‚\næ•´ä¸ªæ–¹æ³•ç›¸è¾ƒå½’å¹¶æ³•æ›´ä¼˜ï¼Œç©ºé—´å¤æ‚åº¦ç›´æ¥é™åˆ°äº† $O(1)$ çš„ç¨‹åº¦ï¼Œåœ¨è¿è¡Œæ•ˆç‡ä¸Šï¼Œå…¶åªå¾ªç¯äº† $\\frac{m+n}2$ æ¬¡ï¼Œä½†æ—¶é—´å¤æ‚åº¦ä»ç„¶æ˜¯ $O(n)$ï¼Œæœªè¾¾åˆ°é¢˜ç›®ä¸­ $O(log (m+n))$ çš„è¦æ±‚ã€‚\npackage cn.fatedeity.algorithm.leetcode; public class MedianOfTwoSortedArrays { public double answer(int[] nums1, int[] nums2) { int m = nums1.length; int n = nums2.length; int len = m + n; int mStart = 0, nStart = 0; int left = 0, right = 0; for (int i = 0; i \u0026lt;= len \u0026gt;\u0026gt; 1; i++) { left = right; if (mStart \u0026lt; m \u0026amp;\u0026amp; (nStart \u0026gt;= n || nums1[mStart] \u0026lt; nums2[nStart])) { right = nums1[mStart++]; } else { right = nums2[nStart++]; } } if ((len \u0026amp; 1) == 0) { return (left + right) / 2f; } else { return right; } } } ","permalink":"https://fatedeity.cn/posts/leetcode/median-of-two-sorted-arrays.html","title":"LeetCode - å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°"},{"content":"å­¦ä¹ ä»»ä½•ä¸œè¥¿ï¼Œéƒ½éœ€è¦æ·±ç©¶å…¶åº•å±‚ï¼ŒæŒæ¡å…¶æ€æƒ³ï¼Œèä¼šè´¯é€šæ‰èƒ½åº”ä¸‡å˜ã€‚å¯¹äºç®—æ³•è€Œè¨€ï¼ŒåŒæ ·å¦‚æ­¤ï¼Œç¼–ç¨‹çš„ç®—æ³•é¢˜åƒåƒä¸‡ï¼Œåˆ·é¢˜æ˜¯åˆ·ä¸å®Œçš„ï¼Œè¿˜æ˜¯éœ€è¦æŒæ¡ç®—æ³•çš„æ€æƒ³æ‰èƒ½æŒæ¡å¦‚ä½•æ±‚è§£ç®—æ³•é¢˜ã€‚\næœ€ç»å…¸çš„ç®—æ³•æ€æƒ³æœ‰ä»¥ä¸‹å‡ ç§ï¼š\nè´ªå¿ƒç®—æ³•ï¼šæ¯ä¸€æ­¥éƒ½é‡‡ç”¨æœ€ä¼˜çš„é€‰æ‹©ï¼Œä»è€Œå¸Œæœ›ç»“æœæ˜¯æœ€å¥½çš„ åˆ†æ²»ç®—æ³•ï¼šå°†åŸé—®é¢˜æ‹†åˆ†æˆå¤šä¸ªç»“æœç±»ä¼¼çš„å­é—®é¢˜ï¼Œé€’å½’è§£å†³åå†åˆå¹¶å…¶ç»“æœ å›æº¯ç®—æ³•ï¼šç±»ä¼¼äºè¯•æ¢æ€§æšä¸¾æœç´¢ï¼Œç”¨äºæŒ‡å¯¼æ·±åº¦ä¼˜å…ˆæœç´¢è¿™æ ·çš„ç»å…¸ç®—æ³• åŠ¨æ€è§„åˆ’ï¼šä¼˜åŒ–è‡ªé¡¶å‘ä¸‹çš„é‡å¤å­é—®é¢˜ï¼Œè‡ªåº•å‘ä¸Šåœ°æ¨ç®—å‡ºé—®é¢˜çš„æœ€ä¼˜è§£ è´ªå¿ƒç®—æ³• ç†è®º è´ªå¿ƒç®—æ³•æ˜¯ä¸€ç§åœ¨æ¯ä¸€æ­¥é€‰æ‹©å½“ä¸­éƒ½é‡‡å–å½“å‰çŠ¶æ€ä¸‹æœ€å¥½æˆ–æœ€ä¼˜ï¼ˆå³æœ€æœ‰åˆ©ï¼‰çš„é€‰æ‹©ï¼Œä»è€Œå¸Œæœ›å¯¼è‡´ç»“æœæ˜¯æœ€å¥½æˆ–æœ€ä¼˜çš„ç®—æ³•ã€‚\nè´ªå¿ƒç®—æ³•åœ¨æœ‰æœ€ä¼˜å­ç»“æ„çš„é—®é¢˜ä¸­å°¤ä¸ºæœ‰æ•ˆï¼Œç®€å•åœ°è¯´ï¼Œå°±æ˜¯é—®é¢˜èƒ½å¤Ÿåˆ†è§£æˆå­é—®é¢˜æ¥è§£å†³ï¼Œå­é—®é¢˜çš„æœ€ä¼˜è§£å°±èƒ½é€’æ¨åˆ°æœ€ç»ˆé—®é¢˜çš„æœ€ä¼˜è§£ã€‚\nç»†èŠ‚ åˆ›å»ºæ•°å­¦æ¨¡å‹æ¥æè¿°é—®é¢˜ï¼› æŠŠé—®é¢˜åˆ†æˆè‹¥å¹²ä¸ªå­é—®é¢˜ï¼› å¯¹æ¯ä¸€å­é—®é¢˜æ±‚è§£ï¼Œå¾—åˆ°å­é—®é¢˜çš„å±€éƒ¨æœ€ä¼˜è§£ï¼› æŠŠå­é—®é¢˜çš„å±€éƒ¨æœ€ä¼˜è§£åˆå¹¶æˆåŸæ¥é—®é¢˜çš„ä¸€ä¸ªè§£ã€‚ æ¡ˆä¾‹ å¯¹äºé›¶é’±çš„é—®é¢˜ï¼šå‡è®¾æœ‰ 25 åˆ†ã€10 åˆ†ã€5 åˆ†ã€1 åˆ†è¿™ 4 ç§ç¡¬å¸ï¼Œç°åœ¨è¦ä»ä¸­å–å‡º 41 åˆ†é’±çš„ç¡¬å¸ï¼Œå¹¶ä¸”è¦æ±‚ç¡¬å¸çš„ä¸ªæ•°æœ€å°‘ã€‚\né€šè¿‡è´ªå¿ƒç®—æ³•ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½æ‹¿å‡ºæœ€å¤§é¢åº¦çš„ç¡¬å¸ï¼Œç›´åˆ°æ­¤é¢åº¦è¶…è¿‡äº†æ‰€éœ€çš„é¢åº¦ã€‚è¯¦ç»†çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š\nå¯¹äº 41 åˆ†é’±ï¼Œæ‹¿å‡º 25 åˆ†çš„ç¡¬å¸ï¼Œæ­¤æ—¶è¿˜å·® 16 åˆ†é’±ï¼Œ25 åˆ†çš„ç¡¬å¸è¶…è¿‡äº†æ‰€éœ€çš„é¢åº¦ï¼Œè‡ªç„¶éœ€è¦å¾€æ›´ä¼˜ã€æ›´å°çš„é¢åº¦å»å–ï¼› å¯¹äº 16 åˆ†é’±ï¼Œæ‹¿å‡º 10 åˆ†çš„ç¡¬å¸ï¼Œæ­¤æ—¶è¿˜å·® 6 åˆ†é’±ï¼Œ10 åˆ†çš„ç¡¬å¸è¶…è¿‡äº†æ‰€éœ€çš„é¢åº¦ï¼Œè‡ªç„¶éœ€è¦å¾€æ›´ä¼˜ã€æ›´å°çš„é¢åº¦å»å–ï¼› å¯¹äº 6 åˆ†é’±ï¼Œæ‹¿å‡º 5 åˆ†çš„ç¡¬å¸ï¼Œæ­¤æ—¶è¿˜å·® 1 åˆ†é’±ï¼Œ5 åˆ†çš„ç¡¬å¸è¶…è¿‡äº†æ‰€éœ€çš„é¢åº¦ï¼Œè‡ªç„¶éœ€è¦å¾€æ›´ä¼˜ã€æ›´å°çš„é¢åº¦å»å–ï¼› å¯¹äº 1 åˆ†é’±ï¼Œæ‹¿å‡º 1 åˆ†çš„ç¡¬å¸ï¼Œæ­¤æ—¶è¿˜å·® 0 åˆ†é’±ï¼› æœ€ç»ˆï¼Œ41 åˆ†é’±æ‹†åˆ†æˆäº† 1 ä¸ª 25 åˆ†ã€1 ä¸ª 10 åˆ†ã€1 ä¸ª 5 åˆ†ã€1 ä¸ª 1 åˆ†ï¼Œæ€»å…± 4 ä¸ªç¡¬å¸ã€‚ åˆ†æ²»ç®—æ³• ç†è®º åˆ†æ²»ç®—æ³•å­—é¢ä¸Šçš„è§£é‡Šæ˜¯â€œåˆ†è€Œæ²»ä¹‹â€ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå¤æ‚çš„é—®é¢˜æ‹†åˆ†æˆä¸¤ä¸ªæˆ–å¤šä¸ªç›¸åŒæˆ–ç›¸ä¼¼çš„å­é—®é¢˜ï¼Œå†æŠŠå­é—®é¢˜æ‹†åˆ†æˆæ›´å°çš„å­é—®é¢˜\u0026hellip;\u0026hellip;ç›´åˆ°æœ€åå­é—®é¢˜å¯ä»¥ç®€å•åœ°æ±‚è§£ï¼ŒåŸé—®é¢˜çš„è§£å³å­é—®é¢˜çš„è§£çš„åˆå¹¶ã€‚\nåœ¨å¹¿ä¹‰çš„å®šä¹‰ä¸‹ï¼Œæ‰€æœ‰é€’å½’æˆ–å¾ªç¯çš„ç®—æ³•å‡è¢«è§†ä¸ºâ€œåˆ†æ²»ç®—æ³•â€ï¼Œä¹Ÿæœ‰åªå°†å…·æœ‰æœ€å°‘ä¸¤ä¸ªå­é—®é¢˜çš„ç®—æ³•ä½œä¸ºâ€œåˆ†æ²»ç®—æ³•â€ã€‚\nç»†èŠ‚ åœ¨æ¯ä¸€å±‚é€’å½’ä¸Šéƒ½æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼š\nåˆ†è§£ï¼šå°†åŸé—®é¢˜åˆ†è§£æˆè‹¥å¹²ä¸ªè§„æ¨¡è¾ƒå°ï¼Œç›¸å¯¹ç‹¬ç«‹ï¼Œä¸åŸé—®é¢˜å½¢å¼ç›¸åŒçš„å­é—®é¢˜ï¼› è§£å†³ï¼šè‹¥å­é—®é¢˜è§„æ¨¡è¾ƒå°ä¸”æ˜“äºè§£å†³æ—¶ï¼Œåˆ™ç›´æ¥è§£ã€‚å¦åˆ™ï¼Œé€’å½’åœ°è§£å†³å„å­é—®é¢˜ï¼› åˆå¹¶ï¼šå°†å„å­é—®é¢˜çš„è§£åˆå¹¶ä¸ºåŸé—®é¢˜çš„è§£ã€‚ æ¡ˆä¾‹ åˆ†æ²»ç®—æ³•æœ€è®©äººç†ŸçŸ¥çš„åº”ç”¨æ¡ˆä¾‹å°±æ˜¯å½’å¹¶æ’åºï¼Œä»¥ä¸‹å½’å¹¶æ’åºçš„éƒ¨åˆ†ä»£ç èƒ½ä¸€ä¸€å¯¹åº”åˆ†æ²»ç®—æ³•çš„ç»†èŠ‚æ­¥éª¤ï¼š\nvoid merge_sort(int array[], unsigned int first, unsigned int last) { int mid = 0; if (first \u0026lt; last) { mid = (first + last) / 2; merge_sort(array, first, mid); merge_sort(array, mid + 1,last); merge(array,first,mid,last); } } åœ¨ merge_sort() å‡½æ•°ä¸­ï¼Œå°†åŸæœ¬ä¸€ä¸ªåºåˆ—çš„æ’åºé—®é¢˜ä»ä¸­é—´ä½ç½®æ‹†åˆ†æˆäº†ä¸¤ä¸ªå­åºåˆ—çš„çš„æ’åºé—®é¢˜ï¼š\nå¯¹ first åˆ° mid çš„å­åºåˆ—æ’åºï¼› åœ¨å¯¹ mid+1 åˆ° last çš„å­åºåˆ—æ’åºï¼› å¹¶ä¸”æ˜¯é€’å½’è°ƒç”¨ merge_sort() è¿›è¡Œæ’åºï¼Œæœ€ç»ˆå°†ä¸¤ä¸ªæœ‰åºå­åºåˆ—åˆå¹¶ã€‚ å›æº¯ç®—æ³• ç†è®º å›æº¯ç®—æ³•æ˜¯ä¸€ç§æ‹©ä¼˜é€‰æ‹©çš„ç®—æ³•æ€æƒ³ï¼Œåˆç§°ä¸ºè¯•æ¢æ³•ï¼ŒæŒ‰æ‹©ä¼˜æ¡ä»¶å‘å‰æœç´¢ï¼Œä»¥è¾¾åˆ°ç›®æ ‡ã€‚\nå°†å›æº¯ç®—æ³•æ˜ å°„åˆ°ä¸€ä¸ªç°å®çš„ä¾‹å­å°±æ˜¯ï¼šåœ¨è¿·å®«å½“ä¸­ï¼Œé€šè¿‡é€‰æ‹©ä¸åŒçš„å²”è·¯å£å¯»æ‰¾å‡ºå£ï¼Œä¸€ä¸ªå²”è·¯å£ä¸€ä¸ªå²”è·¯å£åœ°å»å°è¯•æ‰¾åˆ°å‡ºå£ï¼Œå¦‚æœåœ¨ä¸­é€”èµ°é”™äº†è·¯ï¼Œåˆ™è¿”å›åˆ°å²”è·¯å£çš„å¦ä¸€æ¡è·¯ï¼Œç›´åˆ°æ‰¾åˆ°å‡ºå£ã€‚\nç»†èŠ‚ ç”¨å›æº¯ç®—æ³•è§£å†³é—®é¢˜çš„ä¸€èˆ¬æ­¥éª¤ï¼š\né’ˆå¯¹æ‰€ç»™é—®é¢˜ï¼Œå®šä¹‰é—®é¢˜çš„è§£ç©ºé—´ï¼Œå®ƒè‡³å°‘åŒ…å«é—®é¢˜çš„ä¸€ä¸ªï¼ˆæœ€ä¼˜ï¼‰è§£ï¼› ç¡®å®šæ˜“äºæœç´¢çš„è§£ç©ºé—´ç»“æ„ï¼Œä½¿å¾—èƒ½ç”¨å›æº¯æ³•æ–¹ä¾¿åœ°æœç´¢æ•´ä¸ªè§£ç©ºé—´ï¼› ä»¥æ·±åº¦ä¼˜å…ˆçš„æ–¹å¼æœç´¢è§£ç©ºé—´ï¼Œå¹¶ä¸”åœ¨æœç´¢è¿‡ç¨‹ä¸­ç”¨å‰ªæå‡½æ•°é¿å…æ— æ•ˆæœç´¢ã€‚ æ¡ˆä¾‹ åœ¨ 8 x 8 çš„æ£‹ç›˜ä¸Šï¼Œæ¯ä¸€ä¸ªç©ºæ ¼å¯ä»¥æ”¾ä¸€ä¸ªçš‡åï¼Œçš‡åå¯ä»¥æ”»å‡»ä¸å®ƒåŒè¡Œã€åŒåˆ—æˆ–åŒä¸€æ–œçº¿çš„å…¶ä»–çš‡åï¼Œåœ¨è¯¥æ£‹ç›˜ä¸Šæ‘†æ”¾ 8 ä¸ªçš‡åï¼Œä½¿å…¶ä¸èƒ½äº’ç›¸æ”»å‡»ã€‚è¿™å°±æ˜¯â€œå…«çš‡åâ€é—®é¢˜ï¼Œè¯¥é—®é¢˜å°±æ˜¯å…¸å‹çš„å›æº¯ç®—æ³•æ¡ˆä¾‹ï¼Œ\nå¯¹äºä¸€ä¸ª 4 x 4 çš„æ£‹ç›˜ç»“æ„ï¼Œåº”è¯¥å«ä½œâ€œå››çš‡åâ€é—®é¢˜ï¼Œä¸‹è¿°æ ‘å½¢ç»“æ„æ˜¯å…¶è§£é¢˜æ€è·¯ï¼š\nä¸Šå›¾å°±æ˜¯ä¸€ä¸ªå›æº¯ç®—æ³•çš„æ€è·¯ï¼Œå³å…ˆåœ¨ç¬¬ä¸€è¡Œæ”¾ç½®ä¸€ä¸ªçš‡åï¼Œç„¶åå†è¯•æ¢æ€§åœ°å†ç¬¬äºŒè¡Œæ”¾ç½®ä¸€ä¸ªçš‡åï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¦‚æœå‡ºç°ä¸æ»¡è¶³è¦æ±‚çš„æƒ…å†µï¼Œåˆ™åŠæ—¶æ­¢æŸï¼Œè¿”å›ä¸Šä¸€è¡Œç»§ç»­è¯•æ¢æ€§åœ°é€‰æ‹©ä¸åŒçš„æ–¹æ¡ˆï¼Œç›´åˆ°æ‰€æœ‰çš„æ–¹æ¡ˆéƒ½è¢«åˆ—ä¸¾å‡ºæ¥ä½ç½®ã€‚\nè¿™é‡Œè¯´çš„å›æº¯ç®—æ³•æœ‰ç‚¹åƒæ˜¯ç©·ä¸¾æ³•ï¼Œå…¶å®å®ƒä»¬æ˜¯æœ‰ç‚¹ç±»ä¼¼çš„ï¼Œå¯¹äºåƒâ€œå…«çš‡åâ€é—®é¢˜éœ€è¦æ‰€æœ‰è§£ç­”æ—¶å°±å¯ä»¥å°†å›æº¯ç®—æ³•è®¤ä¸ºæ˜¯è¯•æ¢æ€§ç©·ä¸¾æ³•ã€‚\nåŠ¨æ€è§„åˆ’ ç†è®º åŠ¨æ€è§„åˆ’çš„æ€æƒ³æ˜¯ï¼Œè‹¥è¦è§£å†³ä¸€ä¸ªç»™å®šé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è§£å…¶ä¸åŒéƒ¨åˆ†ï¼ˆå³å­é—®é¢˜ï¼‰ï¼Œå†æ ¹æ®å­é—®é¢˜çš„è§£ä»¥å¾—å‡ºåŸé—®é¢˜çš„è§£ã€‚\nåœ¨å„ç§åœºæ™¯ä¸­ï¼ŒåŠ¨æ€è§„åˆ’åœ¨å¯¹é‡å¤å­é—®é¢˜æ±‚æœ€ä¼˜è§£æ—¶éå¸¸æœ‰æ•ˆã€‚å…¶ä½¿ç”¨çš„æ–¹æ³•æ˜¯ï¼Œåœ¨æ±‚è§£çš„è¿‡ç¨‹ä¸­å°†å­é—®é¢˜çš„ç»“æœå­˜å‚¨ä¸‹æ¥é‡å¤åˆ©ç”¨ï¼Œä»ç®€å•çš„é—®é¢˜ç›´åˆ°æ•´ä¸ªé—®é¢˜éƒ½è¢«è§£å†³ã€‚\nç»†èŠ‚ ä½¿ç”¨åŠ¨æ€è§„åˆ’ä¼˜åŒ–ç®—æ³•ï¼ŒåŸºæœ¬ä¸Šéµå¾ªä¸€ä¸ªå›ºå®šçš„æµç¨‹ï¼š\né€’å½’çš„æš´åŠ›ç ´è§£ï¼šå°†ä¸€ä¸ªé—®é¢˜æ‹†è§£æˆå­é—®é¢˜ï¼Œä½¿ç”¨é€’å½’çš„æ€è·¯è§£å†³é—®é¢˜ï¼› å¸¦å¤‡å¿˜å½•çš„é€’å½’è§£æ³•ï¼šåœ¨é€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œå°†å­é—®é¢˜çš„ç»“æœå­˜å‚¨ä¸‹æ¥é‡å¤åˆ©ç”¨ï¼Œå‡å°‘æ—¶é—´è€—è´¹ï¼› éé€’å½’çš„åŠ¨æ€è§„åˆ’è§£æ³•ï¼šéµå¾ªè‡ªåº•å‘ä¸Šçš„æ¨ç®—æ€è·¯ï¼Œå°†é€’å½’è½¬æ¢æˆéé€’å½’çš„å¾ªç¯è§£æ³•ã€‚ æ¡ˆä¾‹ å¦‚æœæƒ³è¦æ±‚è§£æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œä½¿ç”¨é€’å½’çš„æ€è·¯éå¸¸ç®€å•ï¼Œåªè¦æ¨ç®—å‡ºé€’å½’çš„å…¥å£å³å¯ã€‚\nå½“æƒ³è¦ä¼˜åŒ–çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•å­˜å‚¨ä¸­é—´ç»“æœé›†ï¼Œå½“ç„¶ï¼Œå¯¹äºæ±‚è§£æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œæ­¤ä¼˜åŒ–æ€è·¯æå‡å¾—å¹¶ä¸å¤šã€‚\nå¼•å…¥åŠ¨æ€è§„åˆ’çš„æ€è·¯ä¹‹åï¼Œè‡ªåº•å‘ä¸Šæ±‚è§£æ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ€è·¯å°±ä¼šæœ‰ç‚¹ä¸ä¼—ä¸åŒï¼Œå¦‚ä¸‹æ˜¯æ±‚è§£çš„ä»£ç ï¼š\nint fib(int N) { vector\u0026lt;int\u0026gt; dp(N + 1, 0); dp[1] = dp[2] = 1; for (int i = 3; i \u0026lt;= N; i++) dp[i] = dp[i - 1] + dp[i - 2]; return dp[N]; } å…¶å®ï¼Œæ‹¿æ±‚è§£æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä¾‹å­æ¥è¯´æ˜å¹¶ä¸èƒ½å±•ç°å‡ºåŠ¨æ€è§„åˆ’çš„ä¼˜åŠ¿ï¼Œä½†å´èƒ½å±•ç¤ºå‡ºä»ä¸€ä¸ªé€’å½’ç®—æ³•æ”¹æˆåŠ¨æ€è§„åˆ’ç®—æ³•çš„è¿‡ç¨‹ã€‚\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/classical-algorithm-thought.html","title":"å››å¤§ç»å…¸ç®—æ³•æ€æƒ³"},{"content":"é¢˜ç›®ä¿¡æ¯ æºåœ°å€ï¼šæ•´æ•°åè½¬\nç»™ä½ ä¸€ä¸ª 32 ä½çš„æœ‰ç¬¦å·æ•´æ•° xï¼Œè¿”å›å°† x ä¸­çš„æ•°å­—éƒ¨åˆ†åè½¬åçš„ç»“æœã€‚\nå¦‚æœåè½¬åæ•´æ•°è¶…è¿‡ 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°çš„èŒƒå›´ [âˆ’2^31,Â 2^31Â âˆ’ 1]ï¼Œå°±è¿”å› 0ã€‚\nå‡è®¾ç¯å¢ƒä¸å…è®¸å­˜å‚¨ 64 ä½æ•´æ•°ï¼ˆæœ‰ç¬¦å·æˆ–æ— ç¬¦å·ï¼‰ã€‚\næç¤ºä¿¡æ¯ ç¤ºä¾‹ 1 è¾“å…¥ï¼šx = 123 è¾“å‡ºï¼š321 ç¤ºä¾‹ 2 è¾“å…¥ï¼šx = -123 è¾“å‡ºï¼š-321 ç¤ºä¾‹ 3 è¾“å…¥ï¼šx = 120 è¾“å‡ºï¼š21 ç¤ºä¾‹ 4 è¾“å…¥ï¼šx = 0 è¾“å‡ºï¼š0 æç¤º -2^31 \u0026lt;= x \u0026lt;= 2^31 - 1 å®ç°é€»è¾‘ æŠ•æœºå–å·§ å‡è®¾è¿™é“é¢˜ç›®æ²¡æœ‰ ç¯å¢ƒä¸å…è®¸å­˜å‚¨ 64 ä½æ•´æ•°ï¼ˆæœ‰ç¬¦å·æˆ–æ— ç¬¦å·ï¼‰ çš„é™åˆ¶ï¼Œå…¶å®é—®é¢˜å¾ˆå®¹æ˜“è§£å†³ï¼Œåªéœ€è¦å°†æ•°å­—è½¬æ¢æˆæ­£æ•´æ•°ï¼Œç„¶åä»ä¸ªä½å¼€å§‹åè½¬ï¼Œæœ€åå†æ ¹æ®åŸå§‹æ•´æ•°çš„ç¬¦å·æ¥è®¾å®šç»“æœæ•´æ•°çš„ç¬¦å·ã€‚\nè¿™ç§æ–¹æ³•çš„ç¼ºé™·å°±æ˜¯ï¼Œå½“æ•°å­—è¾ƒå¤§æ—¶ï¼Œéœ€è¦ä½¿ç”¨åˆ° 64 ä½æ•´æ•°å˜é‡å­˜å‚¨ç»“æœæ•´æ•°ï¼Œè¿™æ ·è‚¯å®šæ˜¯ä¸ç¬¦åˆé¢˜ç›®è¦æ±‚äº†ï¼Œå¯ä»¥ç§°ä¹‹ä¸ºæŠ•æœºå–å·§ã€‚\npackage cn.fatedeity.algorithm.leetcode; public class ReverseInteger { public int answer(int x) { long reverse = 0; int rest = Math.abs(x); while (rest \u0026gt;= 10) { reverse = reverse * 10 + rest % 10; rest = (int) (rest / 10.0); } reverse = reverse * 10 + rest; if (x \u0026lt; 0) { reverse = -reverse; } if (reverse \u0026lt; Integer.MIN_VALUE || reverse \u0026gt; Integer.MAX_VALUE) { return 0; } return (int) reverse; } } é¢„åˆ¤è¶…é‡ è¿™é‡Œçš„æ€è·¯ä»ç„¶æ˜¯å°†æ•°å­—ä»ä¸ªä½ä¸€ç‚¹ç‚¹è½¬æ¢æˆç»“æœæ•´æ•°ï¼Œä¸æŠ•æœºå–å·§ä¸åŒçš„æ˜¯ï¼Œéœ€è¦é¢„åˆ¤ç»“æœæ•´æ•°æ˜¯å¦è¶…è¿‡äº† 32 ä½çš„æœ‰ç¬¦å·ä½æ•´æ•°ã€‚\npackage cn.fatedeity.algorithm.leetcode; public class ReverseInteger { public int answer(int x) { int reverse = 0; while (x != 0) { // -2147483648 and 2147483647 if (reverse \u0026lt; Integer.MIN_VALUE / 10 || reverse \u0026gt; Integer.MAX_VALUE / 10) { return 0; } reverse = reverse * 10 + x % 10; x /= 10; } return reverse; } } å¯èƒ½æœ‰äººç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆä¸­é€”åˆ¤æ–­çš„æ—¶å€™åªéœ€è¦æ˜¯ $\\frac{1}{10}$ å³å¯ï¼Œä¸éœ€è¦å†å°† x % 10 çš„å€¼ç®—ä¸Šã€‚\nå…¶æ ¹æœ¬åŸå› è¿˜æ˜¯ï¼Œç»™å®šçš„æ•´æ•°èŒƒå›´æ˜¯ [-2147483648, 2147483647]ï¼Œåœ¨è¿™ä¸ªèŒƒå›´å†…ï¼Œç»™å®šæ•´æ•°æœ€é«˜ä½åªèƒ½æ˜¯ 2ï¼Œå¾—åˆ°çš„ç»“æœé›†æœ€é«˜ä½å´æ”¯æŒåˆ° 7ï¼Œå› æ­¤ï¼Œä¸ªä½ä¸Šçš„æ¯”è¾ƒä¹Ÿå°±ä¸é‡è¦äº†ã€‚\n","permalink":"https://fatedeity.cn/posts/leetcode/reverse-integer.html","title":"LeetCode - æ•´æ•°åè½¬"},{"content":"é¢˜ç›®ä¿¡æ¯ æºåœ°å€ï¼šå›æ–‡æ•°\nç»™ä½ ä¸€ä¸ªæ•´æ•° xï¼Œå¦‚æœ x æ˜¯ä¸€ä¸ªå›æ–‡æ•´æ•°ï¼Œè¿”å› trueï¼›å¦åˆ™ï¼Œè¿”å› falseã€‚\nå›æ–‡æ•°æ˜¯æŒ‡æ­£åºï¼ˆä»å·¦å‘å³ï¼‰å’Œå€’åºï¼ˆä»å³å‘å·¦ï¼‰è¯»éƒ½æ˜¯ä¸€æ ·çš„æ•´æ•°ã€‚\nä¾‹å¦‚ï¼Œ121 æ˜¯å›æ–‡ï¼Œè€Œ 123 ä¸æ˜¯ã€‚\næç¤ºä¿¡æ¯ ç¤ºä¾‹ 1 è¾“å…¥ï¼šx = 121 è¾“å‡ºï¼štrue ç¤ºä¾‹ 2 è¾“å…¥ï¼šx = -121 è¾“å‡ºï¼šfalse è§£é‡Šï¼šä»å·¦å‘å³è¯», ä¸º -121 ã€‚ ä»å³å‘å·¦è¯», ä¸º 121- ã€‚å› æ­¤å®ƒä¸æ˜¯ä¸€ä¸ªå›æ–‡æ•°ã€‚ ç¤ºä¾‹ 3 è¾“å…¥ï¼šx = 10 è¾“å‡ºï¼šfalse è§£é‡Šï¼šä»å³å‘å·¦è¯», ä¸º 01 ã€‚å› æ­¤å®ƒä¸æ˜¯ä¸€ä¸ªå›æ–‡æ•°ã€‚ æç¤º -2^31Â \u0026lt;= x \u0026lt;= 2^31Â - 1 å®ç°é€»è¾‘ åŒæŒ‡é’ˆ æ¯”è¾ƒç®€å•çš„æ€è·¯å°±æ˜¯ï¼Œå…ˆå°†æ•´æ•°è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œç„¶åä½¿ç”¨é¦–å°¾åŒæŒ‡é’ˆåˆ¤æ–­æ‰€æŒ‡ä½ç½®çš„å­—ç¬¦æ˜¯å¦ç›¸åŒï¼Œç›´åˆ°æ‰€æœ‰çš„å­—ç¬¦éƒ½è¢«æ¯”è¾ƒå®Œæ¯•ã€‚\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä½¿ç”¨åŒæŒ‡é’ˆæ˜¯æ¯”è¾ƒç›´è§‚çš„ä¸€ä¸ªæ€è·¯ï¼Œéœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œè´Ÿæ•´æ•°éƒ½ä¸æ˜¯å›æ–‡æ•°ï¼Œå¥‡æ•°å’Œå¶æ•°åœ¨åšå›æ–‡åˆ¤æ–­æ—¶æœ‰åŒºåˆ«ã€‚\npackage cn.fatedeity.algorithm.leetcode; public class PalindromeNumber { public boolean answer(int x) { if (x \u0026lt; 0) { return false; } // è½¬æˆå­—ç¬¦ä¸² String s = Integer.toString(x); // åŒæŒ‡é’ˆåˆ¤æ–­ int len = s.length(); for (int i = 0; i \u0026lt; len \u0026gt;\u0026gt; 1; i++) { if (i != len - 1 - i \u0026amp;\u0026amp; s.charAt(i) != s.charAt(len - 1 - i)) { return false; } } return true; } } ä¸è½¬æ¢æˆå­—ç¬¦ä¸² å¦‚æœç»™è¿™é“é¢˜ç›®åŠ ä¸Šä¸èƒ½å°†æ•´æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„é™åˆ¶ï¼Œå°±éœ€è¦åœ¨æ•°å­¦çš„è§’åº¦ä¸Šå»æ€è€ƒå…¶è§£å†³æ–¹æ¡ˆã€‚\næ—¢ç„¶æ˜¯æƒ³è¦åˆ¤æ–­æ•´æ•°æ˜¯å¦æ˜¯å›æ–‡ï¼Œåˆ™å¯ä»¥ç›´æ¥å°†æ•´æ•°ç¿»è½¬æˆå¦ä¸€ä¸ªæ•´æ•°ï¼Œå†å°†è¿™ä¸¤ä¸ªæ•´æ•°åšç›¸ç­‰åŒ¹é…ï¼Œæ­¤æ–¹æ³•çš„å¾ªç¯æ¬¡æ•°ç›¸æ¯”åŒæŒ‡é’ˆæ›´å¤šï¼Œä½†å´æ²¡æœ‰æ•´æ•°è½¬æ¢æˆå­—ç¬¦ä¸²çš„è€—æ—¶ï¼Œæ•´æ•°æ•ˆç‡æ›´é«˜ä¸€äº›ã€‚\npackage cn.fatedeity.algorithm.leetcode; public class PalindromeNumber { public boolean answer(int x) { if (x \u0026lt; 0) { return false; } // å°†æ•´æ•°è¿›è¡Œç¿»è½¬ int reverse = 0; int rest = x; while (rest \u0026gt;= 10) { reverse = reverse - 10 + rest % 10; rest = (int) (rest / 10.0); } return reverse - 10 + rest == x; } } ","permalink":"https://fatedeity.cn/posts/leetcode/palindrome-number.html","title":"LeetCode - å›æ–‡æ•°"},{"content":"é¢˜ç›®ä¿¡æ¯ æºåœ°å€ï¼šæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²\nç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚\næç¤ºä¿¡æ¯ ç¤ºä¾‹ 1 è¾“å…¥: s = \u0026quot;abcabcbb\u0026quot; è¾“å‡º: 3 è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \u0026quot;abc\u0026quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚ ç¤ºä¾‹ 2 è¾“å…¥: s = \u0026quot;bbbbb\u0026quot; è¾“å‡º: 1 è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \u0026quot;b\u0026quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚ ç¤ºä¾‹ 3 è¾“å…¥: s = \u0026quot;pwwkew\u0026quot; è¾“å‡º: 3 è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯Â \u0026quot;wke\u0026quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚ è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ\u0026quot;pwke\u0026quot;Â æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚ é™åˆ¶ 0 \u0026lt;= s.length \u0026lt;= 5 - 10^4 s ç”±è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ç¬¦å·å’Œç©ºæ ¼ç»„æˆ å®ç°é€»è¾‘ æ»‘åŠ¨çª—å£ æ»‘åŠ¨çª—å£æ˜¯ä¸€ç§æ¯”è¾ƒé‡è¦çš„ç®—æ³•æ€æƒ³ï¼Œå¸¸ç”¨ä¸è§£å†³çº¿æ€§è¡¨ç»“æ„æ•°æ®çš„å­åºåˆ—é—®é¢˜ï¼Œè¿ç”¨ä¹‹åå¯ä»¥å°†åŒå±‚åµŒå¥—å¾ªç¯çš„é—®é¢˜è½¬æ¢ä¸ºå•å±‚å¾ªç¯çš„é—®é¢˜ï¼Œé™ä½æ—¶é—´å¤æ‚åº¦ä»¥æé«˜æ•ˆç‡ã€‚\nè¿™é“é¢˜ç›®çš„åŸºæœ¬æ€æƒ³æ˜¯å°†å­—ç¬¦ä¸²ç†è§£æˆä¸€ä¸ªæ»‘åŠ¨çš„çª—å£ï¼Œç„¶åå°†è¿™ä¸ªçª—å£åœ¨è¿™ä¸ªå­—ç¬¦ä¸²ä¸Šæ»‘åŠ¨ï¼Œåœ¨çª—å£æ»‘åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œå·¦è¾¹ä¼šå‡ºä¸€ä¸ªå…ƒç´ ï¼Œå³è¾¹ä¼šè¿›ä¸€ä¸ªå…ƒç´ ï¼Œç„¶ååªéœ€è¦è®¡ç®—å½“å‰çª—å£å†…çš„å…ƒç´ å€¼å³å¯ã€‚\npackage cn.fatedeity.algorithm.leetcode; import java.util.HashMap; public class LongestSubstringWithoutRepeatingCharacters { public int answer(String s) { int start = 0; int result = 0; HashMap\u0026lt;Character, Integer\u0026gt; hashMap = new HashMap\u0026lt;\u0026gt;(); for (int current = 0; current \u0026lt; s.length(); current++) { char c = s.charAt(current); if (hashMap.containsKey(c)) { start = Math.max(hashMap.get(c) + 1, start); } hashMap.put(c, current); result = Math.max(current - start + 1, result); } return result; } } ","permalink":"https://fatedeity.cn/posts/leetcode/longest-substring-without-repeating-characters.html","title":"LeetCode - æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"},{"content":"æœ¬æ¥åšå®¢éƒ¨ç½²åœ¨ CloudBase ä¹ŸæŒºå¥½ï¼Œæ²¡æœ‰ä»€ä¹ˆè®¿é—®é‡çš„åšå®¢ä¸€ä¸ªæœˆä¹ŸèŠ±ä¸äº†å‡ æ¯›é’±ï¼Œåœ¨è¿™ä¸ªä¸Šé¢åŸºæœ¬æ˜¯æ— æ„Ÿäº†ã€‚å¥ˆä½•è…¾è®¯å‡†å¤‡æ›´æ”¹ CloudBase çš„è®¡è´¹æ¨¡å¼ï¼Œä¸ºäº†çœé‚£ä¸€ç‚¹é’±ï¼Œè¿˜æ˜¯å°†åšå®¢è¿ç§»åˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå§ã€‚\nè¿ç§»èµ·å›  åŸæ¥çš„åšå®¢ å…¶å®ä»å¾ˆä¹…ä»¥å‰å°±æƒ³è¦å†™åšå®¢ï¼Œä½†æ€»æ˜¯æ–­æ–­ç»­ç»­çš„ï¼Œä¸€ç›´éƒ½æ²¡æœ‰è®¤çœŸåœ°å¼€å§‹ã€‚\næœ€ç»ˆï¼Œå†³å®šä½¿ç”¨é™æ€åšå®¢å·¥å…·ä½œä¸ºè‡ªå·±åšå®¢çš„æ‰¿è½½ä½“ã€‚åœ¨å¤šç§å·¥å…·çš„æ¯”è¾ƒä¸‹ï¼Œæœ€ç»ˆé€‰æ‹©äº† Hugo å¹¶éƒ¨ç½²åˆ° Github Pages ä¸Šï¼Œå¹¶åŒæ—¶éƒ¨ç½²åˆ°è…¾è®¯äº‘çš„ CloudBase ä»¥ä¾›å›½å†…ç”¨æˆ·è®¿é—®ã€‚\nè‡ªæ­¤ï¼Œ2022 å¹´ 5 æœˆ 15 æ—¥ï¼Œç¿”ä»”çš„ä¸ªäººåšå®¢ ç»ˆäºéƒ¨ç½²åˆ°å…¬ç½‘ä¸Šäº†ã€‚\nå‡ºç°äº†å˜æ•… ä½†æ˜¯ï¼Œæ‰ç»è¿‡å¤§æ¦‚ 2 ä¸ªæœˆçš„æ—¶é—´ï¼Œæ”¶åˆ°äº†è…¾è®¯äº‘å‘é€çš„ CloudBase è®¡è´¹æ¨¡å¼å˜æ›´çš„æ¶ˆæ¯ã€‚\nç®€å•æ¥è¯´ï¼ŒCloudBase å‡ºäº†ä¸€ä¸ªæœ€ä½æ¶ˆè´¹ï¼Œåƒæˆ‘è¿™æ ·çš„ï¼ŒåŸæœ¬ä»å‡ æ¯›é’±çš„æ— æ„Ÿæ¶ˆè´¹è¦å‡çº§åˆ°å‡ åå—ï¼Œè¿™ä¸ªå˜åŠ¨å¯¹äºæˆ‘æ¥è¯´è¿˜æ˜¯æŒºå¤§çš„ã€‚\næ€è·¯å˜æ›´ æ­¤å¤„è¦èµ¶çˆ·ï¼Œçˆ·è‡ªæœ‰å»å¤„ã€‚\nçªç„¶æƒ³åˆ°ï¼Œæ›¾ç»è‡ªå·±ç”¨ 299 ä¹°çš„äº‘æœåŠ¡å™¨ä¸€ç›´è’åºŸæ²¡æœ‰ä½¿ç”¨ï¼Œæ¯•ç«Ÿè¿˜æœ‰å¥½å‡ ä¸ªæœˆçš„æœŸé™å‘¢ï¼Œä¸€å®šè¦åˆ©ç”¨èµ·æ¥ã€‚\nå°±å†³å®šæ˜¯ä½ äº†ï¼Œæˆ‘çš„åšå®¢æš‚æ—¶å…ˆæ”¾ç½®åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œé¡ºä¾¿äº†è§£ä¸€ä¸‹å¦‚ä½•éƒ¨ç½²é™æ€åšå®¢åˆ°äº‘æœåŠ¡å™¨ä¸Šã€‚\nç¬¬ä¸€ç‰ˆæ–¹æ¡ˆ ä¸å¯å¦è®¤ï¼Œç°åœ¨æµè¡Œçš„è‡ªåŠ¨åŒ–éƒ¨ç½²çœŸçš„æ˜¯ç”¨ä¸€æ¬¡å°±çˆ±ä¸Šäº†ï¼Œå°¤å…¶æ˜¯ï¼Œè¿˜æœ‰ Github Action è¿™æ ·çš„å…è´¹èµ„æºå¯ä»¥è–…ï¼Œå“ˆå“ˆå“ˆã€‚\nGithub Pages éƒ¨ç½² å°† Hugo é€šè¿‡ Github Action éƒ¨ç½²åˆ° Github Pages éå¸¸ç®€å•ï¼Œåœ¨ç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šæ•™ç¨‹å¯ç”¨ï¼Œè¿™é‡Œå°±ç®€å•åœ°åˆ—ä¸¾ä¸€ä¸‹å§ã€‚\nç¬¬ä¸€æ­¥ï¼Œé€šå¸¸å°±æ˜¯è¦å»ºç«‹ä¸€ä¸ªç§æœ‰åº“å­˜å‚¨åšå®¢çš„æºæ–‡ä»¶ï¼Œå†å»ºç«‹ä¸€ä¸ª Github Pages åº“å­˜å‚¨ Hugo æ„å»ºåçš„æ–‡ä»¶ã€‚\nç¬¬äºŒæ­¥ï¼Œè‡ªç„¶å°±æ˜¯åœ¨ Hugo åšå®¢é¡¹ç›®ä¸‹ç¼–å†™ workflow æ–‡ä»¶ï¼Œè¿™é‡Œæœ‰ä½¿ç”¨åˆ° Checkoutã€Hugo setupã€GitHub Pages action ä¸‰ç§ Action æ­¥éª¤ï¼Œå½“æ—¶çš„é…ç½®å¦‚ä¸‹ï¼š\non: push: branches: - master pull_request: jobs: deploy: runs-on: ubuntu-latest steps: # åˆ‡æ¢åˆ†æ”¯ - name: Checkout uses: actions/checkout@v3 # å®‰è£… Hugo ç¨‹åº - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: 'latest' extended: true # Hugo Build - name: Build run: hugo --minify --gc # éƒ¨ç½²åˆ° Github Pages ä¸Š - name: Deploy Github Pages uses: peaceiris/actions-gh-pages@v3 if: ${{ github.ref == 'refs/heads/master' }} with: deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }} external_repository: fatedeity/fatedeity.github.io publish_branch: master cname: fatedeity.cn åœ¨è¿™ä¸€æ­¥ï¼Œéœ€è¦é…ç½®ä¸€ä¸ª Actions secrets ä»¥è§£å†³å®‰å…¨æ€§é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ GitHub Pages action äº†è§£æ›´å¤šã€‚\nç»è¿‡ä¸Šè¿°ä¸¤ä¸ªé…ç½®æ­¥éª¤ï¼ŒåŸºæœ¬ä¸Šæ˜¯å·²ç»å®Œæˆäº†ï¼Œä¹‹å Hugo åšå®¢æ–‡ä»¶å† push åˆ° Github æ—¶å°±ä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²ï¼ŒæœŸé—´åŸºæœ¬ä¸Šèƒ½åœ¨ 20s å·¦å³å®Œæˆã€‚\nCloudBase éƒ¨ç½² ä½¿ç”¨ Github Action éƒ¨ç½² Github Pages éå¸¸ç®€å•ï¼Œæ¯•ç«Ÿä¹Ÿç®—æ˜¯åŒå‡ºä¸€å®¶ï¼ŒåŸºæœ¬ä¸Šä¸ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ã€‚\nå› ä¸ºæƒ³è¦é€šè¿‡éƒ¨ç½²åˆ° CloudBase ä»¥åŠ é€Ÿå›½å†… IP è®¿é—®åšå®¢çš„é€Ÿåº¦ï¼Œä¹Ÿä¸å¾—ä¸ç ”ç©¶ä¸€ä¸‹æ€ä¹ˆé€šè¿‡ Github Action éƒ¨ç½²åˆ° CloudBase ä¸Šã€‚\nä»”ç»†æŸ¥æ‰¾äº†ä¸€ä¸‹ï¼ŒåŸºæœ¬ä¸Šå°±ä¸¤ç§æ–¹æ¡ˆï¼šé€šè¿‡ CloudBase CLI ä½¿ç”¨å‘½ä»¤è¡Œéƒ¨ç½²ï¼›é€šè¿‡å®˜æ–¹æä¾›çš„ Tencent CloudBase Github Action å·¥å…·éƒ¨ç½²ã€‚\næœ€ç»ˆï¼Œå†³å®šä½¿ç”¨ Action å·¥å…·ï¼Œç›¸ä¿¡ä¸ Github Action æ›´é…ï¼ˆå®é™…æ“ä½œèµ·æ¥å¹¶æ²¡æœ‰ ğŸ˜³ï¼‰ï¼Œä¸‹é¢æ˜¯ç®€å•çš„ä¸€ä¸ªé…ç½®æ­¥éª¤ï¼š\nç¬¬ä¸€æ­¥ï¼Œæ·»åŠ  CloudBase Action v2 æ‰€éœ€çš„é…ç½®æ–‡ä»¶ï¼Œç”±äºæˆ‘åªä½¿ç”¨äº† CloudBase çš„é™æ€åšå®¢éƒ¨ç½²ï¼Œé…ç½®èµ·æ¥ä¹Ÿä¸éº»çƒ¦ï¼Œä¸»è¦æ˜¯éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º cloudbaserc.json æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹é…ç½®ï¼š\n{ \u0026quot;envId\u0026quot;: \u0026quot;{{ENV_ID}}\u0026quot;, \u0026quot;region\u0026quot;: \u0026quot;ap-guangzhou\u0026quot;, \u0026quot;$schema\u0026quot;: \u0026quot;https://framework-1258016615.tcloudbaseapp.com/schema/latest.json\u0026quot;, \u0026quot;framework\u0026quot;: { \u0026quot;name\u0026quot;: \u0026quot;hugo-blog\u0026quot;, \u0026quot;plugins\u0026quot;: { \u0026quot;client\u0026quot;: { \u0026quot;use\u0026quot;: \u0026quot;@cloudbase/framework-plugin-website\u0026quot;, \u0026quot;inputs\u0026quot;: { \u0026quot;outputPath\u0026quot;: \u0026quot;public\u0026quot;, \u0026quot;cloudPath\u0026quot;: \u0026quot;/\u0026quot; } } } } } ç¬¬äºŒæ­¥ï¼Œæ›´æ–°ä¹‹å‰çš„ workflow æ–‡ä»¶ï¼Œå°† Cloudbase Action çš„æ­¥éª¤é…ç½®è¿›å»ï¼Œå½“æ—¶çš„é…ç½®å¦‚ä¸‹ï¼š\non: push: branches: - master pull_request: jobs: deploy: runs-on: ubuntu-latest steps: # åˆ‡æ¢åˆ†æ”¯ - name: Checkout uses: actions/checkout@v3 # å®‰è£… Hugo ç¨‹åº - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: 'latest' extended: true # Hugo Build - name: Build run: hugo --minify --gc # éƒ¨ç½²åˆ° CloudBase ä¸Š - name: Deploy Tencent CloudBase uses: TencentCloudBase/cloudbase-action@v2.0.1 if: ${{ github.ref == 'refs/heads/master' }} with: secretId: ${{ secrets.SECRET_ID }} secretKey: ${{ secrets.SECRET_KEY }} envId: ${{ secrets.ENV_ID }} é€šè¿‡ä¸Šè¿°çš„æ­¥éª¤ï¼ŒåŸºæœ¬ä¸Šä¹Ÿç®—æ˜¯å®Œæˆäº† Github Action åˆ° CloudBase çš„é…ç½®ã€‚\nä½†æ˜¯ï¼Œä½¿ç”¨èµ·æ¥å¹¶ä¸æ˜¯å¾ˆé¡ºåˆ©ï¼Œç»å¸¸æ€§åœ°å‡ºç° Github Action è¿è¡Œè¶…æ—¶çš„æƒ…å†µï¼Œåº”è¯¥æ˜¯ Github Action æœºå™¨åœ¨ç¾å›½ï¼Œè€Œ CloudBase æœåŠ¡å™¨åœ¨å›½å†…çš„åŸå› ã€‚\nå½“æ—¶ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ä»€ä¹ˆå¥½çš„è§£å†³åŠæ³•ï¼Œåªèƒ½é€šè¿‡æ¯æ¬¡æŠ¥å¤±è´¥ä¹‹åå†æ‰‹åŠ¨å»è¿è¡Œä¸€éï¼ˆä»è‡ªåŠ¨åŒ–éƒ¨ç½²å˜æˆäº†åŠè‡ªåŠ¨åŒ– ğŸ˜†ï¼‰ã€‚\nç¬¬äºŒç‰ˆæ–¹æ¡ˆ äº‘æœåŠ¡å™¨éƒ¨ç½² å°†é¡¹ç›®éƒ¨ç½²åˆ°è‡ªå·±çš„äº‘æœåŠ¡å™¨ä¸Šï¼Œæ–¹æ³•å°±å˜å¾—æ›´å¤šäº†ï¼Œæ—¢æœ‰ä½¿ç”¨ SSH Remote Commands é€šè¿‡ ssh å·¥å…·è¿è¡Œå‘½ä»¤ï¼Œä¹Ÿæœ‰ä½¿ç”¨ SCPã€Rsyncã€SFTP ç­‰å·¥å…·å°†æ–‡ä»¶ç›´æ¥ä¸Šä¼ ï¼Œè¿˜æœ‰æ›´å¤šå…¶ä»–çš„åŠæ³•ç­‰ç­‰ã€‚\nå¯¹æ¯”ä¹‹åï¼Œè¿˜æ˜¯é‡‡ç”¨äº†ç†è§£èµ·æ¥æœ€ç®€å•çš„åŠæ³•ï¼Œé€šè¿‡ SSH Remote Commands è¿æ¥åˆ°äº‘æœåŠ¡å™¨ä¸Šæ‰§è¡Œå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå°±æ˜¯é€šè¿‡ Git å‘½ä»¤æ‹‰å– Github Pages çš„ä»£ç ã€‚\nç¬¬ä¸€æ­¥ï¼Œå…ˆåœ¨äº‘æœåŠ¡ä¸Šåšå¥½å‡†å¤‡ï¼Œå®‰è£…å¥½ Git ç¨‹åºï¼Œç¡®å®šèƒ½æ‰‹åŠ¨æ‹‰å–åˆ° Github Pages çš„ä»£ç ã€‚\nç¬¬äºŒæ­¥ï¼Œå½“ç„¶è¿˜æ˜¯è¦æ›´æ–° workflow æ–‡ä»¶ï¼Œå°† SSH Remote Commands Action çš„æ­¥éª¤æ›¿æ¢æ‰åŸæ¥çš„ CloudBase Action çš„æ­¥éª¤ï¼Œå…·ä½“çš„é…ç½®å¦‚ä¸‹ï¼š\non: push: branches: - master pull_request: jobs: deploy: runs-on: ubuntu-latest steps: # åˆ‡æ¢åˆ†æ”¯ - name: Checkout uses: actions/checkout@v3 # å®‰è£… Hugo ç¨‹åº - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: 'latest' extended: true # Hugo Build - name: Build run: hugo --minify --gc # éƒ¨ç½²åˆ° Github Pages ä¸Š - name: Deploy Github Pages uses: peaceiris/actions-gh-pages@v3 if: ${{ github.ref == 'refs/heads/master' }} with: deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }} external_repository: fatedeity/fatedeity.github.io publish_branch: master cname: fatedeity.cn # éƒ¨ç½²åˆ° Server ä¸Š - name: Deploy Tecent Server uses: appleboy/ssh-action@master with: host: ${{ secrets.HOST }} username: ${{ secrets.USERNAME }} key: ${{ secrets.KEY }} port: ${{ secrets.PORT }} script: rm -rf fatedeity.github.io/ \u0026amp;\u0026amp; git clone https://ghproxy.com/https://github.com/fatedeity/fatedeity.github.io.git \u0026amp;\u0026amp; rm -rf fatedeity.github.io/.[!.]* è¿™é‡Œæœ‰ä¸ªå°æŠ€å·§ï¼Œå°† Github é€šè¿‡ GitHub Proxy ä»£ç†åŠ é€Ÿ è®¿é—®ï¼ŒåŸæœ¬æ¯”è¾ƒæ…¢çš„æ‹‰å–ä»£ç æ­¥éª¤å˜å¾—é£å¿«ï¼Œç»¼åˆä¸‹æ¥ï¼Œè¿™ä¸ªé™æ€åšå®¢éƒ¨ç½²å®Œæˆåªéœ€èŠ±è´¹ 30ms å·¦å³çš„æ—¶é—´ã€‚\nç¬¬ä¸‰æ­¥ï¼Œä»£ç è¢«è‡ªåŠ¨æ‹‰å–åˆ°æœåŠ¡å™¨ä¸Šä¹‹åï¼Œè¿˜éœ€è¦é…ç½®ä¸€ä¸ªåå‘ä»£ç†çš„æœåŠ¡å™¨ä»¥ä¾›å¤–ç½‘è®¿é—®ã€‚æœ€å¸¸ç”¨çš„è‡ªç„¶å°±æ˜¯ Nginx æœåŠ¡å™¨äº†ï¼Œå®‰è£… Nginx çš„æ­¥éª¤å°±ç›´æ¥å¿½ç•¥å§ï¼Œä¸‹é¢æ˜¯æˆ‘è¿™è¾¹è®¿é—®é™æ€åšå®¢çš„åå‘ä»£ç†é…ç½®ï¼š\nlog_format main escape=json '{\u0026quot;remote_addr\u0026quot;:\u0026quot;$remote_addr\u0026quot;,\u0026quot;timestamp\u0026quot;:\u0026quot;$time_iso8601\u0026quot;,\u0026quot;request\u0026quot;:\u0026quot;$request\u0026quot;,\u0026quot;size\u0026quot;:$body_bytes_sent,\u0026quot;status\u0026quot;:$status,\u0026quot;request_time\u0026quot;:$request_time,\u0026quot;referer\u0026quot;:\u0026quot;$http_referer\u0026quot;,\u0026quot;user_agent\u0026quot;:\u0026quot;$http_user_agent\u0026quot;}'; server { listen 80; listen [::]:80; server_name fatedeity.cn; return 301 https://$host$request_uri; } server { listen 443 ssl; listen [::]:443 ssl; server_name fatedeity.cn; # è¯ä¹¦ ssl_certificate cert/fatedeity.cn_bundle.crt; # ç§é’¥ ssl_certificate_key cert/fatedeity.cn.key; ssl_session_timeout 5m; ssl_protocols TLSv1.2 TLSv1.3; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on; location / { root /home/fatedeity/fatedeity.github.io/; index index.html; } error_page 404 /404.html; access_log /var/log/nginx/hugo-blog-access.log main; } æ—¥å¿—ç»Ÿè®¡ ç»è¿‡ä¸Šè¿°çš„æ“ä½œè®°å½•ï¼ŒåŸºæœ¬å°±å®Œæˆäº† Hugo åˆ° Github Pages å’Œ Cloud Server çš„é…ç½®ï¼Œå…¶å®åˆ°è¿™é‡Œä¹Ÿå°±ç»“æŸäº†ã€‚\nä½†æ˜¯ï¼Œçªç„¶æƒ³è¦çœ‹ä¸€ä¸‹è‡ªå·±æœåŠ¡å™¨çš„è®¿é—®é‡ï¼Œä¹‹å‰éƒ½æ²¡æœ‰æè¿‡è¿™äº›ä¸œè¥¿ï¼Œéƒ½æ˜¯åœ¨å…¬å¸æœ‰ç°æˆçš„å·¥å…·å¯ä»¥ä½¿ç”¨ã€‚å‘ç°è‡ªå·±çš„æœåŠ¡å™¨é…ç½®å¹¶ä¸æ˜¯å¾ˆé«˜ï¼Œæä¸æ¥ ELK é‚£ä¸€å¥—ï¼Œåªèƒ½å¦è¾Ÿè¹Šå¾„ã€‚\nè¿˜å¥½ï¼Œç®€å•ä¸€æœï¼Œå‘ç°æœ‰ GoAccess è¿™æ ·çš„å¼€æºå®æ—¶æ—¥å¿—å·¥å…·å¯ç”¨ï¼Œéå¸¸é€‚åˆæˆ‘è¿™æ ·ç®€å•çœ‹çœ‹æ—¥å¿—çš„ç”¨æˆ·ã€‚\nç¬¬ä¸€æ­¥ï¼Œè‡ªç„¶å°±æ˜¯å®‰è£… GoAccess å·¥å…·å•¦ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨ apt install goaccess å‘½ä»¤å®‰è£…ä¸€ä¸‹å³å¯ã€‚\nç¬¬äºŒæ­¥ï¼Œé…ç½®å¥½ .goaccessrc æ–‡ä»¶ï¼Œæˆ‘è¿™è¾¹çš„é…ç½®å¾ˆç®€å•ï¼Œåªæ˜¯éœ€è¦é…ç½®å¥½æ—¥å¿—æ ¼å¼ã€è¾“å…¥è¾“å‡ºæ–‡ä»¶å³å¯ï¼š\ntime-format %H:%M:%S date-format %Y-%m-%d log-format %^:\u0026quot;%h\u0026quot;,%^:\u0026quot;%dT%t+%^\u0026quot;,%^:\u0026quot;%r\u0026quot;,%^:%b,%^:%D,%^:\u0026quot;%R\u0026quot;,%^:\u0026quot;%u\u0026quot; log-file /var/log/nginx/hugo-blog-access.log output /home/fatedeity/logs/hugo-blog.html ç¬¬ä¸‰æ­¥ï¼Œè¿™è¾¹ä¸»è¦æ˜¯æƒ³è¦é€šè¿‡æµè§ˆå™¨è®¿é—®ä¸€ä¸‹æ—¥å¿—ï¼Œæ¯æ¬¡æƒ³è®¿é—®çš„æ—¶å€™ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆä¸€ä¸‹ï¼Œä¹Ÿä¸éº»çƒ¦ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å®šæ—¶æ›´æ–°ï¼š\ngoaccess -p /home/fatedeity/.goaccessrc è¿™æ ·å°±å¤§åŠŸå‘Šæˆäº†ï¼Œå±•ç¤ºä¸€ä¸‹ GoAccess çš„ç©ºé¡µé¢ï¼š\n","permalink":"https://fatedeity.cn/posts/z-turn/blog-migration-from-cloudbase-to-server.html","title":"åšå®¢ä» CloudBase è¿ç§»è‡³äº‘ä¸»æœº"},{"content":"é¢˜ç›®ä¿¡æ¯ æºåœ°å€ï¼šä¸¤æ•°ç›¸åŠ \nç»™ä½ ä¸¤ä¸ª éç©º çš„é“¾è¡¨ï¼Œè¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å®ƒä»¬æ¯ä½æ•°å­—éƒ½æ˜¯æŒ‰ç…§ é€†åº çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ ä¸€ä½ æ•°å­—ã€‚\nè¯·ä½ å°†ä¸¤ä¸ªæ•°ç›¸åŠ ï¼Œå¹¶ä»¥ç›¸åŒå½¢å¼è¿”å›ä¸€ä¸ªè¡¨ç¤ºå’Œçš„é“¾è¡¨ã€‚\nä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚\næç¤ºä¿¡æ¯ ç¤ºä¾‹ 1 è¾“å…¥ï¼šl1 = [2,4,3], l2 = [5,6,4] è¾“å‡ºï¼š[7,0,8] è§£é‡Šï¼š342 + 465 = 807 ç¤ºä¾‹ 2 è¾“å…¥ï¼šl1 = [0], l2 = [0] è¾“å‡ºï¼š[0] ç¤ºä¾‹ 3 è¾“å…¥ï¼šl1 = [9,9,9,9,9,9,9], l2 = [9,9,9,9] è¾“å‡ºï¼š[8,9,9,9,0,0,0,1] æç¤º æ¯ä¸ªé“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°åœ¨èŒƒå›´ [1, 100] å†… 0 \u0026lt;= Node.val \u0026lt;= 9 é¢˜ç›®æ•°æ®ä¿è¯åˆ—è¡¨è¡¨ç¤ºçš„æ•°å­—ä¸å«å‰å¯¼é›¶ å®ç°é€»è¾‘ ç»“ç‚¹ç´¯åŠ  è¿™é“é¢˜ç›®å°†ä¸¤ä¸ªé“¾è¡¨ç»“åˆæˆä¸€ä¸ªé“¾è¡¨ï¼Œæ¯”è¾ƒæ¸…æ™°çš„æ€è·¯å°±æ˜¯ï¼Œç±»ä¼¼äºå››åˆ™è¿ç®—ä¸­çš„åŠ æ³•ï¼Œä»ä¸ªä½å¾€é«˜ä½è¿›è¡Œæ¯ä¸€ä½ç›¸åŠ ï¼Œå¦‚æœå½“å‰ä½çš„ç»“æœå¤§äºç­‰äº 10 æ—¶åˆ™éœ€è¦åœ¨é«˜ä½åŠ  1ã€‚\nè§£æåˆ°ç¨‹åºå½“ä¸­ï¼Œæ—¢å¯ä»¥ä½¿ç”¨å¾ªç¯çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€’å½’çš„æ€ç»´ã€‚å¾ªç¯çš„æ–¹å¼æ˜¯å°†ä¸¤ä¸ªé“¾è¡¨åŒæ­¥é€’å¢ï¼Œè€Œé€’å½’çš„æ–¹å¼æ˜¯æ¯æ¬¡è®¡ç®—å®Œä¸€ä½æ—¶å†å¯¹é“¾è¡¨çš„ä¸‹ä¸€ä¸ªç»“ç‚¹åšé€’å½’å¤„ç†ã€‚\né€šè¿‡å¾ªç¯çš„æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯ $O(n)$ï¼Œè¿™é‡Œçš„ n æŒ‡çš„æ˜¯æœ€é•¿çš„é‚£ä¸ªé“¾è¡¨èŠ‚ç‚¹æ•°ã€‚\npackage cn.fatedeity.algorithm.leetcode; public class AddTwoNumbers { public ListNode answer(ListNode l1, ListNode l2) { ListNode result = new ListNode(); ListNode listNode = result; boolean addOne = false; while (l1 != null || l2 != null || addOne) { int sum = 0; if (l1 != null) { sum += l1.val; l1 = l1.next; } if (l2 != null) { sum += l2.val; l2 = l2.next; } if (addOne) { sum += 1; } addOne = sum \u0026gt;= 10; listNode.next = new ListNode(sum % 10); listNode = listNode.next; } return result.next; } } class ListNode { int val; ListNode next; ListNode() { } ListNode(int val) { this.val = val; } ListNode(int val, ListNode next) { this.val = val; this.next = next; } } ","permalink":"https://fatedeity.cn/posts/leetcode/add-two-numbers.html","title":"LeetCode - ä¸¤æ•°ç›¸åŠ "},{"content":"é¢˜ç›®ä¿¡æ¯ æºåœ°å€ï¼šä¸¤æ•°ä¹‹å’Œ\nç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼ target çš„é‚£ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚\nä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚\nä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚\næç¤ºä¿¡æ¯ ç¤ºä¾‹ 1 è¾“å…¥ï¼šnums = [2,7,11,15], target = 9 è¾“å‡ºï¼š[0,1] è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚ ç¤ºä¾‹ 2 è¾“å…¥ï¼šnums = [3,2,4], target = 6 è¾“å‡ºï¼š[1,2] ç¤ºä¾‹ 3 è¾“å…¥ï¼šnums = [3,3], target = 6 è¾“å‡ºï¼š[0,1] é™åˆ¶ 2 \u0026lt;= nums.length \u0026lt;= 10^3 -10^9 \u0026lt;= nums[i] \u0026lt;= 10^9 -10^9 \u0026lt;= target \u0026lt;= 10^9 åªä¼šå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆ å®ç°é€»è¾‘ æš´åŠ›æšä¸¾ æœ€å…ˆæƒ³åˆ°çš„é€»è¾‘è‚¯å®šæ˜¯ä½¿ç”¨åŒå±‚å¾ªç¯æš´åŠ›æŸ¥æ‰¾ã€‚\nå½“ç„¶ï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼Œå®é™…æ•ˆç‡æ˜¯éå¸¸åœ°ä½ã€‚\npackage cn.fatedeity.algorithm.leetcode; public class TwoSum { public int[] answer(int[] nums, int target) { for (int i = 0; i \u0026lt; nums.length; i++) { for (int j = i + 1; j \u0026lt; nums.length; j++) { if (nums[i] + nums[j] == target) { return new int[]{i, j}; } } } return new int[0]; } } å“ˆå¸ŒåŒ¹é… å¦‚æœé‡‡ç”¨â€œç©ºé—´æ¢æ—¶é—´â€çš„æ–¹æ³•ï¼Œåˆ©ç”¨å“ˆå¸Œè¡¨ç»“æ„æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ çš„ç‰¹æ€§ï¼Œå°±å¯ä»¥ä¸€æ¬¡å¾ªç¯å¿«é€Ÿå¾—åˆ°ç»“æœã€‚\næœ€ç»ˆï¼Œæ—¶é—´å¤æ‚åº¦é™åˆ° $O(n)$ï¼Œç©ºé—´å¤æ‚åº¦åˆ™å˜æˆ $O(n)$ã€‚\npackage cn.fatedeity.algorithm.leetcode; import java.util.HashMap; public class TwoSum { public int[] answer(int[] nums, int target) { HashMap\u0026lt;Integer, Integer\u0026gt; hashMap = new HashMap\u0026lt;\u0026gt;(); for (int i = 0; i \u0026lt; nums.length; i++) { int diff = target - nums[i]; if (hashMap.containsKey(diff)) { return new int[]{hashMap.get(diff), i}; } hashMap.put(nums[i], i); } return new int[0]; } } ","permalink":"https://fatedeity.cn/posts/leetcode/two-sum.html","title":"LeetCode - ä¸¤æ•°ä¹‹å’Œ"},{"content":"æ’å€¼æŸ¥æ‰¾å’ŒäºŒåˆ†æŸ¥æ‰¾ä¸€æ ·ï¼Œæ˜¯æœ‰åºè¡¨çš„ä¸€ç§æŸ¥æ‰¾ç®—æ³•ï¼Œå…¶åŸºäºäºŒåˆ†æŸ¥æ‰¾ï¼Œå°†æŸ¥æ‰¾ç‚¹çš„é€‰æ‹©æ”¹è¿›ä¸ºè‡ªé€‚åº”é€‰æ‹©ï¼Œæé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚\nè¯¦ç»†æè¿° äºŒåˆ†æŸ¥æ‰¾æ˜¯é€šè¿‡æŠ˜åŠçš„æ–¹æ³•ï¼Œæ¯ä¸€æ¬¡éƒ½å°†æœç´¢èŒƒå›´ç¼©å°è‡³åŸæ¥çš„äºŒåˆ†ä¹‹ä¸€ï¼Œå¦‚æœè¿™ä¸ªæŠ˜åŠèƒ½å¤Ÿå®ç°åˆ°æŠ˜å››åˆ†ä¹‹ä¸€ç”šè‡³æ›´å¤šï¼Œæ•ˆç‡å°†ä¼šæ›´é«˜ã€‚\næ’å€¼æŸ¥æ‰¾å°±æ˜¯è¿™æ ·çš„ç®—æ³•ï¼Œç±»ä¼¼äºäºŒåˆ†æŸ¥æ‰¾ï¼Œæ’å€¼æŸ¥æ‰¾æ¯æ¬¡ä¼šä» è‡ªé€‚åº” å¤„å¼€å§‹æŸ¥æ‰¾ï¼Œå®è´¨ä¸Šæ˜¯å°† $\\frac1 2$ å¤„ä½ç½®çš„æŸ¥æ‰¾å…¬å¼åšäº†ä¿®æ”¹ï¼š\n$$ mid = \\frac{low + high}{2} = low + \\frac{1}{2}(high - low) \\Rightarrow mid = low + \\frac{key - a[low]}{a[high] - a[low]}(high - low) $$\næ’å€¼æŸ¥æ‰¾è¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\nåœ¨æœ‰åºè¡¨ä¸­ï¼Œé€šè¿‡æ¯”ä¾‹å…¬å¼å–å¯¹åº”è®°å½•ä½œä¸ºæ¯”è¾ƒå¯¹è±¡ï¼› è‹¥ç»™å®šå€¼ä¸å¯¹åº”è®°å½•çš„å…³é”®å­—ç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼› è‹¥ç»™å®šå€¼å°äºå¯¹åº”è®°å½•çš„å…³é”®å­—ï¼Œåˆ™åœ¨å¯¹åº”è®°å½•çš„å·¦åŠåŒºç»§ç»­æŸ¥æ‰¾ï¼› è‹¥ç»™å®šå€¼å¤§äºå¯¹åº”è®°å½•çš„å…³é”®å­—ï¼Œåˆ™åœ¨ä¸­é—´è®°å½•çš„å³åŠåŒºç»§ç»­æŸ¥æ‰¾ï¼› ä¸æ–­é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æŸ¥æ‰¾æˆåŠŸï¼Œæˆ–æ‰€æœ‰æŸ¥æ‰¾åŒºåŸŸæ— è®°å½•ï¼ŒæŸ¥æ‰¾å¤±è´¥ä¸ºæ­¢ã€‚ é—®é¢˜è§£ç–‘ æ’å€¼æŸ¥æ‰¾ä¸ºä»€ä¹ˆæ˜¯ $\\frac{key - a[low]}{a[high] - a[low]}$? æ‰“ä¸ªæ¯”æ–¹ï¼Œåœ¨ä¸€æœ¬è‹±æ–‡å­—å…¸ä¸­æŸ¥æ‰¾ apple è¿™ä¸ªå•è¯çš„æ—¶å€™ï¼Œè‚¯å®šä¸ä¼šä»å­—å…¸ä¸­é—´å¼€å§‹æŸ¥æ‰¾ï¼Œè€Œæ˜¯ä»å­—å…¸å¼€å¤´éƒ¨åˆ†å¼€å§‹ç¿»ï¼Œå› ä¸ºä¼šè§‰å¾—è¿™æ ·çš„æ‰¾æ³•æ‰æ˜¯æ¯”è¾ƒå¿«çš„ã€‚\nå¯¹äºä¸€ä¸ªæœ‰åºçš„åºåˆ—ï¼Œå¦‚æœèƒ½åœ¨æŸ¥æ‰¾å‰è¾ƒå‡†ç¡®çš„é¢„æµ‹å…³é”®å­—åœ¨åºåˆ—ä¸­çš„ä½ç½®æ—¶ï¼Œè¿™æ ·çš„æŸ¥æ‰¾æ–¹æ³•èƒ½æ¯”äºŒåˆ†æŸ¥æ‰¾æ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚\nå…¶ä¸­çš„å·®å€¼å…¬å¼ $\\frac{key - a[low]}{a[high] - a[low]}$ æ˜¯è¦å°†æŸ¥æ‰¾çš„å…³é”®å­—ä¸åºåˆ—ä¸­çš„æœ€å¤§ã€æœ€å°è®°å½•çš„å…³é”®å­—æ¯”è¾ƒï¼Œè·å–ä¸€ä¸ªç›¸å¯¹æ›´å‡†ç¡®çš„ä½ç½®ã€‚\nä½¿ç”¨æ’å€¼æŸ¥æ‰¾æœ‰å“ªäº›æ³¨æ„äº‹é¡¹ï¼Ÿ å¯¹äºå‡åŒ€åˆ†å¸ƒçš„åºåˆ—ï¼Œæ’å€¼æŸ¥æ‰¾çš„æ•ˆç‡æ˜¯éå¸¸å¿«ã€‚ç‰¹åˆ«æ˜¯å¯¹äºç»å¯¹å‡åŒ€åˆ†å¸ƒçš„åºåˆ—ï¼ˆç›¸é‚»å…ƒç´ å·®å€¼ç›¸åŒï¼‰ï¼Œæ’å€¼æŸ¥æ‰¾å¯ä»¥åªåšä¸€æ¬¡æ¯”è¾ƒå°±æŸ¥æ‰¾æˆåŠŸã€‚\nå¯¹äºåˆ†å¸ƒå¾ˆä¸å‡åŒ€çš„åºåˆ—ï¼Œæ’å€¼æŸ¥æ‰¾çš„è®¡ç®—åˆ™ä¼šèµ·åˆ°åæ•ˆæœï¼Œè¿™æ—¶å€™åè€Œä¸å¦‚äºŒåˆ†æŸ¥æ‰¾ã€‚\nä»£ç å®ç° æŸ¥æ‰¾æ¥å£ package cn.fatedeity.algorithm.search; public interface Search { int search(int[] numbers, int target); } æ’å€¼æŸ¥æ‰¾ç±» package cn.fatedeity.algorithm.search; /** * æ’å€¼æŸ¥æ‰¾ç±» */ public class InterpolationSearch implements Search { private int search(int[] numbers, int target, int left, int right) { if (left \u0026gt; right) { return -1; } else if (left == right) { if (numbers[left] == target) { return left; } else { return -1; } } if (target \u0026lt; numbers[left] || target \u0026gt; numbers[right]) { return -1; } int scale = (target - numbers[left]) / (numbers[right] - numbers[left]); int mid = left + (int) Math.floor(scale * (right - left)); if (numbers[mid] \u0026gt; target) { return this.search(numbers, target, left, mid - 1); } else if (numbers[mid] \u0026lt; target) { return this.search(numbers, target, mid + 1, right); } else { return mid; } } @Override public int search(int[] numbers, int target) { return this.search(numbers, target, 0, numbers.length - 1); } } ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/interpolation-search.html","title":"æ’å€¼æŸ¥æ‰¾çš„ç®€å•ç†è§£"},{"content":"äºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸€ç§æå‡æœ‰åºåºåˆ—æœç´¢æ•ˆç‡çš„æŸ¥æ‰¾ç®—æ³•ï¼Œå¤§å¤§é™ä½äº†æ•°ç»„æŸ¥æ‰¾çš„æ—¶é—´ï¼Œå…¶ç±»ä¼¼çš„æ€æƒ³ä¹Ÿåº”ç”¨åˆ°äºŒå‰æ ‘ã€æ•°æ®åº“ç´¢å¼•ç­‰åœºæ™¯ã€‚\nè¯¦ç»†æè¿° äºŒåˆ†æŸ¥æ‰¾çš„æœç´¢è¿‡ç¨‹ä»æ•°ç»„çš„ä¸­é—´å…ƒç´ å¼€å§‹ï¼Œå¦‚æœä¸­é—´å…ƒç´ æ­£å¥½æ˜¯è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œåˆ™æœç´¢è¿‡ç¨‹ç»“æŸï¼›å¦‚æœæŸä¸€ç‰¹å®šå…ƒç´ å¤§äºæˆ–è€…å°äºä¸­é—´å…ƒç´ ï¼Œåˆ™åœ¨æ•°ç»„å¤§äºæˆ–å°äºä¸­é—´å…ƒç´ çš„é‚£ä¸€åŠä¸­æŸ¥æ‰¾ï¼Œè€Œä¸”è·Ÿå¼€å§‹ä¸€æ ·ä»ä¸­é—´å…ƒç´ å¼€å§‹æ¯”è¾ƒã€‚å¦‚æœåœ¨æŸä¸€æ­¥éª¤æ•°ç»„ä¸ºç©ºï¼Œåˆ™ä»£è¡¨æ‰¾ä¸åˆ°ã€‚è¿™ç§æœç´¢ç®—æ³•æ¯ä¸€æ¬¡æ¯”è¾ƒéƒ½ä½¿æœç´¢èŒƒå›´ç¼©å°ä¸€åŠã€‚\näºŒåˆ†æŸ¥æ‰¾è¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\nåœ¨æœ‰åºè¡¨ä¸­ï¼Œå–ä¸­é—´è®°å½•ä½œä¸ºæ¯”è¾ƒå¯¹è±¡ï¼› è‹¥ç»™å®šå€¼ä¸ä¸­é—´è®°å½•çš„å…³é”®å­—ç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼› è‹¥ç»™å®šå€¼å°äºä¸­é—´è®°å½•çš„å…³é”®å­—ï¼Œåˆ™åœ¨ä¸­é—´è®°å½•çš„å·¦åŠåŒºç»§ç»­æŸ¥æ‰¾ï¼› è‹¥ç»™å®šå€¼å¤§äºä¸­é—´è®°å½•çš„å…³é”®å­—ï¼Œåˆ™åœ¨ä¸­é—´è®°å½•çš„å³åŠåŒºç»§ç»­æŸ¥æ‰¾ï¼› ä¸æ–­é‡å¤æ­¥éª¤ 1~4ï¼Œç›´åˆ°æŸ¥æ‰¾æˆåŠŸï¼Œæˆ–æ‰€æœ‰æŸ¥æ‰¾åŒºåŸŸæ— è®°å½•ï¼ŒæŸ¥æ‰¾å¤±è´¥ä¸ºæ­¢ã€‚ ç®—æ³•å›¾è§£ é—®é¢˜è§£ç–‘ äºŒåˆ†æŸ¥æ‰¾ç®—æ³•æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ äºŒåˆ†æŸ¥æ‰¾ç®—æ³•éœ€è¦æŒ‰ç…§ä¸‹æ ‡éšæœºè®¿é—®ã€‚æ‰€ä»¥æ›´é€‚åˆæ•°ç»„ç»“æ„ï¼Œè€Œä¸é€‚åˆé“¾è¡¨ç»“æ„ï¼Œæ•°ç»„æŒ‰ç…§ä¸‹æ ‡éšæœºè®¿é—®æ•°æ®çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼Œè€Œé“¾è¡¨éšæœºè®¿é—®çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$ã€‚\näºŒåˆ†æŸ¥æ‰¾é’ˆå¯¹çš„æ˜¯æœ‰åºæ•°ã€‚äºŒåˆ†æŸ¥æ‰¾åªèƒ½ç”¨åœ¨æ’å…¥ã€åˆ é™¤æ“ä½œä¸é¢‘ç¹ï¼Œä¸€æ¬¡æ’åºå¤šæ¬¡æŸ¥æ‰¾çš„åœºæ™¯ä¸­ï¼Œé’ˆå¯¹åŠ¨æ€å˜åŒ–çš„æ•°æ®é›†åˆï¼ŒäºŒåˆ†æŸ¥æ‰¾å°†ä¸å†é€‚ç”¨ã€‚\næ•°æ®é‡å¤ªå°ä¸é€‚åˆäºŒåˆ†æŸ¥æ‰¾ã€‚åœ¨ä¸€ä¸ªå¤§å°ä¸º 10 çš„æ•°ç»„ä¸­æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ ï¼Œä¸ç®¡ç”¨äºŒåˆ†æŸ¥æ‰¾è¿˜æ˜¯é¡ºåºéå†ï¼ŒæŸ¥æ‰¾é€Ÿåº¦éƒ½å·®ä¸å¤šï¼Œåªæœ‰æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼ŒäºŒåˆ†æŸ¥æ‰¾çš„ä¼˜åŠ¿æ‰ä¼šæ¯”è¾ƒæ˜æ˜¾ã€‚\næ•°æ®é‡å¤ªå¤§ä¹Ÿä¸é€‚åˆäºŒåˆ†æŸ¥æ‰¾ã€‚äºŒåˆ†æŸ¥æ‰¾æ˜¯ä½œç”¨åœ¨æ•°ç»„è¿™ç§æ•°æ®ç»“æ„ä¹‹ä¸Šçš„ï¼Œå¤ªå¤§çš„æ•°æ®ç”¨æ•°ç»„å­˜å‚¨æ¯”è¾ƒåƒåŠ›ï¼Œä¹Ÿå°±ä¸èƒ½ç”¨äºŒåˆ†æŸ¥æ‰¾äº†ã€‚\näºŒåˆ†æŸ¥æ‰¾ç®—æ³•æœ‰å“ªäº›å˜å½¢ï¼Ÿ æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå€¼ç­‰äºç»™å®šå€¼çš„å…ƒç´  æŸ¥æ‰¾æœ€åä¸€ä¸ªå€¼ç­‰äºç»™å®šå€¼çš„å…ƒç´  æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºç»™å®šå€¼çš„å…ƒç´  æŸ¥æ‰¾æœ€åä¸€ä¸ªå°äºç­‰äºç»™å®šå€¼çš„å…ƒç´  ä»£ç å®ç° æŸ¥æ‰¾æ¥å£ package cn.fatedeity.algorithm.search; public interface Search { int search(int[] numbers, int target); } äºŒåˆ†æŸ¥æ‰¾ç±» package cn.fatedeity.algorithm.search; /** * äºŒåˆ†æŸ¥æ‰¾ç±» */ public class BinarySearch implements Search { private int search(int[] numbers, int target, int left, int right) { if (left \u0026gt; right) { return -1; } else if (left == right) { if (numbers[left] == target) { return left; } else { return -1; } } if (target \u0026lt; numbers[left] || target \u0026gt; numbers[right]) { return -1; } int mid = (left + right) \u0026gt;\u0026gt; 1; if (numbers[mid] \u0026gt; target) { return this.search(numbers, target, left, mid - 1); } else if (numbers[mid] \u0026lt; target) { return this.search(numbers, target, mid + 1, right); } else { return mid; } } @Override public int search(int[] numbers, int target) { return this.search(numbers, target, 0, numbers.length - 1); } } ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/binary-search.html","title":"äºŒåˆ†æŸ¥æ‰¾çš„ç®€å•ç†è§£"},{"content":"åŸºæ•°æ’åºæ˜¯æ¡¶æ’åºçš„ä¸€ç§æ‰©å±•ä½¿ç”¨ï¼ŒåŒæ ·æ˜¯ä¸€ç§éæ¯”è¾ƒçš„æ•´æ•°æ’åºç®—æ³•ï¼Œå…¶åŸç†æ˜¯å°†æ•´æ•°ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚\nè¯¦ç»†æè¿° ä»åŸºæ•°æ’åºçš„æè¿°å¯ä»¥çœ‹å¾—å‡ºï¼Œå…¶é€‚ç”¨äºæ•´æ•°ï¼Œä½†æ˜¯ï¼Œæ•´æ•°ä¹Ÿå¯ä»¥è¡¨è¾¾å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚åå­—æˆ–æ—¶é—´ï¼‰å’Œç‰¹å®šæ ¼å¼çš„æµ®ç‚¹æ•°ï¼Œå› æ­¤åŸºæ•°æ’åºå¹¶ä¸åªæ˜¯é€‚ç”¨äºæ•´æ•°ã€‚\nåŸºæ•°æ’åºè¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\né¦–å…ˆå‡†å¤‡ 10 ä¸ªæ¡¶ï¼Œåˆ†åˆ«ç”¨äºå­˜å‚¨æ‰€åœ¨ä½æ•°ä¸º 0 ~ 9 çš„æ•°ï¼› æå–å‡ºåºåˆ—ä¸­å…ƒç´ çš„ä¸ªä½ï¼Œå°†è¯¥å…ƒç´ ç§»åŠ¨åˆ°å¯¹åº”ä¸ªä½æ‰€å±çš„æ¡¶å†…ï¼› é‡å¤æ‰§è¡Œç¬¬ 2 æ­¥ï¼Œä»ä¸ªä½ã€åä½ã€ç™¾ä½ç›´åˆ°æœ€å¤§å…ƒç´ çš„æœ€å¤§ä½æ•°ï¼Œæ²¡æœ‰æ‰€åœ¨ä½æ—¶èµ‹ä¸º 0ï¼› æ‰§è¡Œå®Œç¬¬ 3 æ­¥ï¼Œç»„åˆæ¯ä¸ªæ¡¶å†…çš„å…ƒç´ æˆæœ‰åºåºåˆ—ã€‚ ç®—æ³•å›¾è§£ é—®é¢˜è§£ç–‘ åŸºæ•°æ’åºçš„å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ åŸºæ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦å’Œå¾…æ’åºåºåˆ—çš„æœ€å¤§ä½æ•°æœ‰å…³ç³»ï¼Œç”±äºéœ€è¦å¯¹æ¯ä¸€ä¸ªä½æ•°éå†ä¸€æ¬¡åºåˆ—ï¼ŒåŸºæ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n \\times k)$ï¼Œå…¶ä¸­ k æ˜¯æœ€å¤§ä½æ•°ã€‚\nåŸºæ•°æ’åºçš„ç©ºé—´å¤æ‚åº¦æ˜¯ $O(n+k)$ï¼Œå…¶ä¸­ k æ˜¯æ¡¶çš„æ•°é‡ã€‚\nåŸºæ•°æ’åºå’Œå¿«é€Ÿæ’åºå“ªä¸ªæ•ˆç‡æ›´å¥½ï¼Ÿ åŸºæ•°æ’åºæ˜¯ä¸€ç§ç©ºé—´æ¢æ—¶é—´çš„éæ¯”è¾ƒç±»æ’åºç®—æ³•ï¼Œå…¶æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n \\times k)$ï¼›å¿«é€Ÿæ’åºæ˜¯ä¸€ç§å¸¸è§„çš„æ¯”è¾ƒç±»æ’åºç®—æ³•ï¼Œå…¶æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n\\log_2n)$ã€‚\nä»æ—¶é—´å¤æ‚åº¦ä¸Šçœ‹ï¼Œä¸»è¦åœ¨äºå…¶ç³»æ•°çš„æ¯”è¾ƒã€‚é€šå¸¸æ˜¯ï¼Œå¾…æ’åºåºåˆ—çš„æœ€å¤§ä½æ•°è¶Šå¤§ï¼ŒåŸºæ•°æ’åºçš„æ•ˆç‡å°±è¶Šä½ï¼Œè¿™æ—¶é€‰æ‹©å¿«é€Ÿæ’åºåˆ™æ›´ä¼˜ï¼›å¦‚æœæ•°æ®é‡éå¸¸å¤§çš„æ—¶å€™ï¼Œåˆ™åŸºæ•°æ’åºæ¯”è¾ƒå ä¼˜ã€‚\nä»£ç å®ç° æ’åºæ¥å£ package cn.fatedeity.algorithm.sort; /** * æ’åºæ¥å£ */ public interface Sort { int[] sort(int[] numbers); } æ’åºæŠ½è±¡ç±» package cn.fatedeity.algorithm.sort; /** * æ’åºæŠ½è±¡ç±» */ public abstract class AbstractSort implements Sort { protected void swap(int[] numbers, int src, int target) { int temp = numbers[src]; numbers[src] = numbers[target]; numbers[target] = temp; } } åŸºæ•°æ’åºç±» package cn.fatedeity.algorithm.sort; import java.util.List; import java.util.ArrayList; /** * åŸºæ•°æ’åºç±» */ public class RadixSort extends AbstractSort { @Override public int[] sort(int[] numbers) { if (numbers.length \u0026lt;= 1) { return numbers; } int min = numbers[0], max = numbers[0]; for (int number : numbers) { if (number \u0026lt; min) { min = number; } if (number \u0026gt; max) { max = number; } } int k = String.valueOf(Math.max(Math.abs(min), Math.abs(max))).length(); List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; buckets = new ArrayList\u0026lt;\u0026gt;(); for (int i = 0; i \u0026lt; 19; i++) { buckets.add(new ArrayList\u0026lt;\u0026gt;()); } int x = 1; while (x \u0026lt;= k) { for (int number : numbers) { int index = (number / (int) Math.pow(10, x - 1)) % 10; List\u0026lt;Integer\u0026gt; bucket = buckets.get(index + 9); bucket.add(number); } int index = 0; for (int i = 0; i \u0026lt; buckets.size(); i++) { for (int number : buckets.get(i)) { numbers[index++] = number; } buckets.set(i, new ArrayList\u0026lt;\u0026gt;()); } x++; } return numbers; } } ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/radix-sort.html","title":"åŸºæ•°æ’åºçš„ç®€å•ç†è§£"},{"content":"æ¡¶æ’åºæ˜¯è®¡æ•°æ’åºçš„ä¸€ç§æ‰©å±•ä½¿ç”¨ï¼Œé€‚ç”¨äºå…ƒç´ å€¼èŒƒå›´ä¸å¤§çš„åºåˆ—ã€‚å¦‚æœå¯¹å¤§é‡å­¦ç”Ÿçš„è€ƒè¯•æˆç»©åšæ’åºï¼Œå°±éå¸¸é€‚åˆä½¿ç”¨æ¡¶æ’åºã€‚\nè¯¦ç»†æè¿° æ¡¶æ’åºçš„å·¥ä½œåŸç†æ˜¯ï¼Œå°†åºåˆ—ä¸­çš„å…ƒç´ åˆ†é…åˆ°æœ‰é™çš„æ¡¶é‡Œï¼Œæ¯ä¸ªæ¡¶å†åˆ†åˆ«è¿›è¡Œæ’åºï¼ˆä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–è€…é€’å½’ä½¿ç”¨æ¡¶æ’åºï¼‰ï¼Œæœ€ç»ˆåˆå¹¶æˆç»“æœåºåˆ—ã€‚\næ¡¶æ’åºè¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\næ‰¾å‡ºåºåˆ—ä¸­æœ€å°çš„å…ƒç´ å’Œæœ€å¤§çš„å…ƒç´ ï¼Œå¹¶è®¡ç®—å¾—åˆ°å·®å€¼èŒƒå›´å’Œæ˜ å°„èŒƒå›´ï¼Œç¡®å®šæ¡¶çš„æ•°é‡ï¼› éå†æ•´ä¸ªåºåˆ—ï¼Œå°†æ¯ä¸€ä¸ªå…ƒç´ ç§»åŠ¨åˆ°å¯¹åº”çš„æ¡¶ä¸­ï¼› å¯¹æ¯ä¸€ä¸ªæ¡¶ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œç›´åˆ°æ‰€æœ‰çš„æ¡¶ä¸­å…ƒç´ éƒ½æœ‰åºï¼› åˆå¹¶æ¯ä¸€ä¸ªæ¡¶ä¸­çš„å…ƒç´ æˆä¸ºæœ‰åºåºåˆ—ã€‚ ç®—æ³•å›¾è§£ é—®é¢˜è§£ç–‘ æ¡¶æ’åºçš„å…³é”®æ˜¯ä»€ä¹ˆï¼Ÿ æ¡¶æ’åºè¿‡ç¨‹ä¸­å­˜åœ¨ä¸¤ä¸ªå…³é”®ç¯èŠ‚ï¼šå…ƒç´ åˆ°æ¡¶çš„æ˜ å°„è§„åˆ™ã€æ’åºç®—æ³•é€‰æ‹©ã€‚\nå¯¹äºæ˜ å°„è§„åˆ™ï¼Œå¦‚æœè§„åˆ™è®¾è®¡è¿‡äºæ¨¡ç³Šã€å®½æ³›ï¼Œå¯èƒ½æ‰€æœ‰å…ƒç´ éƒ½æ˜ å°„åˆ°åŒä¸€ä¸ªæ¡¶ï¼Œå¯¼è‡´æ¡¶æ’åºå¾€æ¯”è¾ƒç±»æ’åºç®—æ³•æ¼”å˜ï¼›å¦‚æœè§„åˆ™è®¾è®¡è¿‡äºä¸¥è‹›ï¼Œå¯èƒ½æ¯ä¸€ä¸ªæ¡¶åªåˆ†é…åˆ°ä¸€ä¸ªå…ƒç´ ï¼Œå¯¼è‡´æ¡¶æ’åºå¾€è®¡æ•°æ’åºæ–¹å¼æ¼”å˜ã€‚\nå¯¹äºæ¡¶ä¸­å…ƒç´ çš„æ’åºï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨æ¡¶æ’åºæˆ–è€…å…¶ä»–æ’åºç®—æ³•ï¼Œæœ€ç»ˆæ¡¶æ’åºçš„å¤æ‚åº¦å’Œç¨³å®šæ€§ï¼Œéƒ½æ ¹æ®æ’åºç®—æ³•çš„é€‰æ‹©æœ‰æ‰€ä¸åŒã€‚\næ¡¶æ’åºçš„é€‚ç”¨äºä»€ä¹ˆåœºæ™¯ï¼Ÿ æœ€å¥½æ—¶é—´å¤æ‚åº¦çš„åœºæ™¯æ˜¯ï¼šåºåˆ—ä¸­çš„å…ƒç´ å€¼èŒƒå›´è¶Šå°è¶Šå¥½ï¼Œæ¯”å¦‚å¯¹èŒƒå›´åªæœ‰ 10 çš„åºåˆ—åšæ’åºï¼Œç”³è¯· 10 ä¸ªæ¡¶å°±èƒ½å®ç°éå†ä¸€æ¬¡åºåˆ—å®Œæˆæ’åºã€‚\næœ€å¥½ç©ºé—´å¤æ‚åº¦çš„åœºæ™¯æ˜¯ï¼šåºåˆ—ä¸­çš„å…ƒç´ å€¼å‡åŒ€åˆ†å¸ƒï¼Œæœ€ç»ˆåˆ†é…åˆ°æ¯ä¸€ä¸ªæ¡¶çš„å…ƒç´ æ•°é‡éƒ½ç›¸å·®ä¸å¤§ï¼Œè¿™æ ·å¯ä»¥é¿å…æ•°æ®å€¾æ–œçš„é—®é¢˜ã€‚\nä»£ç å®ç° æ’åºæ¥å£ package cn.fatedeity.algorithm.sort; /** * æ’åºæ¥å£ */ public interface Sort { int[] sort(int[] numbers); } æ’åºæŠ½è±¡ç±» package cn.fatedeity.algorithm.sort; /** * æ’åºæŠ½è±¡ç±» */ public abstract class AbstractSort implements Sort { protected void swap(int[] numbers, int src, int target) { int temp = numbers[src]; numbers[src] = numbers[target]; numbers[target] = temp; } } æ¡¶æ’åºç±» package cn.fatedeity.algorithm.sort; import java.util.ArrayList; import java.util.List; /** * æ¡¶æ’åºç±» */ public class BucketSort extends AbstractSort { private void swap(List\u0026lt;Integer\u0026gt; numbers, int src, int target) { int temp = numbers.get(src); numbers.set(src, numbers.get(target)); numbers.set(target, temp); } private void insertSort(List\u0026lt;Integer\u0026gt; numbers) { for (int i = 1; i \u0026lt; numbers.size(); i++) { for (int j = i; j \u0026gt; 0; j--) { if (numbers.get(j - 1) \u0026lt;= numbers.get(j)) { break; } this.swap(numbers, j, j - 1); } } } @Override public int[] sort(int[] numbers) { if (numbers.length \u0026lt;= 1) { return numbers; } int min = numbers[0], max = numbers[0]; for (int number : numbers) { if (number \u0026lt; min) { min = number; } else if (number \u0026gt; max) { max = number; } } // ä»¥ 10 ä¸ºæ­¥é•¿ int bucketNum = (max - min) / 10 + 1; List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; bucketList = new ArrayList\u0026lt;\u0026gt;(); for (int i = 0; i \u0026lt; bucketNum; i++) { bucketList.add(new ArrayList\u0026lt;\u0026gt;()); } // å°†å…ƒç´ åˆ†é…åˆ°æ¡¶ä¸­ for (int number : numbers) { int index = (number - min) / 10; List\u0026lt;Integer\u0026gt; bucket = bucketList.get(index); bucket.add(number); } int index = 0; for (int i = 0; i \u0026lt; bucketNum; i++) { List\u0026lt;Integer\u0026gt; bucket = bucketList.get(i); this.insertSort(bucket); for (int number : bucket) { numbers[index++] = number; } } return numbers; } } ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/bucket-sort.html","title":"æ¡¶æ’åºçš„ç®€å•ç†è§£"},{"content":"å­¦ä¹ è®¡æ•°æ’åºå¯ä»¥äº†è§£åˆ°ç©ºé—´æ¢æ—¶é—´çš„æ€æƒ³ï¼Œå…¶æ˜¯ä¸€ç§ç‰ºç‰²ç©ºé—´æ¢æ—¶é—´çš„æ’åºç®—æ³•ï¼Œåœ¨å…¶ç‰¹å®šçš„åœºæ™¯ä¸Šï¼Œç”šè‡³å°†æ—¶é—´å¤æ‚åº¦é™åˆ°äº†çº¿æ€§çº§åˆ«ã€‚\nè¯¦ç»†æè¿° è®¡æ•°æ’åºä½œä¸ºä¸€ç§çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„æ’åºç®—æ³•ï¼Œå…¶è¦æ±‚è¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯ æœ‰ç¡®å®šèŒƒå›´çš„æ•´æ•°ï¼Œæ ¸å¿ƒåœ¨äºå°†è¾“å…¥çš„æ•°æ®å€¼è½¬åŒ–ä¸ºé”®å­˜å‚¨åœ¨é¢å¤–å¼€è¾Ÿçš„æ•°ç»„ç©ºé—´ä¸­ã€‚\nè®¡æ•°æ’åºè¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\næ‰¾å‡ºåŸæ•°ç»„ä¸­å…ƒç´ å€¼æœ€å¤§çš„ï¼Œè®°ä¸º maxï¼› åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ countï¼Œå…¶é•¿åº¦æ˜¯ max+1ï¼Œå…¶å…ƒç´ é»˜è®¤å€¼éƒ½ä¸º 0ï¼› éå†åŸæ•°ç»„ä¸­çš„å…ƒç´ ï¼Œä»¥åŸæ•°ç»„ä¸­çš„å…ƒç´ ä½œä¸º count æ•°ç»„çš„ç´¢å¼•ï¼Œä»¥åŸæ•°ç»„ä¸­çš„å…ƒç´ å‡ºç°æ¬¡æ•°ä½œä¸º count æ•°ç»„çš„å…ƒç´ å€¼ï¼› åˆ›å»ºç»“æœæ•°ç»„ resultï¼Œèµ·å§‹ç´¢å¼• indexï¼› éå† count æ•°ç»„ï¼Œæ‰¾å‡ºå…¶ä¸­å…ƒç´ å€¼å¤§äº 0 çš„å…ƒç´ ï¼Œå°†å…¶å¯¹åº”çš„ç´¢å¼•ä½œä¸ºå…ƒç´ å€¼å¡«å……åˆ° result æ•°ç»„ä¸­å»ï¼Œæ¯å¤„ç†ä¸€æ¬¡ï¼Œcount ä¸­çš„è¯¥å…ƒç´ å€¼å‡ 1ï¼Œç›´åˆ°è¯¥å…ƒç´ å€¼ä¸å¤§äº 0ï¼Œä¾æ¬¡å¤„ç† count ä¸­å‰©ä¸‹çš„å…ƒç´ ï¼› è¿”å›ç»“æœæ•°ç»„ resultã€‚ ç®—æ³•å›¾è§£ é—®é¢˜è§£ç–‘ è®¡æ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ è®¡æ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦å¯ä»¥è¾¾åˆ° $O(n+k)$ï¼Œå…¶ä¸­ k æ˜¯ count æ•°ç»„çš„é•¿åº¦ã€‚\nä»è¿™é‡Œå¯ä»¥çŸ¥é“ï¼Œcount æ•°ç»„å…ƒç´ çš„å–å€¼è¶Šé›†ä¸­ï¼Œç®—æ³•è€—è´¹çš„æ—¶é—´è¶ŠçŸ­ã€‚\nè®¡æ•°æ’åºæœ‰ä»€ä¹ˆé™åˆ¶å—ï¼Ÿ è®¡æ•°æ’åºæœ‰ä¸¤ä¸ªå‰æéœ€è¦æ»¡è¶³ï¼š\næ’åºçš„å…ƒç´ å¿…é¡»æ˜¯æ•´æ•°ï¼Œå¦åˆ™æ— æ³•å¯¹åº”æ•°ç»„çš„ç´¢å¼•ä¸‹æ ‡ æ’åºå…ƒç´ çš„å–å€¼è¦åœ¨ä¸€å®šèŒƒå›´å†…ï¼Œå¹¶ä¸”æ¯”è¾ƒé›†ä¸­ï¼Œå¦åˆ™ count æ•°ç»„å°†ä¼šéå¸¸å¤§ åªæœ‰è¿™ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ï¼Œæ‰èƒ½æœ€å¤§ç¨‹åº¦å‘æŒ¥è®¡æ•°æ’åºçš„ä¼˜åŠ¿ã€‚\nä»£ç å®ç° æ’åºæ¥å£ package cn.fatedeity.algorithm.sort; /** * æ’åºæ¥å£ */ public interface Sort { int[] sort(int[] numbers); } æ’åºæŠ½è±¡ç±» package cn.fatedeity.algorithm.sort; /** * æ’åºæŠ½è±¡ç±» */ public abstract class AbstractSort implements Sort { protected void swap(int[] numbers, int src, int target) { int temp = numbers[src]; numbers[src] = numbers[target]; numbers[target] = temp; } } è®¡æ•°æ’åºç±» package cn.fatedeity.algorithm.sort; /** * è®¡æ•°æ’åºç±» */ public class CountSort extends AbstractSort { @Override public int[] sort(int[] numbers) { if (numbers.length \u0026lt;= 1) { return numbers; } int min = numbers[0], max = numbers[0]; for (int number : numbers) { if (number \u0026lt; min) { min = number; } else if (number \u0026gt; max) { max = number; } } int[] count = new int[max - min + 1]; for (int number : numbers) { int index = number - min; count[index]++; } int index = 0; for (int i = 0; i \u0026lt; count.length; i++) { while (count[i] \u0026gt; 0) { numbers[index++] = i + min; count[i]--; } } return numbers; } } ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/count-sort.html","title":"è®¡æ•°æ’åºçš„ç®€å•ç†è§£"},{"content":"å½’å¹¶æ’åºä¸ä¸å¿«é€Ÿæ’åºä¸€æ ·ï¼Œæ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ï¼Œåœ¨æ’åºç®—æ³•ä¸­ï¼ŒåŒæ—¶äº†è§£å½’å¹¶æ’åºå’Œå¿«é€Ÿæ’åºï¼Œç›¸äº’å°è¯ï¼Œèƒ½ç†è§£å¾—æ›´æ·±ã€‚\nè¯¦ç»†æè¿° å½’å¹¶æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œå°†å·²æœ‰åºçš„å­åºåˆ—åˆå¹¶ï¼Œå¯ä»¥å¾—åˆ°æœ‰åºçš„å®Œæ•´åºåˆ—ï¼›å³å…ˆä½¿æ¯ä¸ªå­åºåˆ—æœ‰åºï¼Œå†ä½¿å­åºåˆ—æ®µé—´æœ‰åºã€‚è‹¥å°†ä¸¤ä¸ªæœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæœ‰åºè¡¨ï¼Œç§°ä¸º äºŒè·¯å½’å¹¶ã€‚\nå½’å¹¶æ’åºè¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\nç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—ï¼› è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼› æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®ï¼› é‡å¤æ­¥éª¤ 3 ç›´åˆ°æŸä¸€æŒ‡é’ˆè¶…å‡ºåºåˆ—å°¾ã€‚ ç®—æ³•å›¾è§£ é—®é¢˜è§£ç–‘ å½’å¹¶æ’åºå’Œå¿«é€Ÿæ’åºæ¯”è¾ƒæ€ä¹ˆæ ·ï¼Ÿ å½’å¹¶æ’åºçš„æ¯”è¾ƒæ¬¡æ•°å°äºå¿«é€Ÿæ’åºçš„æ¯”è¾ƒæ¬¡æ•°ï¼Œç§»åŠ¨æ¬¡æ•°ä¸€èˆ¬å¤šäºå¿«é€Ÿæ’åºçš„ç§»åŠ¨æ¬¡æ•°ã€‚\nå½’å¹¶æ’åºçš„åº”ç”¨åœ¨ä»€ä¹ˆåœºæ™¯ï¼Ÿ å½’å¹¶æ’åºé€Ÿåº¦ä»…æ¬¡äºå¿«é€Ÿæ’åºï¼Œä¸ºç¨³å®šæ’åºç®—æ³•ï¼Œä¸€èˆ¬ç”¨äºå¯¹æ€»ä½“æ— åºï¼Œä½†æ˜¯å„å­é¡¹ç›¸å¯¹æœ‰åºçš„åºåˆ—ã€‚\nå½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ æ¯æ¬¡åˆå¹¶æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œè€Œå®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦ä¸º $\\log_2n$ï¼Œæ€»çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º $O(n \\log n)$ã€‚\nå¹¶ä¸”ï¼Œå½’å¹¶æ’åºçš„æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦å‡ä¸º $O(n \\log n)$ã€‚\nä»£ç å®ç° æ’åºæ¥å£ package cn.fatedeity.algorithm.sort; /** * æ’åºæ¥å£ */ public interface Sort { int[] sort(int[] numbers); } æ’åºæŠ½è±¡ç±» package cn.fatedeity.algorithm.sort; /** * æ’åºæŠ½è±¡ç±» */ public abstract class AbstractSort implements Sort { protected void swap(int[] numbers, int src, int target) { int temp = numbers[src]; numbers[src] = numbers[target]; numbers[target] = temp; } } å½’å¹¶æ’åºç±» package cn.fatedeity.algorithm.sort; /** * å½’å¹¶æ’åºç±» */ public class MergeSort extends AbstractSort { private void merge(int[] numbers, int low, int mid, int high) { int i = low; int j = mid + 1; int[] newNumbers = new int[high - low + 1]; int k = 0; while (i \u0026lt;= mid \u0026amp;\u0026amp; j \u0026lt;= high) { if (numbers[i] \u0026lt; numbers[j]) { newNumbers[k++] = numbers[i++]; } else if (numbers[i] \u0026gt; numbers[j]) { newNumbers[k++] = numbers[j++]; } else { newNumbers[k++] = numbers[i++]; newNumbers[k++] = numbers[j++]; } } while (i \u0026lt;= mid) { newNumbers[k++] = numbers[i++]; } while (j \u0026lt;= high) { newNumbers[k++] = numbers[j++]; } if (high + 1 - low \u0026gt;= 0) { System.arraycopy(newNumbers, 0, numbers, low, high + 1 - low); } } private int[] sort(int[] numbers, int low, int high) { if (low \u0026lt; high) { int mid = (low + high) \u0026gt;\u0026gt; 1; this.sort(numbers, low, mid); this.sort(numbers, mid + 1, high); this.merge(numbers, low, mid, high); } return numbers; } @Override public int[] sort(int[] numbers) { if (numbers.length \u0026lt;= 1) { return numbers; } return this.sort(numbers, 0, numbers.length - 1); } } ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/merge-sort.html","title":"å½’å¹¶æ’åºçš„ç®€å•ç†è§£"},{"content":"å¿«é€Ÿæ’åºæ˜¯é¢è¯•å½“ä¸­æœ€å¸¸è§çš„æ’åºç®—æ³•é—®é¢˜äº†ï¼Œé™¤äº†éœ€è¦ç†è§£å¿«é€Ÿæ’åºçš„æµç¨‹ï¼Œè¿˜è¦ç†è§£ä¸€äº›å¿«é€Ÿæ’åºçš„ä»£ç å®ç°ï¼Œäº†è§£ä¸€äº›ä¼˜åŒ–æ–¹æ³•ã€‚\nè¯¦ç»†æè¿° å¿«é€Ÿæ’åºé€šè¿‡ä¸€è¶Ÿæ’åºå°†å¾…æ’åºåˆ—åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†åºåˆ—çš„å…³é”®å­—å‡æ¯”å¦ä¸€éƒ¨åˆ†åºåˆ—çš„å…³é”®å­—å°ï¼Œåˆ™å¯åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†åºåˆ—ç»§ç»­è¿›è¡Œæ’åºï¼Œä»¥è¾¾åˆ°æ•´ä¸ªåºåˆ—æœ‰åºçš„ç›®çš„ã€‚\nå¿«é€Ÿæ’åºè¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\nä»åºåˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º â€œåŸºå‡†â€ï¼ˆpivotï¼‰ï¼› é‡æ–°æ’åºåºåˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†çš„åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºé€€å‡ºä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºåºåˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œï¼› é€’å½’åœ°ï¼ˆrecursiveï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­åºåˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­åºåˆ—æ’åºã€‚ ç®—æ³•å›¾è§£ é—®é¢˜è§£ç–‘ å¿«é€Ÿæ’åºå¯ä»¥æ€æ ·é€‰æ‹©åŸºå‡†å€¼ï¼Ÿ ç¬¬ä¸€ç§æ–¹å¼ï¼šå›ºå®šä½ç½®é€‰æ‹©åŸºå‡†å€¼ï¼›åœ¨æ•´ä¸ªåºåˆ—å·²ç»è¶‹äºæœ‰åºçš„æƒ…å†µä¸‹ï¼Œæ•ˆç‡å¾ˆä½ã€‚\nç¬¬äºŒç§æ–¹å¼ï¼šéšæœºé€‰å–å¾…æ’åºåˆ—ä¸­ä»»æ„ä¸€ä¸ªæ•°ä½œä¸ºåŸºå‡†å€¼ï¼›å½“è¯¥åºåˆ—è¶‹äºæœ‰åºæ—¶ï¼Œèƒ½å¤Ÿè®©æ•ˆç‡æé«˜ï¼Œä½†åœ¨æ•´ä¸ªåºåˆ—æ•°å…¨éƒ¨ç›¸ç­‰çš„æ—¶å€™ï¼Œéšæœºå¿«æ’çš„æ•ˆç‡ä¾ç„¶å¾ˆä½ã€‚\nç¬¬ä¸‰ç§æ–¹å¼ï¼šä»åŒºé—´çš„é¦–ã€å°¾ã€ä¸­é—´ï¼Œåˆ†åˆ«å–å‡ºä¸€ä¸ªæ•°ï¼Œç„¶åå¯¹æ¯”å¤§å°ï¼Œå–è¿™ 3 ä¸ªæ•°çš„ä¸­é—´å€¼ä½œä¸ºåŸºå‡†å€¼ï¼›è¿™ç§æ–¹å¼è§£å†³äº†å¾ˆå¤šç‰¹æ®Šçš„é—®é¢˜ï¼Œä½†å¯¹äºæœ‰å¾ˆå¤šé‡å¤å€¼çš„åºåˆ—ï¼Œæ•ˆæœä¾ç„¶ä¸å¥½ã€‚\nå¿«é€Ÿæ’åºæœ‰ä»€ä¹ˆå¥½çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ é¦–å…ˆï¼Œåˆç†é€‰æ‹©åŸºå‡†å€¼ï¼Œå°†å›ºå®šä½ç½®é€‰æ‹©åŸºå‡†å€¼æ”¹æˆä¸‰ç‚¹å–ä¸­æ³•ï¼Œå¯ä»¥è§£å†³å¾ˆå¤šç‰¹æ®Šçš„æƒ…å†µï¼Œå®ç°æ›´å¿«åœ°åˆ†åŒºã€‚\nå…¶æ¬¡ï¼Œå½“å¾…æ’åºåºåˆ—çš„é•¿åº¦åˆ†å‰²åˆ°ä¸€å®šå¤§å°åï¼Œä½¿ç”¨æ’å…¥æ’åºã€‚å¯¹äºå¾…æ’åºçš„åºåˆ—é•¿åº¦å¾ˆå°æˆ–åŸºæœ¬è¶‹äºæœ‰åºæ—¶ï¼Œæ’å…¥æ’åºçš„æ•ˆç‡æ›´å¥½ã€‚\nåœ¨æ’åºåï¼Œå¯ä»¥å°†ä¸åŸºå‡†å€¼ç›¸ç­‰çš„æ•°æ”¾åœ¨ä¸€èµ·ï¼Œåœ¨ä¸‹æ¬¡åˆ†å‰²æ—¶å¯ä»¥ä¸è€ƒè™‘è¿™äº›æ•°ã€‚å¯¹äºè§£å†³é‡å¤æ•°æ®è¾ƒå¤šçš„æƒ…å†µéå¸¸æœ‰ç”¨ã€‚\nåœ¨å®ç°ä¸Šï¼Œé€’å½’å®ç°çš„å¿«é€Ÿæ’åºåœ¨å‡½æ•°å°¾éƒ¨æœ‰ä¸¤æ¬¡é€’å½’æ“ä½œï¼Œå¯ä»¥å¯¹å…¶ä½¿ç”¨å°¾é€’å½’ä¼˜åŒ–ï¼ˆç®€å•åœ°è¯´ï¼Œå°±æ˜¯å°¾ä½ç½®è°ƒç”¨è‡ªèº«ï¼‰ã€‚\nä»£ç å®ç° æ’åºæ¥å£ package cn.fatedeity.algorithm.sort; /** * æ’åºæ¥å£ */ public interface Sort { int[] sort(int[] numbers); } æ’åºæŠ½è±¡ç±» package cn.fatedeity.algorithm.sort; /** * æ’åºæŠ½è±¡ç±» */ public abstract class AbstractSort implements Sort { protected void swap(int[] numbers, int src, int target) { int temp = numbers[src]; numbers[src] = numbers[target]; numbers[target] = temp; } } å¿«é€Ÿæ’åºç±» package cn.fatedeity.algorithm.sort; import java.util.Random; /** * å¿«é€Ÿæ’åºç±» */ public class QuickSort extends AbstractSort { private int[] sort(int[] numbers, int low, int high) { if (low \u0026gt; high) { return numbers; } // éšæœºæ•°å–åŸºå‡†å€¼ Random random = new Random(); int pivotIndex = random.nextInt(low, high + 1); int pivot = numbers[pivotIndex]; this.swap(numbers, pivotIndex, low); int mid = low + 1; for (int i = low + 1; i \u0026lt;= high; i++) { if (numbers[i] \u0026lt; pivot) { this.swap(numbers, i, mid); mid++; } } this.swap(numbers, low, --mid); // é€’å½’å®ç° this.sort(numbers, low, mid - 1); this.sort(numbers, mid + 1, high); return numbers; } @Override public int[] sort(int[] numbers) { if (numbers.length \u0026lt;= 1) { return numbers; } return this.sort(numbers, 0, numbers.length - 1); } } ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/quick-sort.html","title":"å¿«é€Ÿæ’åºçš„ç®€å•ç†è§£"},{"content":"æ’å…¥æ’åºåœ¨å¯¹åŸºæœ¬æœ‰åºçš„è¾ƒå°åºåˆ—è¿›è¡Œæ’åºæ—¶ï¼Œæ•ˆç‡æ˜¯éå¸¸é«˜çš„ï¼Œå¸Œå°”æ’åºé’ˆå¯¹è¿™ä¸€ç‚¹å¯¹æ’å…¥æ’åºçš„æ–¹å¼è¿›è¡Œäº†å†æ¬¡ä¼˜åŒ–ã€‚\nè¯¦ç»†æè¿° å¸Œå°”æ’åºåˆç§°ä¸ºç¼©å°å¢é‡æ’åºï¼Œä¸»è¦æ˜¯å¯¹åºåˆ—æŒ‰ä¸‹æ ‡çš„ä¸€å®šå¢é‡è¿›è¡Œåˆ†ç»„ï¼Œå¯¹æ¯ç»„ä½¿ç”¨ç›´æ¥æ’å…¥æ’åºç®—æ³•æ’åºï¼›éšç€å¢é‡é€æ¸å‡å°ï¼Œæ¯ç»„åŒ…å«çš„å…³é”®å­—è¶Šæ¥è¶Šå¤šï¼Œå½“å¢é‡å‡è‡³ 1 æ—¶ï¼Œæ•´ä¸ªæ–‡ä»¶æ°è¢«åˆ†æˆä¸€ç»„ï¼Œç®—æ³•ä¾¿ç»ˆæ­¢ã€‚\nå¸Œå°”æ’åºè¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\né€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ— t1, t2, \u0026hellip;, tkï¼Œå…¶ä¸­ ti \u0026gt; tjï¼Œtk = 1ï¼› æŒ‰å¢é‡åºåˆ—ä¸ªæ•° k å¯¹åºåˆ—è¿›è¡Œ k è¶Ÿæ’åºï¼› æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡ ti å°†å¾…æ’åºåºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸º m çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼› ä»…å¢é‡å› å­ä¸º 1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚ ç®—æ³•å›¾è§£ é—®é¢˜è§£ç–‘ å¸Œå°”æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å—? å¸Œå°”æ’åºæ˜¯æ’å…¥æ’åºçš„ä¸€ä¸ªä¼˜åŒ–ç‰ˆæœ¬ï¼Œåˆ©ç”¨ä¼˜åŒ–çš„ç­–ç•¥ä½¿ç”¨æ’å…¥æ’åºï¼Œæé«˜æ•ˆç‡ï¼Œæ²¡æœ‰ä½¿ç”¨åˆ°é¢å¤–çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤å¸Œå°”æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•ã€‚\nå¸Œå°”æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å—ï¼Ÿ æ’å…¥æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼Œä½†æ˜¯ï¼Œç”±äºå¸Œå°”æ’åºä½¿ç”¨äº†å¢é‡é—´éš”è¿›è¡Œæ’å…¥æ’åºï¼Œå¸Œå°”æ’åºå¹¶ä¸èƒ½åƒæ’å…¥æ’åºä¿æŒç¨³å®šï¼Œæ’åºè¿‡ç¨‹ä¸­ä¼šå‡ºç°ç›¸ç­‰çš„ä¸¤æ•°å‰åé¡ºåºä¸ä¸€è‡´ã€‚\nå¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼›æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ï¼›ç”±äºå¸Œå°”æ’åºèŠ±è´¹çš„æ—¶é—´è¿˜ç”±å¢é‡é—´éš”å†³å®šï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦å¹¶ä¸èƒ½æ˜ç¡®å¾—å‡ºï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦å¯çœ‹ä½œä¸º $O(n^{1.3 \\sim 2})$ã€‚\nä»£ç å®ç° æ’åºæ¥å£ package cn.fatedeity.algorithm.sort; /** * æ’åºæ¥å£ */ public interface Sort { int[] sort(int[] numbers); } æ’åºæŠ½è±¡ç±» package cn.fatedeity.algorithm.sort; /** * æ’åºæŠ½è±¡ç±» */ public abstract class AbstractSort implements Sort { protected void swap(int[] numbers, int src, int target) { int temp = numbers[src]; numbers[src] = numbers[target]; numbers[target] = temp; } } å¸Œå°”æ’åºç±» package cn.fatedeity.algorithm.sort; /** * å¸Œå°”æ’åºç±» */ public class ShellSort extends AbstractSort { @Override public int[] sort(int[] numbers) { if (numbers.length \u0026lt;= 1) { return numbers; } int length = numbers.length; // é€šå¸¸å¢é‡åºåˆ—è¿›è¡ŒäºŒåˆ†å¯¹åŸåºåˆ—æ‹†åˆ† for (int gap = length \u0026gt;\u0026gt; 1; gap \u0026gt; 0; gap = gap \u0026gt;\u0026gt; 1) { for (int i = gap; i \u0026lt; length; i++) { int j = i, current = numbers[i]; while (j \u0026gt;= gap \u0026amp;\u0026amp; numbers[j - gap] \u0026gt; current) { numbers[j] = numbers[j - gap]; j = j - gap; } numbers[j] = current; } } return numbers; } } ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/shell-sort.html","title":"å¸Œå°”æ’åºçš„ç®€å•ç†è§£"},{"content":"æ’å…¥æ’å¯¹æ˜¯ä¸€ä¸ªå®¹æ˜“è¢«ä½ä¼°çš„æ’åºç®—æ³•ï¼Œè™½ç„¶å…¶æ—¶é—´å¤æ‚åº¦çœ‹èµ·æ¥ä¸å†’æ³¡æ’åºå’Œé€‰æ‹©æ’åºå·®ä¸å¤šï¼Œä½†æ˜¯ç”¨åœ¨ç›¸å¯¹æœ‰åºçš„çŸ­åºåˆ—ä¸­å´æ ¼å¤–çš„å¥½ã€‚\nè¯¦ç»†æè¿° æ’å…¥æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†ä¸€ä¸ªè®°å½•æ’å…¥åˆ°å·²ç»æ’å¥½åºçš„æœ‰åºè¡¨ä¸­ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæ–°çš„ã€è®°å½•æ•°å¢ 1 çš„æœ‰åºè¡¨ã€‚\nåœ¨å…¶å®ç°è¿‡ç¨‹ä¸­ä½¿ç”¨åŒå±‚å¾ªç¯ï¼Œå¤–å±‚å¾ªç¯é’ˆå¯¹é™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ ï¼Œå†…å±‚å¾ªç¯é’ˆå¯¹å½“å‰å…ƒç´ å‰é¢çš„æœ‰åºè¡¨è¿›è¡Œå¾…æ’å…¥ä½ç½®æŸ¥æ‰¾ï¼Œå¹¶è¿›è¡Œç§»åŠ¨ã€‚\né€‰æ‹©æ’åºè¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\nä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºï¼› å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼› å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼› é‡å¤æ­¥éª¤ 3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼› å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®ï¼› é‡å¤æ­¥éª¤ 2~5ã€‚ ç®—æ³•å›¾è§£ é—®é¢˜è§£ç–‘ æ’å…¥æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å—ï¼Ÿ æ’å…¥æ’åºç®—æ³•çš„è¿è¡Œå¹¶ä¸éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸåœ°æ’åºç®—æ³•ã€‚\næ’å…¥æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å—ï¼Ÿ å¯¹äºå€¼ç›¸åŒçš„å…ƒç´ ï¼Œå¯ä»¥é€‰æ‹©å°†åé¢å‡ºç°çš„å…ƒç´ ï¼Œæ’å…¥åˆ°å‰é¢å‡ºç°å…ƒç´ çš„åé¢ï¼Œè¿™æ ·å°±å¯ä»¥ä¿æŒåŸæœ‰çš„å‰åé¡ºåºä¸å˜ï¼Œæ‰€ä»¥æ’å…¥æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚\næ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼›æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ï¼›å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ã€‚\nä»£ç å®ç° æ’åºæ¥å£ package cn.fatedeity.algorithm.sort; /** * æ’åºæ¥å£ */ public interface Sort { int[] sort(int[] numbers); } æ’åºæŠ½è±¡ç±» package cn.fatedeity.algorithm.sort; /** * æ’åºæŠ½è±¡ç±» */ public abstract class AbstractSort implements Sort { protected void swap(int[] numbers, int src, int target) { int temp = numbers[src]; numbers[src] = numbers[target]; numbers[target] = temp; } } æ’å…¥æ’åºç±» package cn.fatedeity.algorithm.sort; /** * æ’å…¥æ’åºç±» */ public class InsertionSort extends AbstractSort { @Override public int[] sort(int[] numbers) { if (numbers.length \u0026lt;= 1) { return numbers; } for (int i = 1; i \u0026lt; numbers.length; i++) { for (int j = i; j \u0026gt; 0; j--) { // ä¸€ç›´äº¤æ¢åˆ°é¡ºåºç›¸å if (numbers[j - 1] \u0026lt;= numbers[j]) { break; } this.swap(numbers, j, j - 1); } } return numbers; } } ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/insertion-sort.html","title":"æ’å…¥æ’åºçš„ç®€å•ç†è§£"},{"content":"é€‰æ‹©æ’åºçš„æ¦‚å¿µéå¸¸å®¹æ˜“ç†è§£ï¼ŒæŒ‰ç…§ä¸€èˆ¬çš„æ€è·¯ï¼Œæ’åºå°±æ˜¯æ¯æ¬¡ä»åŸæ¥çš„åºåˆ—ä¸­æ‹¿å‡ºæœ€å°çš„å…ƒç´ å³å¯ï¼Œæœ€ç»ˆå¾—åˆ°çš„åºåˆ—å°±æ˜¯æœ‰åºåºåˆ—ã€‚\nè¯¦ç»†æè¿° é€‰æ‹©æ’åºçš„å·¥ä½œåŸç†æ˜¯ï¼šé¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç„¶åå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å…¨éƒ¨å¾…æ’åºçš„æ•°æ®å…ƒç´ çš„ä¸ªæ•°ä¸ºé›¶ã€‚\né€‰æ‹©æ’åºè¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\nåˆå§‹çŠ¶æ€ï¼šæ— åºåŒºä¸º R[1..n]ï¼Œæœ‰åºåŒºä¸ºç©ºï¼› ç¬¬ i è¶Ÿæ’åº (i=1,2,3â€¦n-1) å¼€å§‹æ—¶ï¼Œå½“å‰æœ‰åºåŒºå’Œæ— åºåŒºåˆ†åˆ«ä¸º R[1\u0026hellip;i-1] å’Œ R[i\u0026hellip;n]ã€‚è¯¥è¶Ÿæ’åºä»å½“å‰æ— åºåŒºä¸­é€‰å‡ºå…³é”®å­—æœ€å°çš„è®°å½• R[k]ï¼Œå°†å®ƒä¸æ— åºåŒºçš„ç¬¬ 1 ä¸ªè®°å½• R äº¤æ¢ï¼Œä½¿ R[1\u0026hellip;i] å’Œ R[i+1\u0026hellip;n] åˆ†åˆ«å˜ä¸ºè®°å½•ä¸ªæ•°å¢åŠ  1 ä¸ªçš„æ–°æœ‰åºåŒºå’Œè®°å½•ä¸ªæ•°å‡å°‘ 1 ä¸ªçš„æ–°æ— åºåŒºï¼› ç»è¿‡ n-1 è¶Ÿï¼Œæ— åºåºåˆ—å°±æœ‰åºåŒ–äº†ã€‚ ç®—æ³•å›¾è§£ é—®é¢˜è§£ç–‘ ä¸ºä»€ä¹ˆé€‰æ‹©æ’åºæ˜¯ä¸ç¨³å®šçš„ï¼Ÿ è™½ç„¶åŸç†ä¸Šå­˜åœ¨æœ‰åºåŒºå’Œæ— åºåŒºçš„åŒºåˆ†ï¼Œä½†æ˜¯é€‰æ‹©æ’åºç®—æ³•ä¸ºäº†æé«˜ç©ºé—´çš„ä½¿ç”¨ç‡ï¼Œä½¿ç”¨çš„æ˜¯åŸåœ°äº¤æ¢æ–¹å¼ã€‚\nä¸å†’æ³¡æ’åºä¸¤ä¸¤æ¯”è¾ƒäº¤æ¢ä¸åŒï¼Œé€‰æ‹©æ’åºç®—æ³•æ˜¯æœ€å°çš„å…ƒç´ ä¸å›ºå®šä½ç½®çš„å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œå½“è¿™ä¸ªå›ºå®šä½ç½®çš„å…ƒç´ è¢«äº¤æ¢åˆ°å¦ä¸€ä¸ªä½ç½®ä¹‹åï¼Œä¹Ÿå°±æœ‰å¯èƒ½å¯¼è‡´ç›¸ç­‰çš„æ•°å­—æ¬¡åºå˜åŒ–ã€‚\né€‰æ‹©æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ æ— è®ºåŸåºåˆ—æ˜¯æœ‰åºè¿˜æ˜¯æ— åºï¼Œé€‰æ‹©æ’åºéƒ½éœ€è¦å¯¹åºåˆ—åšå®Œæ•´çš„éå†ï¼Œå³æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦å’Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ $O(n^2)$ï¼›å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$ã€‚\nä»£ç å®ç° æ’åºæ¥å£ package cn.fatedeity.algorithm.sort; /** * æ’åºæ¥å£ */ public interface Sort { int[] sort(int[] numbers); } æ’åºæŠ½è±¡ç±» package cn.fatedeity.algorithm.sort; /** * æ’åºæŠ½è±¡ç±» */ public abstract class AbstractSort implements Sort { protected void swap(int[] numbers, int src, int target) { int temp = numbers[src]; numbers[src] = numbers[target]; numbers[target] = temp; } } é€‰æ‹©æ’åºç±» package cn.fatedeity.algorithm.sort; /** * é€‰æ‹©æ’åºç±» */ public class SelectionSort extends AbstractSort { @Override public int[] sort(int[] numbers) { if (numbers.length \u0026lt;= 1) { return numbers; } for (int i = 0; i \u0026lt; numbers.length - 1; i++) { for (int j = i + 1; j \u0026lt; numbers.length; j++) { // é€‰å–åˆ°å°çš„å€¼åšäº¤æ¢ if (numbers[i] \u0026lt;= numbers[j]) { continue; } this.swap(numbers, i, j); } } return numbers; } } ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/selection-sort.html","title":"é€‰æ‹©æ’åºçš„ç®€å•ç†è§£"},{"content":"å†’æ³¡æ’åºæ˜¯å­¦ä¹ æ’åºç®—æ³•æ—¶æœ€å…ˆé‡åˆ°çš„ç®—æ³•ï¼Œå…¶å½¢è±¡åç§°å’Œæ’åºè¿‡ç¨‹æœ€å®¹æ˜“è®°ä½ï¼Œå¾ˆå¤šäººä¼šåœ¨é¢è¯•æ—¶è°ˆè®ºèµ·ï¼ŒçœŸæ­£ç†è§£äº†å†’æ³¡æ’åºç®—æ³•æ‰èƒ½æ›´æ·±å…¥åœ°å­¦ä¹ å…¶ä»–æ’åºç®—æ³•ã€‚\nè¯¦ç»†æè¿° å†’æ³¡æ’åºæ˜¯ä¸€ç§äº¤æ¢æ’åºï¼ŒåŸºæœ¬æ€æƒ³æ˜¯åœ¨è¦æ’åºçš„ä¸€ç»„æ•°ä¸­ï¼Œå¯¹å½“å‰è¿˜æœªæ’å¥½åºçš„èŒƒå›´å†…çš„å…¨éƒ¨æ•°ï¼Œè‡ªä¸Šè€Œä¸‹å¯¹ç›¸é‚»çš„ä¸¤ä¸ªæ•°ä¾æ¬¡è¿›è¡Œæ¯”è¾ƒå’Œè°ƒæ•´ï¼Œè®©è¾ƒå¤§çš„æ•°å¾€ä¸‹æ²‰ï¼Œè¾ƒå°çš„å¾€ä¸Šå†’ã€‚\nå³æ¯å½“ä¸¤ä¸ªç›¸é‚»çš„æ•°æ¯”è¾ƒåå‘ç°å®ƒä»¬çš„é¡ºåºä¸æ’åºè¦æ±‚ç›¸åæ—¶ï¼Œå°±å°†å®ƒä»¬äº’æ¢ã€‚\nå†’æ³¡æ’åºè¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\nä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ï¼Œå¦‚æœå‰ä¸€ä¸ªæ¯”åä¸€ä¸ªå¤§ï¼Œå°±äº¤æ¢å®ƒä»¬ä¸¤ä¸ªï¼› ä»å‰å¾€åï¼Œå¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ åšåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ï¼Œè¿™æ ·åœ¨æœ€åçš„å…ƒç´ å°±ä¼šæ˜¯æœ€å¤§çš„æ•°ï¼› å°†è¿™æ¬¡æ‰¾å‡ºçš„æœ€å¤§å…ƒç´ æ”¾åœ¨æœ€åä¸€ä¸ªå…ƒç´ ä½ç½®ä¸Šï¼Œç„¶åé’ˆå¯¹é™¤è¿™ä¸ªæœ€å¤§å…ƒç´ ä»¥å¤–çš„å…¶ä»–æ‰€æœ‰å…ƒç´ é‡å¤ä»¥ä¸Š 1~2 æ­¥éª¤ï¼› é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æœ€åç¬¬ä¸€ä¸ªå…ƒç´ å’Œç¬¬äºŒä¸ªå…ƒç´ å®Œæˆæ¯”è¾ƒã€äº¤æ¢ï¼Œåˆ™æ’åºå®Œæˆã€‚ ç®—æ³•å›¾è§£ é—®é¢˜è§£ç–‘ å†’æ³¡æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å—ï¼Ÿ å†’æ³¡æ’åºæ˜¯ä¸€ä¸ªåŸåœ°æ’åºç®—æ³•ï¼Œè¿‡ç¨‹åªæ¶‰åŠç›¸é‚»æ•°æ®çš„äº¤æ¢æ“ä½œï¼Œåªéœ€è¦å¸¸é‡çº§çš„ä¸´æ—¶ç©ºé—´ï¼Œå®ƒçš„ç©ºé—´å¤æ‚åº¦æ˜¯ $O(1)$ã€‚\nå†’æ³¡æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å—ï¼Ÿ ä¸ºäº†ä¿è¯å†’æ³¡æ’åºç®—æ³•çš„ç¨³å®šæ€§ï¼Œå½“æœ‰ç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ å¤§å°ç›¸ç­‰æ—¶å¯ä»¥ä¸åšäº¤æ¢ï¼Œç›¸åŒå¤§å°çš„æ•°æ®åœ¨æ’åºå‰åä¸ä¼šæ”¹å˜é¡ºåºï¼Œæ‰€ä»¥å†’æ³¡æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚\nå†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ ä½¿ç”¨æœ€ä¼˜æ—¶é—´å¤æ‚åº¦è§£æ³•ï¼ŒåŸåºåˆ—æ˜¯æœ‰åºæ—¶çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$ï¼›æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ï¼›å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$ã€‚\nä»£ç å®ç° æ’åºæ¥å£ package cn.fatedeity.algorithm.sort; /** * æ’åºæ¥å£ */ public interface Sort { int[] sort(int[] numbers); } æ’åºæŠ½è±¡ç±» package cn.fatedeity.algorithm.sort; /** * æ’åºæŠ½è±¡ç±» */ public abstract class AbstractSort implements Sort { protected void swap(int[] numbers, int src, int target) { int temp = numbers[src]; numbers[src] = numbers[target]; numbers[target] = temp; } } å†’æ³¡æ’åºç±» package cn.fatedeity.algorithm.sort; /** * å†’æ³¡æ’åºç±» */ public class BubbleSort extends AbstractSort { @Override public int[] sort(int[] numbers) { if (numbers.length \u0026lt;= 1) { return numbers; } for (int i = 0; i \u0026lt; numbers.length - 1; i++) { boolean doSwap = false; for (int j = 0; j + 1 \u0026lt; numbers.length - i; j++) { if (numbers[j] \u0026gt; numbers[j + 1]) { this.swap(numbers, j, j + 1); doSwap = true; } } // ä¼˜åŒ–åŸºç¡€å†’æ³¡æ’åºçš„æ­¥éª¤ if (!doSwap) { // å¦‚æœéå†æ•´ä¸ªåºåˆ—æ— éœ€äº¤æ¢ï¼Œåˆ™è¡¨ç¤ºæ•´ä¸ªåºåˆ—å·²ç»å®Œå…¨æœ‰åº return numbers; } } return numbers; } } ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/bubble-sort.html","title":"å†’æ³¡æ’åºçš„ç®€å•ç†è§£"},{"content":"å­¦ä¹ æ’åºç®—æ³•ï¼Œé™¤äº†å­¦ä¹ å®ƒçš„ç®—æ³•åŸç†å’Œä»£ç å®ç°ä¹‹å¤–ï¼Œæ›´é‡è¦çš„æ˜¯è¦å­¦ä¼šå¦‚ä½•è¯„ä»·ã€åˆ†ææ’åºç®—æ³•ã€‚å…¶å®ï¼Œæ’åºç®—æ³•ä¸»è¦æ˜¯ä»æ‰§è¡Œæ•ˆç‡ã€å†…å­˜æ¶ˆè€—ã€ç¨³å®šæ€§ä¸‰ä¸ªæ–¹é¢è¿›è¡Œåˆ†æã€‚\nåˆ†ææ–¹æ³• æ‰§è¡Œæ•ˆç‡ å¯¹äºæ’åºç®—æ³•æ‰§è¡Œæ•ˆç‡çš„åˆ†æï¼Œä¸ä»…ä»…åªæ˜¯ç®€ç®€å•å•çš„ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ã€‚\nè¿˜éœ€è¦ä»ä»¥ä¸‹æ–¹é¢è¿›è¡Œåˆ†æï¼š\næœ€å¥½æƒ…å†µã€æœ€åæƒ…å†µã€å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚å¯¹äºæ’åºç®—æ³•æ¥è¯´ï¼Œæœ‰åºåº¦ä¸åŒçš„æ•°æ®ï¼Œå¯¹äºæ’åºçš„æ‰§è¡Œæ—¶é—´æœ‰ä¸€å®šçš„å½±å“ï¼Œä»å¤šä¸ªæ–¹é¢åˆ†ææ—¶é—´å¤æ‚åº¦ä¼šæ›´åŠ å‡†ç¡® æ—¶é—´å¤æ‚åº¦çš„ç³»æ•°ã€å¸¸æ•°ã€ä½é˜¶ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¤§å¤šæ˜¯å¯¹ä¸€äº›è§„æ¨¡è¾ƒå°çš„æ•°æ®è¿›è¡Œæ’åºï¼Œå®é™…è¿è¡Œé€Ÿåº¦æ˜¯éå¸¸å¿«çš„ï¼Œè¿™æ—¶å€™ä¹Ÿå¯ä»¥æŠŠç³»æ•°ã€å¸¸æ•°ã€ä½é˜¶è€ƒè™‘è¿›æ¥ æ¯”è¾ƒæ¬¡æ•°æˆ–äº¤æ¢ï¼ˆç§»åŠ¨ï¼‰æ¬¡æ•°ã€‚å¸¸è§çš„æ’åºç®—æ³•éƒ½æ˜¯åŸºäºæ¯”è¾ƒçš„ï¼Œè¿™æ—¶å€™ä¼šæ¶‰åŠåˆ°å…ƒç´ æ¯”è¾ƒå¤§å°å’Œå…ƒç´ äº¤æ¢æˆ–ç§»åŠ¨ï¼Œè¿™æ—¶å€™æ¯”è¾ƒæ¬¡æ•°å’Œäº¤æ¢æ¬¡æ•°ä¹Ÿä¼šå½±å“åˆ°æ‰§è¡Œæ•ˆç‡ å†…å­˜æ¶ˆè€— åœ¨ç®—æ³•ä¸­ï¼Œå†…å­˜æ¶ˆè€—åŸºæœ¬ä¸Šé€šè¿‡ç©ºé—´å¤æ‚åº¦æ¥è¡¡é‡ã€‚\nä½†æ˜¯ï¼Œåœ¨æ’åºç®—æ³•ä¸­ï¼Œä¼šæœ‰ä¸€ä¸ªæ–°çš„æ¦‚å¿µç”¨æ¥è¡¡é‡å†…å­˜æ¶ˆè€—ï¼Œå³ åŸåœ°æ’åºã€‚åŸåœ°æ’åºç®—æ³•ç‰¹æŒ‡ä¸éœ€è¦å¦å¤–ç©ºé—´å­˜å‚¨çš„æ’åºç®—æ³•ï¼Œç©ºé—´å¤æ‚åº¦èƒ½è¾¾åˆ° $O(1)$ã€‚\nç¨³å®šæ€§ é’ˆå¯¹æ’åºç®—æ³•ï¼Œè¿˜æœ‰ç¨³å®šæ€§è¿™æ ·ä¸€ä¸ªé‡è¦çš„åº¦é‡æŒ‡æ ‡ã€‚\nè¿™ä¸ªæ¦‚å¿µæ˜¯æŒ‡ï¼Œå¦‚æœå¾…æ’åºçš„åºåˆ—ä¸­å­˜åœ¨å€¼ç›¸ç­‰çš„å…ƒç´ ï¼Œç»è¿‡æ’åºä¹‹åï¼Œç›¸ç­‰å…ƒç´ ä¹‹é—´åŸæœ‰çš„å…ˆåé¡ºåºä¸å˜ã€‚\nå¸¸è§æ’åºç®—æ³• å¸¸è§çš„æ’åºç®—æ³•æœ‰å¾ˆå¤šï¼Œè¿™é‡Œåˆ—å‡º 10 ç§æ’åºç®—æ³•ä½œæ¯”è¾ƒã€‚è€Œè¿™ 10 ç§å¸¸è§çš„æ’åºç®—æ³•ä¼šæ ¹æ®æ˜¯å¦è¿›è¡Œæ¯”è¾ƒåˆ†ä¸ºä¸¤ç§ï¼š\næ¯”è¾ƒç±»æ’åºï¼šå†’æ³¡æ’åºã€é€‰æ‹©æ’åºã€æ’å…¥æ’åºã€å¸Œå°”æ’åºã€å †æ’åºã€å¿«é€Ÿæ’åºã€å½’å¹¶æ’åº éæ¯”è¾ƒæ’åºï¼šè®¡æ•°æ’åºã€æ¡¶æ’åºã€åŸºæ•°æ’åº æ’åºç®—æ³• å¹³å‡æ—¶é—´å¤æ‚åº¦ æœ€åæ—¶é—´å¤æ‚åº¦ æœ€å¥½æ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ å†’æ³¡æ’åº $O(n^2)$ $O(n^2)$ $O(n)$ $O(1)$ ç¨³å®š é€‰æ‹©æ’åº $O(n^2)$ $O(n^2)$ $O(n^2)$ $O(1)$ ä¸ç¨³å®š æ’å…¥æ’åº $O(n^2)$ $O(n^2)$ $O(n)$ $O(1)$ ç¨³å®š å¸Œå°”æ’åº $O(n^{1.3 \\sim 2})$ $O(n^2)$ $O(n)$ $O(1)$ ä¸ç¨³å®š å †æ’åº $O(n\\log_2n)$ $O(n\\log_2n)$ $O(n\\log_2n)$ $O(1)$ ä¸ç¨³å®š å¿«é€Ÿæ’åº $O(n\\log_2n)$ $O(n^2)$ $O(n\\log_2n)$ $O(n\\log_2n)$ ä¸ç¨³å®š å½’å¹¶æ’åº $O(n\\log_2n)$ $O(n\\log_2n)$ $O(n\\log_2n)$ $O(n)$ ç¨³å®š è®¡æ•°æ’åº $O(n+k)$ $O(n+k)$ $O(n+k)$ $O(n+k)$ ç¨³å®š æ¡¶æ’åº $O(n+k)$ $O(n^2)$ $O(n)$ $O(n+k)$ ç¨³å®š åŸºæ•°æ’åº $O(n \\times k)$ $O(n \\times k)$ $O(n \\times k)$ $O(n+k)$ ç¨³å®š å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ’åºç®—æ³•ï¼Ÿ é€‰æ‹©ä¾æ® åœ¨å®é™…å¼€å‘çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯æ—¶é—´å¤æ‚åº¦ä½çš„æ’åºç®—æ³•å°±èƒ½é€‚ç”¨äºä»»ä½•åœºæ™¯ã€‚\næ¯”å¦‚è¯´ï¼Œè®¡æ•°æ’åºç®—æ³•é€‚ç”¨äºè¾ƒé›†ä¸­çš„å°èŒƒå›´æ•´æ•°åºåˆ—ï¼Œæ¡¶æ’åºç®—æ³•é€‚ç”¨äºå®¹æ˜“åˆ’åˆ†ä¸ºæ¡¶çš„å‡åŒ€æ•´æ•°åºåˆ—ï¼Œè®¡æ•°æ’åºé€‚ç”¨äºå¯åˆ’åˆ†ä¸ºå…·æœ‰é€’è¿›å…³ç³»çš„â€œä½â€çš„æ•´æ•°åºåˆ—ã€‚\nä¸€èˆ¬æ¥è¯´ï¼Œå¯¹äºå°è§„æ¨¡çš„æ•°æ®è¿›è¡Œæ’åºæ—¶ï¼Œå¯ä»¥é€‰æ‹©æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$ çš„æ’åºç®—æ³•ï¼›å¯¹äºå¤§è§„æ¨¡çš„æ•°æ®è¿›è¡Œæ’åºæ—¶ï¼Œéœ€è¦é€‰æ‹©æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n \\log n)$ çš„æ’åºç®—æ³•ï¼›å¯¹äºéæ¯”è¾ƒç±»æ’åºç®—æ³•ï¼Œä¸»è¦åº”ç”¨äºç‰¹å®šçš„åœºæ™¯ã€‚\nè¿™æ ·é€‰æ‹©çš„åŸå› æ˜¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ çš„æ’åºç®—æ³•ä¼šæ¯” $O(n \\log n)$ çš„æ’åºç®—æ³•çš„æ•ˆç‡ä½ï¼Œä¸€èˆ¬æŒ‡çš„éƒ½æ˜¯æ—¶é—´å¤æ‚åº¦åœ¨æ²¡æœ‰ç³»æ•°ã€å¸¸æ•°ã€ä½é˜¶ä»‹å…¥æ¯”è¾ƒçš„æƒ…å†µï¼Œå½“çœŸæ­£ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿™äº›æ˜¯ä¸å¯é¿å…çš„ã€‚\nå› æ­¤ï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œæœ‰äº›æ—¶å€™ $O(n^2)$ çš„æ’åºç®—æ³•ä¹Ÿä¼šæ¯” $O(n \\log n)$ çš„æ’åºç®—æ³•çš„æ•ˆç‡é«˜ã€‚\né€šå¸¸ï¼Œä¸ºäº†å…¼é¡¾ä»»æ„è§„æ¨¡æ•°æ®çš„æ’åºï¼Œåœ¨ä¸€ä¸ªæ–¹æ³•ä¸­ä¼šä½¿ç”¨åˆ°å¤šç§æ’åºç®—æ³•ã€‚\næ’åºå®ç° - Glibc ä¾‹å¦‚ Glibc çš„ qsort() å‡½æ•°ï¼Œæ•°æ®é‡è¾ƒå°æ—¶ä¼šä¼˜å…ˆä½¿ç”¨å½’å¹¶æ’åºç®—æ³•æ¥å¯¹è¾“å…¥æ•°æ®æ’åºï¼Œå½“æ•°æ®é‡æ¯”è¾ƒå¤§æ—¶ï¼Œqsort() ä¼šæ”¹ç”¨å¿«é€Ÿæ’åºç®—æ³•æ¥æ’åºã€‚\nåœ¨å½’å¹¶æ’åºä¸­ï¼Œæ¯ä¸ªå…ƒç´ å°äº 32 æ—¶ï¼Œä¼šç›´æ¥è¿›è¡Œå½’å¹¶æ’åºï¼›å½“æœ‰å…ƒç´ å¤§äº 32 æ—¶ï¼Œåˆ™å…ˆå°†å…ƒç´ çš„æŒ‡é’ˆæ‹·è´åˆ°ä¸´æ—¶ç©ºé—´ï¼Œå†ä½¿ç”¨å½’å¹¶æ’åºå¯¹æŒ‡é’ˆè¿›è¡Œæ’åºã€‚\nåœ¨å¿«æ’è¿‡ç¨‹ä¸­ï¼Œå…ƒç´ ä¸ªæ•°å°äºç­‰äº 4 ä¸ªæ—¶å€™ï¼Œä¼šä½¿ç”¨æ’å…¥æ’åºä»£æ›¿å¿«é€Ÿæ’åºã€‚\næ’åºå®ç° - Java ä¾‹å¦‚ JDK 8 ä¸­ Arrays.sort() çš„åº•å±‚å®ç°ï¼Œä¹Ÿæ ¹æ®ä¸åŒçš„æƒ…å†µä½¿ç”¨åˆ°å¤šç§æ’åºç®—æ³•ã€‚\nå¯¹äºå…ƒç´ ä¸ªæ•°å°äº 47 çš„åºåˆ—ï¼Œä½¿ç”¨çš„æ˜¯æ’å…¥æ’åºç®—æ³•ï¼›å¯¹äºå…ƒç´ ä¸ªæ•°å¤§äº 47 è€Œå°äº 286 çš„åºåˆ—ï¼Œä½¿ç”¨çš„åˆ™æ˜¯å¿«é€Ÿæ’åºç®—æ³•ã€‚\nè€Œå¯¹äºè¶…è¿‡ 286 ä¸ªå…ƒç´ çš„åºåˆ—ï¼Œè¿˜ä¼šåˆ¤æ–­è¿™ä¸ªåºåˆ—æ˜¯å¦ç»“æ„åŒ–ï¼ˆæ•°æ®æ˜¯å¦æ—¶å‡æ—¶é™ï¼‰ï¼Œç»“æ„åŒ–çš„åºåˆ—ä¼šä½¿ç”¨å½’å¹¶æ’åºç®—æ³•ï¼Œè€Œéç»“æ„åŒ–çš„åºåˆ—ä»ç„¶ä¼šä½¿ç”¨å¿«é€Ÿæ’åºç®—æ³•ã€‚\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/analyze-sorting-algorithms.html","title":"å¦‚ä½•åˆ†ææ’åºç®—æ³•"},{"content":"å¯¹ä¸€ä¸ªç®—æ³•åšå¤æ‚åº¦åˆ†ææ˜¯å­¦ä¹ ç®—æ³•å¿…å¤‡çš„çŸ¥è¯†ç‚¹ï¼Œå½“æŒæ¡äº†å¦‚ä½•å¯¹ä¸€ä¸ªç®—æ³•åšå¤æ‚åº¦åˆ†æï¼Œåœ¨ä¼˜åŒ–ç®—æ³•æ–¹é¢å°†ä¼šå¦‚è™æ·»ç¿¼ã€‚\nç®€ä»‹ å¤æ‚åº¦åˆ†ææ³•æ˜¯å¯¹å·²çŸ¥çš„ä»£ç è¿›è¡Œæ•ˆç‡åˆ†æçš„æ–¹æ³•ï¼Œä¸ä¹‹ç›¸å¯¹çš„æ˜¯ä½¿ç”¨å®é™…æ•°æ®è¿è¡Œä»£ç çš„äº‹åç»Ÿè®¡æ³•ã€‚\nå¤æ‚åº¦åˆ†ææ³•å’Œäº‹åç»Ÿè®¡æ³•å„æœ‰ä¼˜åŠ£ï¼Œä¸å¤æ‚åº¦åˆ†ææ³•è¿›è¡Œæ¯”è¾ƒï¼Œäº‹åç»Ÿè®¡æ³•ä¼šæœ‰ä»¥ä¸‹å±€é™æ€§ï¼š\næµ‹è¯•ç»“æœéå¸¸ä¾èµ–æµ‹è¯•ç¯å¢ƒã€‚ç¡¬ä»¶çš„ä¸åŒä¼šå¯¹æµ‹è¯•ç»“æœæœ‰æ¯”è¾ƒå¤§çš„å½±å“ï¼Œæ¯”å¦‚ä¸åŒå¤„ç†å™¨çš„æ‰§è¡Œæ—¶é—´ä¼šä¸ä¸€æ · æµ‹è¯•ç»“æœå—æ•°æ®çš„å½±å“å¾ˆå¤§ã€‚å¯¹åŒä¸€ä¸ªæ’åºç®—æ³•ï¼Œå¾…æ’åºæ•°æ®çš„æœ‰åºåº¦ä¼šå½±å“ç®—æ³•çš„æ‰§è¡Œæ—¶é—´ï¼›å¯¹äºå°è§„æ¨¡çš„æ•°æ®æ’åºï¼Œæ’å…¥æ’åºçš„æ•ˆç‡ä¼šæ¯”å¿«é€Ÿæ’åºçš„æ•ˆç‡æ›´é«˜ ç›¸æ¯”äº‹åç»Ÿè®¡æ³•ï¼Œå¤æ‚åº¦åˆ†ææ³•æ›´èƒ½è¡¨ç¤ºä¸€ä¸ªç®—æ³•åœ¨å„ä¸ªç»´åº¦çš„ç»¼åˆæ€§èƒ½ã€‚\nå¤æ‚åº¦ å¤æ‚åº¦åˆ†ä¸ºæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Œä½†æ˜¯å®ƒä»¬å¹¶ä¸èƒ½å‡†ç¡®åœ°è¡¨ç¤ºç®—æ³•çš„æ‰§è¡Œæ—¶é—´å’Œå­˜å‚¨ç©ºé—´ã€‚\næ—¶é—´å¤æ‚åº¦è¡¨ç¤ºçš„æ˜¯æ‰§è¡Œæ—¶é—´ä¸æ•°æ®è§„æ¨¡ä¹‹é—´çš„å¢é•¿å…³ç³»ï¼›ç©ºé—´å¤æ‚åº¦è¡¨ç¤ºçš„æ˜¯å­˜å‚¨ç©ºé—´ä¸æ•°æ®è§„æ¨¡ä¹‹é—´çš„å¢é•¿å…³ç³»ã€‚\nå¤æ‚åº¦è¡¨ç¤ºæ³• å¸¸ç”¨çš„å¤æ‚åº¦è¡¨ç¤ºæ³•å°±æ˜¯å¤§ O å¤æ‚åº¦è¡¨ç¤ºæ³•ï¼Œæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½èƒ½è¿ç”¨è¿™ä¸ªæ¦‚å¿µï¼Œåœ¨æ¦‚å¿µä¸Šå¯ä»¥è¿›è¡Œç±»æ¯”ã€‚\nåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œç©ºé—´å¤æ‚åº¦ä¼šæ¯”æ—¶é—´å¤æ‚åº¦æ›´ç®€å•äº›ï¼Œä¸‹é¢åªå¯¹æ—¶é—´å¤æ‚åº¦åšè§£æã€‚\nå¤§ O æ—¶é—´å¤æ‚åº¦è¡¨ç¤ºæ³• int cal(int n) { int sum = 0; int i = 1; for (; i \u0026lt;= n; ++i) { sum = sum + i; } return sum; } å¯¹ä¸Šè¿°ä»£ç ç€æ‰‹ï¼Œè§£æè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚\nç¬¬ 2 è¡Œå’Œç¬¬ 3 è¡Œä»…ä¼šè¿è¡Œä¸€æ¬¡ï¼Œä½†ç¬¬ 4ã€5ã€6 è¡Œæ˜¯ä¸€ä¸ª for å¾ªç¯ï¼Œå°†ä¼šè¿è¡Œ n æ¬¡ï¼Œå› æ­¤ï¼Œæ•´ä¸ªå‡½æ•°è¿è¡Œçš„æ¬¡æ•°å¯ä»¥ç®€å•åœ°è®¤ä¸ºæ˜¯ n + 2 æ¬¡ã€‚\nå‡å¦‚å°†ä¸€è¡Œä»£ç çš„æ‰§è¡Œæ—¶é—´ç®—ä½œå•ä½æ—¶é—´ï¼Œä»¥æ­¤åšç±»æ¯”ï¼Œåˆ™æ­¤å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ $T(n)$ ä¸ä»£ç çš„æ‰§è¡Œæ¬¡æ•° n æˆæ­£æ¯”ï¼š\n$$ T(n) = O(f(n)) $$\nå…¶ä¸­ï¼Œn è¡¨ç¤ºæ•°æ®è§„æ¨¡çš„å¤§å°ï¼›$f(n)$ è¡¨ç¤ºæ¯è¡Œä»£ç æ‰§è¡Œçš„æ¬¡æ•°æ€»å’Œï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå…¬å¼ï¼Œæ‰€ä»¥ç”¨ $f(n)$ æ¥è¡¨ç¤ºï¼›$T(n)$ è¡¨ç¤ºä»£ç æ‰§è¡Œçš„æ—¶é—´ã€‚å…¬å¼ä¸­çš„ O è¡¨ç¤ºä»£ç çš„æ‰§è¡Œæ—¶é—´ $T(n)$ ä¸ $f(n)$ è¡¨è¾¾å¼æˆæ­£æ¯”ã€‚\nå¤§ O æ—¶é—´å¤æ‚åº¦å®é™…ä¸Šå¹¶ä¸å…·ä½“è¡¨ç¤ºä»£ç çœŸæ­£çš„æ‰§è¡Œæ—¶é—´ï¼Œè€Œæ˜¯è¡¨ç¤ºä»£ç æ‰§è¡Œæ—¶é—´éšæ•°æ®è§„æ¨¡å¢é•¿çš„å˜åŒ–è¶‹åŠ¿ã€‚\næ‰€ä»¥ï¼Œå¤§ O æ—¶é—´å¤æ‚åº¦ä¹Ÿå«ä½œæ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼ˆasymptotic time complexityï¼‰ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚\nä»å®šä¹‰ä¸Šç†è§£ï¼Œå¤§ O ç¬¦å·æ˜¯ä¸€ç§ç®—æ³•ã€Œå¤æ‚åº¦ã€çš„ã€Œç›¸å¯¹ã€ã€Œè¡¨ç¤ºã€æ–¹å¼ï¼š\nå¤æ‚åº¦ï¼šè¡¨ç¤ºç›¸å¯¹å…¶ä»–ä¸œè¥¿çš„åº¦é‡ç»“æœ ç›¸å¯¹ï¼šåªèƒ½æ¯”è¾ƒç›¸åŒçš„äº‹ç‰©ï¼Œä¸èƒ½å°†ä¸€ä¸ªåšç®—æ•°ä¹˜æ³•çš„ç®—æ³•å’Œæ’åºæ•´æ•°åˆ—è¡¨çš„ç®—æ³•è¿›è¡Œæ¯”è¾ƒ è¡¨ç¤ºï¼šå¤§ O ç¬¦å·æŠŠç®—æ³•é—´çš„æ¯”è¾ƒç®€åŒ–ä¸ºä¸€ä¸ªå•ä¸€å˜é‡ æ—¶é—´å¤æ‚åº¦åˆ†æ å˜é‡æ³•åˆ™ ä»£ç ä¸­çš„å˜é‡å†³å®šæ—¶é—´å¤æ‚åº¦ã€‚\nå¤§ O å¤æ‚åº¦è¡¨ç¤ºæ³•æ˜¯ä¸€ç§å‡½æ•°çš„è¡¨ç¤ºæ–¹å¼ï¼Œå‡½æ•°ä¸­å­˜åœ¨è‡³å°‘ä¸€ä¸ªå˜é‡ï¼Œè¿™å…¶å®å°±è¯´æ˜äº†å¤§ O å¤æ‚åº¦è¡¨ç¤ºæ³•å±•ç¤ºäº†ä»£ç æ‰§è¡Œæ—¶é—´éšæ•°æ®è§„æ¨¡å¢é•¿çš„å˜åŒ–è¶‹åŠ¿ã€‚\næ‰€ä»¥ï¼Œåœ¨åˆ†ææ—¶é—´å¤æ‚åº¦çš„æ—¶å€™ï¼Œéœ€è¦è®°ä½ä»£ç ä¸­çš„å˜é‡å†³å®šæ—¶é—´å¤æ‚åº¦ï¼Œè§‚å¯Ÿä»£ç ä¸­å…·ä½“å“ªä¸€ä¸ªæ•°æ®å˜é‡åœ¨å®é™…è¿è¡Œä¸­æœ€èƒ½ä½“ç°è¿è¡Œæ—¶é—´çš„è¶‹åŠ¿ã€‚\nåŠ æ³•æ³•åˆ™ æ€»å¤æ‚åº¦ç­‰äºé‡çº§æœ€å¤§çš„é‚£æ®µä»£ç çš„å¤æ‚åº¦ã€‚\nå¤§ O å¤æ‚åº¦è¡¨ç¤ºæ³•åªæ˜¯è¡¨ç¤ºä¸€ç§å˜åŒ–è¶‹åŠ¿ï¼Œä¸€èˆ¬è®¤ä¸ºï¼Œä¸å…¬å¼ä¸­çš„é«˜é˜¶ n å€¼ç›¸æ¯”ï¼Œå¸¸é‡ã€ç³»æ•°ã€ä½é˜¶é‡çº§ä¸ç®—æ³•çš„å¢é•¿è¶‹åŠ¿å…³ç³»ä¸å¤§ã€‚\nä¸ºäº†é™ä½å¤æ‚æ€§ä»¥åŠæé«˜å¯¹æ¯”æ€§ï¼Œé€šå¸¸ä¼šå¿½ç•¥æ‰å…¬å¼ä¸­çš„å¸¸é‡ã€ç³»æ•°ã€ä½é˜¶ï¼Œåªè®°å½•å…¶ä¸­æœ€å¤§é˜¶çš„é‡çº§å³å¯ã€‚\nå› æ­¤ï¼Œåœ¨åˆ†æä¸€ä¸ªç®—æ³•ã€ä¸€æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦æ—¶ï¼Œä¸€èˆ¬åªéœ€å…³æ³¨å¾ªç¯æ‰§è¡Œæ¬¡æ•°æœ€å¤šçš„é‚£ä¸€æ®µä»£ç å³å¯ã€‚\né€šå¸¸ï¼Œæ ¸å¿ƒä»£ç æ‰§è¡Œæ¬¡æ•°çš„ n çš„é‡çº§ï¼Œå°±æ˜¯æ•´æ®µè¦åˆ†æä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚\nä¹˜æ³•æ³•åˆ™ åµŒå¥—ä»£ç çš„å¤æ‚åº¦ç­‰äºåµŒå¥—å†…å¤–ä»£ç å¤æ‚åº¦çš„ä¹˜ç§¯ã€‚\nåœ¨å®é™…å¼€å‘ä¸­ï¼ŒåµŒå¥—å¾ªç¯çš„ä»£ç æ¯”è¾ƒå¸¸è§ï¼Œè¿™é‡Œæ¶‰åŠåˆ°åµŒå¥—å¾ªç¯çš„æ—¶é—´å¤æ‚åº¦åˆ†æã€‚\nå¦‚æœæŠŠä¸€æ¬¡å¾ªç¯çœ‹ä½œæ˜¯ n æ¬¡ï¼Œæ¯æ¬¡å¾ªç¯å½“ä¸­åˆä¼šå†åšä¸€æ¬¡å†…å¾ªç¯ï¼Œå†æŠŠè¿™æ¬¡å†…å¾ªç¯çœ‹ä½œæ˜¯ m æ¬¡ï¼Œè¿™æ ·æ•´ä½“å¾ªç¯å°±å¯ä»¥çœ‹ä½œæ˜¯ $n \\times m$ æ¬¡ï¼Œè¿™å°±æ˜¯ä¹˜æ³•æ³•åˆ™ã€‚\nå¤§éƒ¨åˆ†ç®—æ³•å¤æ‚åº¦åˆ†æä¸­ï¼Œä¼šç»å¸¸é‡åˆ°å¦‚ $n^2$ã€$n^3$ è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ï¼Œä¹Ÿä½¿ç”¨åˆ°ä¹˜æ³•æ³•åˆ™ã€‚\nå¸¸è§æ—¶é—´å¤æ‚åº¦ å¸¸è§çš„æ—¶é—´å¤æ‚åº¦æœ‰å¾ˆå¤šï¼Œå¦‚ $O(1)$ã€$O(\\log n)$ã€$O(n)$ã€$O(n \\log n)$ã€$O(n^2)$ã€$O(n^3)$ã€$O(n^k)$ã€$O(2^n)$ã€$O(n!)$ ç­‰ã€‚\næ—¶é—´å¤æ‚åº¦å¯ä»¥åˆ†ä¸ºå¤šé¡¹å¼é‡çº§å’Œéå¤šé¡¹å¼é‡çº§ä¸¤ç§ï¼Œå¤šé¡¹å¼é‡çº§æŒ‡çš„æ˜¯ä»¥ n ä½œä¸ºåº•æ•°ï¼Œéå¤šé¡¹å¼é‡çº§æŒ‡çš„æ˜¯ä¸ä»¥ n ä½œä¸ºåº•æ•°çš„éç¡®å®šé‡çº§ã€‚\nå½“æ•°æ®è§„æ¨¡ n è¶Šæ¥è¶Šå¤§æ—¶ï¼Œéå¤šé¡¹å¼é‡çº§ç®—æ³•çš„æ‰§è¡Œæ—¶é—´ä¼šæ€¥å‰§å¢åŠ ï¼Œæ±‚è§£é—®é¢˜çš„æ‰§è¡Œæ—¶é—´ä¼šæ— é™å¢é•¿ã€‚\nå› æ­¤ï¼Œéå¤šé¡¹å¼æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•æ˜¯éå¸¸ä½æ•ˆçš„ç®—æ³•ï¼Œå®é™…ç¼–ç ä¸­éœ€è¦å°½é‡é¿å…è¿™ç§æƒ…å†µå‡ºç°ã€‚\nå¸¸è§çš„æ—¶é—´å¤æ‚åº¦ä¸­ï¼Œéå¤šé¡¹å¼é‡çº§åªæœ‰ $O(2^n)$ã€$O(n!)$ ä¸¤ä¸ªï¼Œå…¶ä»–çš„éƒ½æ˜¯å¤šé¡¹å¼é‡çº§ã€‚\nå…¶å®ï¼Œæ—¶é—´å¤æ‚åº¦è¶…è¿‡ $O(n \\log n)$ çš„ç®—æ³•å°±å¯ä»¥ç§°ä¸ºæŒ‡æ•°çº§å¢é•¿çš„ç®—æ³•ï¼Œåº”å°½é‡é¿å…ã€‚\nå¸¸é‡çº§ $O(1)$ æ˜¯å¸¸é‡çº§æ—¶é—´å¤æ‚åº¦çš„ä¸€ç§è¡¨ç¤ºæ–¹å¼ï¼Œåªè¦ä»£ç çš„æ‰§è¡Œæ—¶é—´ä¸éš n çš„å¢å¤§è€Œå¢é•¿ï¼Œè¿™æ ·ä»£ç çš„æ—¶é—´å¤æ‚åº¦å°±è¢«è®°ä½œ $O(1)$ã€‚\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªè¦ç®—æ³•ä¸­ä¸å­˜åœ¨å¾ªç¯è¯­å¥ã€é€’å½’è¯­å¥ï¼Œå³ä½¿æœ‰æˆåƒä¸Šä¸‡è¡Œçš„ä»£ç ï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ $O(1)$ã€‚\nå¯¹æ•°çº§ å¯¹æ•°çº§æ—¶é—´å¤æ‚åº¦éå¸¸å¸¸è§ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€éš¾åˆ†æçš„ä¸€ç§æ—¶é—´å¤æ‚åº¦ã€‚\nå®é™…ä¸Šï¼Œä¸ç®¡æ˜¯ä»¥ 2 ä¸ºåº•ã€ä»¥ 3 ä¸ºåº•ï¼Œè¿˜æ˜¯ä»¥ 10 ä¸ºåº•ï¼Œéƒ½å¯ä»¥æŠŠæ‰€æœ‰å¯¹æ•°é˜¶çš„æ—¶é—´å¤æ‚åº¦éƒ½è®°ä¸º $O(\\log n)$ã€‚\n$O(\\log_3n) = O(\\log_32) \\times O(\\log_2n)$ =\u0026gt; $O(\\log_3n) = O(C \\times \\log_2n)$ï¼Œå…¶ä¸­ $C = log_32$ æ˜¯ä¸€ä¸ªå¸¸é‡å¯å¿½ç•¥ä¸è®¡ã€‚\nå¦‚æœä¸€æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(\\log n)$ï¼Œç„¶åä»£ç å¾ªç¯æ‰§è¡Œ n éï¼Œè¿™æ®µä»£ç å°±æ˜¯ $O(n \\log n)$ çš„æ—¶é—´å¤æ‚åº¦ã€‚\n$O(n \\log n)$ ä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦ã€‚æ¯”å¦‚å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ $O(n \\log n)$ã€‚\nå¤šå˜é‡çº§ é¡¾åæ€ä¹‰ï¼Œå¤šå˜é‡çº§æ—¶é—´å¤æ‚åº¦å—å¤šä¸ªå˜é‡å½±å“ï¼Œè¡¨ç¤ºä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ç”±å¤šä¸ªæ•°æ®çš„è§„æ¨¡æ¥å†³å®šã€‚\nè¿™ç§æƒ…å†µä¸èƒ½éšæ„ä½¿ç”¨åŠ æ³•æ³•åˆ™çœç•¥æ‰å…¶ä¸­ä¸€ä¸ªï¼Œè€Œæ˜¯ä¸¤ä¸ªå˜é‡éƒ½éœ€è¦ä½¿ç”¨åˆ°ï¼Œå¦‚ $O(m \\times n)$ã€$O(m + n)$ éƒ½æ˜¯å¤šå˜é‡çº§çš„å¤æ‚åº¦ã€‚\næ—¶é—´å¤æ‚åº¦ç»´åº¦ æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼Œåœ¨æœ€ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚\næœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼Œåœ¨æœ€ç³Ÿç³•çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚\nå¹³å‡æ—¶é—´å¤æ‚åº¦ å¹³å‡æ—¶é—´å¤æ‚åº¦ä¼šå°†æ‰€æœ‰å¯èƒ½æƒ…å†µä¸‹çš„æ‰§è¡Œæ¬¡æ•°å’Œå…¶å‘ç”Ÿçš„é¢‘ç‡èšåˆèµ·æ¥è®¡ç®—åŠ æƒå¹³å‡å€¼ï¼Œè¿™é‡Œæ¶‰åŠåˆ°æ¦‚ç‡è®ºçš„çŸ¥è¯†ï¼Œå› æ­¤å¹³å‡æ—¶é—´å¤æ‚åº¦åˆè¢«ç§°ä¸ºåŠ æƒå¹³å‡æ—¶é—´å¤æ‚åº¦ã€æœŸæœ›æ—¶é—´å¤æ‚åº¦ã€‚\nå‡æ‘Šæ—¶é—´å¤æ‚åº¦ å‡æ‘Šæ—¶é—´å¤æ‚åº¦æ˜¯ä¸€ç§é€‚ç”¨åœºæ™¯æ›´å°‘çš„è¡¨ç¤ºæ–¹å¼ï¼Œå¯¹äºæŸäº›ç‰¹æ®Šçš„åœºæ™¯ï¼ˆæ¯”å¦‚ä¸€ç§åœºæ™¯æ˜¯å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦éƒ½å¾ˆä½ï¼Œåªæœ‰ä¸ªåˆ«æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œè€Œä¸”è¿™äº›æ“ä½œä¹‹é—´å­˜åœ¨å‰åè¿è´¯çš„æ—¶åºå…³ç³»ï¼‰ï¼Œå¯ä»¥å¼•å…¥æ‘Šè¿˜åˆ†ææ³•è®¡ç®—å¾—å‡ºå‡æ‘Šæ—¶é—´å¤æ‚åº¦ã€‚\nå¯¹äºä¸Šé¢æè¿°çš„åœºæ™¯ï¼Œå¯ä»¥å°†è¿™ä¸€ç»„æ“ä½œæ”¾åœ¨ä¸€èµ·åˆ†æï¼Œå°è¯•å°†è¾ƒé«˜æ—¶é—´å¤æ‚åº¦é‚£æ¬¡æ“ä½œçš„è€—æ—¶å¹³æ‘Šåˆ°å…¶ä»–é‚£äº›æ—¶é—´å¤æ‚åº¦è¾ƒä½çš„æ“ä½œä¸Šã€‚\nå‡æ‘Šæ—¶é—´å¤æ‚åº¦æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ã€‚é€šå¸¸ï¼Œåœ¨èƒ½å¤Ÿåº”ç”¨å‡æ‘Šæ—¶é—´å¤æ‚åº¦åˆ†æçš„åœºåˆï¼Œä¸€èˆ¬å‡æ‘Šæ—¶é—´å¤æ‚åº¦å°±ç­‰äºæœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚\nå¤æ‚åº¦å˜åŒ–è¶‹åŠ¿ ä¸Šå›¾æ˜¯å¸¸è§å¤æ‚åº¦çš„å˜åŒ–è¶‹åŠ¿ï¼Œå¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°ï¼Œè¶…è¿‡ $O(n \\log n)$ çš„å¤æ‚åº¦å°±å¯ä»¥éšç€ n çš„å˜åŒ–è€Œæ€¥å‰§å˜åŒ–ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”å°½é‡é¿å…ã€‚\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/complexity-analysis.html","title":"ç®—æ³•çš„å¤æ‚åº¦åˆ†æ"},{"content":"ä¸€è‡´æ€§å“ˆå¸Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„å“ˆå¸Œè¡¨ä½¿ç”¨æ–¹å¼ï¼Œå®ƒè§£å†³äº†ç®€å•å“ˆå¸Œç®—æ³•åœ¨åˆ†å¸ƒå¼æ•£åˆ—è¡¨ä¸­å­˜åœ¨çš„åŠ¨æ€ä¼¸ç¼©é—®é¢˜ã€‚å…¶èƒ½åœ¨ä¿è¯å¢åŠ æˆ–å‡å°‘æœåŠ¡å™¨æ—¶ï¼Œæ•°æ®å­˜å‚¨çš„æ”¹å˜æœ€å°‘ï¼Œç›¸æ¯”ä¼ ç»Ÿå“ˆå¸Œç®—æ³•å¤§å¤§èŠ‚çœäº†æ•°æ®ç§»åŠ¨çš„å¼€é”€ã€‚\nç®€ä»‹ åœ¨åˆ†å¸ƒå¼é›†ç¾¤ä¸­ï¼Œå¯¹æœºå™¨çš„æ·»åŠ ã€åˆ é™¤æˆ–è€…æ˜¯æœºå™¨æ•…éšœåè‡ªåŠ¨è„±ç¦»é›†ç¾¤ç­‰æ“ä½œæ˜¯åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç†æœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚å¦‚æœé‡‡ç”¨çš„æ˜¯å¸¸è§çš„å–æ¨¡å“ˆå¸Œç®—æ³•ï¼Œå½“æœ‰æœºå™¨æ·»åŠ ã€åˆ é™¤ä¹‹åï¼Œéœ€è¦å¯¹æ•°æ®åšè¿ç§»ï¼Œéå¸¸éº»çƒ¦ã€‚\nè€Œä¸€è‡´æ€§å“ˆå¸Œåˆ©ç”¨å“ˆå¸Œç¯çš„æ¦‚å¿µï¼Œä¿è¯å¢åŠ æˆ–å‡å°‘æœåŠ¡å™¨ï¼Œæ•°æ®å­˜å‚¨çš„æ”¹å˜æœ€å°‘ï¼Œç›¸æ¯”å–æ¨¡å“ˆå¸Œç®—æ³•å¤§å¤§èŠ‚çœäº†æ•°æ®ç§»åŠ¨çš„å¼€é”€ï¼Œéå¸¸æ–¹ä¾¿ã€‚\nä¸€è‡´æ€§å“ˆå¸Œè®¤ä¸ºåœ¨åŠ¨æ€å˜åŒ–çš„ç¼“å­˜ç©ºé—´ç¯å¢ƒä¸­ï¼Œè‰¯å¥½çš„å“ˆå¸Œç®—æ³•åº”è¯¥æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\nå¹³è¡¡æ€§ï¼šæŒ‡å“ˆå¸Œçš„ç»“æœèƒ½å¤Ÿå°½å¯èƒ½åˆ†å¸ƒåˆ°æ‰€æœ‰çš„ç¼“å­˜ä¸­ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ‰€æœ‰çš„ç¼“å­˜ç©ºé—´éƒ½èƒ½å¾—åˆ°åˆ©ç”¨ å•è°ƒæ€§ï¼šæŒ‡å½“æ–°çš„ç¼“å­˜ç©ºé—´åŠ å…¥æ—¶ï¼ŒåŸæœ¬å·²åˆ†é…çš„æ•°æ®å¯ä»¥è¢«æ˜ å°„åˆ°åŸæœ¬æˆ–è€…æ–°çš„ç¼“å­˜ç©ºé—´ä¸­ï¼Œè€Œä¸ä¼šè¢«æ˜ å°„åˆ°æ—§çš„å…¶ä»–ç¼“å­˜ç©ºé—´ä¸­ åˆ†æ•£æ€§ï¼šé¿å…å‡ºç°ç›¸åŒçš„å†…å®¹è¢«ä¸åŒçš„ç»ˆç«¯æ˜ å°„åˆ°ä¸åŒçš„ç¼“å­˜ç©ºé—´ä¸­ï¼Œé™ä½ç³»ç»Ÿå­˜å‚¨çš„æ•ˆç‡ è´Ÿè½½ï¼šä¸åˆ†æ•£æ€§ç»“åˆç†è§£ï¼Œå¯¹äºä¸€ä¸ªç‰¹å®šçš„ç¼“å†²åŒºï¼Œé¿å…è¢«ä¸åŒçš„ç»ˆç«¯æ˜ å°„ä¸ºä¸åŒçš„å†…å®¹ ä¸€è‡´æ€§å“ˆå¸Œå¯ä»¥ç†è§£æˆæ™®é€šå–æ¨¡å“ˆå¸Œç®—æ³•çš„æ”¹è‰¯ç‰ˆï¼Œæ”¹å˜çš„æ˜¯å°†æ™®é€šçš„çº¿æ€§å“ˆå¸Œç©ºé—´å˜æˆç¯çŠ¶çš„å“ˆå¸Œç©ºé—´ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªç¼“å­˜ç©ºé—´æ˜¯ç¯ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ•°æ®ä¸€èˆ¬å­˜å‚¨åœ¨æ²¿é¡ºæ—¶é’ˆçš„æ–¹å‘æ‰¾åˆ°çš„ç¯ä¸Šçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚\nç®—æ³• å“ˆå¸Œç¯ ç®€å•çš„è¯´ï¼Œä¸€è‡´æ€§å“ˆå¸Œæ˜¯å°†æ•´ä¸ªå“ˆå¸Œå€¼ç©ºé—´æƒ³è±¡æˆä¸€ä¸ªè™šæ‹Ÿçš„åœ†ç¯ã€‚\næ¯”å¦‚ï¼Œå‡è®¾å“ˆå¸Œå‡½æ•° H çš„å€¼ç©ºé—´ä¸º 0 ~ $2^{32}-1$ï¼Œæ•´ä¸ªå“ˆå¸Œç©ºé—´ç¯å¦‚ä¸‹ï¼š\nå‡è®¾è¿™æ—¶æœ‰ k1ã€k2ã€k3ã€k4 è¿™å‡ ä¸ª key å€¼ï¼Œé€šè¿‡ä¸€å®šçš„å“ˆå¸Œç®—æ³•ï¼Œå°†è¿™å‡ ä¸ª key å€¼è¢«å¹³å‡åˆ†é…åˆ°å“ˆå¸Œç¯ä¸Šã€‚\nåŒæ ·çš„ï¼Œç°åœ¨æœ‰ 3 å° cache æœåŠ¡å™¨ï¼Œé€šè¿‡ä¸€å®šçš„å“ˆå¸Œç®—æ³•ï¼Œä¹Ÿè¢«å¹³å‡åˆ†é…åˆ°å“ˆå¸Œç¯ä¸Šã€‚\nä¸‹å›¾å±•ç¤ºçš„æ˜¯ key å€¼è¢«åˆ†é…åˆ°å“ªä¸€å° cache æœåŠ¡å™¨çš„ä¸€ä¸ªç¤ºä¾‹ï¼š\nå¦‚ä¸Šæ‰€ç¤ºï¼šk1 å­˜å‚¨åœ¨ c3 ä¸Šï¼Œk4ã€k3 å­˜å‚¨åœ¨ c1 ä¸Šï¼Œk2 å­˜å‚¨åœ¨ c2 ä¸Šã€‚\nå“ˆå¸Œç¯ä¼šå°†å“ˆå¸Œåçš„ key å€¼æŒ‰ç…§é¡ºæ—¶é’ˆçš„æ–¹å‘å¯»æ‰¾æœ€è¿‘çš„ cache æœåŠ¡å™¨ï¼Œç„¶åå°†æ•°æ®å­˜å‚¨åœ¨è¿™å°æœåŠ¡å™¨ä¸Šã€‚\nåˆ é™¤èŠ‚ç‚¹ å‡è®¾ c3 æœåŠ¡å™¨å®•æœºï¼Œè¿™æ—¶å€™éœ€è¦ä»é›†ç¾¤ä¸­å°†å…¶æ‘˜é™¤ï¼Œå…¶ä¸Šçš„æ•°æ®ä¹Ÿéœ€è¦åšè¿ç§»ã€‚\næŒ‰ç…§ä¸€è‡´æ€§å“ˆå¸Œçš„è§„åˆ™ï¼ŒåŸæœ¬å­˜å‚¨åœ¨ c3 ä¸Šçš„ k1 æŒ‰ç…§é¡ºæ—¶é’ˆçš„æ–¹å‘å¯»æ‰¾æœ€è¿‘çš„ cache æœåŠ¡å™¨ï¼Œå³åç»­ k1 ä¼šå­˜å‚¨åœ¨ c1 ä¸Šï¼š\nä»è¿™é‡Œå¯çŸ¥ï¼Œå½“ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œæ—¶ï¼Œåˆ é™¤èŠ‚ç‚¹ c3 ä¼šå½±å“åˆ°è¢«åˆ é™¤èŠ‚ç‚¹ c3 ä¸ŠåŠå…¶ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ c1 çš„æ•°æ®ï¼Œè¿ç§»æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦å°†è¢«åˆ é™¤èŠ‚ç‚¹ c3 ä¸Šçš„æ•°æ®è¿ç§»åˆ°å…¶ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ c1 ä¸Šã€‚\næ–°å¢èŠ‚ç‚¹ å‡è®¾ç°åœ¨éœ€è¦æ–°å¢ c4 æœåŠ¡å™¨ï¼Œä¼šç ´åç°åœ¨é›†ç¾¤çš„å¹³è¡¡ï¼Œéœ€è¦å¯¹æ•°æ®åšä¸€äº›å¤„ç†ã€‚\nå‡è®¾ c4 æœåŠ¡å™¨å®šä½åœ¨ k4 å’Œ k3 ä¹‹é—´ï¼ŒæŒ‰ç…§ä¸€è‡´æ€§å“ˆå¸Œçš„è§„åˆ™ï¼ŒåŸæœ¬å­˜å‚¨åœ¨ c1 ä¸Šçš„ k4 ä¼šè¿ç§»åˆ° c4 ä¸Šï¼š\nåŒæ ·çš„ï¼Œæ–°å¢èŠ‚ç‚¹ä¼šå½±å“åˆ°æ–°å¢èŠ‚ç‚¹æ‰€åœ¨ä½ç½®çš„åä¸€ä¸ªèŠ‚ç‚¹ c1ï¼Œè¿ç§»æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦å°†æ–°å¢èŠ‚ç‚¹æ‰€åœ¨ä½ç½®åˆ°å…¶ä¸Šä¸€ä¸ªèŠ‚ç‚¹ c3 ä¹‹é—´çš„æ•°æ®ä»å…¶ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ c1 è¿ç§»åˆ°æ–°å¢çš„èŠ‚ç‚¹ c4 ä¸Šã€‚\nè™šæ‹ŸèŠ‚ç‚¹ ä¸€è‡´æ€§å“ˆå¸Œç†è®ºä¸Šæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†å®é™…ä½¿ç”¨ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š\nå½“èŠ‚ç‚¹è¾ƒå°‘æ—¶ï¼Œå“ˆå¸Œç¯ä¸­çš„èŠ‚ç‚¹å®¹æ˜“å‡ºç°åˆ†å¸ƒä¸å‡è¡¡ï¼Œæœ€ç»ˆå¯¼è‡´æ•°æ®å€¾æ–œ å½“ä¸€ä¸ªèŠ‚ç‚¹å®•æœºæ—¶ï¼Œæ•°æ®ä¼šç«‹é©¬è¿ç§»åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æµé‡å‹åŠ›å’Œå†…å­˜å‹åŠ›éƒ½ä¼šå¢å¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¶å®•æœºï¼Œç»§è€Œå¼•å‘é›ªå´© è¿™é‡Œå°±è¡ç”Ÿå‡ºä¸€ä¸ª è™šæ‹ŸèŠ‚ç‚¹ çš„æ¦‚å¿µï¼Œå³å¯¹æ¯ä¸ªç‰©ç†èŠ‚ç‚¹è®¡ç®—å¤šä¸ªå“ˆå¸Œå€¼ï¼Œå°†åŸæ¥å•ä¸€çš„ç‰©ç†èŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šè™šæ‹Ÿå‡ºå‡ ä¸ªåˆ†èº«èŠ‚ç‚¹ï¼Œè¿™äº›åˆ†èº«èŠ‚ç‚¹ç§°ä¸ºè™šæ‹ŸèŠ‚ç‚¹ã€‚\næ˜ å°„åˆ°åˆ†èº«èŠ‚ç‚¹ä¸Šçš„æ•°æ®å®é™…ä¸Šå°±æ˜¯æ˜ å°„åˆ°åˆ†èº«å¯¹åº”çš„ç‰©ç†èŠ‚ç‚¹ä¸Šï¼Œè¿™æ ·ä¸€ä¸ªç‰©ç†èŠ‚ç‚¹å¯ä»¥é€šè¿‡è™šæ‹ŸèŠ‚ç‚¹çš„æ–¹å¼å‡åŒ€åˆ†æ•£åœ¨å“ˆå¸Œç¯çš„å„ä¸ªéƒ¨åˆ†ï¼Œè§£å†³æ•°æ®å€¾æ–œé—®é¢˜ã€‚\nç”±äºè™šæ‹ŸèŠ‚ç‚¹åˆ†æ•£åœ¨å“ˆå¸Œç¯å„ä¸ªéƒ¨åˆ†ï¼Œå½“æŸä¸ªèŠ‚ç‚¹å®•æœºä¸‹çº¿ï¼Œè™šæ‹ŸèŠ‚ç‚¹æ‰€å­˜å‚¨çš„æ•°æ®ä¼šè¢«å‡åŒ€åˆ†é…ç»™ä¸‹ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œåˆ™ç‰©ç†èŠ‚ç‚¹ä¹Ÿä¼šå¾—åˆ°å‡åŒ€åˆ†é…ï¼Œé¿å…äº†å¯¹å•ä¸€èŠ‚ç‚¹çªå‘å‹åŠ›å¯¼è‡´çš„èŠ‚ç‚¹é›ªå´©é—®é¢˜ã€‚\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸å°†è™šæ‹ŸèŠ‚ç‚¹æ•°è®¾ç½®æˆ 32 ç”šè‡³æ›´å¤§ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å³ä½¿å¾ˆå°‘çš„æœåŠ¡èŠ‚ç‚¹ä¹Ÿèƒ½åšåˆ°å‡åŒ€çš„æ•°æ®åˆ†å¸ƒã€‚\nä¼˜ç¼ºç‚¹ ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ç›¸æ¯”æ™®é€šçš„å“ˆå¸Œç®—æ³•åœ¨æ‰©å±•æ€§å’Œå®¹é”™æ€§ä¸Šéƒ½æœ‰ä¸€å®šçš„ä¼˜åŠ¿ï¼š\næ‰©å±•æ€§ï¼šæ™®é€šçš„å“ˆå¸Œç®—æ³•å¢åŠ ç¼“å­˜ç©ºé—´çš„æ—¶å€™ï¼Œéœ€è¦å¯¹å¤§é‡æ•°æ®åšè¿ç§»ï¼›ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ‰©å±•æ—¶ä»…éœ€å°†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®è¿ç§»åˆ°è¿™ä¸ªæ–°å¢èŠ‚ç‚¹ä¸Š å®¹é”™æ€§ï¼šæ™®é€šçš„å“ˆå¸Œç®—æ³•å‡å°‘ç¼“å­˜ç©ºé—´çš„æ—¶å€™ï¼Œä¼šå‡ºç°å“ˆå¸Œæ˜ å°„å¤§é¢ç§¯å¤±æ•ˆçš„æƒ…å†µï¼›è€Œå¯¹äºä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Œå¦‚æœå‡ºç°éœ€è¦å‡å°‘ç¼“å­˜ç©ºé—´çš„æƒ…å†µï¼Œå…¶å®å°±æ˜¯éœ€è¦å°†å½“å‰å‡å°‘çš„èŠ‚ç‚¹æ•°æ®è¿ç§»åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸­ å®é™…ä¸Šï¼Œä¸ä¼šå­˜åœ¨ä¸€åŠ³æ°¸é€¸çš„å“ˆå¸Œç®—æ³•ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åœ¨ä»¥ä¸‹åœºæ™¯éœ€è¦è°¨æ…ä½¿ç”¨ï¼š\nå¯¹äºæ•°æ®å ç”¨ç©ºé—´å¤§ã€ä½†æ•°é‡è¾ƒå°æ—¶ï¼Œä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œæœ‰äº›å¤§æå°ç”¨ ä¸€è‡´æ€§å“ˆå¸Œè§£å†³äº†æ•°æ®çš„å‡åŒ€åˆ†å¸ƒï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³æµé‡å’Œè´Ÿè½½çš„å‡è¡¡ æ•°æ®å’Œæœºå™¨ä¹‹é—´çš„æ˜ å°„é€šè¿‡å“ˆå¸Œç®—æ³•å¾—åˆ°ï¼Œè¿™ç§å…³ç³»æ¯”è¾ƒå›ºå®šï¼Œæ— æ³•äººå·¥å¹²æ¶‰ ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/consistent-hash-basic.html","title":"ä¸€è‡´æ€§å“ˆå¸Œçš„ç®€å•è®¤è¯†"},{"content":"B+ æ ‘é€šå¸¸ç”¨äºæ•°æ®åº“å’Œæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå¯¹å†…å­˜ä¸ç£ç›˜ä¹‹é—´çš„äº¤äº’æä¾›äº†éå¸¸å¤§çš„éå†ï¼Œæ˜¯ä¸€ç§å¸¸è§çš„å­˜å‚¨åœ¨ç£ç›˜çš„ç´¢å¼•ç»“æ„ã€‚\nB+ æ ‘çš„æ¦‚å¿µ åŸºæœ¬æ¦‚å¿µ B+ æ ‘æ˜¯ B æ ‘çš„ä¸€ç§å˜ä½“ï¼Œä»æŸä¸ªç¨‹åº¦ä¸Šçœ‹ï¼ŒB+ æ ‘å¯ä»¥è®¤å®šæ˜¯ B æ ‘çš„å‡çº§ç‰ˆã€‚\nåœ¨ B+ æ ‘ä¸­ï¼Œå…³é”®å­—åªå­˜å‚¨åœ¨å¶å­ç»“ç‚¹ï¼Œéå¶å­ç»“ç‚¹å­˜å‚¨çš„æ˜¯å¶å­ç»“ç‚¹æ‰€å­˜å‚¨å…³é”®å­—çš„éƒ¨åˆ†æ‹·è´ï¼Œæ‰€æœ‰çš„å¶å­ç»“ç‚¹ä¹Ÿéƒ½åœ¨ç›¸åŒçš„é«˜åº¦ï¼Œå¶å­ç»“ç‚¹æœ¬èº«æŒ‰å…³é”®å­—å¤§å°ä»å°åˆ°å¤§é“¾æ¥ã€‚\nå› æ­¤ï¼Œç›¸å¯¹äº B æ ‘è€Œè¨€ï¼ŒB+ æ ‘æ›´å……åˆ†åœ°åˆ©ç”¨äº†ç»“ç‚¹çš„ç©ºé—´ï¼Œè®©æŸ¥è¯¢é€Ÿåº¦æ›´åŠ ç¨³å®šï¼Œå…¶é€Ÿåº¦å®Œå…¨æ¥è¿‘äºäºŒåˆ†æŸ¥æ‰¾ã€‚\nç‰¹æ€§ B+ æ ‘æ‹¥æœ‰ B æ ‘çš„å¤§éƒ¨åˆ†ç‰¹æ€§ï¼Œä½†ä¹Ÿå…·æœ‰ç‹¬ç‰¹çš„ã€ä¸ B æ ‘ä¸åŒçš„ç‰¹æ€§ï¼Œä¸åŒçš„åœ°æ–¹æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š\nB+ æ ‘çš„éå¶å­ç»“ç‚¹ä¸ç›´æ¥å­˜å‚¨æ•°æ®çš„æŒ‡é’ˆï¼Œæ‰€æœ‰æ•°æ®çš„æŒ‡é’ˆéƒ½å­˜å‚¨åœ¨å¶å­ç»“ç‚¹ B+ æ ‘å¶å­ç»“ç‚¹å­˜å‚¨çš„æ•°æ®ä»å°åˆ°å¤§æœ‰åºæ’åˆ—ï¼Œä¸”ç›¸é‚»å¶å­ç»“ç‚¹ä¹‹é—´å…·æœ‰é“¾æ¥ ä¸ B æ ‘çš„åŒºåˆ« ä¸ B æ ‘ç›¸æ¯”è¾ƒï¼ŒB+ æ ‘å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\nB+ æ ‘çš„éå¶å­ç»“ç‚¹ä¸ç›´æ¥å­˜å‚¨æ•°æ®ï¼Œå­˜å‚¨çš„ç´¢å¼•æ›´å¤šï¼Œæ ‘çš„å±‚çº§æ›´å°‘ï¼ŒæŸ¥è¯¢çš„é€Ÿåº¦æ›´å¿« B+ æ ‘æ‰€æœ‰æ•°æ®çš„æŒ‡é’ˆéƒ½å­˜å‚¨åœ¨å¶å­ç»“ç‚¹ï¼Œå› æ­¤æ¯æ¬¡æŸ¥æ‰¾åˆ°æ•°æ®çš„æ¬¡æ•°éƒ½ç›¸åŒï¼ŒæŸ¥è¯¢é€Ÿåº¦æ›´ç¨³å®š B+ æ ‘æ‰€æœ‰çš„å¶å­ç»“ç‚¹ä¹‹é—´å…·æœ‰é“¾æ¥ï¼Œæ„æˆäº†ä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼ŒæŸ¥è¯¢èŒƒå›´åŒºé—´çš„æ•°æ®æ›´æ–¹ä¾¿ B+ æ ‘éå†æ‰€æœ‰æ•°æ®æ—¶åªéœ€è¦éå†æ‰€æœ‰å¶å­ç»“ç‚¹å³å¯ï¼Œç›¸å¯¹ B æ ‘éå†æ›´å¿« ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ä½œä¸ºç´¢å¼•ç»“æ„ï¼Ÿ ç´¢å¼•çš„æœ¬è´¨æ˜¯ä¸€ç§ç”¨äºå¿«é€ŸæŸ¥æ‰¾è®°å½•çš„æ•°æ®ç»“æ„ï¼Œå¸¸è§æœ‰äºŒå‰æŸ¥æ‰¾æ ‘ã€å¹³è¡¡äºŒå‰æ ‘ã€å“ˆå¸Œè¡¨ã€B æ ‘å’Œ B+ æ ‘ç­‰ç´¢å¼•å­˜å‚¨ç»“æ„ã€‚\næ¯ä¸€ç§ç´¢å¼•ç»“æ„éƒ½æœ‰å…¶å¯¹åº”çš„åº”ç”¨åœºæ™¯ï¼Œæ˜“ç”¨æ€§ä¹Ÿæ˜¯é€‰æ‹©çš„æ ‡å‡†ä¹‹ä¸€ï¼Œè¿™é‡Œè®¨è®ºä¸€ä¸‹ä¸ºä»€ä¹ˆé€‰ç”¨ B+ æ ‘ä½œä¸ºç´¢å¼•å­˜å‚¨ç»“æ„ã€‚\nä¸ºä»€ä¹ˆä¸é‡‡ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ï¼Ÿ ä½¿ç”¨æ™®é€šçš„äºŒå‰æ ‘æŸ¥æ‰¾ä½œä¸ºç´¢å¼•ç»“æ„å…·æœ‰ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼šå½“ä¸€ç›´æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä¼šé€€åŒ–æˆé“¾è¡¨ç»“æ„ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿä¼šä» $O(\\log n)$ é€€åŒ–åˆ° $O(n)$ã€‚\nå› æ­¤ï¼Œæ™®é€šçš„äºŒå‰æŸ¥æ‰¾æ ‘æ¯”è¾ƒé€‚åˆæ•°æ®åŸºæœ¬æ²¡æœ‰å˜åŠ¨çš„æƒ…å†µï¼Œè¿™æ ·æŸ¥æ‰¾æ•ˆç‡ä¸ä¼šå‘ç”Ÿè¾ƒå¤§çš„å˜åŒ–ã€‚\nä¸ºä»€ä¹ˆä¸é‡‡ç”¨å¹³è¡¡äºŒå‰æ ‘ï¼Ÿ ä¸ºäº†è§£å†³æ™®é€šäºŒå‰æŸ¥æ‰¾æ ‘æœ‰å¯èƒ½é€€åŒ–æˆé“¾è¡¨çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ä»£æ›¿ï¼Œå¦‚ AVL æ ‘ã€çº¢é»‘æ ‘ç­‰ã€‚\nçº¢é»‘æ ‘å¸¸è§çš„ä¸€ç§è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼šçº¢é»‘æ ‘æ˜¯ä¸€ä¸ªè¿‘ä¼¼å¹³è¡¡çš„äºŒå‰æ ‘ï¼Œå½“æ•°æ®é‡è¾ƒå¤§çš„æ—¶å€™ï¼Œä¼šå‡ºç°æ ‘å±‚çº§è¾ƒå¤§çš„æƒ…å†µã€‚\nå½“æ•°æ®é‡éå¸¸å¤§æ—¶ï¼Œç´¢å¼•å ç”¨çš„ç©ºé—´ä¹Ÿä¼šéå¸¸å¤§ï¼Œç´¢å¼•è¿˜æ˜¯å¾—å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œå¦‚æœæ ‘çš„å±‚çº§è¾ƒå¤§ï¼Œåˆ™è¿›è¡Œç£ç›˜ IO çš„æ¬¡æ•°å°±ä¼šè¶Šå¤šï¼Œæ€§èƒ½å°±ä¼šè¶Šå·®ã€‚\nå› æ­¤ï¼Œçº¢é»‘æ ‘ä¸é€‚åˆä½œä¸ºå­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ç´¢å¼•ç»“æ„ã€‚\nä¸ºä»€ä¹ˆä¸é‡‡ç”¨å“ˆå¸Œè¡¨ï¼Ÿ å“ˆå¸Œè¡¨æ˜¯ä¸€ä¸ªæ”¯æŒå¿«é€ŸæŸ¥æ‰¾çš„æ•°æ®ç»“æ„ï¼Œå…¶æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼Œå…¶ä¹Ÿæ˜¯æœ€å¸¸è§çš„ç´¢å¼•å­˜å‚¨ç»“æ„ä¹‹ä¸€ã€‚\nä½†æ˜¯å“ˆå¸Œè¡¨ä¹Ÿæœ‰å…¶ç¼ºç‚¹ï¼Œå°±æ˜¯åªå­˜å‚¨é”®å€¼å¯¹åº”å…³ç³»çš„å“ˆå¸Œè¡¨ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼Œå¦‚æœè¦åšèŒƒå›´æŸ¥è¯¢ï¼Œéœ€è¦åšå…¨é‡çš„æ•°æ®æ‰«ææ‰è¡Œã€‚\nå½“ç„¶ï¼Œå¦‚æœæ˜¯å…·æœ‰æ’åºåŠŸèƒ½çš„å“ˆå¸Œè¡¨ï¼Œä¼šéå¸¸é€‚åˆä½œä¸ºå­˜å‚¨åœ¨å†…å­˜ä¸­çš„ç´¢å¼•ç»“æœï¼Œå¦‚ Java ä¸­çš„ TreeMap å¯¹è±¡ã€‚\nä¸ºä»€ä¹ˆä¸é‡‡ç”¨ B æ ‘ï¼Ÿ ä½¿ç”¨ B æ ‘å¯ä»¥è§£å†³çº¢é»‘æ ‘å±‚çº§è¾ƒå¤§çš„é—®é¢˜ï¼Œé€šè¿‡ä¸€ä¸ªç»“ç‚¹å¯ä»¥å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œæ ‘å˜å¾—æ›´åŠ çŸ®èƒ–ï¼Œä½¿å¾—æ ‘çš„å±‚çº§å˜å¾—å¯æ§ã€‚\nè€Œä¸”ï¼Œé€šè¿‡ç»™ä¸€ä¸ªç»“ç‚¹å­˜å‚¨ä¸€é¡µçš„æ•°æ®é‡ï¼Œæœ€å¤§åŒ–åœ°ä¼˜åŒ–æ“ä½œç³»ç»Ÿå’Œç£ç›˜çš„äº¤äº’ï¼Œè§£å†³äº†å¤šæ¬¡ç£ç›˜ IO çš„é—®é¢˜ã€‚\nä½†æ˜¯å¯¹åº” B+ æ ‘è€Œè¨€ï¼ŒB æ ‘çš„å±‚çº§ä»ç„¶ä¼šæ¯” B+ æ ‘çš„é«˜ï¼Œä¸”èŒƒå›´æŸ¥è¯¢æ²¡æœ‰ B+ æ ‘æ–¹ä¾¿ï¼Œè¿™æ˜¯èˆå¼ƒ B æ ‘è€Œé€‰æ‹© B+ æ ‘çš„ä¸»è¦åŸå› ã€‚\nå½“ç„¶ï¼Œä¹Ÿæœ‰ä½¿ç”¨ B æ ‘ä½œä¸ºç´¢å¼•ç»“æ„çš„æ•°æ®åº“ï¼Œå¦‚ MongoDB ç­‰ã€‚\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/b+-tree-basic.html","title":"B+ æ ‘çš„ç®€å•è®¤è¯†"},{"content":"åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒB æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„æ ‘ï¼Œèƒ½å¤Ÿä¿æŒæ•°æ®æœ‰åºã€‚å…¶é€‚ç”¨äºè¯»å†™ç›¸å¯¹å¤§çš„æ•°æ®å—çš„å­˜å‚¨ç³»ç»Ÿï¼Œä¾‹å¦‚ç£ç›˜ï¼Œå› æ­¤ä¹Ÿå¸¸ä½œä¸ºæ•°æ®åº“ç³»ç»Ÿçš„ç´¢å¼•ç»“æ„ã€‚\nç†è§£ B æ ‘çš„æ¦‚å¿µ B æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„æŸ¥æ‰¾æ ‘ï¼Œèƒ½å¤Ÿä¿æŒæ•°æ®æœ‰åºã€‚è¿™ç§æ•°æ®ç»“æ„èƒ½å¤Ÿè®©æŸ¥æ‰¾æ•°æ®ã€é¡ºåºè®¿é—®ã€æ’å…¥æ•°æ®åŠåˆ é™¤æ•°æ®çš„åŠ¨ä½œï¼Œéƒ½èƒ½åœ¨å¯¹æ•°æ—¶é—´å†…å®Œæˆã€‚\nåŒä¸€èˆ¬çš„äºŒå‰æŸ¥æ‰¾æ ‘ä¸åŒï¼ŒB æ ‘æ˜¯ä¸€æ£µå¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼Œå…¶ç‰¹æ€§æ˜¯ï¼šç»“ç‚¹çš„å­©å­ç»“ç‚¹æ•°å¯ä»¥å¤šäºä¸¤ä¸ªï¼Œä¸”æ¯ä¸€ä¸ªç»“ç‚¹å¤„å¯ä»¥å­˜å‚¨å¤šä¸ªå…ƒç´ ã€‚\nåœ¨ B æ ‘ä¸­ï¼Œéå¶å­ç»“ç‚¹å¯ä»¥æ‹¥æœ‰å¯å˜æ•°é‡çš„å­ç»“ç‚¹ï¼Œä¸ºäº†ç»´æŒåœ¨é¢„å…ˆè®¾å®šçš„æ•°é‡èŒƒå›´å†…ï¼Œé€šå¸¸æ˜¯å¯¹éå¶å­ç»“ç‚¹è¿›è¡Œåˆå¹¶å’Œåˆ†ç¦»ã€‚å…¶ä¼˜åŠ¿æ˜¯ä¸éœ€è¦åƒå…¶ä»–è‡ªå¹³è¡¡æŸ¥æ‰¾æ ‘é‚£æ ·é¢‘ç¹åœ°é‡æ–°ä¿æŒå¹³è¡¡ï¼Œå…¶åŠ£åŠ¿æ˜¯ç»“ç‚¹æœªè¢«å®Œå…¨å¡«å……æ—¶ä¼šæµªè´¹ä¸€äº›ç©ºé—´ã€‚\nç‰¹æ€§ é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šåœ¨ B æ ‘çš„åç§°å‰æ·»åŠ é˜¶æ•°ä»¥ç¤ºè¯´æ˜ï¼Œå¦‚ m é˜¶ B æ ‘ã€‚ä¸€ä¸ª m é˜¶çš„ B æ ‘å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š\nä»»æ„ç»“ç‚¹æœ€å¤šæœ‰ m ä¸ªå­©å­ç»“ç‚¹ ä»»æ„é™¤æ ¹ç»“ç‚¹ä»¥å¤–çš„éå¶å­ç»“ç‚¹æœ€å°‘æœ‰ $\\frac{m}{2}$ ä¸ªå­ç»“ç‚¹ å¦‚æœæ ¹ç»“ç‚¹ä¸æ˜¯å¶å­ç»“ç‚¹ï¼Œé‚£ä¹ˆå®ƒè‡³å°‘æœ‰ 2 ä¸ªå­©å­ç»“ç‚¹ æœ‰ k ä¸ªå­©å­ç»“ç‚¹çš„éå¶å­ç»“ç‚¹æœ‰ k-1 ä¸ªé”® æ‰€æœ‰çš„å¶å­ç»“ç‚¹éƒ½åœ¨åŒä¸€å±‚ï¼ŒB æ ‘ä¹Ÿæ˜¯é€šè¿‡æ­¤çº¦æŸæ¥ä¿æŒæ ‘çš„å¹³è¡¡ ä¸‹è¿°å±•ç¤ºçš„æ˜¯ä¸€ä¸ª 3 é˜¶ B æ ‘ï¼š\nå˜ä½“ B æ ‘å¯ä»¥æŒ‡ä¸€ä¸ªç‰¹å®šçš„æ ‘å½¢ç»“æ„ï¼Œä¹Ÿå¯ä»¥æŒ‡å¤§ä½“ä¸Šçš„ä¸€ç±»æ ‘å½¢ç»“æ„ã€‚\nå¯¹äº B æ ‘è¿™ä¸€ç±»æ ‘å½¢ç»“æ„ï¼Œè¿˜åŒ…æ‹¬äº† B+ æ ‘å’Œ B* æ ‘ç­‰ç»“æ„ï¼Œå®ƒä»¬çš„ç®€å•å®šä¹‰å¦‚ä¸‹ï¼š\nå¯¹äº B+ æ ‘ï¼Œå…³é”®å­—åªå­˜å‚¨åœ¨å¶å­ç»“ç‚¹ï¼Œéå¶å­ç»“ç‚¹å­˜å‚¨çš„æ˜¯å¶å­ç»“ç‚¹æ‰€å­˜å‚¨å…³é”®å­—çš„éƒ¨åˆ†æ‹·è´ï¼Œæ‰€æœ‰çš„å¶å­ç»“ç‚¹ä¹Ÿéƒ½åœ¨ç›¸åŒçš„é«˜åº¦ï¼Œå¶å­ç»“ç‚¹æœ¬èº«æŒ‰å…³é”®å­—å¤§å°ä»å°åˆ°å¤§é“¾æ¥ã€‚\nB* æ ‘æ˜¯ B+ æ ‘çš„å˜ä½“ï¼Œåœ¨ B+ æ ‘çš„åŸºç¡€ä¸Šï¼Œéå¶å­ç»“ç‚¹ï¼ˆé™¤æ ¹ç»“ç‚¹å¤–ï¼‰ä¼šå¢åŠ æŒ‡å‘åŒä¸€å±‚å…„å¼Ÿçš„æŒ‡é’ˆï¼Œä¸”éå¶å­ç»“ç‚¹å…³é”®å­—ä¸ªæ•°è‡³å°‘ä¸º $\\frac{2m}{3}$ï¼Œå³å—çš„æœ€ä½ä½¿ç”¨ç‡ä¸º $\\frac{2}{3}$ï¼ˆB+ æ ‘ä¸º $\\frac{1}{2}$ï¼‰ã€‚\nä¸‹é¢ä¸º B* æ ‘çš„ç»“æ„ï¼š\nèµ·æºå’Œè¿ç”¨ å…¶å®ï¼ŒB æ ‘å°±æ˜¯ä¸€ç§ä¸ºç£ç›˜è€Œè®¾è®¡çš„æ ‘å½¢ç»“æ„ï¼Œä¸»è¦æ˜¯é™ä½å…¶ä»–æ ‘å½¢ç»“æ„è®¿é—®ç£ç›˜çš„ IO æ¬¡æ•°ã€‚\nç£ç›˜è¯»å– ä»ç£ç›˜è¯»å–æ•°æ®çš„æ—¶é—´ä¸»è¦æ¶‰åŠåˆ°â€œå¯»é“æ—¶é—´â€å’Œâ€œæ—‹è½¬å»¶è¿Ÿâ€ï¼š\nå¯»é“æ—¶é—´æŒ‡çš„æ˜¯ç£ç›˜æ¥æ”¶åˆ°ç³»ç»ŸæŒ‡ä»¤åï¼Œç£å¤´ä»å¤´å¼€å§‹ç§»åŠ¨åˆ°æ•°æ®æ‰€åœ¨ç£é“æ‰€éœ€è¦çš„æ—¶é—´ï¼Œå¯èƒ½æ˜¯ 0 åˆ° 20 æ¯«ç§’ç”šè‡³æ›´ä¹… æ—‹è½¬å»¶è¿ŸæŒ‡çš„æ˜¯å¯»é“ç»“æŸåï¼Œç£ç›˜å°†å¯¹åº”çš„æ‰‡åŒºæ—‹è½¬åˆ°ç£å¤´ä¸‹æ‰€éœ€è¦çš„æ—¶é—´ï¼Œå…¶å¹³å‡æ—¶é—´å¤§çº¦åœ¨æ—‹è½¬å‘¨æœŸçš„ 50% å·¦å³ï¼Œå¯¹äºä¸€ä¸ª 7200 è½¬çš„ç£ç›˜ï¼Œé‡‡ç”¨ 60Ã—1000Ã·7200 çš„å…¬å¼è®¡ç®—å¾—çŸ¥ä¸€æ¬¡æ—‹è½¬å‘¨æœŸäº‹ä»¶ä¸º 8.33 æ¯«ç§’å·¦å³ ç£ç›˜çš„é¡ºåºè¯»å†™ä¼šæ¯”éšæœºè¯»å†™å¿«ä¹Ÿæ˜¯è¿™ä¸ªåŸå› ï¼Œåœ¨é¡ºåºè¯»å†™æ—¶ï¼Œç£å¤´ä¸éœ€è¦å†åšå¯»é“ï¼Œä»…éœ€å¾ˆå°‘çš„æ—‹è½¬æ—¶é—´ï¼Œè€Œéšæœºè¯»å†™åˆ™éœ€è¦ä¸åœåœ°ç§»åŠ¨ç£å¤´å¯»æ‰¾å¯¹åº”çš„ç£é“ã€‚\nç£ç›˜é¢„è¯» ä¸ºäº†å°½é‡å‡å°‘ IO æ“ä½œï¼Œè®¡ç®—æœºç³»ç»Ÿä¸€èˆ¬é‡‡å–é¢„è¯»çš„æ–¹å¼ï¼Œé¢„è¯»çš„é•¿åº¦ä¸€èˆ¬ä¸ºé¡µï¼ˆPageï¼‰çš„æ•´æ•°å€ã€‚\né¡µæ˜¯è®¡ç®—æœºç®¡ç†å­˜å‚¨å™¨çš„é€»è¾‘å—ï¼Œç¡¬ä»¶åŠæ“ä½œç³»ç»Ÿå¾€å¾€å°†ä¸»å­˜å’Œç£ç›˜å­˜å‚¨åŒºåˆ†å‰²ä¸ºè¿ç»­çš„å¤§å°ç›¸ç­‰çš„å—ï¼Œæ¯ä¸ªå­˜å‚¨å—ç§°ä¸ºä¸€é¡µï¼ˆå¤šæ•°æ“ä½œç³»ç»Ÿé¡µçš„å¤§å°ä¸º 4kï¼‰ï¼Œä¸»å­˜å’Œç£ç›˜ä»¥é¡µä¸ºå•ä½äº¤æ¢æ•°æ®ã€‚\nè®¡ç®—æœºç³»ç»Ÿæ˜¯åˆ†é¡µè¯»å–å’Œå­˜å‚¨çš„ï¼Œæ¯æ¬¡è¯»å–å’Œå­˜å–çš„æœ€å°å•å…ƒä¸ºä¸€é¡µï¼Œè€Œç£ç›˜é¢„è¯»æ—¶é€šå¸¸ä¼šè¯»å–é¡µçš„æ•´æ•°å€ã€‚\nç´¢å¼•ç»“æ„ å¯¹äºæ–‡ä»¶ç³»ç»Ÿå’Œæ•°æ®åº“ç³»ç»Ÿçš„ç´¢å¼•ï¼Œé€šå¸¸ä»¥æ–‡ä»¶çš„å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œå› æ­¤æŸ¥æ‰¾ç´¢å¼•ä¹Ÿä¼šæ‰§è¡Œç£ç›˜ IO æ“ä½œï¼Œå¦‚æœæŸ¥æ‰¾è¿‡ç¨‹ä¸­ç£ç›˜ IO çš„å­˜å–æ¬¡æ•°è¿‡å¤šä¼šå½±å“ç´¢å¼•çš„æ•ˆç‡ã€‚\næ•°æ®åº“ç³»ç»Ÿæ™®éä½¿ç”¨ B æ ‘æˆ–è€… B+ æ ‘ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œå…¶å·§å¦™åœ°åˆ©ç”¨äº†ç£ç›˜é¢„è¯»åŸç†ï¼Œå°†ä¸€ä¸ªç»“ç‚¹è®¾ç½®ä¸ºä¸€ä¸ªé¡µçš„å¤§å°ï¼Œè¿™æ ·æ¯ä¸ªç»“ç‚¹åªéœ€è¦ä¸€æ¬¡ IO å°±å¯ä»¥å®Œå…¨è½½å…¥ã€‚\nåŒæ—¶ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¿˜è¿ç”¨äº†ä»¥ä¸‹æŠ€å·§ï¼š\næ¯æ¬¡æ–°å»ºç»“ç‚¹æ—¶ï¼Œç›´æ¥ç”³è¯·ä¸€ä¸ªé¡µçš„ç©ºé—´ï¼Œå®ç°ä¸€ä¸ªç»“ç‚¹åªéœ€ä¸€æ¬¡ IO å°†æ ¹ç»“ç‚¹å¸¸é©»å†…å­˜ï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶å¯ä»¥å‡å°‘ 1 æ¬¡ IO ä½¿ç”¨ B æ ‘ä½œä¸ºç´¢å¼•ç»“æ„æ—¶ï¼Œç”±äºç»“ç‚¹çš„å¤§å°ç­‰äºä¸€ä¸ªé¡µçš„å¤§å°ï¼Œé€šå¸¸é˜¶ä¼šæ¯”è¾ƒå¤§ï¼Œå› æ­¤æ ‘çš„æ·±åº¦è¾ƒæµ…ï¼ˆé€šå¸¸ä¸è¶…è¿‡ 3ï¼‰ï¼ŒæŸ¥æ‰¾æ•ˆç‡éå¸¸é«˜ã€‚\nç¼ºç‚¹ è™½ç„¶æ•°æ®åº“ç³»ç»Ÿæ™®éä½¿ç”¨ B æ ‘ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œä½†æ˜¯ä»ç„¶æœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š\néå¶å­ç»“ç‚¹ç›´æ¥å­˜å‚¨æ•°æ®ï¼ŒåŒä¸€ç»“ç‚¹å­˜å‚¨çš„ç´¢å¼•æ•°ä¼šæ¯”è¾ƒå°‘ æ•°æ®å³å¯èƒ½å­˜å‚¨åœ¨å¶å­ç»“ç‚¹ï¼Œä¹Ÿå¯èƒ½å­˜å‚¨åœ¨éå¶å­ç»“ç‚¹ï¼ŒæŸ¥è¯¢æ•ˆç‡ç›¸å¯¹ä¸ç¨³å®š åœ¨åŒå±‚ç»“ç‚¹ä¹‹é—´æ²¡æœ‰æŒ‡é’ˆç›¸é‚»ï¼Œä¸é€‚åˆåšä¸€äº›æ•°æ®éå†æ“ä½œ æ’å…¥å’Œåˆ é™¤ æ’å…¥ B æ ‘æ‰€æœ‰çš„æ’å…¥è¿‡ç¨‹éƒ½ä»¥æ ¹ç»“ç‚¹èµ·å§‹ï¼Œé¦–å…ˆæ˜¯è¦æŸ¥æ‰¾åˆ°æ–°å…ƒç´ æ‰€è¦å­˜å‚¨çš„ç»“ç‚¹ï¼Œç„¶ååˆ¤æ–­æ’å…¥ç»“ç‚¹çš„å…ƒç´ æ•°é‡ï¼š\nå¦‚æœç»“ç‚¹å­˜å‚¨çš„å…ƒç´ æ•°é‡å°äºæœ€å¤§å€¼ï¼Œé‚£ä¹ˆæœ‰ç©ºé—´å®¹çº³æ–°çš„å…ƒç´ ï¼Œç›´æ¥æ’å…¥å¹¶ä¿æŒç»“ç‚¹å†…éƒ¨æœ‰åºå³å¯ï¼› å¦‚æœç»“ç‚¹å­˜å‚¨çš„å…ƒç´ æ•°é‡å¤§äºç­‰äºæœ€å¤§å€¼ï¼Œå°†å®ƒå¹³å‡åœ°åˆ†è£‚æˆ 2 ä¸ªç»“ç‚¹ï¼š ä»è¯¥ç»“ç‚¹çš„åŸæœ‰å…ƒç´ å’Œæ–°çš„å…ƒç´ ä¸­é€‰æ‹©å‡ºä¸­ä½æ•°ï¼ˆæŒ‰é¡ºåºæ’åˆ—çš„ä¸€ç»„æ•°æ®ä¸­å±…äºä¸­é—´ä½ç½®çš„æ•°ï¼‰ï¼› å°äºä¸­ä½æ•°çš„å…ƒç´ æ”¾å…¥å·¦è¾¹ç»“ç‚¹ï¼Œå¤§äºä¸­ä½æ•°çš„å…ƒç´ æ”¾å…¥å³è¾¹ç»“ç‚¹ï¼Œä¸­ä½æ•°ä½œä¸ºåˆ†éš”å€¼ï¼› å°†åˆ†éš”å€¼æ’å…¥åˆ°çˆ¶ç»“ç‚¹ä¸­ï¼Œè¿™ä¹Ÿå¯èƒ½ä¼šé€ æˆçˆ¶ç»“ç‚¹å‘ç”Ÿåˆ†è£‚ï¼Œçˆ¶ç»“ç‚¹çš„åˆ†è£‚ä¹Ÿå¯èƒ½ä¼šé€ æˆå®ƒçš„çˆ¶ç»“ç‚¹åˆ†è£‚ï¼Œä»¥æ­¤ç±»æ¨ï¼›å¦‚æœæ²¡æœ‰çˆ¶ç»“ç‚¹ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°çš„çˆ¶ç»“ç‚¹ã€‚ åˆ é™¤ åˆ é™¤ B æ ‘ä¸­çš„ç»“ç‚¹æœ‰ä¸¤ç§å¸¸ç”¨çš„ç­–ç•¥ï¼š\nå®šä½å¹¶åˆ é™¤å…ƒç´ ï¼Œç„¶åè°ƒæ•´æ ‘ä½¿å®ƒæ»¡è¶³çº¦æŸæ¡ä»¶ ä»ä¸Šåˆ°ä¸‹å¤„ç†è¿™æ£µæ ‘ï¼Œåœ¨è¿›å…¥ä¸€ä¸ªç»“ç‚¹ä¹‹å‰ï¼Œè°ƒæ•´æ ‘ä½¿å¾—å…¶ä¹‹åä¸€æ—¦é‡åˆ°è¦åˆ é™¤çš„é”®ï¼Œå¯ä»¥è¢«ç›´æ¥åˆ é™¤è€Œä¸éœ€è¦å†è¿›è¡Œè°ƒæ•´ å¯¹äºå‰ä¸€ç§åˆ é™¤ç­–ç•¥ï¼Œå…¶åˆ é™¤æµç¨‹å¦‚ä¸‹ï¼š\nå¦‚æœåˆ é™¤å¶å­ç»“ç‚¹ä¸­çš„å…ƒç´ ï¼Œå°†å®ƒç›´æ¥åˆ é™¤ï¼Œå¦‚æœç»“ç‚¹ä¸­çš„å…ƒç´ æ•°é‡å°äºæœ€å°å€¼ï¼Œåˆ™è¿›è¡Œé‡æ–°å¹³è¡¡æ“ä½œï¼› å¦‚æœåˆ é™¤éå¶å­ç»“ç‚¹ä¸­çš„å…ƒç´ ï¼Œé€‰æ‹©ä¸€ä¸ªæ–°çš„åˆ†éš”å€¼ï¼ˆå·¦å­æ ‘ä¸­æœ€å¤§çš„å…ƒç´ æˆ–å³å­æ ‘ä¸­æœ€å°çš„å…ƒç´ ï¼‰ï¼Œå°†å®ƒä»å¶å­ç»“ç‚¹ä¸­ç§»é™¤ï¼Œæ›¿æ¢æ‰è¢«åˆ é™¤çš„å…ƒç´ ä½œä¸ºæ–°çš„åˆ†éš”å€¼ï¼Œå¦‚æœè¯¥å¶å­ç»“ç‚¹ä¸­çš„å…ƒç´ æ•°é‡å°äºæœ€å°å€¼ï¼Œåˆ™è¿›è¡Œé‡æ–°å¹³è¡¡æ“ä½œï¼› é‡æ–°å¹³è¡¡æ“ä½œä»å¶å­ç»“ç‚¹å¼€å§‹ï¼Œå‘æ ¹ç»“ç‚¹è¿›è¡Œï¼Œç›´åˆ°æ ‘é‡æ–°å¹³è¡¡ã€‚ åœ¨åˆ é™¤ç»“ç‚¹ä¸­ï¼Œä½¿ B æ ‘é‡æ–°å¹³è¡¡ä¸»è¦ä¼šæœ‰ä»¥ä¸‹æƒ…å†µï¼š\nå¦‚æœç¼ºå°‘å…ƒç´ ç»“ç‚¹çš„å³å…„å¼Ÿç»“ç‚¹å­˜åœ¨ä¸”æ‹¥æœ‰å¤šä½™çš„å…ƒç´ ï¼Œé‚£ä¹ˆå‘å·¦æ—‹è½¬ï¼š å°†çˆ¶ç»“ç‚¹çš„åˆ†éš”å€¼ç§»åŠ¨åˆ°å·¦å­æ ‘ä¸­æœ€å¤§å…ƒç´ å¤„ï¼› å°†å³å…„å¼Ÿç»“ç‚¹çš„æœ€å°å…ƒç´ ç§»åŠ¨åˆ°åŸçˆ¶ç»“ç‚¹çš„åˆ†éš”å€¼å¤„ï¼› å¦‚æœç¼ºå°‘å…ƒç´ ç»“ç‚¹çš„å·¦å…„å¼Ÿç»“ç‚¹å­˜åœ¨ä¸”æ‹¥æœ‰å¤šä½™çš„å…ƒç´ ï¼Œé‚£ä¹ˆå‘å³æ—‹è½¬ï¼š 3. å°†çˆ¶ç»“ç‚¹çš„åˆ†éš”å€¼ç§»åŠ¨åˆ°å³å­æ ‘ä¸­æœ€å°å…ƒç´ å¤„ï¼› 4. å°†å·¦å…„å¼Ÿç»“ç‚¹çš„æœ€å¤§å…ƒç´ ç§»åŠ¨åˆ°åŸçˆ¶ç»“ç‚¹çš„åˆ†éš”å€¼å¤„ï¼› å¦‚æœç¼ºå°‘å…ƒç´ ç»“ç‚¹çš„ä¸¤ä¸ªç›´æ¥å…„å¼Ÿç»“ç‚¹éƒ½åªæœ‰æœ€å°æ•°é‡çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°†å®ƒä¸å·¦å…„å¼Ÿç»“ç‚¹ä»¥åŠå®ƒä»¬åœ¨çˆ¶ç»“ç‚¹ä¸­çš„åˆ†éš”å€¼åˆå¹¶ï¼š 5. å°†åˆ†éš”å€¼å¤åˆ¶åˆ°å·¦è¾¹çš„ç»“ç‚¹ï¼› 6. å°†æ­¤ç¼ºå°‘å…ƒç´ ç»“ç‚¹ä¸­çš„æ‰€æœ‰å…ƒç´ ç§»åŠ¨åˆ°å·¦è¾¹ç»“ç‚¹ï¼› 7. å°†ç¼ºå°‘å…ƒç´ çš„ç»“ç‚¹ç§»é™¤ï¼› 8. å¦‚æœçˆ¶ç»“ç‚¹æ˜¯æ ¹ç»“ç‚¹ä¸”æ²¡æœ‰å…ƒç´ ï¼Œåˆ™é‡Šæ”¾å®ƒå¹¶è®©åˆå¹¶åçš„ç»“ç‚¹æˆä¸ºæ–°çš„æ ¹ç»“ç‚¹ï¼›å¦‚æœçˆ¶ç»“ç‚¹çš„å…ƒç´ æ•°é‡å°äºæœ€å°å€¼ï¼Œé‡æ–°å¹³è¡¡çˆ¶ç»“ç‚¹ã€‚ å¯¹ B æ ‘åšåˆ é™¤å…ƒç´ çš„æ“ä½œæ¯”è¾ƒå¤æ‚ï¼Œä½†ä»ç„¶æ˜¯ä»¥ä¿æŒ B æ ‘å¹³è¡¡ä¸ºä¸»ï¼Œå¹¶ä¸”ä¸ä½¿å…¶å¯¼è‡´ç‰¹æ€§å¤±æ•ˆã€‚\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/b-tree-basic.html","title":"B æ ‘çš„ç®€å•è®¤è¯†"},{"content":"AVL æ ‘æ˜¯æœ€æ—©è¢«å‘æ˜çš„è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œåœ¨ AVL æ ‘ä¸­ï¼Œä»»æ„ç»“ç‚¹çš„ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦æœ€å¤§å·®åˆ«ä¸º 1ï¼Œæ‰€ä»¥å®ƒä¹Ÿè¢«ç§°ä¸ºé«˜åº¦å¹³è¡¡æ ‘ï¼Œå…¶æœ¬è´¨ä»ç„¶æ˜¯ä¸€é¢—äºŒå‰æŸ¥æ‰¾æ ‘ã€‚\nåŸºæœ¬æ¦‚å¿µ ç»“åˆäºŒå‰æŸ¥æ‰¾æ ‘çš„ç‰¹æ€§ï¼Œä»¥åŠ AVL æ ‘è‡ªèº«çš„ç‰¹æ€§ï¼ŒAVL æ ‘å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š\nè‹¥ä»»æ„ç»“ç‚¹çš„å·¦å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ è‹¥ä»»æ„ç»“ç‚¹çš„å³å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºæˆ–ç­‰äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ ä»»æ„ç»“ç‚¹çš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘ ä»»æ„ç»“ç‚¹çš„å­æ ‘çš„é«˜åº¦å·®éƒ½å°äºç­‰äº 1 ä¸Šè¿°çš„å‰ä¸‰é¡¹æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘çš„ç‰¹æ€§ï¼Œç¬¬å››é¡¹æ˜¯ AVL æ ‘è‡ªå¹³è¡¡çš„ç‰¹æ€§ã€‚\nå®ç°åŸç† ä¸ºäº†ä¿è¯äºŒå‰æ ‘çš„å¹³è¡¡ï¼ŒAVL æ ‘å¼•å…¥äº†ç›‘ç£æœºåˆ¶ï¼Œå°±æ˜¯åœ¨æ ‘çš„æŸä¸€éƒ¨åˆ†çš„ä¸å¹³è¡¡åº¦è¶…è¿‡ä¸€ä¸ªé˜ˆå€¼åè§¦å‘ç›¸åº”çš„å¹³è¡¡æ“ä½œï¼Œä¿è¯æ ‘çš„å¹³è¡¡åº¦åœ¨å¯ä»¥æ¥å—çš„èŒƒå›´å†…ã€‚\næ—¢ç„¶å¼•å…¥äº†ç›‘ç£æœºåˆ¶ï¼Œåˆ™å¿…ç„¶éœ€è¦ä¸€ä¸ªç›‘ç£æŒ‡æ ‡ï¼Œä»¥æ­¤æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œå¹³è¡¡æ“ä½œï¼Œè¿™ä¸ªç›‘ç£æŒ‡æ ‡è¢«ç§°ä¸º å¹³è¡¡å› å­ï¼ˆBalance Factorï¼‰ã€‚å…¶å®šä¹‰å¦‚ä¸‹ï¼š\næŸä¸ªç»“ç‚¹çš„å³å­æ ‘çš„é«˜åº¦å‡å»å·¦å­æ ‘çš„é«˜åº¦å¾—åˆ°çš„å·®å€¼ã€‚\nåŸºäºå¹³è¡¡å› å­ï¼Œå°±å¯ä»¥è¿™æ ·å®šä¹‰ AVL æ ‘ï¼š\næ‰€æœ‰ç»“ç‚¹çš„å¹³è¡¡å› å­çš„ç»å¯¹å€¼éƒ½ä¸è¶…è¿‡ 1 çš„äºŒå‰æŸ¥æ‰¾æ ‘ã€‚\nä¸ºäº†è®¡ç®—å¹³è¡¡å› å­ï¼Œè‡ªç„¶éœ€è¦åœ¨ç»“ç‚¹ä¸­å¼•å…¥é«˜åº¦è¿™ä¸€å±æ€§ã€‚ç»“ç‚¹çš„é«˜åº¦ä¸ºä»¥ä¸‹å®šä¹‰ï¼š\nå·¦å³å­æ ‘çš„é«˜åº¦çš„æœ€å¤§å€¼ã€‚\ntypeof struct AVLNode { struct AVLNode *left; // å·¦å­æ ‘ struct AVLNode *right; // å³å­æ ‘ int height; // å½“å‰ç»“ç‚¹çš„é«˜åº¦ int value; // å½“å‰ç»“ç‚¹çš„å€¼ } è‡ªå¹³è¡¡ è‡ªå¹³è¡¡æ˜¯æŒ‡åœ¨å¯¹å¹³è¡¡äºŒå‰æ ‘æ‰§è¡Œæ’å…¥æˆ–åˆ é™¤ç»“ç‚¹æ“ä½œåï¼Œå¯èƒ½ä¼šå¯¼è‡´æ ‘ä¸­æŸä¸ªç»“ç‚¹çš„å¹³è¡¡å› å­ç»å¯¹å€¼è¶…è¿‡ 1ï¼Œå³å¹³è¡¡äºŒå‰æ ‘å˜å¾—â€œä¸å¹³è¡¡â€ï¼Œä¸ºäº†æ¢å¤è¯¥ç»“ç‚¹å·¦å³å­æ ‘çš„å¹³è¡¡ï¼Œæ­¤æ—¶éœ€è¦å¯¹ç»“ç‚¹æ‰§è¡Œæ—‹è½¬æ“ä½œã€‚\näºŒå‰æ ‘çš„å¹³è¡¡åŒ–æœ‰ä¸¤å¤§åŸºç¡€æ“ä½œï¼šå·¦æ—‹å’Œå³æ—‹ã€‚å·¦æ—‹ï¼Œå³æ˜¯é€†æ—¶é’ˆæ—‹è½¬ï¼›å³æ—‹ï¼Œå³æ˜¯é¡ºæ—¶é’ˆæ—‹è½¬ã€‚\nè¿™ä¸¤ç§æ“ä½œéƒ½æ˜¯ä»å¤±å»å¹³è¡¡çš„æœ€å°å­æ ‘æ ¹ç»“ç‚¹å¼€å§‹çš„ï¼ˆå³ç¦»æ’å…¥ç»“ç‚¹æœ€è¿‘ä¸”å¹³è¡¡å› å­è¶…è¿‡ 1 çš„ç¥–ç»“ç‚¹ï¼‰ã€‚\nå·¦æ—‹ æ‰€è°“å·¦æ—‹æ“ä½œï¼Œå°±æ˜¯æŠŠä¸Šå›¾ä¸­çš„ B ç»“ç‚¹å’Œ A ç»“ç‚¹è¿›è¡Œæ‰€è°“â€œçˆ¶å­äº¤æ¢â€ã€‚åœ¨ä»…æœ‰è¿™ä¸‰ä¸ªç»“ç‚¹æ—¶å€™ï¼Œæ˜¯ååˆ†ç®€å•çš„ã€‚ä½†æ˜¯å½“ B ç»“ç‚¹å¤„å­˜åœ¨å·¦å­©å­æ—¶ï¼Œäº‹æƒ…å°±å˜å¾—æœ‰ç‚¹å¤æ‚äº†ã€‚\né€šå¸¸çš„æ“ä½œæ˜¯ï¼šç»“ç‚¹ B æŠ›å¼ƒå·¦å­©å­ï¼Œå°†ä¹‹ä¸æ—‹è½¬åçš„ç»“ç‚¹ A ç›¸è¿ï¼Œæˆä¸ºç»“ç‚¹ A çš„å³å­©å­ã€‚\nå³æ—‹ æ‰€è°“å³æ—‹æ“ä½œï¼Œå°±æ˜¯æŠŠä¸Šå›¾ä¸­çš„ B ç»“ç‚¹å’Œ C ç»“ç‚¹è¿›è¡Œæ‰€è°“â€œçˆ¶å­äº¤æ¢â€ã€‚åœ¨ä»…æœ‰è¿™ä¸‰ä¸ªç»“ç‚¹æ—¶å€™ï¼Œä¹Ÿæ˜¯æ˜¯ååˆ†ç®€å•çš„ã€‚ä½†æ˜¯å½“ B ç»“ç‚¹å¤„å­˜åœ¨å³å­©å­æ—¶ï¼Œäº‹æƒ…å°±å˜å¾—æœ‰ç‚¹å¤æ‚äº†ã€‚\nè¿™æ—¶é€šå¸¸çš„æ“ä½œæ˜¯ï¼šç»“ç‚¹ B æŠ›å¼ƒå³å­©å­ï¼Œå°†ä¹‹å’Œæ—‹è½¬åçš„ç»“ç‚¹ C ç›¸è¿ï¼Œæˆä¸ºç»“ç‚¹ C çš„å·¦å­©å­ã€‚\nå•æ¬¡æ—‹è½¬ - LL LL å‹åˆè¢«ç§°ä¸ºâ€œå·¦å·¦â€ï¼Œä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å¾—å‡ºï¼ŒA ç»“ç‚¹çš„å¹³è¡¡å› å­ç»å¯¹å€¼è¾¾åˆ°äº† 2ï¼Œéœ€è¦è¿›è¡Œä¿®å¤æ‰èƒ½é‡æ–°æˆä¸ºä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚F ç»“ç‚¹ä¸ºæ–°æ’å…¥çš„ç»“ç‚¹ï¼Œä¼˜å…ˆä¼šç»è¿‡ A ç»“ç‚¹çš„ å·¦å­©å­ B ç»“ç‚¹ï¼Œæœ€ç»ˆè½åˆ° B ç»“ç‚¹çš„ å·¦å­æ ‘ ä¸Šï¼Œè¿™å³æ˜¯â€œå·¦å·¦â€çš„æ¥ç”±ã€‚\nå¯ä»¥ä½¿ç”¨å¹³è¡¡å› å­æ¥å®šä¹‰ LL æƒ…å†µï¼šA ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º -2ï¼Œå·¦å­©å­ B ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º -1ã€‚\nè¿™æ—¶å€™ä»…éœ€è¦å¯¹ A ç»“ç‚¹åšä¸€æ¬¡ å³æ—‹ çš„æ“ä½œå³å¯è¾¾åˆ°å¹³è¡¡çŠ¶æ€ï¼š\nå•æ¬¡æ—‹è½¬ - RR RR å‹åˆè¢«ç§°ä¸ºâ€œå³å³â€ï¼Œä¸ä¸Šé¢çš„ LL å‹ å…·æœ‰å¯¹ç§°æ€§ï¼Œå±•ç¤ºçš„æƒ…å†µå¦‚ä¸‹ï¼š\nä¹Ÿå¯ä»¥ä½¿ç”¨å¹³è¡¡å› å­æ¥å®šä¹‰ï¼šA ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º 2ï¼Œå³å­©å­ C ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º 1ã€‚\nè¿™é‡Œåˆ™æ˜¯ä»…éœ€è¦å¯¹ A ç»“ç‚¹åšä¸€æ¬¡ å·¦æ—‹ çš„æ“ä½œå³å¯è¾¾åˆ°å¹³è¡¡çŠ¶æ€ï¼š\nåŒæ¬¡æ—‹è½¬ - LR ä½¿ç”¨å¹³è¡¡å› å­å®šä¹‰ LR å‹ä¸ºï¼šA ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º -2ï¼Œå·¦å­©å­ B ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º 1ã€‚\nä¸‹é¢æœ‰ä¸€ä¸ªä¾‹å­ï¼š\nç¬¬ä¸€æ­¥ï¼šå¯¹ A ç»“ç‚¹çš„å·¦å­ç»“ç‚¹ï¼ˆB ç»“ç‚¹ï¼‰æ‰§è¡Œå·¦æ—‹æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ª LL å‹çš„ç»“æ„ï¼š\nç¬¬äºŒæ­¥ï¼šå¯¹ A ç»“ç‚¹æ‰§è¡Œå³æ—‹æ“ä½œï¼š\nåŒæ¬¡æ—‹è½¬ - RL RL å‹å’Œä¸Šé¢çš„ LR å‹å¯¹ç§°ï¼ŒA ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º 2ï¼Œå³å­©å­ C ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º -1ã€‚\nç¬¬ä¸€æ­¥ï¼šå¯¹ A ç»“ç‚¹çš„å³å­ç»“ç‚¹ï¼ˆC ç»“ç‚¹ï¼‰æ‰§è¡Œå³æ—‹æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ª RR å‹çš„ç»“æ„ï¼š\nç¬¬äºŒæ­¥ï¼šå¯¹ A ç»“ç‚¹æ‰§è¡Œå·¦æ—‹æ“ä½œï¼š\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/avl-tree-basic.html","title":"AVL æ ‘çš„ç®€å•è®¤è¯†"},{"content":"æœ‰åºçš„æ•°ç»„å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•å¿«é€Ÿæ£€ç´¢ä¸€ä¸ªæ•°æ®ï¼Œä½†æ˜¯åŒä¸ºçº¿æ€§è¡¨ç»“æ„çš„é“¾è¡¨æ²¡æœ‰åŠæ³•ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œè€Œè·³è¡¨çªç ´äº†è¿™ä¸ªé™åˆ¶ï¼Œå…è®¸é“¾è¡¨ä½¿ç”¨ç±»ä¼¼äºäºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•æŸ¥æ‰¾æ•°æ®ã€‚\nå›¾è§£åˆ†æ å¯¹äºä¸€ä¸ªå•å‘é“¾è¡¨æ¥è¯´ï¼Œå³ä½¿é“¾è¡¨ä¸­å­˜å‚¨çš„æ˜¯æœ‰åºçš„æ•°æ®ï¼Œä½†å¦‚æœæƒ³è¦ä»ä¸­æŸ¥æ‰¾æŸä¸ªæ•°æ®æ—¶ï¼Œä¹Ÿåªèƒ½ä»å¤´åˆ°å°¾éå†é“¾è¡¨ï¼Œå…¶æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$ã€‚\nä¸ºäº†æé«˜é“¾è¡¨çš„æŸ¥è¯¢æ•ˆç‡ï¼Œä½¿å…¶æ”¯æŒç±»ä¼¼â€œäºŒåˆ†æŸ¥æ‰¾â€çš„æ–¹æ³•ï¼Œå¯¹é“¾è¡¨è¿›è¡Œå¤šå±‚æ¬¡æ‰©å±•ï¼Œè¿™æ ·çš„æ•°æ®ç»“æ„å°±æ˜¯ è·³è¡¨ã€‚è·³è¡¨å¯¹æ ‡çš„æ˜¯å¹³è¡¡æ ‘ï¼Œæ˜¯ä¸€ç§æå‡é“¾è¡¨æ’å…¥ã€åˆ é™¤ã€æœç´¢æ•ˆç‡çš„æ•°æ®ç»“æ„ã€‚\né¦–å…ˆï¼Œè·³è¡¨å¤„ç†çš„æ˜¯ æœ‰åº çš„é“¾è¡¨ï¼Œä¸€èˆ¬ä½¿ç”¨åŒå‘é“¾è¡¨æ›´åŠ æ–¹ä¾¿ã€‚\nç„¶åï¼Œæ¯ä¸¤ä¸ªç»“ç‚¹æå–ä¸€ä¸ªç»“ç‚¹åˆ°ä¸Šä¸€çº§ï¼Œæå–çš„è¿™ä¸€å±‚è¢«ç§°ä½œä¸º ç´¢å¼•å±‚ã€‚\nè¿™æ—¶å€™ï¼Œå½“æƒ³è¦æŸ¥æ‰¾ 19 è¿™ä¸ªæ•°å­—ï¼Œå¯ä»¥å…ˆä»ç´¢å¼•å±‚å¼€å§‹æŸ¥æ‰¾ï¼›å½“åˆ°è¾¾ 17 æ—¶ï¼Œå‘ç°ä¸‹ä¸€ä¸ªç»“ç‚¹å­˜å‚¨ 21 è¿™ä¸ªæ•°å­—ï¼Œåˆ™å¯ä»¥ç¡®å®šï¼Œæƒ³è¦æŸ¥æ‰¾çš„ 19 è‚¯å®šæ˜¯åœ¨ 17 åˆ° 21 ä¹‹é—´ï¼›è¿™æ—¶å€™å¯ä»¥è½¬åˆ°ä¸‹ä¸€å±‚ï¼ˆåŸå§‹é“¾è¡¨ï¼‰ä¸­æŸ¥æ‰¾ï¼Œå¿«é€Ÿä» 17 å¼€å§‹æ£€ç´¢ï¼Œå¾ˆå¿«å°±å¯ä»¥æŸ¥æ‰¾å‡º 19 è¿™ä¸ªæ•°å­—ã€‚\nåŠ å…¥ä¸€å±‚ç´¢å¼•ä¹‹åï¼ŒæŸ¥æ‰¾ä¸€ä¸ªç»“ç‚¹éœ€è¦éå†çš„ç»“ç‚¹ä¸ªæ•°å‡å°‘äº†ï¼Œä¹Ÿå°±æ˜¯æŸ¥æ‰¾æ•ˆç‡æé«˜äº†ã€‚å®é™…ä¸Šï¼Œä¸€èˆ¬ä¼šæ–°å¢å¤šå±‚ç´¢å¼•ï¼Œæ‹¥æœ‰å¤šå±‚ç´¢å¼•çš„è·³è¡¨ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªç»“ç‚¹éœ€è¦éå†çš„ç»“ç‚¹ä¸ªæ•°å°†å†æ¬¡å‡å°‘ã€‚\nè¿™ç§é“¾è¡¨åŠ å¤šå±‚ç´¢å¼•çš„ç»“æ„ï¼Œå°±æ˜¯è·³è¡¨ã€‚\næ•ˆç‡åˆ†æ ä¸ºäº†æ–¹ä¾¿å¯¹è·³è¡¨çš„æ•ˆç‡åšåˆ†æï¼Œåœ¨è¿™é‡Œè®¾å®šä¸€ä¸ªå¸¸è§çš„è·³è¡¨ç±»å‹ã€‚\nå‡è®¾æ¯ä¸¤ä¸ªç»“ç‚¹ä¼šæŠ½å‡ºä¸€ä¸ªç»“ç‚¹ä½œä¸ºä¸Šä¸€çº§ç´¢å¼•çš„ç»“ç‚¹ï¼Œé‚£ç¬¬ä¸€çº§çš„ç´¢å¼•ä¸ªæ•°å¤§çº¦å°±æ˜¯ $\\frac{n}{2}$ï¼Œç¬¬äºŒçº§çš„ç´¢å¼•ä¸ªæ•°å¤§çº¦å°±æ˜¯ $\\frac{n}{4}$ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç¬¬ k ä¸ªç´¢å¼•çš„ç»“ç‚¹ä¸ªæ•°æ˜¯ç¬¬ k-1 ä¸ªç´¢å¼•çš„ç»“ç‚¹ä¸ªæ•°çš„ $\\frac{1}{2}$ï¼Œé‚£ä¹ˆï¼Œç¬¬ k ä¸ªç´¢å¼•çš„ç»“ç‚¹ä¸ªæ•°å°±æ˜¯ $\\frac{n}{2^k}$ã€‚\næ—¶é—´å¤æ‚åº¦ å‡è®¾ç´¢å¼•æ€»å…±æœ‰ h çº§ï¼Œæœ€é«˜çº§çš„ç´¢å¼•æœ‰ 2 ä¸ªç»“ç‚¹ï¼Œä½¿ç”¨å…¬å¼ $\\frac{n}{2^h} = 2$ è¿›è¡Œåæ¨ï¼Œå¯ä»¥è®¡ç®—å¾—å‡º $h = \\log_2 n - 1$ï¼Œå¦‚æœåŒ…å«åŸå§‹é“¾è¡¨é‚£ä¸€çº§ï¼Œè·³è¡¨çš„é«˜åº¦å°±æ˜¯ $\\log_2 n$ çº§ã€‚\nå½“æƒ³è¦ä»è·³è¡¨ä¸­æŸ¥è¯¢æŸä¸ªæ•°æ®æ—¶ï¼Œæ¯å±‚éƒ½ä¼šéå† m ä¸ªç»“ç‚¹ï¼Œé‚£ä¹ˆï¼Œåœ¨è·³è¡¨ä¸­æŸ¥è¯¢ä¸€ä¸ªæ•°æ®çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(m \\log n)$ã€‚\nä»ä¸Šé¢å›¾ä¸­å¯çŸ¥ï¼Œåœ¨æ¯ä¸€çº§ç´¢å¼•ä¸­æœ€å¤šåªéœ€è¦éå† 3 ä¸ªç»“ç‚¹ï¼Œå…¶å®å°±å¯ä»¥çœ‹ä½œæ˜¯ m = 3ã€‚\nå®é™…å°±æ˜¯ï¼Œåœ¨æœ€é«˜çº§ç´¢å¼•æ—¶æœ€å¤šéå† 3 ä¸ªç»“ç‚¹ï¼Œå½“éœ€è¦åœ¨ä¸‹ä¸€çº§ç´¢å¼•ä¸­ç»§ç»­æ£€ç´¢æ—¶ï¼Œç®—ä¸Šå‰åä¸¤ä¸ªå½“åšèŒƒå›´çš„ç»“ç‚¹ä¹Ÿåªæœ‰ 3 ä¸ªï¼Œå› æ­¤ï¼Œåœ¨æ¯ä¸€çº§ç´¢å¼•æœ€å¤šåªéœ€è¦éå† 3 ä¸ªç»“ç‚¹ã€‚\nå¦‚æœç»†ç©¶çš„è¯ï¼Œm çš„å€¼ä¸æŠ½å–ç´¢å¼•å€¼çš„é—´éš”æœ‰ç›´æ¥å…³ç³»ï¼Œä½†æ˜¯åªæ˜¯è®¡ç®—æ—¶é—´å¤æ‚åº¦çš„è¯ï¼Œå¯ä»¥å°† m å€¼çœ‹ä½œæ˜¯ä¸€ä¸ªå¸¸æ•°ã€‚\nå› æ­¤ï¼Œåœ¨è·³è¡¨ä¸­åšæ£€ç´¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(\\log n)$ã€‚\nç©ºé—´å¤æ‚åº¦ åŒæ ·çš„ï¼Œå‡è®¾æ¯ä¸¤ä¸ªç»“ç‚¹ä¼šæŠ½å‡ºä¸€ä¸ªç»“ç‚¹ä½œä¸ºä¸Šä¸€çº§ç´¢å¼•çš„ç»“ç‚¹ï¼Œé‚£ç¬¬ä¸€çº§çš„ç´¢å¼•ä¸ªæ•°å¤§çº¦å°±æ˜¯ $\\frac{n}{2}$ï¼Œç¬¬äºŒçº§çš„ç´¢å¼•ä¸ªæ•°å¤§çº¦å°±æ˜¯ $\\frac{n}{4}$ï¼Œä¾æ¬¡ç±»æ¨ï¼Œæœ€ç»ˆç´¢å¼•å ç”¨çš„ç©ºé—´å°†æ˜¯ $\\frac{n}{2} + \\frac{n}{4} + \u0026hellip; + 4 + 2 = n - 2$ã€‚\næ‰€ä»¥ï¼Œè·³è¡¨çš„ç©ºé—´å¤æ‚åº¦æ˜¯ $O(n)$ã€‚\nå®é™…ä¸Šï¼Œè·³è¡¨æ˜¯ä¸€ç§ä½¿ç”¨ç©ºé—´æ¢æ—¶é—´çš„æ•°æ®ç»“æ„ï¼Œä»¥å¢åŠ ç´¢å¼•çš„æ–¹å¼ï¼Œæé«˜æ£€ç´¢æ•°æ®çš„æ•ˆç‡ã€‚å› æ­¤ï¼Œè·³è¡¨ä¼šæ¯”æ™®é€šé“¾è¡¨è€—è´¹æ›´å¤šå†…å­˜è¿›è¡Œæ•°æ®å­˜å‚¨ã€‚\nç»“ç‚¹é—´éš” åœ¨ä¸Šè¿°åˆ†æè·³è¡¨çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æ—¶ï¼Œéƒ½æ˜¯ä»¥æ¯ä¸¤ä¸ªç»“ç‚¹æŠ½å‡ºä¸€ä¸ªç»“ç‚¹ä½œä¸ºä¸Šä¸€çº§ç´¢å¼•çš„ç»“ç‚¹ã€‚\nå®é™…ä¸Šï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ 3 ä¸ªç»“ç‚¹æˆ– 4 ä¸ªç»“ç‚¹ç”šè‡³æ›´å¤šç»“ç‚¹åšé—´éš”ã€‚å½“ç„¶ï¼Œä»¥ä¸åŒä¸ªæ•°ç»“ç‚¹åšé—´éš”æ—¶ï¼Œæ£€ç´¢æ•ˆç‡å’Œå†…å­˜å ç”¨éƒ½ä¼šæœ‰äº›ä¸ä¸€æ ·ã€‚\nå‡è®¾ä»¥ 3 ä¸ªç»“ç‚¹åšé—´éš”ï¼Œå ç”¨çš„ç©ºé—´ä¼šæœ‰æ‰€é™ä½ï¼Œåœ¨è¿™ä¸ªè·³è¡¨ä¸Šåšæ£€ç´¢æ“ä½œæ—¶ï¼Œæ£€ç´¢çš„æ•ˆç‡ä¹Ÿä¼šæœ‰ä¸€äº›é™ä½ã€‚\nå› ä¸ºåœ¨æ¯ä¸€çº§ç´¢å¼•æ£€ç´¢çš„æœ€å¤šç»“ç‚¹ä¸ªæ•°å°†ä» 2 ä¸ªå˜æˆ 3 ä¸ªï¼Œè·³è¡¨çš„é«˜åº¦æ˜¯ $\\log_3 n$ çº§ï¼Œæœ€ç»ˆå ç”¨çš„ç©ºé—´å°†æ˜¯ $\\frac{n}{3} + \\frac{n}{9} + \u0026hellip; + 3 + 1 = \\frac{n}{2}$ã€‚\nåœ¨ç†è®ºä¸Šï¼Œä»¥ 3 ä¸ªç»“ç‚¹åšé—´éš”çš„è·³è¡¨ä¸ä»¥ 2 ä¸ªç»“ç‚¹åšé—´éš”çš„è·³è¡¨çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ï¼Œå®é™…æ“ä½œæ—¶ï¼Œä»¥ 3 ä¸ªç»“ç‚¹åšé—´éš”çš„è·³è¡¨çš„ç©ºé—´å ç”¨ä¼šæ¯”ä»¥ 2 ä¸ªç»“ç‚¹åšé—´éš”çš„è·³è¡¨æ›´ä¼˜ä¸€äº›ã€‚\nå®é™…ä¸Šï¼Œåœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œä¸å¿…å¤ªåœ¨æ„ç´¢å¼•å ç”¨çš„é¢å¤–ç©ºé—´ã€‚è™½ç„¶åŸå§‹é“¾è¡¨ä¸­å­˜å‚¨çš„æœ‰å¯èƒ½æ˜¯å¾ˆå¤§çš„å¯¹è±¡ï¼Œä½†ç´¢å¼•ç»“ç‚¹å¯ä»¥åªå­˜å‚¨å…³é”®å€¼å’Œå‡ ä¸ªæŒ‡é’ˆï¼Œå¹¶ä¸éœ€è¦å­˜å‚¨å¯¹è±¡ï¼Œæ‰€ä»¥å½“å¯¹è±¡æ¯”ç´¢å¼•ç»“ç‚¹å¤§å¾ˆå¤šæ—¶ï¼Œé‚£ç´¢å¼•å ç”¨çš„é¢å¤–ç©ºé—´å°±å¯ä»¥å¿½ç•¥äº†ã€‚\nåŠ¨æ€æ’å…¥å’Œåˆ é™¤ ä¸Šé¢ç†è§£çš„è·³è¡¨éƒ½æ˜¯é™æ€çš„ï¼Œå®é™…å¼€å‘ä¸­ï¼Œè·³è¡¨åœ¨æ–°å¢ã€åˆ é™¤ç»“ç‚¹æ—¶éœ€è¦åšåŠ¨æ€å¤„ç†ï¼Œå¦åˆ™å®¹æ˜“å¯¼è‡´æ£€ç´¢æ•ˆç‡é™ä½ã€‚\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœé¢‘ç¹æ’å…¥ç»“ç‚¹ï¼Œè€Œæ²¡æœ‰å¯¹ç´¢å¼•å±‚åšåŠ¨æ€å¤„ç†ï¼Œå¾ˆå®¹æ˜“å‡ºç°ä¸æ»¡è¶³ä¸€å¼€å§‹è®¾å®šçš„è·³è¡¨è§„åˆ™ã€‚\nåˆ é™¤é“¾è¡¨çš„ç»“ç‚¹æ—¶ä¹Ÿæ˜¯åŒæ ·é“ç†ï¼Œå¦‚æœåˆ é™¤ç»“ç‚¹è€Œæ²¡æœ‰æ›´æ–°ç´¢å¼•å±‚ï¼Œç´¢å¼•å±‚å®¹æ˜“å‡ºç°å·²è¢«åˆ é™¤çš„è„ç»“ç‚¹ã€‚\né‡å»ºç´¢å¼• æ¯”è¾ƒå®¹æ˜“ç†è§£çš„æ–¹æ³•å°±æ˜¯é‡å»ºç´¢å¼•ï¼Œå½“æ¯æ¬¡æ’å…¥ã€åˆ é™¤ç»“ç‚¹çš„æ—¶å€™ï¼ŒæŠŠæ•´ä¸ªè·³è¡¨çš„æ‰€æœ‰ç´¢å¼•å±‚åˆ é™¤é‡å»ºã€‚\nä½†æ˜¯è¿™ç§æ–¹æ³•ä¼šé™ä½æ’å…¥ç»“ç‚¹æ—¶çš„æ•ˆç‡ï¼Œå·²çŸ¥è·³è¡¨çš„ç©ºé—´å¤æ‚åº¦æ˜¯ $O(n)$ï¼Œä¹Ÿå¯ä»¥æ¨æ–­å‡ºé‡å»ºè·³è¡¨ç´¢å¼•å±‚çš„æ—¶é—´å¤æ‚è‡³å°‘æ˜¯ $O(n)$ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨é‡å»ºç´¢å¼•çš„æ–¹å¼ï¼Œè·³è¡¨æ’å…¥ç»“ç‚¹è€—è´¹æ—¶é—´å°†ä¼šç›´çº¿ä¸Šå‡ã€‚\néšæœºç´¢å¼• ä¸é‡å»ºç´¢å¼•ç›¸æ¯”ï¼Œéšæœºç´¢å¼•çš„æ•ˆç‡ä¼šæ›´é«˜ä¸€äº›ï¼Œåƒ Redis å®ç° SortedSet åº•å±‚ç”¨çš„è·³è¡¨å°±æ˜¯ä½¿ç”¨éšæœºç´¢å¼•çš„æ–¹å¼è¿›è¡ŒåŠ¨æ€å¤„ç†ã€‚\nè¿™é‡Œçš„åšæ³•æ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ªéšæœºå‡½æ•°ï¼Œæ¥å†³å®šè¿™ä¸ªç»“ç‚¹æ’å…¥æ—¶ï¼Œæ˜¯å¦éœ€è¦æ’å…¥åˆ°ç´¢å¼•å±‚ã€ä»¥åŠæ’å…¥åˆ°ç¬¬å‡ çº§ç´¢å¼•ã€‚\nä¸€èˆ¬æ¥è¯´ï¼Œé€šè¿‡éšæœºå‡½æ•°å¾—åˆ°çš„æ•°æ®éƒ½æ˜¯æ¯”è¾ƒå‡åŒ€çš„ï¼Œä¹Ÿè¡¨ç¤ºæœ€ç»ˆå¾—åˆ°çš„è·³è¡¨ç´¢å¼•å±‚ä¹Ÿæ˜¯æ¯”è¾ƒå‡åŒ€ï¼Œè€Œä¸”æ•°æ®é‡è¶Šå¤§ï¼Œç´¢å¼•å±‚è¶Šæ˜¯å‡åŒ€ã€‚\nå…ˆè®¾å®šç´¢å¼•çš„ç”Ÿæˆè§„åˆ™ï¼šä»åŸå§‹é“¾è¡¨ä¸­éšæœºé€‰æ‹© $\\frac{1}{2}$ ä¸ªç»“ç‚¹ä½œä¸ºä¸€çº§ç´¢å¼•ï¼Œä»ä¸€çº§ç´¢å¼•ä¸­éšæœºé€‰æ‹© $\\frac{1}{4}$ ä¸ªç»“ç‚¹ä½œä¸ºäºŒçº§ç´¢å¼•ï¼Œä»¥æ­¤ç±»æ¨ï¼Œä¸€ç›´åˆ°æœ€é¡¶å±‚ç´¢å¼•ã€‚è¿™æ—¶å€™å°±éœ€è¦æ ¹æ®è¿™ä¸ªè§„åˆ™å®Œæˆæ‰€éœ€çš„éšæœºå‡½æ•°ï¼Œå¹¶ä¸”æ˜¯æ¯æ¬¡æ’å…¥ç»“ç‚¹çš„æ—¶å€™ï¼Œéƒ½é€šè¿‡éšæœºå‡½æ•°åˆ¤æ–­è¿™ä¸ªç»“ç‚¹éœ€è¦æ’å…¥åˆ°å‡ çº§ç´¢å¼•ã€‚\nä»¥ä¸‹æ˜¯ Redis æºç å½“ä¸­ä½¿ç”¨åˆ°çš„ éšæœºå‡½æ•°ï¼š\n/* Returns a random level for the new skiplist node we are going to create. * The return value of this function is between 1 and ZSKIPLIST_MAXLEVEL * (both inclusive), with a powerlaw-alike distribution where higher * levels are less likely to be returned. */ int zslRandomLevel(void) { int level = 1; while ((random()\u0026amp;0xFFFF) \u0026lt; (ZSKIPLIST_P * 0xFFFF)) level += 1; return (level\u0026lt;ZSKIPLIST_MAXLEVEL) ? level : ZSKIPLIST_MAXLEVEL; } è¿™ä¸ªéšæœºå‡½æ•°ä¼šéšæœºç”Ÿæˆ 1 åˆ°ç´¢å¼•æœ€é«˜å±‚æ•°ä¹‹é—´çš„ä¸€ä¸ªæ•°å­—ï¼Œè¯¥æ–¹æ³•æœ‰ $\\frac{1}{2}$ çš„æ¦‚ç‡è¿”å› 1ã€æœ‰ $\\frac{1}{4}$ çš„æ¦‚ç‡è¿”å› 2ã€æœ‰ $\\frac{1}{8}$ çš„æ¦‚ç‡è¿”å› 3ã€ä»¥æ­¤ç±»æ¨ã€‚å…¶ä¸­ 1 è¡¨ç¤ºä¸éœ€è¦ç”Ÿæˆç´¢å¼•ï¼Œ2 è¡¨ç¤ºéœ€è¦ç”Ÿæˆä¸€çº§ç´¢å¼•ï¼Œ3 è¡¨ç¤ºéœ€è¦ç”ŸæˆäºŒçº§ç´¢å¼•ï¼Œä»¥æ­¤ç±»æ¨ã€‚\nä¸ºä»€ä¹ˆä¸æ˜¯è¿”å› 1 æ—¶ç”Ÿæˆä¸€çº§ç´¢å¼•å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œåœ¨ç”Ÿæˆæ¯”ä¸€çº§ç´¢å¼•æ›´é«˜å±‚çº§çš„ç´¢å¼•æ—¶ï¼Œéƒ½ä¼šå‘ä¸‹ç”Ÿæˆç´¢å¼•ï¼Œå³å¦‚æœéšæœºå‡½æ•°è¿”å› 3ï¼Œåˆ™ä¼šç»™è¿™ä¸ªç»“ç‚¹åŒæ—¶ç”ŸæˆäºŒçº§ç´¢å¼•å’Œä¸€çº§ç´¢å¼•ã€‚è¿™æ ·ï¼Œå¦‚æœè¿”å› 1 æ—¶ç”Ÿæˆä¸€çº§ç´¢å¼•åˆ™ä¼šå‡ºç°ç”Ÿæˆä¸€çº§ç´¢å¼•çš„æ¦‚ç‡ä¸º 100%ã€‚\nä½¿ç”¨éšæœºç´¢å¼•æ–¹æ³•çš„è·³è¡¨ï¼Œæ’å…¥ç»“ç‚¹çš„æ—¶é—´å¤æ‚åº¦ä¸è·³è¡¨ç´¢å¼•çš„é«˜åº¦ç›¸åŒï¼Œæœ€ç»ˆæ—¶é—´å¤æ‚åº¦é™åˆ° $O(\\log n)$ï¼Œè€Œä¸æ˜¯é‡å»ºç´¢å¼•çš„ $O(n)$ã€‚\nåº”ç”¨åœºæ™¯ è·³è¡¨å’Œå¹³è¡¡æŸ¥æ‰¾æ ‘ ä¸å¹³è¡¡æŸ¥æ‰¾æ ‘ç›¸æ¯”ï¼Œè·³è¡¨æ‹¥æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š\nè·³è¡¨çš„åº•å±‚åŸå§‹é“¾è¡¨æ”¯æŒèŒƒå›´æŸ¥è¯¢ è·³è¡¨ç›¸å¯¹ç®€å•ï¼Œæ›´å®¹æ˜“ä½¿ç”¨ä»£ç å®ç° è·³è¡¨æ›´åŠ çµæ´»ï¼Œå¯ä»¥é€šè¿‡æ”¹å˜ç´¢å¼•æ„å»ºç­–ç•¥ï¼Œæœ‰æ•ˆå¹³è¡¡æ‰§è¡Œæ•ˆç‡å’Œå†…å­˜æ¶ˆè€— é’ˆå¯¹ä¸Šè¿°çš„ç¬¬ 1 ç‚¹ï¼Œæ”¯æŒèŒƒå›´æŸ¥è¯¢çš„ B+ æ ‘æ›´é€‚ç”¨äºç£ç›˜ï¼Œè·³è¡¨ä¸»è¦ç”¨äºå†…å­˜ä¸­è¯»å–æ•°æ®ã€‚\nLSM-Tree LSM-Tree å…¨ç§°æ˜¯ Log Structured-Merge Treeï¼Œå…¶ä¸­æ–‡åæ˜¯æ—¥å¿—ç»“æ„çš„åˆå¹¶æ ‘ï¼Œæ˜¯ä¸€ç§åˆ†å±‚çš„ã€æœ‰åºçš„ã€åŸºäºç¡¬ç›˜çš„æ•°æ®ç»“æ„ã€‚\nLSM-Tree çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼Œé¦–å…ˆå†™å…¥æ•°æ®åˆ°å†…å­˜ä¸­ï¼Œä¸éœ€è¦æ¯æ¬¡æœ‰æ•°æ®æ›´æ–°æ—¶å°±å¿…é¡»å°†æ•°æ®å†™å…¥åˆ°ç£ç›˜ä¸­ï¼Œå†…å­˜è¾¾åˆ°é˜ˆå€¼ä¹‹åï¼Œå†ä½¿ç”¨å½’å¹¶æ’åºçš„æ–¹å¼å°†å†…å­˜ä¸­çš„æ•°æ®åˆå¹¶è¿½åŠ åˆ°ç£ç›˜é˜Ÿå°¾ã€‚\nå› ä¸ºè·³è¡¨æ°å¥½å°±æ˜¯å¤©ç„¶æœ‰åºçš„ï¼Œæ‰€ä»¥åœ¨ flush çš„æ—¶å€™æ•ˆç‡å¾ˆé«˜ï¼Œé€šå¸¸åŸºäº LSM-Tree ç»“æ„çš„æ•°æ®åº“åœ¨å†…å­˜éƒ¨åˆ†éƒ½ä¼šé€‰æ‹©è·³è¡¨è¿™ç§æ•°æ®ç»“æ„ã€‚\nHBase çš„ MemStore å†…éƒ¨åŸºäº LSM-Tree å®ç°ï¼ŒGoogle å¼€æºçš„ LevelDB ä»¥åŠ Facebook åŸºäº LevelDB ä¼˜åŒ–çš„ RocksDB å†…éƒ¨çš„ MemTable éƒ½æ˜¯åŸºäº LSM-Tree å®ç°ï¼Œå®ƒä»¬éƒ½ä½¿ç”¨åˆ°äº†è·³è¡¨è¿™ä¸€ç»“æ„ã€‚\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/skip-list-basic.html","title":"è·³è¡¨çš„ç®€å•è®¤è¯†"},{"content":"å“ˆå¸Œè¡¨ä¹Ÿè¢«ç§°ä¸ºæ•£åˆ—è¡¨ï¼Œå…¶å®ç°ä½¿ç”¨åˆ°äº†æ•£åˆ—æŠ€æœ¯ï¼Œæ•£åˆ—æŠ€æœ¯åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œæ— é¡»ä»»ä½•æ¯”è¾ƒå°±å¯ä»¥æ‰¾åˆ°å¾…æŸ¥å…³é”®å­—ï¼ŒæŸ¥æ‰¾çš„æ•ˆç‡éå¸¸é«˜ã€‚\nå“ˆå¸Œè¡¨çš„æ¦‚å¿µ æ•£åˆ—æŠ€æœ¯åœ¨è®°å½•çš„å­˜å‚¨ä½ç½®å’Œå®ƒçš„å…³é”®å­—ä¹‹é—´å»ºç«‹ä¸€ä¸ªç¡®å®šçš„å¯¹åº”å…³ç³»ï¼Œä½¿å¾—æ¯ä¸ªå…³é”®å­—å¯¹åº”ä¸€ä¸ªå­˜å‚¨ä½ç½®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„é”®å€¼å¯¹å…³ç³»ã€‚\nå…³é”®å­— å“ˆå¸Œè¡¨ä¸€èˆ¬éƒ½æ˜¯ç”¨åœ¨æŸ¥æ‰¾çš„æ—¶å€™ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬å°†éœ€è¦å­˜å‚¨çš„åŸå§‹æ•°æ®è¢«ç§°ä½œæ˜¯æŸ¥æ‰¾çš„ å…³é”®å­—ã€‚\nå“ˆå¸Œç®—æ³• æ•£åˆ—æŠ€æœ¯çš„å…³é”®åœ¨äºå°†å…³é”®å­—ä¸å­˜å‚¨ä½ç½®å»ºç«‹å¯¹åº”å…³ç³»ï¼Œè¿™ç§å»ºç«‹æ˜ å°„å…³ç³»çš„è§„åˆ™è¢«ç§°ä½œ å“ˆå¸Œç®—æ³•ã€‚\nä¸€èˆ¬çš„å“ˆå¸Œç®—æ³•æ˜¯å°†ä»»æ„é•¿åº¦çš„äºŒè¿›åˆ¶å€¼ä¸²æ˜ å°„ä¸ºå›ºå®šé•¿åº¦çš„äºŒè¿›åˆ¶å€¼ä¸²ï¼Œè€Œè¿™ä¸ªå›ºå®šé•¿åº¦çš„äºŒè¿›åˆ¶å€¼ä¸²å¯ä»¥åŒ¹é…ä¸Šå­˜å‚¨ä½ç½®ã€‚\nå“ˆå¸Œå€¼ é€šè¿‡åŸå§‹æ•°æ®æ˜ å°„ä¹‹åå¾—åˆ°çš„äºŒè¿›åˆ¶å€¼ä¸²å°±æ˜¯ å“ˆå¸Œå€¼ã€‚\nè£…è½½å› å­ å“ˆå¸Œå†²çªæ˜¯éå¸¸å¸¸è§çš„ï¼Œå› æ­¤ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ª è£…è½½å› å­ çš„æ¦‚å¿µï¼Œç”¨æ¥è¡¨ç¤ºå“ˆå¸Œè¡¨ä¸­ç©ºä½çš„å¤šå°‘ï¼Œå…¶è®¡ç®—å…¬å¼ä¸ºï¼š\nå“ˆå¸Œè¡¨çš„è£…è½½å› å­ = å¡«å…¥è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•° / å“ˆå¸Œè¡¨çš„é•¿åº¦ è£…è½½å› å­è¶Šå¤§ï¼Œè¯´æ˜ç©ºé—²ä½ç½®è¶Šå°‘ï¼Œå†²çªè¶Šé¢‘ç¹ï¼Œå“ˆå¸Œè¡¨çš„æ€§èƒ½ä¼šä¸‹é™ã€‚\næ„é€ æ–¹æ³• å“ˆå¸Œè¡¨åˆ©ç”¨äº†æ•°ç»„æ”¯æŒä½¿ç”¨ä¸‹æ ‡å¿«é€Ÿéšæœºè®¿é—®æ•°æ®çš„ç‰¹æ€§ï¼Œä½¿ç”¨æ•°ç»„ä½œä¸ºç‰©ç†å­˜å‚¨ç»“æ„ï¼Œå¯ä»¥ç†è§£ä¸ºå“ˆå¸Œè¡¨æ˜¯æ•°ç»„çš„ä¸€ç§æ‰©å±•ï¼Œä¹Ÿå¯ä»¥è¯´æ²¡æœ‰æ•°ç»„å°±æ²¡æœ‰å“ˆå¸Œè¡¨ã€‚\nå“ˆå¸Œè¡¨é€šå¸¸æ˜¯åŸºäºæ•°ç»„å®ç°çš„ï¼Œå¯¹æ¯”æ•°ç»„ï¼Œå“ˆå¸Œè¡¨è¿˜æ‹¥æœ‰åˆ›å»ºã€åˆ é™¤ã€æŸ¥æ‰¾éƒ½éå¸¸å¿«çš„ä¼˜åŠ¿ï¼Œæ— è®ºæ•°æ®é‡å¤šå¤§ï¼Œè¿™äº›æ“ä½œéƒ½æ¥è¿‘äº $O(1)$ çš„æ—¶é—´å¤æ‚åº¦ï¼›ä½†ç›¸å¯¹ä¹Ÿå­˜åœ¨ä¸€äº›åŠ£åŠ¿ï¼Œå“ˆå¸Œè¡¨ä¸­çš„æ•°æ®æ²¡æœ‰é¡ºåºï¼Œè€Œä¸”ä¸èƒ½åœ¨åŒä¸€å­˜å‚¨åœ°å€å­˜å‚¨é‡å¤çš„å“ˆå¸Œå€¼ã€‚\næ— è®ºæ˜¯ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ï¼Œå®ç°ä¸€ä¸ªå“ˆå¸Œè¡¨æ•°æ®ç»“æ„çš„è¿‡ç¨‹éƒ½å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š\nå®ç°ä¸€ä¸ªå“ˆå¸Œç®—æ³•ï¼› åˆç†è§£å†³å“ˆå¸Œå†²çªï¼› å®ç°å…¶ä»–æ“ä½œæ–¹æ³•ã€‚ å“ˆå¸Œç®—æ³• ä¸€ä¸ªå¥½çš„å“ˆå¸Œç®—æ³•å¯¹äºå“ˆå¸Œè¡¨æ˜¯éå¸¸é‡è¦çš„ï¼Œæ˜¯å“ˆå¸Œè¡¨å…·æœ‰æ¯”è¾ƒä¼˜çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦çš„æ ¹æœ¬ã€‚\nä»€ä¹ˆæ˜¯å¥½çš„å“ˆå¸Œç®—æ³• ç®€å•æ¥è¯´ï¼Œå¥½çš„å“ˆå¸Œç®—æ³•éœ€è¦å…·å¤‡ä¸¤ä¸ªåŸåˆ™ï¼šå¿«é€Ÿè®¡ç®— å’Œ å‡åŒ€åˆ†å¸ƒã€‚\nå…·ä½“æ¥è¯´ï¼Œå®ç°ä¸€ä¸ªå¥½çš„å“ˆå¸Œç®—æ³•ä¼šæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\nå“ˆå¸Œç®—æ³•çš„æ–¹å‘æ˜¯å•å‘çš„ï¼Œä»å“ˆå¸Œå€¼ä¸èƒ½åå‘æ¨å¯¼å‡ºåŸå§‹æ•°æ® å“ˆå¸Œç®—æ³•çš„è½¬æ¢æ˜¯æ•æ„Ÿçš„ï¼ŒåŸå§‹æ•°æ®ä»»ä½•ä¸€ç‚¹å˜åŠ¨ï¼Œå¾—åˆ°çš„å“ˆå¸Œå€¼éƒ½ä¼šå¤§ä¸ç›¸åŒ å“ˆå¸Œå†²çªçš„æ¦‚ç‡è¦æå°çš„ï¼Œä¸åŒçš„åŸå§‹æ•°æ®ï¼Œç»è¿‡å“ˆå¸Œç®—æ³•å¾—åˆ°çš„å“ˆå¸Œå€¼ç›¸åŒçš„æ¦‚ç‡å¾ˆå° å“ˆå¸Œç®—æ³•çš„æ‰§è¡Œæ•ˆç‡æ˜¯é«˜æ•ˆçš„ï¼Œå³ä½¿æ˜¯å¾ˆé•¿çš„æ–‡æœ¬ä¹Ÿèƒ½å¿«é€Ÿè®¡ç®—å‡ºå“ˆå¸Œå€¼ ç›´æ¥å®šå€æ³• ç›´æ¥å®šå€æ³•å°±æ˜¯å–å…³é”®å­—çš„æŸä¸ªçº¿æ€§å‡½æ•°å€¼ä½œä¸ºå“ˆå¸Œå€¼ï¼Œæˆ–è€…ä½¿ç”¨è¿™ä¸ªçº¿æ€§å‡½æ•°å€¼ç»è¿‡ç‰¹å®šçš„ç®—æ³•è®¡ç®—å‡ºå“ˆå¸Œå€¼ã€‚\nä¾‹å¦‚ï¼Œå­˜å‚¨ä¸­å›½æ¯ä¸€å¹´çš„äººæ•°æ—¶ï¼Œå¯ä»¥å°†å¹´ä»½ä½œä¸ºè®¡ç®—å“ˆå¸Œå€¼çš„çº¿æ€§å‡½æ•°å€¼ï¼Œå¯ä»¥æƒ³è±¡å¾—åˆ°ï¼Œå¹´ä»½æ˜¯è¿ç»­çš„ï¼Œå¹¶ä¸”æ²¡æœ‰å†²çªï¼Œéå¸¸é€‚åˆç”¨æ¥è®¡ç®—å“ˆå¸Œå€¼ã€‚\nç›´æ¥å®šå€æ³•çš„ä¼˜ç‚¹å°±æ˜¯ç®€å•ã€åˆ†å¸ƒå‡åŒ€ã€ä¸ä¼šå‡ºç°å†²çªã€‚å…¶ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯è¦æ±‚é€‰å®šçš„çº¿æ€§å‡½æ•°å€¼åˆ†å¸ƒå‡åŒ€ã€ä¸ä¼šå‡ºç°å†²çªã€‚\næ¢ä¸€ç§è§’åº¦çœ‹ï¼Œç›´æ¥å®šå€æ³•çš„é™åˆ¶å†³å®šäº†å…¶å¹¶ä¸å¸¸ç”¨äºå®é™…å¼€å‘ã€‚\næ•°å­—åˆ†ææ³• æ•°å­—åˆ†ææ³•çš„æ ¸å¿ƒç‚¹å°±æ˜¯ä»åŸå§‹æ•°æ®ä¸­é€‰å–ä¸€ä¸ªè¾¨è¯†åº¦è¾ƒå¤§çš„æ•°æ®ä½œä¸ºè®¡ç®—å“ˆå¸Œç®—æ³•çš„å…³é”®å­—ï¼Œæ¯”è¾ƒå¸¸è§çš„å°±æ˜¯ç”¨äºå¤„ç†å…³é”®å­—ä½æ•°æ¯”è¾ƒå¤§çš„æ•°å­—ã€‚\næ•°å­—åˆ†ææ³•æœ‰ä¸ªæ¯”è¾ƒå¸¸è§çš„åœºæ™¯ï¼Œå›½å†…çš„æ‰‹æœºå·éƒ½æ˜¯ 11 ä½çš„æ•°å­—ï¼Œè€Œä¸”ä¹Ÿå¸¸è§åˆ°å°†ä¸­é—´ 4 ä½æ•°å­—éšè—çš„åšæ³•ï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯æ•°å­—åˆ†ææ³•çš„ä¸€ç§ç”¨æ³•ã€‚å› ä¸º 11 ä½æ‰‹æœºå·çš„å‰ 3 ä½æ˜¯è¿è¥å•†æ¥å…¥å·ï¼Œä¸­é—´ 4 ä½æ˜¯å½’å±åœ°è¯†åˆ«å·ï¼Œå 4 ä½æ˜¯ç”¨æˆ·å·ï¼Œå½“æ‰‹æœºå·ç éƒ½åœ¨åŒä¸€ä¸ªåœ°åŒºæ—¶ï¼Œåªéœ€è¦ä½¿ç”¨å‰ 3 ä½å’Œå 4 ä½å°±å¯ä»¥ä½œä¸ºå“ˆå¸Œç®—æ³•çš„å…³é”®å­—ã€‚\næ•°å­—åˆ†ææ³•ä¹Ÿæ˜¯ä¸€ç§ç›¸å¯¹ç®€å•çš„å“ˆå¸Œç®—æ³•ï¼Œä½†ä¸€èˆ¬é’ˆå¯¹è¾ƒå¤§æ•°å­—ï¼Œå¦‚æœè¿™äº›è¾ƒå¤§æ•°å­—åˆ†å¸ƒå‡åŒ€çš„è¯ï¼Œå¯ä»¥é€‰ç”¨è¿™ä¸ªæ–¹æ³•ã€‚\nå¹³æ–¹å–ä¸­æ³• å¹³æ–¹å–ä¸­æ³•çš„è§„åˆ™å¦‚å…¶åã€‚å‡è®¾å…³é”®å­—æ˜¯ 1234ï¼Œè®¡ç®—å¾—åˆ°å®ƒçš„å¹³æ–¹å°±æ˜¯ 1522756ï¼Œå†æŠ½å–ä¸­é—´ä¸‰ä½ 227 å¯ä»¥ä½œä¸ºå“ˆå¸Œå€¼ï¼›å‡è®¾å…³é”®å­—æ˜¯ 4321ï¼Œè®¡ç®—å¾—åˆ°å®ƒçš„å¹³æ–¹å°±æ˜¯ 18671041ï¼ŒæŠ½å–ä¸­é—´ä¸‰ä½ 671 æˆ– 710 ä½œä¸ºå“ˆå¸Œå€¼å³å¯ã€‚\nå¹³æ–¹å–ä¸­æ³•æ¯”è¾ƒé€‚åˆä¸çŸ¥é“å…³é”®å­—çš„åˆ†å¸ƒã€è€Œä½æ•°åˆä¸æ˜¯å¾ˆå¤§çš„æƒ…å†µã€‚\næŠ˜å æ³• æŠ˜å æ³•ä¸»è¦æ˜¯å°†å…³é”®å­—ä»å·¦åˆ°å³åˆ†å‰²æˆä½æ•°ç›¸ç­‰çš„å‡ éƒ¨åˆ†ï¼Œç„¶åå°†è¿™å‡ éƒ¨åˆ†å åŠ æ±‚å’Œï¼Œå¹¶æ ¹æ®å“ˆå¸Œè¡¨çš„é•¿åº¦ï¼Œå–åå‡ ä½ä½œä¸ºå“ˆå¸Œå€¼ã€‚\næ¯”å¦‚ï¼Œå¯¹ 9876543210 ä½¿ç”¨æŠ˜å æ³•ï¼Œå‡è®¾å“ˆå¸Œè¡¨è¡¨é•¿ä¸ºä¸‰ä½ï¼Œå°† 9876543210 åˆ†æˆ 987|654|321|0 è¿™æ ·å››ç»„ï¼Œç„¶åå¯¹è¿™å››ç»„ä½¿ç”¨ 987+654+321+0 å åŠ æ±‚å’Œè®¡ç®—å¾—åˆ° 1962ï¼Œå†å– 1962 çš„åä¸‰ä½ä½œä¸ºå“ˆå¸Œå€¼ã€‚\næŠ˜å æ³•çš„åº”ç”¨åœºæ™¯å¯ä»¥å’Œå¹³æ–¹å–ä¸­æ³•äº’è¡¥ï¼Œé€‚åˆç”¨åœ¨ä¸çŸ¥é“å…³é”®å­—çš„åˆ†å¸ƒï¼Œè€Œä½æ•°è¾ƒå¤šçš„æƒ…å†µã€‚\né™¤ç•™å–ä½™æ³• é™¤ç•™å–ä½™æ³•æ˜¯æœ€å¸¸ç”¨çš„å“ˆå¸Œç®—æ³•ä¹‹ä¸€ï¼Œå®é™…å°±æ˜¯å¯¹å…³é”®å­—æ±‚æ¨¡å–ä½™æ•°ï¼Œè¿™ä¸ªä½™æ•°å°±æ˜¯å“ˆå¸Œå€¼ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•å¾—åˆ°çš„å“ˆå¸Œå€¼éå¸¸å®¹æ˜“å†²çªï¼Œè¿™ä¸ªæ–¹æ³•çš„å…³é”®å°±æ˜¯è¦é€‰æ‹©åˆé€‚çš„é™¤æ•°ã€‚\næ ¹æ®å‰è¾ˆä»¬çš„ç»éªŒï¼Œé€šå¸¸è¿™ä¸ªé™¤æ•°ä¼šé€‰å–å°äºç­‰äºå“ˆå¸Œè¡¨è¡¨é•¿çš„æœ€å¤§è´¨æ•°æˆ–ä¸åŒ…å«å°äº 20 è´¨å› å­çš„åˆæ•°ã€‚\nåˆæ•°æ˜¯æŒ‡åœ¨å¤§äº 1 çš„æ•´æ•°ä¸­é™¤äº†èƒ½è¢« 1 å’Œæœ¬èº«æ•´é™¤å¤–ï¼Œè¿˜èƒ½è¢«å…¶ä»–æ•°ï¼ˆ0 é™¤å¤–ï¼‰æ•´é™¤çš„æ•°ï¼Œæœ€å°çš„åˆæ•°æ˜¯ 4ã€‚\nä¸ä¹‹ç›¸å¯¹çš„æ˜¯è´¨æ•°ï¼Œåœ¨æ­£æ•´æ•°ä¸­ï¼Œ1 æ—¢ä¸å±äºè´¨æ•°ä¹Ÿä¸å±äºåˆæ•°ã€‚\nå“ˆå¸Œå†²çª è®¾è®¡å¾—å†å¥½çš„å“ˆå¸Œç®—æ³•ä¹Ÿå¾ˆéš¾å®Œå…¨é¿å…å†²çªï¼Œä»å“ˆå¸Œè¡¨å‡ºç°åˆ°ç°åœ¨ï¼Œä¹Ÿå‡ºç°äº†å¾ˆå¤šè§£å†³å“ˆå¸Œå†²çªçš„å¸¸è§„æ–¹æ³•ã€‚\nå¼€æ”¾å®šå€æ³• æ‰€è°“å¼€æ”¾å®šå€æ³•å°±æ˜¯ï¼Œä¸€æ—¦å‘ç”Ÿäº†å†²çªï¼Œå°±å»å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºçš„å­˜å‚¨åœ°å€ï¼Œåªè¦å“ˆå¸Œè¡¨è¶³å¤Ÿå¤§ï¼Œç©ºçš„å­˜å‚¨åœ°å€æ€»èƒ½è¢«æ‰¾åˆ°ï¼Œå¹¶å°†æ•°æ®å­˜å…¥ã€‚\nåƒæ˜¯è¿™ç§å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºçš„å­˜å‚¨åœ°å€çš„å¸¸ç”¨æ–¹æ³•å°±æ˜¯çº¿æ€§æ¢æµ‹æ³•ï¼Œå³ä¸€ä¸ªä¸€ä¸ªå»å¯»æ‰¾ï¼Œç›´è‡³æ‰¾åˆ°ä¸‹ä¸€ä¸ªç©ºçš„å­˜å‚¨åœ°å€ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•åœ¨å“ˆå¸Œå†²çªæ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå“ˆå¸Œè¡¨çš„æ—¶é—´å¤æ‚åº¦ä¼šæ…¢æ…¢ä¸‹é™åˆ° $O(n)$ã€‚\né™¤äº†çº¿æ€§æ¢æµ‹æ³•ï¼Œè¿˜æœ‰äºŒæ¬¡æ¢æµ‹ã€åŒé‡å“ˆå¸Œçš„æ–¹æ³•ã€‚\näºŒæ¬¡æ¢æµ‹å°±æ˜¯å°†çº¿æ€§æ¢æµ‹ä¸º 1 çš„æ­¥é•¿æ”¹æˆå¹³æ–¹çš„æ­¥é•¿ã€‚ä¾‹å¦‚ï¼Œåœ¨çº¿æ€§æ¢æµ‹ä¸­æ˜¯ hash(key) + 0, hash(key) + 1, hash(key) + 2ï¼ŒäºŒæ¬¡æ¢æµ‹å°±æ˜¯ hash(key) + 0, hash(key) + $1^2$ã€hash(key) + $2^2$ã€‚\nåŒé‡å“ˆå¸ŒæŒ‡çš„æ˜¯ä½¿ç”¨å¤šä¸ªå“ˆå¸Œç®—æ³•ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå“ˆå¸Œç®—æ³•å‡ºç°å†²çªï¼Œå°±ä½¿ç”¨ç¬¬äºŒä¸ªå“ˆå¸Œç®—æ³•ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´è‡³æ‰¾åˆ°ç©ºé—²çš„å­˜å‚¨ä½ç½®ã€‚\nå½“æ•°æ®é‡å’Œè£…è½½å› å­éƒ½æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œé€‚åˆé‡‡ç”¨å¼€æ”¾å¯»å€æ³•ã€‚è¿™ä¹Ÿæ˜¯ Java ä¸­ ThreadLocalMap ä½¿ç”¨å¼€æ”¾å¯»å€æ³•è§£å†³æ•£åˆ—å†²çªçš„åŸå› ã€‚\né“¾åœ°å€æ³• é“¾åœ°å€æ³•æ˜¯å¦ä¸€ç§å¸¸è§çš„å“ˆå¸Œå†²çªè§£å†³åŠæ³•ã€‚\nå¼€æ”¾å®šå€æ³•æ˜¯åœ¨åŸå“ˆå¸Œè¡¨ä¸Šå†æ¬¡æ‰¾åˆ°å­˜å‚¨ä½ç½®ï¼Œè€Œé“¾åœ°å€æ³•æ˜¯åœ¨å‡ºç°å“ˆå¸Œå†²çªä¹‹åï¼Œå°†è¿™äº›å‡ºç°å†²çªçš„å…³é”®å­—å­˜å‚¨åˆ°é“¾è¡¨ä¸­ã€‚å…·ä½“çš„å­˜å‚¨ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nè¿™ä¸ªæ–¹æ³•ç›¸å¯¹äºå¼€æ”¾å®šå€æ³•æ¥è¯´å¤šäº†é“¾è¡¨è¿™ç§æ•°æ®ç»“æ„ï¼Œå¯¹äºä¼šå‡ºç°å¾ˆå¤šå†²çªçš„å“ˆå¸Œç®—æ³•æ¥è¯´ï¼Œæä¾›äº†ç»ä¸ä¼šå‡ºç°æ‰¾ä¸åˆ°åœ°å€çš„ä¿éšœã€‚\nè™½ç„¶è¿™ä¸ªæ–¹æ³•åœ¨æ’å…¥æ—¶æ²¡æœ‰æ˜æ˜¾çš„æ€§èƒ½æŸè€—ï¼Œä½†æ˜¯å¸¦æ¥äº†æŸ¥æ‰¾ã€åˆ é™¤æ—¶éœ€è¦éå†å•å‘é“¾è¡¨çš„æ€§èƒ½æŸè€—ã€‚\né“¾åœ°å€æ³•åœ¨æŸ¥æ‰¾æ—¶è€—è´¹çš„æ—¶é—´å–å†³äºé“¾è¡¨çš„é•¿åº¦ï¼Œå¯ä»¥å°†æ—¶é—´å¤æ‚åº¦ç†è§£æˆ $O(k)$(k ä¸ºé“¾è¡¨é•¿åº¦)ã€‚\né’ˆå¯¹äºè¿™æ ·çš„åŠ£åŠ¿ï¼Œå¯ä»¥é‡‡ç”¨å…¶ä»–çš„æ•°æ®ç»“æ„ä»£æ›¿é“¾è¡¨ï¼Œå¦‚ä½¿ç”¨çº¢é»‘æ ‘è¿™æ ·çš„æ ‘å½¢ç»“æ„ï¼ŒJava ä¸­çš„ HashMap ä¾¿æ˜¯å¦‚æ­¤ã€‚\nå…¬å…±æº¢å‡ºåŒºæ³• å…¬å…±æº¢å‡ºåŒºæ³•å¯ä»¥ç†è§£ä¸ºé“¾åœ°å€æ³•çš„é›†ä¸­æ–¹å¼ã€‚\nå…¬å…±æº¢å‡ºåŒºæ³•ä¹Ÿæ˜¯éœ€è¦ä½¿ç”¨åˆ°å¦å¤–çš„å­˜å‚¨åŒºåŸŸï¼Œä½†ä¸åƒé“¾åœ°å€æ³•ä¸­ä¼šå°†è¿™ä¸ªå­˜å‚¨åŒºåŸŸé“¾åˆ°é“¾è¡¨ä¸Šï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„å­˜å‚¨åŒºåŸŸå­˜å‚¨æ‰€æœ‰å†²çªçš„å…³é”®å­—ã€‚\nè¿™ä¸ªå…¬å…±çš„æº¢å‡ºåŒºå¯ä»¥æ˜¯å¦å¤–ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå¯¹å†²çªçš„å…³é”®å­—å†æ¬¡å“ˆå¸Œè¿›è¡Œå­˜å‚¨ã€‚\nåº”ç”¨åœºæ™¯ è¿™é‡Œçš„åº”ç”¨åœºæ™¯å¯ä»¥åˆ†ä¸ºå“ˆå¸Œè¡¨çš„åº”ç”¨åœºæ™¯å’Œå“ˆå¸Œç®—æ³•çš„åº”ç”¨åœºæ™¯ã€‚\nå¯¹äºå“ˆå¸Œè¡¨ï¼Œä½¿ç”¨å®ƒä¸»è¦æ˜¯ä¸ºäº†æå‡æ—¶é—´å¤æ‚åº¦ï¼›å¯¹äºå“ˆå¸Œç®—æ³•ï¼Œä½¿ç”¨å®ƒæ˜¯ä¸ºäº†åº”ç”¨å®ƒçš„ç‰¹ç‚¹ã€‚\nå®‰å…¨åŠ å¯† å¸¸è§çš„åŠ å¯†ç®—æ³•ä½¿ç”¨çš„éƒ½æ˜¯å“ˆå¸Œç®—æ³•ï¼Œå¦‚ MD5ã€SHA ç­‰ã€‚å› ä¸ºå“ˆå¸Œç®—æ³•ä¸å¯é€†å’Œè½¬æ¢æ•æ„Ÿçš„ç‰¹ç‚¹ï¼Œä½¿ç”¨å“ˆå¸Œç®—æ³•çš„å®‰å…¨æ€§éå¸¸å¥½ã€‚\nå”¯ä¸€æ ‡è¯† æ¯”å¦‚ URL å­—æ®µæˆ–è€…å›¾ç‰‡å­—æ®µè¦æ±‚ä¸èƒ½é‡å¤ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥é€šè¿‡å¯¹ç›¸åº”å­—æ®µå€¼åš MD5 å¤„ç†ï¼Œå°†æ•°æ®ç»Ÿä¸€ä¸º 32 ä½é•¿åº¦ï¼Œå¯¹æ•°æ®åº“ç´¢å¼•æ„å»ºå’ŒæŸ¥è¯¢æå‡éå¸¸æ˜æ˜¾ã€‚\næ­¤å¤–ï¼Œè¿˜å¯ä»¥å¯¹æ–‡ä»¶ä¹‹ç±»çš„äºŒè¿›åˆ¶æ•°æ®åš MD5 å¤„ç†ï¼Œä½œä¸ºå”¯ä¸€æ ‡è¯†ï¼Œè¿™æ ·åˆ¤å®šé‡å¤æ–‡ä»¶çš„æ—¶å€™æ›´å¿«æ·ã€‚\næ•°æ®æ ¡éªŒ æ¯”å¦‚ä»ç½‘ä¸Šä¸‹è½½çš„å¾ˆå¤šæ–‡ä»¶ï¼ˆå°¤å…¶æ˜¯ P2P ç«™ç‚¹èµ„æºï¼‰ï¼Œéƒ½ä¼šåŒ…å«ä¸€ä¸ª MD5 å€¼ï¼Œç”¨äºæ ¡éªŒä¸‹è½½æ•°æ®çš„å®Œæ•´æ€§ï¼Œé¿å…æ•°æ®åœ¨ä¸­é€”è¢«åŠ«æŒç¯¡æ”¹ã€‚\nè´Ÿè½½å‡è¡¡ åˆ©ç”¨å“ˆå¸Œè¡¨ä»£æ›¿æ˜ å°„è¡¨ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªä¼šè¯ç²˜æ»çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚\nå¯¹å®¢æˆ·ç«¯ IP åœ°å€æˆ–è€…ä¼šè¯ ID è®¡ç®—å“ˆå¸Œå€¼ï¼Œå°†å–å¾—çš„å“ˆå¸Œå€¼ä¸æœåŠ¡å™¨åˆ—è¡¨çš„å¤§å°è¿›è¡Œå–æ¨¡è¿ç®—ï¼Œæœ€ç»ˆå¾—åˆ°çš„å€¼å°±åº”è¯¥æ˜¯è¢«è·¯ç”±åˆ°çš„æœåŠ¡å™¨ç¼–å·ã€‚\næ•°æ®åˆ†ç‰‡ é€šè¿‡å“ˆå¸Œè¡¨å¯¹å¤„ç†çš„æµ·é‡æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œå¤šæœºåˆ†å¸ƒå¼å¤„ç†ï¼Œå¯ä»¥çªç ´å•æœºèµ„æºçš„é™åˆ¶ã€‚\nç»å…¸æ¡ˆä¾‹ MD5 MD5 æ¶ˆæ¯æ‘˜è¦ç®—æ³•æ˜¯ä¸€ç§è¢«å¹¿æ³›ä½¿ç”¨çš„æ•£åˆ—å‡½æ•°ï¼Œå¯ä»¥äº§ç”Ÿå‡ºä¸€ä¸ª 128 ä½ï¼ˆ16 å­—èŠ‚ï¼‰çš„æ•£åˆ—å€¼ï¼Œç”¨äºç¡®ä¿ä¿¡æ¯ä¼ è¾“å®Œæ•´ä¸€è‡´ã€‚\nMD5 æ˜¯è¾“å…¥ä¸å®šé•¿åº¦ä¿¡æ¯ï¼Œè¾“å‡ºå›ºå®šé•¿åº¦ 128 ä½çš„ç®—æ³•ã€‚æ— è®ºæ˜¯å¤šé•¿çš„ä¿¡æ¯ï¼Œç»è¿‡ç¨‹åºæµç¨‹ï¼Œéƒ½ä¼šç”Ÿæˆå››ä¸ª 32 ä½æ•°æ®ï¼Œæœ€åè”åˆèµ·æ¥æˆä¸ºä¸€ä¸ª 128 ä½æ•£åˆ—å€¼ã€‚\nä½†æ˜¯åœ¨ 2009 å¹´ï¼Œä¸­å›½ç§‘å­¦é™¢çš„è°¢æ¶›å’Œå†¯ç™»å›½ä»…ç”¨äº† $22^{0.96}$ çš„ç¢°æ’ç®—æ³•å¤æ‚åº¦ï¼Œç ´è§£äº† MD5 çš„ç¢°æ’æŠµæŠ—ï¼Œè¯¥æ”»å‡»åœ¨æ™®é€šè®¡ç®—æœºä¸Šè¿è¡Œåªéœ€è¦æ•°ç§’é’Ÿã€‚2011 å¹´ï¼ŒRFC 6151 ç¦æ­¢å°† MD5 ç”¨ä½œå¯†é’¥æ•£åˆ—æ¶ˆæ¯è®¤è¯ç ã€‚\nSHA å®‰å…¨æ•£åˆ—ç®—æ³• SHA æ˜¯ä¸€ä¸ªå¯†ç æ•£åˆ—å‡½æ•°å®¶æ—ï¼Œæ˜¯ FIPS æ‰€è®¤è¯çš„å®‰å…¨æ•£åˆ—ç®—æ³•ã€‚è¿™æ˜¯èƒ½è®¡ç®—å‡ºä¸€ä¸ªæ•°å­—æ¶ˆæ¯æ‰€å¯¹åº”åˆ°çš„ã€é•¿åº¦å›ºå®šçš„å­—ç¬¦ä¸²ï¼ˆåˆç§°æ¶ˆæ¯æ‘˜è¦ï¼‰çš„ç®—æ³•ã€‚ä¸”è‹¥è¾“å…¥çš„æ¶ˆæ¯ä¸åŒï¼Œå®ƒä»¬å¯¹åº”åˆ°ä¸åŒå­—ç¬¦ä¸²çš„å‡ ç‡å¾ˆé«˜ã€‚\nSHA å®¶æ—ç®—æ³•åŒ…å«äº† SHA-0ã€SHA-1ã€SHA-2ã€SHA-3ï¼Œå¯¹ SHA-0 å’Œ SHA-1 éƒ½å·²ç»å‡ºç°ç†è®ºä¸Šç ´è§£çš„æ–¹æ³•ï¼Œç°åœ¨æ¯”è¾ƒå¸¸è§çš„è¿˜æ˜¯ SHA-2ï¼Œè™½ç„¶è‡³ä»Šå°šæœªå‡ºç°å¯¹ SHA-2 æœ‰æ•ˆçš„æ”»å‡»ï¼Œä½†å®ƒçš„ç®—æ³•è·Ÿ SHA-1 åŸºæœ¬ä¸Šç›¸ä¼¼ã€‚\nSHA-3 æ˜¯åœ¨ 2015 å¹´æ­£å¼å‘å¸ƒçš„ï¼Œç”±äºå¯¹ MD5 å‡ºç°æˆåŠŸçš„ç ´è§£ï¼ŒNIST æ„Ÿè§‰éœ€è¦ä¸€ä¸ªä¸ä¹‹å‰ç®—æ³•ä¸åŒçš„ã€å¯æ›¿æ¢çš„åŠ å¯†æ•£åˆ—ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯ç°åœ¨çš„ SHA-3ã€‚\nCRC å¾ªç¯å†—ä½™æ ¡éªŒ CRC æ˜¯ä¸€ç§æ ¹æ®ç½‘ç»œæ•°æ®åŒ…æˆ–è®¡ç®—æœºæ–‡ä»¶ç­‰æ•°æ®äº§ç”Ÿç®€çŸ­å›ºå®šä½æ•°æ ¡éªŒç çš„ä¸€ç§ä¿¡é“ç¼–ç æŠ€æœ¯ï¼Œä¸»è¦ç”¨æ¥æ£€æµ‹æˆ–æ ¡éªŒæ•°æ®ä¼ è¾“æˆ–è€…ä¿å­˜åå¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚å®ƒæ˜¯åˆ©ç”¨é™¤æ³•åŠä½™æ•°çš„åŸç†æ¥ä½œé”™è¯¯ä¾¦æµ‹çš„ã€‚\nç”±äº CRC ç®—æ³•æ£€éªŒçš„æ£€é”™èƒ½åŠ›æå¼ºï¼Œä¸”æ£€æµ‹æˆæœ¬è¾ƒä½ï¼Œå› æ­¤åœ¨å¯¹äºç¼–ç å™¨å’Œç”µè·¯çš„æ£€æµ‹ä¸­ä½¿ç”¨è¾ƒä¸ºå¹¿æ³›ã€‚ä»æ£€é”™çš„æ­£ç¡®ç‡ä¸é€Ÿåº¦ã€æˆæœ¬ç­‰æ–¹é¢ï¼Œéƒ½æ¯”å¥‡å¶æ ¡éªŒç­‰æ ¡éªŒæ–¹å¼å…·æœ‰ä¼˜åŠ¿ã€‚å› è€Œ CRC æˆä¸ºè®¡ç®—æœºä¿¡æ¯é€šä¿¡é¢†åŸŸæœ€ä¸ºæ™®éçš„æ ¡éªŒæ–¹å¼ã€‚\nå·¥ä¸šçº§å“ˆå¸Œè¡¨å®ç° Java ä¸­çš„ HashMap æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„å·¥ä¸šçº§å“ˆå¸Œè¡¨å®ç°ï¼Œç†è§£å®ƒçš„å®ç°å¯ä»¥åŠ æ·±å¯¹å“ˆå¸Œè¡¨çš„å°è±¡ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹ä¸€ä¸‹ HashMap çš„æºç ã€‚\nåˆå§‹å¤§å° HashMap é»˜è®¤çš„åˆå§‹å¤§å°æ˜¯ 16ï¼Œå½“ç„¶è¿™ä¸ªé»˜è®¤å€¼æ˜¯å¯ä»¥è®¾ç½®çš„ï¼Œå¦‚æœäº‹å…ˆçŸ¥é“å¤§æ¦‚çš„æ•°æ®é‡æœ‰å¤šå¤§ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é»˜è®¤åˆå§‹å¤§å°ï¼Œå‡å°‘åŠ¨æ€æ‰©å®¹çš„æ¬¡æ•°ï¼Œè¿™æ ·èƒ½å¤§å¤§æé«˜ HashMap çš„æ€§èƒ½ã€‚\nå“ˆå¸Œè¡¨çš„å®¹é‡è¦å– 2 çš„æ•´æ¬¡å¹‚ï¼Œå› ä¸ºè¿™æ ·æ­£å¥½ç›¸å½“äºä¸€ä¸ª ä½ä½æ©ç ï¼Œåœ¨ hash() æ–¹æ³•å†…å¯ä»¥åšåˆ°é«˜ä½å½’é›¶ã€‚\nè£…è½½å› å­å’ŒåŠ¨æ€æ‰©å®¹ HashMap é»˜è®¤çš„æœ€å¤§è£…è½½å› å­æ˜¯ 0.75ï¼Œå½“ HashMap ä¸­å…ƒç´ ä¸ªæ•°è¶…è¿‡ 0.75 * capacity(capacity è¡¨ç¤ºå“ˆå¸Œè¡¨çš„å®¹é‡) çš„æ—¶å€™ï¼Œå°±ä¼šå¯åŠ¨æ‰©å®¹ï¼Œæ¯æ¬¡æ‰©å®¹éƒ½ä¼šæ‰©å®¹ä¸ºåŸæ¥çš„ä¸¤å€å¤§å°ã€‚\næ•£åˆ—å‡½æ•° æ•£åˆ—å‡½æ•°çš„è®¾è®¡å¹¶ä¸å¤æ‚ï¼Œè¿½æ±‚çš„æ˜¯ç®€å•é«˜æ•ˆã€åˆ†å¸ƒå‡åŒ€ã€‚HashMap æ•£åˆ—å‡½æ•°çš„æºç å¦‚ä¸‹ï¼š\nint hash(Object key) { int h = key.hashCode()ï¼› // capicity è¡¨ç¤ºå“ˆå¸Œè¡¨çš„å¤§å° return (h ^ (h \u0026gt;\u0026gt;\u0026gt; 16)) \u0026amp; (capitity -1); } åœ¨ Java ä¸­ï¼ŒhashCode() æ–¹æ³•é€šè¿‡å°†å¯¹è±¡çš„ç‰©ç†åœ°å€è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œå†å°†æ•´æ•°é€šè¿‡å“ˆå¸Œç®—æ³•è®¡ç®—å¾—åˆ°å“ˆå¸Œç ï¼Œè¿™ä¸ªå“ˆå¸Œç æ˜¯ä¸€ä¸ª 32 ä½çš„å¸¦ç¬¦å·æ•´æ•°å€¼ï¼Œæ­£å¸¸æƒ…å†µä¸‹å¾ˆéš¾å‘ç”Ÿç¢°æ’ã€‚\nä¸ºäº†è®©è¿™ä¸ªå“ˆå¸Œç ä¸ HashMap çš„åº•å±‚æ•°ç»„åšæ˜ å°„ï¼ŒJava è¿˜ä¼šå°†è¿™ä¸ªå“ˆå¸Œç å†æ¬¡åšå“ˆå¸Œæ“ä½œï¼Œé‡‡ç”¨çš„æ–¹æ³•æ˜¯ï¼š\nå°†å“ˆå¸Œç å³ç§» 16 ä½ï¼Œæ­£å¥½æ˜¯ 32bit çš„ä¸€åŠï¼› å°†å“ˆå¸Œç çš„é«˜åŠåŒºå’Œä½åŠåŒºåšå¼‚æˆ–ï¼Œå¯ä»¥æ··åˆå“ˆå¸Œç çš„é«˜ä½å’Œä½ä½ï¼Œä»¥æ­¤åŠ å¤§ä½ä½çš„éšæœºæ€§ï¼› å°†è®¡ç®—ç»“æœåšé«˜ä½å½’é›¶ï¼Œåªä¿ç•™ä½ä½å€¼ã€‚ æ•£åˆ—å†²çªè§£å†³æ–¹æ³• HashMap åº•å±‚é‡‡ç”¨é“¾åœ°å€æ³•æ¥è§£å†³å†²çªã€‚å³ä½¿è´Ÿè½½å› å­å’Œæ•£åˆ—å‡½æ•°è®¾è®¡å¾—å†åˆç†ï¼Œä¹Ÿå…ä¸äº†ä¼šå‡ºç°æ‹‰é“¾è¿‡é•¿çš„æƒ…å†µï¼Œä¸€æ—¦å‡ºç°æ‹‰é“¾è¿‡é•¿ï¼Œåˆ™ä¼šä¸¥é‡å½±å“ HashMap çš„æ€§èƒ½ã€‚\näºæ˜¯ï¼Œåœ¨ JDK1.8 ç‰ˆæœ¬ä¸­ï¼Œä¸ºäº†å¯¹ HashMap åšè¿›ä¸€æ­¥ä¼˜åŒ–å¼•å…¥äº†çº¢é»‘æ ‘ã€‚\nå½“é“¾è¡¨é•¿åº¦å¤ªé•¿ï¼ˆé»˜è®¤è¶…è¿‡ 8ï¼‰æ—¶ï¼Œé“¾è¡¨å°±è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œè¿™æ˜¯åˆ©ç”¨äº†çº¢é»‘æ ‘å¿«é€Ÿå¢åˆ æ”¹æŸ¥çš„ç‰¹ç‚¹ï¼Œæé«˜ HashMap çš„æ€§èƒ½ã€‚\nå½“çº¢é»‘æ ‘ç»“ç‚¹ä¸ªæ•°å°‘äº 8 ä¸ªçš„æ—¶å€™ï¼Œåˆä¼šå°†çº¢é»‘æ ‘è½¬åŒ–ä¸ºé“¾è¡¨ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æ•°æ®é‡è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œçº¢é»‘æ ‘è¦ç»´æŠ¤å¹³è¡¡ï¼Œæ¯”èµ·é“¾è¡¨æ¥ï¼Œæ€§èƒ½ä¸Šçš„ä¼˜åŠ¿å¹¶ä¸æ˜æ˜¾ã€‚\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/hash-basic.html","title":"å“ˆå¸Œè¡¨çš„ç®€å•è®¤è¯†"},{"content":"ä»é€»è¾‘ç»“æ„ä¸Šçœ‹ï¼Œå †æ˜¯ä¸€ç§éå¸¸ç‰¹åˆ«çš„æ ‘å½¢ç»“æ„ï¼Œä»åº”ç”¨åœºæ™¯ä¸Šçœ‹ï¼Œä¸å¸¸è§çš„æ ‘å½¢ç»“æ„åˆå®Œå…¨ä¸åŒï¼Œä½¿ç”¨å †è¿˜èƒ½è§£å†³è®¸å¤šç‹¬ç‰¹çš„é—®é¢˜ã€‚\nå †çš„æ¦‚å¿µ å †æœ¬èº«æ˜¯ä¸€ç§æ ‘å½¢ç»“æ„ï¼Œæ€»æ˜¯æ»¡è¶³ä»¥ä¸‹æ€§è´¨ï¼š\nå †æ€»æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ å †ä¸­æŸä¸ªç»“ç‚¹æ€»æ˜¯ä¸å¤§äºæˆ–ä¸å°äºå…¶çˆ¶ç»“ç‚¹çš„çš„å€¼ å±æ€§ å †åˆ†ä¸ºä¸¤ç§ï¼šæ ¹ç»“ç‚¹æœ€å¤§çš„å †å«ä½œ æœ€å¤§å † æˆ– å¤§æ ¹å †ï¼›æ ¹ç»“ç‚¹æœ€å°çš„å †å«ä½œ æœ€å°å † æˆ– å°æ ¹å †ã€‚\nå †å±æ€§éå¸¸æœ‰ç”¨ï¼Œå…¶ä½¿å¾—å †å¸¸å¸¸è¢«å½“åšä¼˜å…ˆé˜Ÿåˆ—ä½¿ç”¨ï¼Œå› ä¸ºå¯ä»¥å¿«é€Ÿåœ°è®¿é—®åˆ°â€œæœ€é‡è¦â€çš„å…ƒç´ ã€‚\nå †å’ŒäºŒå‰æœç´¢æ ‘çš„åŒºåˆ« å †å¹¶ä¸èƒ½å–ä»£äºŒå‰æœç´¢æ ‘ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ç›¸ä¼¼ä¹‹å¤„ä¹Ÿæœ‰ä¸€äº›ä¸åŒã€‚\nå¯¹äºå †æ¥è¯´ï¼Œåœ¨æœ€å°å †ä¸­çˆ¶ç»“ç‚¹å¿…é¡»æ¯”å­ç»“ç‚¹å°ï¼Œåœ¨æœ€å¤§å †ä¸­çˆ¶ç»“ç‚¹å¿…é¡»æ¯”å­ç»“ç‚¹å¤§ï¼Œå˜åŒ–æ˜¯ä»ä¸Šåˆ°ä¸‹ï¼›å¯¹äºäºŒå‰æœç´¢æ ‘ï¼Œå·¦å­ç»“ç‚¹æ¯”çˆ¶ç»“ç‚¹å°ï¼Œçˆ¶ç»“ç‚¹æ¯”å³å­ç»“ç‚¹å°ï¼Œå˜åŒ–æ˜¯ä»å·¦åˆ°å³ã€‚\nåœ¨å†…å­˜å ç”¨æ–¹é¢ï¼Œå †ä½¿ç”¨æ•°ç»„ä½œä¸ºåº•å±‚å­˜å‚¨ç»“æ„ï¼Œå ç”¨å†…å­˜ç©ºé—´è¾ƒå°ï¼›äºŒå‰æœç´¢æ ‘ä½¿ç”¨é“¾è¡¨ä½œä¸ºåº•å±‚å­˜å‚¨ç»“æ„ï¼Œå ç”¨å†…å­˜ç©ºé—´è¾ƒå¤§ã€‚\nä»å¹³è¡¡çš„è§’åº¦ä¸Šçœ‹ï¼Œå †ä¸éœ€è¦æ•´æ£µæ ‘æœ‰åºï¼Œè€ŒäºŒå‰æœç´¢æ ‘å¿…é¡»æ˜¯å¹³è¡¡çš„ï¼Œæ€»ä½“ä¸Šæ˜¯æœ‰åºçš„ã€‚\nå¯¹äºæœç´¢çš„æ•ˆç‡è€Œè¨€ï¼Œå †çš„æœç´¢æ•ˆç‡æ¯”äºŒå‰æœç´¢æ ‘ä½å¾—å¤šï¼ŒåŸºæœ¬ä¸Šå¯ä»¥è®¤ä¸ºå †ä¸é€‚åˆä½œä¸ºæœç´¢çš„æ•°æ®ç»“æ„ã€‚\nå †çš„å®ç° å­˜å‚¨ å®ç°ä¸€ä¸ªå †ï¼Œé¦–å…ˆæ˜¯æ¶‰åŠåˆ°å¦‚ä½•å­˜å‚¨ä¸€ä¸ªå †ã€‚\næ ¹æ®å †æ€»æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘çš„æ€§è´¨ï¼Œä»¥åŠå®Œå…¨äºŒå‰æ ‘æ¯”è¾ƒé€‚åˆç”¨æ•°ç»„æ¥å­˜å‚¨çš„æ¦‚å¿µï¼Œå¯ä»¥çŸ¥é“ç”¨æ•°ç»„å­˜å‚¨å †æ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©ã€‚\nä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œæ•°ç»„ä¸­ä¸‹æ ‡ä¸º i çš„ç»“ç‚¹çš„å·¦å­ç»“ç‚¹ï¼Œå°±æ˜¯ä¸‹æ ‡ä¸º 2i çš„ç»“ç‚¹ï¼Œå³å­ç»“ç‚¹å°±æ˜¯ä¸‹æ ‡ä¸º 2i + 1 çš„ç»“ç‚¹ï¼Œå…¶çˆ¶ç»“ç‚¹å°±æ˜¯ä¸‹æ ‡ä¸º i/2 çš„ç»“ç‚¹ã€‚\nå †åŒ– å¾€å †ä¸­æ’å…¥æˆ–è€…åˆ é™¤ä¸€ä¸ªå…ƒç´ åï¼Œé‡è¦çš„æ˜¯è¦ç»§ç»­æ»¡è¶³å †çš„ä¸¤ä¸ªç‰¹æ€§ï¼Œè€Œè¿™ä¸ªé‡æ–°æ»¡è¶³å †ç‰¹æ€§çš„è¿‡ç¨‹ç§°ä¸º å †åŒ–ã€‚\nå †åŒ–å®é™…ä¸Šæœ‰ä¸¤ç§ï¼šä»ä¸‹å¾€ä¸Šã€ä»ä¸Šå¾€ä¸‹ã€‚\næ’å…¥å…ƒç´  æ’å…¥å…ƒç´ æ—¶æ¶‰åŠçš„æ˜¯ä»ä¸‹å¾€ä¸Šçš„å †åŒ–æ–¹æ³•ã€‚\nå¾€å †ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ å…¶å®å°±æ˜¯å¾€åº•å±‚æ•°ç»„çš„æœ«å°¾æ·»åŠ å…ƒç´ ï¼Œä¸‹é¢æ˜¯ç¤ºä¾‹å›¾ï¼š\nä»ä¸‹å¾€ä¸Šå †åŒ–çš„è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œå®é™…ä¸Šå°±æ˜¯å°†æ’å…¥çš„å…ƒç´ ä¸çˆ¶ç»“ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œå‡ºç°ä¸ç¬¦åˆç‰¹æ€§çš„æƒ…å†µå°±äº’æ¢ä¸¤ä¸ªç»“ç‚¹ï¼Œä¸€ç›´é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´è‡³çˆ¶å­ç»“ç‚¹ä¹‹é—´æ»¡è¶³å †çš„ç‰¹æ€§ã€‚\nåˆ é™¤å…ƒç´  å½“åˆ é™¤å †é¡¶å…ƒç´ çš„æ—¶å€™ï¼Œä¸ºä¿æŒå †çš„ç‰¹æ€§ï¼Œåˆ™ä¼šæ¶‰åŠåˆ°ä»ä¸Šå¾€ä¸‹çš„å †åŒ–æ–¹æ³•ã€‚\nä»ä¸Šå¾€ä¸‹å †åŒ–ä¸æ˜¯ç›´æ¥ä»å †é¡¶å…ƒç´ å¼€å§‹ä¸å­ç»“ç‚¹è¿›è¡Œäº’æ¢ï¼Œè€Œæ˜¯å…ˆå°†æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ç§»åˆ°è¢«åˆ é™¤ç»“ç‚¹ä½ç½®ï¼ˆä¸ºäº†æ»¡è¶³å®Œå…¨äºŒå‰æ ‘çš„ç‰¹æ€§ï¼‰ï¼Œç„¶ååˆ©ç”¨åŒæ ·çš„çˆ¶å­ç»“ç‚¹æ¯”å¯¹æ–¹æ³•ã€‚\né€šå¸¸ï¼Œå¯¹äºå¤§æ ¹å †ä¼šæ¯”è¾ƒè¾ƒå¤§çš„å­ç»“ç‚¹ï¼Œå¯¹äºå°æ ¹å †ä¼šæ¯”è¾ƒè¾ƒå°çš„å­ç»“ç‚¹ï¼Œå‡ºç°ä¸ç¬¦åˆç‰¹æ€§çš„æƒ…å†µå°±äº’æ¢ä¸¤ä¸ªç»“ç‚¹ï¼Œä¸€ç›´é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´è‡³çˆ¶å­ç»“ç‚¹ä¹‹é—´æ»¡è¶³å †çš„ç‰¹æ€§ã€‚\nè¿™ç§æ–¹æ³•å †åŒ–ä¹‹åçš„ç»“æœï¼Œè‚¯å®šæ»¡è¶³å®Œå…¨äºŒå‰æ ‘çš„ç‰¹æ€§ã€‚\nå¤æ‚åº¦ ä¸€ä¸ªåŒ…å« n ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ï¼Œæ ‘çš„é«˜åº¦ä¸ä¼šè¶…è¿‡ $\\log_2 n$ã€‚\nå †åŒ–çš„è¿‡ç¨‹æ˜¯é¡ºç€èŠ‚ç‚¹æ‰€åœ¨è·¯å¾„æ¯”è¾ƒäº¤æ¢çš„ï¼Œæ‰€ä»¥å †åŒ–çš„æ—¶é—´å¤æ‚åº¦è·Ÿæ ‘çš„é«˜åº¦æˆæ­£æ¯”ï¼Œä¹Ÿå°±æ˜¯ $O(\\log_2 n)$ã€‚\næ’å…¥å…ƒç´ å’Œåˆ é™¤å…ƒç´ çš„ä¸»è¦é€»è¾‘å°±æ˜¯å †åŒ–ï¼Œæ‰€ä»¥å¾€å †ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ å’Œåˆ é™¤ä¸€ä¸ªå…ƒç´ çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ $O(\\log_2 n)$ã€‚\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/heap-basic.html","title":"å †çš„ç®€å•è®¤è¯†"},{"content":"äºŒå‰æ ‘æ˜¯æ ‘å½¢ç»“æ„çš„ä¸€ç§é‡è¦ç±»å‹ï¼Œè®¸å¤šå®é™…é—®é¢˜æŠ½è±¡å‡ºæ¥çš„æ•°æ®ç»“æ„å¾€å¾€æ˜¯äºŒå‰æ ‘å½¢å¼ï¼Œå³ä½¿æ˜¯ä¸€èˆ¬çš„æ ‘ä¹Ÿèƒ½ç®€å•åœ°è½¬æ¢ä¸ºäºŒå‰æ ‘ï¼Œå› æ­¤äºŒå‰æ ‘æ˜¾å¾—æ ¼å¤–é‡è¦ã€‚\næ ‘çš„å®šä¹‰ æ ‘æ˜¯ä¸€ç§æŠ½è±¡æ•°æ®ç±»å‹ï¼Œç”¨æ¥æ¨¡æ‹Ÿå…·æœ‰æ ‘çŠ¶ç»“æ„æ€§è´¨çš„æ•°æ®é›†åˆï¼Œå¦‚ä¸Šå›¾å°±æ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ã€‚\næ ‘çš„ä¸“ä¸šæœ¯è¯­æ¯”è¾ƒå¤šï¼Œéœ€è¦äº†è§£ä»¥ä¸‹å†…å®¹ï¼š\næ ‘çš„ç»“ç‚¹ï¼šåŒ…å«ä¸€ä¸ªæ•°æ®å…ƒç´ åŠè‹¥å¹²æŒ‡å‘å­æ ‘åˆ†æ”¯çš„ä¿¡æ¯ ç»“ç‚¹çš„åº¦ï¼šä¸€ä¸ªç»“ç‚¹å«æœ‰çš„å­æ ‘æ•°ç›®ç§°ä¸ºè¯¥ç»“ç‚¹çš„åº¦ æ ‘çš„åº¦ï¼šæ ‘ä¸­æœ€å¤§çš„ç»“ç‚¹åº¦ç§°ä¸ºæ ‘çš„åº¦ å¶å­ç»“ç‚¹ï¼šä¹Ÿç§°ç»ˆç«¯ç»“ç‚¹ï¼Œç»“ç‚¹åº¦ä¸ºé›¶çš„ç»“ç‚¹ åˆ†æ”¯ç»“ç‚¹ï¼šä¹Ÿç§°éç»ˆç«¯ç»“ç‚¹ï¼Œç»“ç‚¹åº¦ä¸ä¸ºé›¶çš„ç»“ç‚¹ å­ç»“ç‚¹ï¼šä¸€ä¸ªç»“ç‚¹å«æœ‰çš„å­æ ‘çš„æ ¹ç»“ç‚¹ç§°ä¸ºè¯¥ç»“ç‚¹çš„å­ç»“ç‚¹ çˆ¶ç»“ç‚¹ï¼šè‹¥ä¸€ä¸ªç»“ç‚¹å«æœ‰å­ç»“ç‚¹ï¼Œåˆ™è¿™ä¸ªç»“ç‚¹ç§°ä¸ºå…¶å­ç»“ç‚¹çš„çˆ¶ç»“ç‚¹ å…„å¼Ÿç»“ç‚¹ï¼šå…·æœ‰ç›¸åŒçˆ¶ç»“ç‚¹çš„ç»“ç‚¹äº’ç§°ä¸ºå…„å¼Ÿç»“ç‚¹ å ‚å…„å¼Ÿç»“ç‚¹ï¼šçˆ¶ç»“ç‚¹åœ¨åŒä¸€å±‚çš„ç»“ç‚¹äº’ä¸ºå ‚å…„å¼Ÿç»“ç‚¹ ç»“ç‚¹çš„ç¥–å…ˆï¼šä»æ ¹åˆ°è¯¥ç»“ç‚¹æ‰€ç»åˆ†æ”¯ä¸Šçš„æ‰€æœ‰ç»“ç‚¹ç§°ä¸ºè¯¥ç»“ç‚¹çš„ç¥–å…ˆ å­å­™ï¼šä»¥æŸç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸­ä»»ä¸€ç»“ç‚¹éƒ½ç§°ä¸ºè¯¥ç»“ç‚¹çš„å­å­™ ç»“ç‚¹çš„å±‚æ¬¡ï¼šä»æ ¹å¼€å§‹å®šä¹‰èµ·ï¼Œæ ¹ä¸ºç¬¬ 1 å±‚ï¼Œæ ¹çš„å­ç»“ç‚¹ä¸ºç¬¬ 2 å±‚ï¼Œä»¥æ­¤ç±»æ¨ æ·±åº¦ï¼šå¯¹äºä»»æ„ç»“ç‚¹ nï¼Œn çš„æ·±åº¦ä¸ºä»æ ¹åˆ° n çš„å”¯ä¸€è·¯å¾„é•¿ï¼Œæ ¹çš„æ·±åº¦ä¸º 0 é«˜åº¦ï¼šå¯¹äºä»»æ„ç»“ç‚¹ nï¼Œn çš„é«˜åº¦ä¸ºä» n åˆ°å¶å­ç»“ç‚¹çš„æœ€é•¿è·¯å¾„é•¿ï¼Œæ‰€æœ‰å¶å­ç»“ç‚¹çš„é«˜åº¦ä¸º 0 æ£®æ—ï¼šç”± m(m\u0026gt;=0) æ£µäº’ä¸ç›¸äº¤çš„æ ‘ç»„æˆçš„é›†åˆç§°ä¸ºæ£®æ— å¸¸è§äºŒå‰æ ‘ é¡¾åæ€ä¹‰ï¼ŒäºŒå‰æ˜¯æŒ‡æ¯ä¸ªç»“ç‚¹æœ€å¤šåªæœ‰ä¸¤ä¸ªå­ç»“ç‚¹ï¼Œè¿™ä¸¤ä¸ªå­ç»“ç‚¹åˆ†åˆ«ç§°ä¸ºå·¦å­ç»“ç‚¹å’Œå³å­ç»“ç‚¹ã€‚\nä½†æ˜¯ï¼ŒäºŒå‰æ ‘å¹¶ä¸è¦æ±‚æ‰€æœ‰ç»“ç‚¹å¿…é¡»æ‹¥æœ‰ä¸¤ä¸ªå­ç»“ç‚¹ï¼Œæœ‰çš„ç»“ç‚¹åªæœ‰å·¦å­ç»“ç‚¹ï¼Œæœ‰çš„ç»“ç‚¹åªæœ‰å³å­ç»“ç‚¹ã€‚\næ»¡äºŒå‰æ ‘ å¦‚ä¸Šè¿°å›¾ a æ‰€ç¤ºï¼Œé™¤å¶å­ç»“ç‚¹ä»¥å¤–ï¼Œæ‰€æœ‰éå¶å­ç»“ç‚¹éƒ½æœ‰ 2 ä¸ªå­ç»“ç‚¹ï¼Œè¿™ç§äºŒå‰æ ‘è¢«ç§°ä¸ºæ»¡äºŒå‰æ ‘ã€‚\nå®Œå…¨äºŒå‰æ ‘ å¦‚ä¸Šè¿°å›¾ b æ‰€ç¤ºï¼Œé™¤æœ€åä¸€å±‚å¤–ï¼Œæ¯ä¸€å±‚çš„ç»“ç‚¹æ•°å‡è¾¾åˆ°æœ€å¤§å€¼ï¼Œè€Œä¸”æœ€åä¸€å±‚çš„å¶å­ç»“ç‚¹éƒ½é å·¦æ’åˆ—ï¼Œåªç¼ºå°‘å³è¾¹çš„è‹¥å¹²ç»“ç‚¹ï¼Œè¿™ç§äºŒå‰æ ‘è¢«ç§°ä¸ºå®Œå…¨äºŒå‰æ ‘ã€‚\nä»å®šä¹‰ä¸Šæ¥è¯´ï¼Œæ»¡äºŒå‰æ ‘æ˜¯ä¸€ç§ç‰¹æ®Šçš„å®Œå…¨äºŒå‰æ ‘ã€‚\näºŒå‰æŸ¥æ‰¾æ ‘ äºŒå‰æŸ¥æ‰¾æ ‘æ˜¯ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œå¸¸ç”¨ä½œæœç´¢ä½¿ç”¨ï¼Œä¹Ÿè¢«ç§°ä¸ºäºŒå‰æœç´¢æ ‘ã€äºŒå‰æ’åºæ ‘ã€‚\nå®ƒæœ‰å¯èƒ½æ˜¯ä¸€æ£µç©ºæ ‘ï¼Œä¹Ÿå¯èƒ½æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„äºŒå‰æ ‘ï¼š\nè‹¥æ ¹ç»“ç‚¹çš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºæ ¹ç»“ç‚¹çš„å€¼ è‹¥æ ¹ç»“ç‚¹çš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºç­‰äºæ ¹ç»“ç‚¹çš„å€¼ æ ¹ç»“ç‚¹çš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘ äºŒå‰æŸ¥æ‰¾æ ‘æ˜¯ä¸€ç§ç»å…¸çš„æ•°æ®ç»“æ„ï¼Œå®ƒæ—¢å…·æœ‰é“¾è¡¨å¿«é€Ÿæ’å…¥ã€åˆ é™¤çš„ç‰¹ç‚¹ï¼Œåˆå…·æœ‰æ•°ç»„å¿«é€ŸæŸ¥æ‰¾çš„ä¼˜åŠ¿ã€‚\nå­˜å‚¨ç»“æ„ é“¾å¼å­˜å‚¨ ä½¿ç”¨é“¾è¡¨å­˜å‚¨æ ‘çš„ç»“æ„æ˜¯ä¸€ç§æ¯”è¾ƒç®€å•ã€ç›´è§‚çš„æ–¹æ³•ã€‚\näºŒå‰æ ‘ä¸­æ¯ä¸ªç»“ç‚¹æœ€å¤šåªæœ‰ä¸¤ä¸ªå­ç»“ç‚¹ï¼Œå› æ­¤ï¼Œå¯ä»¥ç»™ç»“ç‚¹è®¾è®¡ä¸€ä¸ªæ•°æ®åŸŸå’Œä¸¤ä¸ªæŒ‡é’ˆåŸŸï¼Œä¸¤ä¸ªæŒ‡é’ˆåŸŸåˆ†åˆ«æŒ‡å‘å·¦å­ç»“ç‚¹å’Œå³å­ç»“ç‚¹ã€‚\nè¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨é“¾è¡¨ä½œä¸ºå­˜å‚¨æ–¹å¼ï¼Œåªè¦æ‹ä½æ ¹ç»“ç‚¹ï¼Œå°±å¯ä»¥é€šè¿‡å·¦å³å­ç»“ç‚¹çš„æŒ‡é’ˆï¼ŒæŠŠæ•´æ£µæ ‘éƒ½ä¸²èµ·æ¥ã€‚\nè¿™ç§æ–¹å¼æ¯”è¾ƒå¸¸ç”¨ï¼Œå¤§éƒ¨åˆ†äºŒå‰æ ‘ä»£ç éƒ½æ˜¯é€šè¿‡è¿™ç§æ–¹å¼å®ç°çš„ã€‚\né¡ºåºå­˜å‚¨ äºŒå‰æ ‘çš„é¡ºåºå­˜å‚¨ç»“æ„æ˜¯åŸºäºæ•°ç»„å®ç°çš„ï¼Œç”¨ä¸€ç»´æ•°ç»„å­˜å‚¨äºŒå‰æ ‘ä¸­çš„ç»“ç‚¹ï¼Œå¹¶ä¸”æ•°ç»„çš„ä¸‹æ ‡èƒ½å¤Ÿä½“ç°å‡ºäºŒå‰æ ‘ç»“ç‚¹ä¹‹é—´çš„é€»è¾‘å…³ç³»ã€‚\nåœ¨è¿™ä¸ªå­˜å‚¨äºŒå‰æ ‘ç»“ç‚¹çš„æ•°ç»„ä¸­ï¼Œä¸ºäº†ä½¿å¾—åç»­çš„ç»“ç‚¹é€»è¾‘å…³ç³»æ˜“äºç†è§£ï¼Œä¸‹æ ‡ä¸º 0 çš„å­˜å‚¨ä½ç½®æ˜¯ä¸ä½¿ç”¨çš„ã€‚ä¸€èˆ¬æ˜¯æŠŠæ ¹ç»“ç‚¹å­˜å‚¨åœ¨ i = 1 çš„ä½ç½®ä¸Šï¼Œå®ƒçš„å·¦å­ç»“ç‚¹å­˜å‚¨åœ¨ 2i = 2 çš„ä½ç½®ä¸Šã€å³å­ç»“ç‚¹å­˜å‚¨åœ¨ 2i + 1 = 3 çš„ä½ç½®ä¸Šã€‚ä»¥æ­¤ç±»æ¨ï¼Œå·¦å­ç»“ç‚¹çš„å·¦å­ç»“ç‚¹å­˜å‚¨åœ¨ 2i = 4 çš„ä½ç½®ï¼Œå®ƒçš„å³å­ç»“ç‚¹å­˜å‚¨åœ¨ 2i + 1 = 5 çš„ä½ç½®ã€‚\næ€»ç»“äºŒå‰æ ‘ç»“ç‚¹åœ¨æ•°ç»„ä¸­çš„é€»è¾‘å…³ç³»ï¼šå¦‚æœç»“ç‚¹ x å­˜å‚¨åœ¨æ•°ç»„ä¸­ä¸‹æ ‡ä¸º i çš„ä½ç½®ï¼Œåˆ™ç»“ç‚¹ x çš„å·¦å­ç»“ç‚¹å­˜å‚¨åœ¨æ•°ç»„ä¸­ä¸‹æ ‡ä¸º 2i çš„ä½ç½®ï¼Œå³å­ç»“ç‚¹å­˜å‚¨åœ¨æ•°ç»„ä¸­ä¸‹æ ‡ä¸º 2i+1 çš„ä½ç½®ã€‚\nå¯ä»¥å‘ç°ï¼Œä¸Šè¿°å±•ç¤ºçš„æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼Œä½¿ç”¨æ•°ç»„å­˜å‚¨å®Œå…¨äºŒå‰æ ‘æ—¶ï¼Œé™¤äº†ä¸‹æ ‡ä¸º 0 çš„ä½ç½®æ²¡æœ‰å­˜å‚¨æ•°æ®ä¹‹å¤–ï¼Œå…¶ä»–çš„ä½ç½®éƒ½ä¼šè¢«å¡«æ»¡äº†ã€‚\nä½†å¦‚æœæ˜¯éå®Œå…¨äºŒå‰æ ‘ï¼Œåˆ™ä¼šå‡ºç°æµªè´¹æ•°ç»„ä¸­å†…å­˜ç©ºé—´çš„æƒ…å†µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå› æ­¤ï¼Œä¸€èˆ¬ä½¿ç”¨é¡ºåºå­˜å‚¨ç»“æ„å­˜å‚¨å®Œå…¨äºŒå‰æ ‘ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç›¸æ¯”è¾ƒé“¾å¼å­˜å‚¨ç»“æ„ä¼šæ›´èŠ‚çœå†…å­˜ã€‚\nå †å…¶å®å°±æ˜¯ä¸€ç§å®Œå…¨äºŒå‰æ ‘ï¼Œæœ€å¸¸ç”¨çš„å­˜å‚¨æ–¹å¼å°±æ˜¯æ•°ç»„ã€‚\näºŒå‰æ ‘çš„éå† äºŒå‰æ ‘çš„éå†æ˜¯æŒ‡ä»æ ¹ç»“ç‚¹å‡ºå‘ï¼ŒæŒ‰ç…§æŸç§æ¬¡åºä¾æ¬¡è®¿é—®äºŒå‰æ ‘ä¸­çš„æ‰€æœ‰ç»“ç‚¹ï¼Œä½¿å¾—æŸä¸ªç»“ç‚¹ä»…ä¸”è¢«è®¿é—®ä¸€æ¬¡ã€‚\næ·±åº¦ä¼˜å…ˆéå† æ·±åº¦ä¼˜å…ˆéå†æ–¹å¼æ˜¯æŒ‡å°½å¯èƒ½æ·±åœ°æœç´¢æ ‘çš„åˆ†æ”¯ï¼Œå³å…ˆéå†åˆ°å¶å­ç»“ç‚¹å†æ›´æ”¹æœç´¢è·¯å¾„ã€‚\näºŒå‰æ ‘ç»å…¸çš„æ·±åº¦ä¼˜å…ˆéå†æ–¹å¼æœ‰ä¸‰ç§ï¼šå‰åºéå†ã€ä¸­åºéå†ã€ååºéå†ã€‚å…¶ä¸­ï¼Œå‰ã€ä¸­ã€ååºï¼Œè¡¨ç¤ºçš„æ˜¯ç»“ç‚¹ä¸å®ƒçš„å·¦å³å­æ ‘ç»“ç‚¹éå†æ‰“å°çš„å…ˆåé¡ºåºï¼š\nå‰åºéå†æ˜¯æŒ‡ï¼Œå¯¹äºæ ‘ä¸­çš„ä»»æ„ç»“ç‚¹æ¥è¯´ï¼Œå…ˆæ‰“å°è¿™ä¸ªç»“ç‚¹æœ¬èº«ï¼Œç„¶åå†æ‰“å°å®ƒçš„å·¦å­æ ‘ï¼Œæœ€åæ‰“å°å®ƒçš„å³å­æ ‘ ä¸­åºéå†æ˜¯æŒ‡ï¼Œå¯¹äºæ ‘ä¸­çš„ä»»æ„ç»“ç‚¹æ¥è¯´ï¼Œå…ˆæ‰“å°å®ƒçš„å·¦å­æ ‘ï¼Œç„¶åå†æ‰“å°è¿™ä¸ªç»“ç‚¹æœ¬èº«ï¼Œæœ€åæ‰“å°å®ƒçš„å³å­æ ‘ ååºéå†æ˜¯æŒ‡ï¼Œå¯¹äºæ ‘ä¸­çš„ä»»æ„ç»“ç‚¹æ¥è¯´ï¼Œå…ˆæ‰“å°å®ƒçš„å·¦å­æ ‘ï¼Œç„¶åå†æ‰“å°å®ƒçš„å³å­æ ‘ï¼Œæœ€åæ‰“å°è¿™ä¸ªç»“ç‚¹æœ¬èº« å…¶å®ï¼ŒäºŒå‰æ ‘çš„å‰ã€ä¸­ã€ååºéå†å°±æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ã€‚æ¯”å¦‚ï¼Œå‰åºéå†å°±æ˜¯å…ˆæ‰“å°æ ¹ç»“ç‚¹ï¼Œç„¶åå†é€’å½’åœ°æ‰“å°å·¦å­æ ‘ï¼Œæœ€åé€’å½’åœ°æ‰“å°å³å­æ ‘ã€‚\nä¸‹è¿°æ˜¯é€’å½’å®ç°å‰ã€ä¸­ã€ååºéå†çš„ä¼ªä»£ç å±•ç¤ºï¼š\nvoid preOrder(Node* root) { if (root == null) return; // æ‰“å°æ ¹ç»“ç‚¹ print root; // é€’å½’æ‰“å°å·¦å­æ ‘ preOrder(root-\u0026gt;left); // é€’å½’æ‰“å°å³å­æ ‘ preOrder(root-\u0026gt;right); } void inOrder(Node* root) { if (root == null) return; // é€’å½’æ‰“å°å·¦å­æ ‘ inOrder(root-\u0026gt;left); // æ‰“å°æ ¹ç»“ç‚¹ print root; // é€’å½’æ‰“å°å³å­æ ‘ inOrder(root-\u0026gt;right); } void postOrder(Node* root) { if (root == null) return; // é€’å½’æ‰“å°å·¦å­æ ‘ postOrder(root-\u0026gt;left); // é€’å½’æ‰“å°å³å­æ ‘ postOrder(root-\u0026gt;right); // æ‰“å°æ ¹ç»“ç‚¹ print root; } é™¤äº†ä½¿ç”¨é€’å½’çš„æ–¹å¼å®ç°æ·±åº¦ä¼˜å…ˆéå†å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ ˆè¿™ç§æ•°æ®ç»“æ„ä»¥éé€’å½’æ–¹å¼å®ç°ï¼Œå‰åºéå†æ–¹å¼å¦‚ä¸‹ï¼š\nå°† A ç»“ç‚¹å‹å…¥æ ˆä¸­ï¼Œæ ˆçš„ç»“æ„æ˜¯ [A]ï¼› å°† A ç»“ç‚¹å¼¹å‡ºï¼Œç„¶åå°† A ç»“ç‚¹çš„å­ç»“ç‚¹ Bã€C å‹å…¥æ ˆä¸­ï¼Œæ ˆçš„ç»“æ„æ˜¯ [C, B]ï¼› å°† B ç»“ç‚¹å¼¹å‡ºï¼Œç„¶åå°† B ç»“ç‚¹çš„å­ç»“ç‚¹ Dã€E å‹å…¥æ ˆä¸­ï¼Œæ ˆçš„ç»“æ„æ˜¯ [C, E, D]ï¼› å°† D ç»“ç‚¹å¼¹å‡ºï¼ŒD ç»“ç‚¹æ²¡æœ‰å­ç»“ç‚¹ï¼Œæ— éœ€åšå¤„ç†ï¼Œæ ˆçš„ç»“æ„æ˜¯ [C, E]ï¼› å°† E ç»“ç‚¹å¼¹å‡ºï¼ŒE ç»“ç‚¹æ²¡æœ‰å­ç»“ç‚¹ï¼Œæ— éœ€åšå¤„ç†ï¼Œæ ˆçš„ç»“æ„æ˜¯ [C]ï¼› ä¾æ¬¡ç±»æ¨ï¼Œæœ€ç»ˆä»¥ Aã€Bã€Dã€Eã€Cã€Fã€G çš„æ¬¡åºå¼¹å‡ºç»“ç‚¹å…ƒç´ ã€‚ å¹¿åº¦ä¼˜å…ˆéå† å¹¿åº¦ä¼˜å…ˆéå†åˆç§°ä¸ºå±‚æ¬¡éå†ï¼Œä»ä¸Šå¾€ä¸‹å¯¹æ¯ä¸€å±‚ä¾æ¬¡è®¿é—®ï¼Œåœ¨æ¯ä¸€å±‚ä¸­ï¼Œä»å·¦å¾€å³ï¼ˆä¹Ÿå¯ä»¥ä»å³å¾€å·¦ï¼‰è®¿é—®ç»“ç‚¹ï¼Œè®¿é—®å®Œä¸€å±‚å†è®¿é—®ä¸‹ä¸€å±‚ã€‚\nå±‚æ¬¡éå†éœ€è¦ä½¿ç”¨åˆ°é˜Ÿåˆ—è¿™ç§æ•°æ®ç»“æ„ï¼Œé˜Ÿåˆ—çš„ç‰¹ç‚¹æ˜¯å…ˆè¿›å…ˆå‡ºã€‚æ•´ä¸ªéå†è¿‡ç¨‹å¦‚ä¸‹ï¼š\nå°† A ç»“ç‚¹å…¥é˜Ÿï¼Œé˜Ÿåˆ—çš„ç»“æ„æ˜¯ [A]ï¼› å°† A ç»“ç‚¹å‡ºé˜Ÿï¼Œç„¶åå°† A ç»“ç‚¹çš„å­ç»“ç‚¹ Bã€C å…¥é˜Ÿï¼Œé˜Ÿåˆ—çš„ç»“æ„æ˜¯ [B, C]ï¼› å°† B ç»“ç‚¹å‡ºé˜Ÿï¼Œç„¶åå°† B ç»“ç‚¹çš„å­ç»“ç‚¹ Dã€E å…¥é˜Ÿï¼Œé˜Ÿåˆ—çš„ç»“æ„æ˜¯ [C, D, E]ï¼› å°† C ç»“ç‚¹å‡ºé˜Ÿï¼Œç„¶åå°† C ç»“ç‚¹çš„å­ç»“ç‚¹ Fã€G å…¥é˜Ÿï¼Œé˜Ÿåˆ—çš„ç»“æ„æ˜¯ [D, E, F, G]ï¼› å°† D ç»“ç‚¹å‡ºé˜Ÿï¼ŒD ç»“ç‚¹æ²¡æœ‰å­ç»“ç‚¹ï¼Œæ— éœ€åšå¤„ç†ï¼Œæ ˆçš„ç»“æ„æ˜¯ [E, F, G]ï¼› ä»¥æ­¤ç±»æ¨ï¼Œæœ€ç»ˆ Aã€Bã€Cã€Dã€Eã€Fã€G çš„æ¬¡åºå¼¹å‡ºç»“ç‚¹å…ƒç´ ã€‚ ä¼˜ç¼ºç‚¹ å¯¹äºæ·±åº¦ä¼˜å…ˆéå†ç®—æ³•ï¼Œéƒ½æ˜¯ä¼˜å…ˆæœç´¢å®Œä¸€é¢—å­æ ‘ï¼Œæœ‰ç€å†…å­˜å ç”¨ç›¸å¯¹è¾ƒå°çš„ä¼˜ç‚¹ï¼Œé€šå¸¸é¢å¤–å­˜å‚¨ç»“ç‚¹æ•°æ˜¯æ ‘çš„æ·±åº¦ï¼›éé€’å½’çš„æ·±åº¦ä¼˜å…ˆéå†æ–¹å¼ä¼šè¿›è¡Œå›æº¯ï¼Œç›¸å¯¹æ•ˆç‡æ¯”è¾ƒä½ã€‚\nå¯¹äºå¹¿åº¦ä¼˜å…ˆéå†ç®—æ³•ï¼Œå¯¹äºè§£å†³æœ€çŸ­æˆ–æœ€å°é—®é¢˜ç‰¹åˆ«æœ‰æ•ˆï¼Œè€Œä¸”ç»“ç‚¹åªè®¿é—®ä¸€éï¼Œæ•ˆç‡ç›¸å¯¹è¾ƒé«˜ï¼›ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆç®—æ³•éœ€è¦å­˜å‚¨ä¸€å±‚ç»“ç‚¹çš„çŠ¶æ€ï¼Œå†…å­˜å ç”¨ç›¸å¯¹è¾ƒé«˜ã€‚\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/binary-tree-basic.html","title":"äºŒå‰æ ‘çš„ç®€å•è®¤è¯†"},{"content":"é˜Ÿåˆ—è¿™ä¸ªæ¦‚å¿µéå¸¸å®¹æ˜“ç†è§£ï¼Œå°†é˜Ÿåˆ—æ¯”å–»æˆåªèƒ½åŒæ—¶é€šè¿‡ä¸€è¾†æ±½è½¦çš„éš§é“ï¼Œå½“æ±½è½¦è¿›å…¥åˆ°éš§é“å†…éƒ¨ï¼Œåªèƒ½å…ˆè¿›éš§é“çš„æ±½è½¦å…ˆå‡ºéš§é“ï¼Œåè¿›éš§é“çš„æ±½è½¦åå‡ºéš§é“ã€‚\nåŸºæœ¬æ¦‚å¿µ é˜Ÿåˆ—ä¹Ÿæ˜¯ä¸€ç§å—é™çš„çº¿æ€§è¡¨ï¼Œç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒåªå…è®¸åœ¨ä¸€ç«¯æ’å…¥ï¼Œåœ¨å¦ä¸€ç«¯åˆ é™¤ã€‚å› æ­¤ï¼Œå…ˆè¿›å…¥é˜Ÿåˆ—çš„å…ƒç´ èƒ½æœ€å…ˆä»é˜Ÿåˆ—ä¸­åˆ é™¤ï¼Œæ•…é˜Ÿåˆ—åˆè¢«ç§°ä¸º å…ˆè¿›å…ˆå‡ºè¡¨ã€‚\né˜Ÿåˆ—ä¸æ ˆéå¸¸ç›¸ä¼¼ï¼Œæ”¯æŒçš„æ“ä½œä¹Ÿå¾ˆæœ‰é™ã€‚ä»¥ä¸‹æ˜¯é˜Ÿåˆ—çš„ä¸€äº›æ¦‚å¿µï¼š\nè¿›è¡Œæ’å…¥æ“ä½œçš„ç«¯ç§°ä¸º é˜Ÿå°¾ è¿›è¡Œåˆ é™¤æ“ä½œçš„ç«¯ç§°ä¸º é˜Ÿå¤´ é˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ æ—¶ï¼Œç§°ä¸º ç©ºé˜Ÿåˆ— å‘é˜Ÿåˆ—ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ ç§°ä¸º å…¥é˜Ÿ åˆ é™¤é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªå…ƒç´ ç§°ä¸º å‡ºé˜Ÿ å®ç°ç±»å‹ åœ¨ç‰©ç†å­˜å‚¨å±‚é¢ï¼Œé˜Ÿåˆ—æ—¢å¯ä»¥ç”¨æ•°ç»„å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨é“¾è¡¨å®ç°ï¼Œåœ¨è¿™ä¸¤ç§æ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šå¢åŠ é˜Ÿåˆ—çš„é™åˆ¶å³å¯ã€‚\nä½¿ç”¨æ•°ç»„å®ç°çš„é˜Ÿåˆ—è¢«ç§°ä¸ºé¡ºåºé˜Ÿåˆ—ï¼Œä½¿ç”¨é“¾è¡¨å®ç°çš„é˜Ÿåˆ—è¢«ç§°ä¸ºé“¾å¼é˜Ÿåˆ—ã€‚\né¡ºåºé˜Ÿåˆ— ä½¿ç”¨æ•°ç»„å®ç°çš„é¡ºåºé˜Ÿåˆ—æ¯”å®ç°å®Œæ•´åŠŸèƒ½çš„æ•°ç»„æ›´åŠ ç®€å•ï¼Œä¸éœ€è¦å®ç°å¾€æ•°ç»„ä¸­æ’å…¥å…ƒç´ å’Œåˆ é™¤æ•°ç»„å†…å…ƒç´ çš„åŠŸèƒ½ã€‚\né¦–å…ˆï¼Œéœ€è¦ç”³è¯·ä¸€ä¸ªå¤§å°ä¸º n çš„æ•°ç»„ï¼›ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªé˜Ÿå¤´æ ‡è¯†å’Œé˜Ÿå°¾æ ‡è¯†ï¼›å½“å…¥é˜Ÿæ—¶ï¼Œéœ€è¦å°†é˜Ÿå°¾æ ‡è¯†åç§»ä¸€ä½ï¼›å½“å‡ºé˜Ÿæ—¶ï¼Œä¹Ÿéœ€è¦å°†é˜Ÿå¤´æ ‡è¯†åç§»ä¸€ä½ã€‚\nå½“æ•°ç»„æ— é™å¤§çš„æ—¶å€™ï¼Œä¸Šè¿°çš„å®ç°æ–¹å¼æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ä½†æ•°ç»„å‘æ¥æ˜¯é™åˆ¶å¤§å°çš„ï¼Œè€Œä¸”å‡ºé˜Ÿä¹‹åï¼Œæ•°ç»„çš„å‰åŠéƒ¨åˆ†å·²ç»æ²¡æœ‰æ•°æ®å­˜å‚¨äº†ï¼Œéå¸¸æµªè´¹ç©ºé—´ã€‚\nå¯¹äºè¿™ç§æƒ…å†µï¼Œé€šå¸¸é‡‡ç”¨ æ¬ç§»æ•°æ® çš„åŠæ³•ï¼Œå½“é˜Ÿå°¾æ ‡è¯†å·²ç»è¾¾åˆ° n çš„ä¸‹æ ‡æ—¶ï¼Œåˆ™åšä¸€æ¬¡æ•°æ®æ¬ç§»ï¼Œå¹¶ä¸”å°†é˜Ÿå¤´æ ‡è¯†å’Œé˜Ÿå°¾æ ‡è¯†æŒ‡å‘æ–°çš„ä¸‹æ ‡ã€‚\nä»¥è¿™ç§å®ç°æ€è·¯ï¼Œå…¥é˜Ÿçš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ï¼Œå‡ºé˜Ÿçš„æ—¶é—´å¤æ‚åº¦ä¸€ç›´éƒ½æ˜¯ $O(1)$ã€‚\né“¾å¼é˜Ÿåˆ— ä½¿ç”¨é“¾è¡¨å®ç°çš„é“¾å¼é˜Ÿåˆ—æ¯”ä½¿ç”¨æ•°ç»„å®ç°çš„é¡ºåºé˜Ÿåˆ—æ›´åŠ ç®€å•ï¼Œç”±äºé“¾è¡¨çš„ç‰¹æ€§ï¼Œå‡å°‘äº†æ¬ç§»æ•°æ®è¿™ä¸€æ­¥ã€‚\né“¾è¡¨ä¸éœ€è¦æå‰ç”³è¯·å†…å­˜ç©ºé—´ï¼Œä¹Ÿä¸éœ€è¦æ‹…å¿ƒå†…å­˜ç©ºé—´ä¸å¤Ÿçš„é—®é¢˜ï¼Œåªéœ€è¦åˆ›å»ºå¥½é˜Ÿå¤´æ ‡è¯†å’Œé˜Ÿå°¾æ ‡è¯†å³å¯ï¼Œå› æ­¤é“¾å¼é˜Ÿåˆ—ä¹Ÿæ˜¯å¸¸è§çš„é˜Ÿåˆ—å®ç°æ–¹å¼ã€‚\nå¦‚æœæ˜¯é‡‡ç”¨å°¾æ’æ³•å®ç°çš„é“¾è¡¨ï¼Œå¯ä»¥å°†é“¾è¡¨çš„å“¨å…µç»“ç‚¹çš„æŒ‡å‘ä½œä¸ºé˜Ÿå¤´æ ‡è¯†ï¼Œè¿™æ ·åªéœ€è¦æ–°å¢ä¸€ä¸ªé˜Ÿå°¾æ ‡è¯†å³å¯ã€‚å½“æ–°çš„å…ƒç´ å…¥é˜Ÿæ—¶ï¼Œå°†è¿™ä¸ªå…ƒç´ é“¾æ¥åˆ°å°¾ç»“ç‚¹ï¼Œç„¶åä¿®æ”¹é˜Ÿå°¾æ ‡è¯†çš„æŒ‡å‘ï¼›éœ€è¦å‡ºé˜Ÿæ—¶ï¼Œåˆ™åšåˆ é™¤å¤´ç»“ç‚¹çš„æ“ä½œï¼Œä¿®æ”¹å“¨å…µç»“ç‚¹çš„æŒ‡å‘ã€‚\nä»¥é“¾è¡¨å®ç°çš„é˜Ÿåˆ—ï¼Œæ— è®ºæ˜¯å…¥é˜Ÿè¿˜æ˜¯å‡ºé˜Ÿï¼Œæ—¶é—´å¤æ‚åº¦éƒ½å¯ä»¥è¾¾åˆ° $O(1)$ã€‚\nå¾ªç¯é˜Ÿåˆ— é¡ºåºé˜Ÿåˆ—åœ¨å…¥é˜Ÿæ—¶ä¼šæœ‰æ¬ç§»æ•°æ®çš„æƒ…å†µï¼Œå­˜åœ¨ä¸€å®šçš„æ€§èƒ½æŸè€—ï¼Œå¾ªç¯é˜Ÿåˆ—åˆ™æ˜¯åœ¨è¿™ä¸€æ–¹é¢åšäº†éƒ¨åˆ†ä¼˜åŒ–ï¼Œå‡å°‘è¿™ä¸€æ­¥æ“ä½œã€‚\nå¦‚æœæŠŠæ•°ç»„çœ‹ä½œä¸€æ¡ç›´çº¿ï¼Œå°±å¯ä»¥æŠŠå¾ªç¯é˜Ÿåˆ—çœ‹ä½œä¸€ä¸ªç¯ï¼Œé€šè¿‡å°†é˜Ÿåˆ—åšæˆç¯çš„æ–¹å¼ï¼Œå¯ä»¥é¿å…æ•°æ®æ¬ç§»çš„æ“ä½œã€‚\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé€šå¸¸ä¼šæœ‰ä¸€ä¸ª front æŒ‡é’ˆæŒ‡å‘é˜Ÿå¤´æ‰€åœ¨åœ°å€ï¼Œæœ‰ä¸€ä¸ª rear æŒ‡é’ˆæŒ‡å‘é˜Ÿå°¾çš„ä¸‹ä¸€ä¸ªåœ°å€ï¼Œå…¶åŸå› ä¸»è¦æ˜¯ï¼šè‹¥ front å’Œ rear åˆ†åˆ«æŒ‡å‘é˜Ÿå¤´å’Œé˜Ÿå°¾ï¼Œæ— æ³•åˆ¤åˆ«é˜Ÿç©ºå’Œå­˜åœ¨ä¸€ä¸ªå…ƒç´ çš„çŠ¶æ€ã€‚\nè‹¥é‡‡ç”¨ rear æŒ‡é’ˆæŒ‡å‘é˜Ÿå°¾çš„ä¸‹ä¸€ä¸ªåœ°å€çš„æ–¹å¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ front å’Œ rear æŒ‡å‘åŒä¸€ä¸ªåœ°å€æ¥åˆ¤åˆ«é˜Ÿç©ºï¼›åŒæ—¶ï¼Œç”±äºå¾ªç¯é˜Ÿåˆ—æ˜¯é€»è¾‘ä¸Šå¾ªç¯ï¼Œé€šå¸¸ä½¿ç”¨æ±‚ä½™è¿ç®—åˆ¤æ–­é˜Ÿæ»¡ï¼Œå¹¶ä¸”ä¸ºäº†é¿å…é˜Ÿç©ºå‡ºç°çš„ rear % n = front å’Œé˜Ÿæ»¡å‡ºç°çš„ (rear + n) % n = front é€ æˆå·®é”™ï¼Œå› æ­¤æ€»æ˜¯ç•™å‡ºä¸€ä¸ªç©ºä½ï¼Œä½¿ç”¨ (rear + 1) % n = front åˆ¤æ–­é˜Ÿæ»¡ã€‚\nåŒç«¯é˜Ÿåˆ— åŒç«¯é˜Ÿåˆ—æ˜¯ä¸€ç§å…·æœ‰é˜Ÿåˆ—å’Œæ ˆçš„æ€§è´¨çš„æ•°æ®ç»“æ„ï¼Œå³å¸¸è¯´çš„ deque(double-ended queue)ï¼Œæ˜¯ä¸€ç§é™å®šæ’å…¥å’Œåˆ é™¤æ“ä½œåœ¨è¡¨çš„ä¸¤ç«¯è¿›è¡Œçš„çº¿æ€§è¡¨ã€‚\nç°å®ç”Ÿæ´»ä¸­åŒç«¯é˜Ÿåˆ—çš„ä¾‹å­ï¼šå‡å¦‚åœ¨ç”µå½±é™¢ä¹°ç¥¨ï¼Œä¸€ä¸ªåˆšåˆšä¹°å®Œç¥¨çš„äººæƒ³å’¨è¯¢ä¸€ä¸‹ç®€å•ä¿¡æ¯ï¼Œå°±å¯ä»¥ç›´æ¥å›åˆ°é˜Ÿä¼çš„å¤´éƒ¨ï¼Œå¦‚æœåœ¨é˜Ÿå°¾æ’é˜Ÿçš„äººä¸æƒ³çœ‹ç”µå½±äº†ï¼Œå°±å¯ä»¥ä»é˜Ÿå°¾ç›´æ¥ç¦»å¼€é˜Ÿä¼ã€‚\nå°½ç®¡åŒç«¯é˜Ÿåˆ—çœ‹èµ·æ¥ä¼¼ä¹æ¯”æ ˆå’Œé˜Ÿåˆ—æ›´çµæ´»ï¼Œä½†å®é™…ä¸Šåœ¨åº”ç”¨ç¨‹åºä¸­è¿œä¸åŠæ ˆå’Œé˜Ÿåˆ—æ™®éã€‚\nåº”ç”¨åœºæ™¯ é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼Œå°¤å…¶æ˜¯ä¸€äº›å¸¦æœ‰ç‰¹æ®Šæ€§è´¨çš„é˜Ÿåˆ—ï¼Œåœ¨å„è‡ªçš„åº”ç”¨åœºæ™¯å¦‚é±¼å¾—æ°´ã€‚\né˜»å¡é˜Ÿåˆ— é˜»å¡é˜Ÿåˆ—åœ¨é˜Ÿåˆ—çš„åŸºç¡€ä¸Šå¢åŠ äº†é˜»å¡çš„ç‰¹æ€§ã€‚\nå½“é˜Ÿåˆ—ä¸ºç©ºçš„æ—¶å€™ï¼Œå‡ºé˜Ÿçš„æ“ä½œä¼šè¢«é˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æœ‰æ•°æ®ï¼›å½“é˜Ÿåˆ—æ»¡äº†çš„æ—¶å€™ï¼Œå…¥é˜Ÿçš„æ“ä½œä¹Ÿä¼šè¢«é˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æœ‰ç©ºé—²ä½ç½®å¯ä»¥æ’å…¥æ•°æ®ã€‚\nå¸¸è§çš„åœºæ™¯å°±æ˜¯â€œç”Ÿäº§è€… - æ¶ˆè´¹è€…â€æ¨¡å‹ï¼Œä½¿ç”¨é˜»å¡é˜Ÿåˆ—å¯ä»¥æœ‰æ•ˆåœ°åè°ƒç”Ÿäº§å’Œæ¶ˆè´¹çš„é€Ÿåº¦ã€‚\nå¹¶å‘é˜Ÿåˆ— å¹¶å‘é˜Ÿåˆ—æŒ‡çš„æ˜¯åœ¨å¤šçº¿ç¨‹æƒ…æ™¯ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œé˜Ÿåˆ—ï¼Œè€Œè¿™ä¸ªé˜Ÿåˆ—å¦‚æœæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåˆ™è¢«ç§°ä¸ºå¹¶å‘é˜Ÿåˆ—ã€‚\nå®ç°å¹¶å‘é˜Ÿåˆ—æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯åœ¨å…¥é˜Ÿã€å‡ºé˜Ÿçš„æ—¶å€™åŠ é”ï¼Œä½†æ˜¯è¿™ä¼šå½±å“é˜Ÿåˆ—çš„å¹¶å‘é‡ï¼Œé˜Ÿåˆ—åœ¨åŒä¸€æ—¶åˆ»ä»…èƒ½å¤„ç†ä¸€ä¸ªå­˜å–æ“ä½œã€‚\nå®é™…ä¸Šï¼Œä½¿ç”¨å¾ªç¯é˜Ÿåˆ—å’Œ CAS åŸå­æ“ä½œï¼Œå°±å¯ä»¥å®ç°éå¸¸é«˜æ•ˆçš„æ— é”å¹¶å‘é˜Ÿåˆ—ã€‚\nä¼˜å…ˆé˜Ÿåˆ— ä¼˜å…ˆé˜Ÿåˆ—æ˜¯åœ¨é˜Ÿåˆ—çš„æ¦‚å¿µä¸Šï¼Œå¯¹å…ƒç´ èµ‹äºˆä¼˜å…ˆçº§ï¼Œè®¿é—®æ—¶æ˜¯å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ å…ˆå‡ºé˜Ÿã€‚\né€šå¸¸ä¼˜å…ˆé˜Ÿåˆ—ä¼šä½¿ç”¨å †æ¥å®ç°ï¼Œå¦‚å¤§æ ¹å †å°±å¾ˆå¥½çš„è¡¨ç¤ºäº†æ ¹ç»“ç‚¹æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚å½“å‡ºé˜Ÿæ—¶å¯ä»¥å…ˆåˆ é™¤æ ¹ç»“ç‚¹ï¼Œç„¶åä»ä¸Šå¾€ä¸‹å †åŒ–ï¼›å…¥é˜Ÿæ—¶åˆ™éœ€è¦ä»ä¸‹å¾€ä¸Šå †åŒ–ã€‚\nå¯ä»¥çœ‹å‡ºï¼Œä¼˜å…ˆé˜Ÿåˆ—å…¶å®æ˜¯å †çš„ä¸€ç§ä½¿ç”¨æ–¹å¼ï¼Œèµ‹äºˆäº†é˜Ÿåˆ—çš„åç§°ï¼Œä¿æŒå’Œæ™®é€šé˜Ÿåˆ—ç›¸åŒçš„æ“ä½œæ–¹æ³•ã€‚\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/queue-basic.html","title":"é˜Ÿåˆ—çš„ç®€å•è®¤è¯†"},{"content":"æ•°æ®ç»“æ„ä¸­çš„æ ˆæ˜¯ä¸€ç§æ“ä½œå—é™çš„çº¿æ€§è¡¨ï¼Œåªå…è®¸åœ¨ä¸€ç«¯æ’å…¥å’Œåˆ é™¤æ•°æ®ï¼Œä½†å´æ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸä¸­éå¸¸é‡è¦çš„æ•°æ®ç»“æ„ï¼Œå¸¸ä½¿ç”¨åœ¨åº•å±‚ç»“æ„ã€‚\næ ˆçš„æ¦‚å¿µ ä»åŠŸèƒ½ä¸Šæ¥è¯´ï¼ŒåŒä¸ºçº¿æ€§è¡¨çš„æ•°ç»„å’Œé“¾è¡¨å®Œå…¨å¯ä»¥æ›¿ä»£æ ˆçš„ä½¿ç”¨ã€‚\nä½†æ˜¯ï¼Œä»æŸç§è§’åº¦æ¥è¯´ï¼Œæ•°ç»„å’Œé“¾è¡¨æš´éœ²å¤ªå¤šçš„æ“ä½œæ¥å£ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œéå¸¸å®¹æ˜“å‡ºé”™ã€‚\nå› æ­¤ï¼Œå½“æ•°æ®é›†åˆåªéœ€è¦åœ¨ä¸€ç«¯æ’å…¥å’Œåˆ é™¤æ•°æ®ï¼Œå¹¶ä¸”æ»¡è¶³å…ˆè¿›åå‡ºã€åè¿›å…ˆå‡ºçš„ç‰¹æ€§ï¼Œå¯ä»¥é¦–é€‰â€œæ ˆâ€è¿™ç§æ•°æ®ç»“æ„ã€‚\nä»¥ä¸‹æ˜¯æ ˆçš„ä¸€äº›æ¦‚å¿µï¼š\nå…è®¸è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„ä¸€ç«¯ç§°ä¸º æ ˆé¡¶ï¼Œæ ˆé¡¶ä¼šæ ¹æ®æ’å…¥ã€åˆ é™¤æ“ä½œè¿›è¡Œæµ®åŠ¨ ä¸å…è®¸è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„ä¸€ç«¯ç§°ä¸º æ ˆåº•ï¼Œæ ˆåº•æ˜¯å›ºå®šä¸å˜çš„ æ ˆä¸­å…ƒç´ ä¸ªæ•°ä¸ºé›¶æ—¶ç§°ä¸º ç©ºæ ˆ å¾€æ ˆä¸­æ’å…¥å…ƒç´ ç§°ä½œ è¿›æ ˆ åˆ é™¤æ ˆé¡¶çš„å…ƒç´ ç§°ä½œ å‡ºæ ˆ æ ˆçš„å®ç° åœ¨ç‰©ç†å­˜å‚¨å±‚é¢ï¼Œæ ˆæ—¢å¯ä»¥ç”¨æ•°ç»„å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨é“¾è¡¨å®ç°ï¼Œåœ¨è¿™ä¸¤ç§æ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šå¢åŠ æ ˆçš„é™åˆ¶å³å¯ã€‚\nä½¿ç”¨æ•°ç»„å®ç°çš„æ ˆè¢«ç§°ä¸ºé¡ºåºæ ˆï¼Œä½¿ç”¨é“¾è¡¨å®ç°çš„æ ˆè¢«ç§°ä¸ºé“¾å¼æ ˆã€‚\né¡ºåºæ ˆ ä½¿ç”¨æ•°ç»„ä½œä¸ºæ ˆå­˜å‚¨æ•°æ®çš„ç‰©ç†å­˜å‚¨ç»“æ„ï¼Œéœ€è¦å…ˆç”³è¯·ä¸€ä¸ªå¤§å°ä¸º n çš„æ•°ç»„ã€‚\nå°†æ•°ç»„çš„å°¾éƒ¨ä½œä¸ºæ ˆé¡¶ï¼Œå…¥æ ˆå’Œå‡ºæ ˆéƒ½åªåœ¨æ ˆé¡¶åšç›¸åº”å¤„ç†ï¼Œä½¿ç”¨ä¸€ä¸ªå˜é‡è¡¨ç¤ºæ•°ç»„å­˜å‚¨çš„å…ƒç´ ä¸ªæ•°ï¼Œè¿™æ ·å…¥æ ˆã€å‡ºæ ˆçš„æ“ä½œéƒ½èƒ½è¾¾åˆ° $O(1)$ çš„æ—¶é—´å¤æ‚åº¦ã€‚\nåŸºäºæ•°ç»„å®ç°çš„æ ˆå­˜åœ¨ä¸€ä¸ªé™åˆ¶ï¼Œå³æ•°ç»„åœ¨å£°æ˜ä¹‹åæ˜¯å›ºå®šå¤§å°çš„ï¼Œå½“æ ˆæ»¡çš„æ—¶å€™ï¼Œåˆ™æ— æ³•å†æ¬¡å¾€æ•°ç»„ä¸­æ·»åŠ æ•°æ®ã€‚è¿™æ ·å°±æ¶‰åŠåˆ°å¯¹æ•°ç»„è¿›è¡ŒåŠ¨æ€æ‰©å®¹ï¼Œå½“æ•°ç»„ç©ºé—´ä¸å¤Ÿçš„æ—¶å€™ï¼Œéœ€è¦é‡æ–°ç”³è¯·ä¸€å—æ›´å¤§çš„å†…å­˜ï¼Œå°†åŸæ¥æ•°ç»„ä¸­æ•°æ®ç»Ÿç»Ÿæ‹·è´è¿‡å»ã€‚\nå®é™…ä¸Šï¼Œæ”¯æŒåŠ¨æ€æ‰©å®¹çš„é¡ºåºæ ˆåœ¨å®é™…å¼€å‘ä¸­å¹¶ä¸å¸¸è§ã€‚ä½¿ç”¨åˆ°é¡ºåºæ ˆè¿™ç§æ•°æ®ç»“æ„çš„æƒ…å†µï¼Œä¸€èˆ¬éƒ½æ˜¯è§„æ¨¡æ¯”è¾ƒå°çš„æ•°æ®ï¼ŒçŸ¥é“æ•°æ®çš„æœ€å¤§è§„æ¨¡æ—¶å¯ä»¥é¿å…çˆ†æ ˆã€‚\né“¾å¼æ ˆ å¯¹äºæ•°æ®è§„æ¨¡æ¯”è¾ƒå¤§çš„æƒ…å†µï¼Œä½¿ç”¨é“¾è¡¨å®ç°æ ˆåˆ™ä¼šæ›´åŠ æ–¹ä¾¿ã€‚è¿™æ—¶å€™ï¼Œä¸éœ€è¦æå‰ç”³è¯·å†…å­˜ç©ºé—´ï¼Œè€Œæ˜¯éœ€è¦åˆ›å»ºä¸€ä¸ªå“¨å…µç»“ç‚¹æŒ‡å‘å¤´ç»“ç‚¹ã€‚\né“¾å¼æ ˆä¸€èˆ¬ä¼šä½¿ç”¨å¤´æ’æ³•åˆ›å»ºé“¾è¡¨ã€‚å°†å¤´ç»“ç‚¹ä½œä¸ºæ ˆé¡¶ï¼Œæ¯æ¬¡å…¥æ ˆéƒ½å½“ä½œé“¾è¡¨åœ¨å¤´ç»“ç‚¹æ’å…¥å…ƒç´ ï¼Œæ¯æ¬¡å‡ºæ ˆéƒ½å½“ä½œé“¾è¡¨åˆ é™¤å¤´ç»“ç‚¹ã€‚è¿™äº›æ“ä½œéƒ½åªéœ€è¦å¤„ç†å¥½å“¨å…µç»“ç‚¹çš„æŒ‡å‘å³å¯ï¼Œä½¿ç”¨é“¾å¼æ ˆèƒ½è¾¾åˆ° $O(1)$ çš„æ—¶é—´å¤æ‚åº¦ã€‚\nåŸºäºé“¾è¡¨å®ç°çš„æ ˆä¸éœ€è¦åƒæ•°ç»„ä¸€æ ·è¦åŠ¨æ€æ‰©å®¹ï¼Œé“¾è¡¨æ˜¯å¤©ç”Ÿæ”¯æŒåŠ¨æ€æ‰©å®¹çš„ã€‚\nåº”ç”¨åœºæ™¯ å‡½æ•°è°ƒç”¨æ ˆ å‡½æ•°è°ƒç”¨æ ˆæ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„åº”ç”¨åœºæ™¯ã€‚\næ“ä½œç³»ç»Ÿä¼šç»™æ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€å—ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œè¿™å—å†…å­˜è¢«ç»„ç»‡æˆâ€œæ ˆâ€è¿™ç§æ•°æ®ç»“æ„ï¼Œç”¨æ¥å­˜å‚¨å‡½æ•°è°ƒç”¨æ—¶çš„ä¸´æ—¶å˜é‡ã€‚\næ¯è¿›å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šå°†ä¸´æ—¶å˜é‡ä½œä¸ºä¸€ä¸ªæ ˆå¸§å…¥æ ˆï¼Œå½“è¢«è°ƒç”¨å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œè¿”å›åˆ°ä¸Šå±‚å‡½æ•°ä¹‹åï¼Œå†å°†è¿™ä¸ªå‡½æ•°å¯¹åº”çš„æ ˆå¸§å‡ºæ ˆã€‚\nç›´åˆ°å‡½æ•°æ ˆä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºæœ€å¤–å±‚çš„å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚\né€†æ³¢å…°è¡¨è¾¾å¼ ç¼–è¯‘å™¨è¿˜ä¼šåˆ©ç”¨æ ˆæ¥å®ç°è¡¨è¾¾å¼æ±‚å€¼ï¼Œè¿™éƒ¨åˆ†ä¹Ÿæœ‰éå¸¸æˆç†Ÿçš„å››åˆ™è¿ç®—ç®—æ³•â€”â€”é€†æ³¢å…°è¡¨è¾¾å¼ã€‚\né€šå¸¸çš„å››åˆ™è¿ç®—è¡¨è¾¾å¼å†™æˆ (1 + 2) x (3 + 4)ï¼ŒåŠ å‡ä¹˜é™¤ç­‰è¿ç®—ç¬¦å†™åœ¨ä¸­é—´ï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä½œâ€œä¸­ç¼€è¡¨è¾¾å¼â€ï¼›é€†æ³¢å…°è¡¨è¾¾å¼çš„å†™æ³•æ˜¯ 1 2 + 3 4 + xï¼Œè¿ç®—ç¬¦è¢«å†™åœ¨åé¢ï¼Œå› è€Œä¹Ÿè¢«ç§°ä½œâ€œåç¼€è¡¨è¾¾å¼â€ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰æ³¢å…°è¡¨è¾¾å¼ï¼Œå…¶å†™æ³•æ˜¯ x + 1 2 + 3 4ï¼Œè¢«ç§°ä½œâ€œå‰ç¼€è¡¨è¾¾å¼â€ã€‚\nå¦‚æœå°†è¡¨è¾¾å¼ç”»å‡ºä¸€æ£µè¯­æ³•æ ‘ï¼Œå°±èƒ½ä»¥æ ‘çš„æ¦‚å¿µæ¥ç›´è§‚ç†è§£å‰ç¼€ã€ä¸­ç¼€ã€åç¼€çš„å«ä¹‰ï¼Œå‰ç¼€è¡¨è¾¾å¼å¯¹åº”æ ‘çš„å‰åºéå†ï¼Œä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”æ ‘çš„ä¸­åºéå†ï¼Œåç¼€è¡¨è¾¾å¼å¯¹åº”æ ‘çš„ååºéå†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå¦‚æœè¦ä½¿ç”¨é€†æ³¢å…°è¡¨è¾¾å¼æ¥åšå››åˆ™è¿ç®—ï¼Œéœ€è¦å…ˆå°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢æˆé€†æ³¢å…°è¡¨è¾¾å¼ï¼Œæ¶‰åŠåˆ°æ“ä½œæ•°æ ˆå’Œè¿ç®—ç¬¦æ ˆï¼š\nä»å·¦å‘å³éå†ä¸­ç¼€è¡¨è¾¾å¼ï¼› è‹¥è¯»å–çš„æ˜¯æ“ä½œæ•°ï¼Œå°†æ“ä½œæ•°å­˜å…¥åˆ°æ“ä½œæ•°æ ˆä¸­ï¼› è‹¥è¯»å–çš„æ˜¯è¿ç®—ç¬¦ï¼Œè¿˜éœ€è¦æ ¹æ®è¿ç®—ç¬¦ç±»å‹è¿›ä¸€æ­¥åˆ¤æ–­ï¼š å¦‚æœæ˜¯ ( è¿ç®—ç¬¦ï¼Œåˆ™ç›´æ¥å­˜å…¥è¿ç®—ç¬¦æ ˆä¸­ï¼› å¦‚æœæ˜¯ ) è¿ç®—ç¬¦ï¼Œåˆ™è¾“å‡ºè¿ç®—ç¬¦æ ˆä¸­çš„è¿ç®—ç¬¦åˆ°æ“ä½œæ•°æ ˆï¼Œç›´åˆ°é‡åˆ° ( è¿ç®—ç¬¦ï¼Œåœ¨è¿™é‡Œæ”¾å¼ƒ ( å’Œ ) è¿ç®—ç¬¦ï¼› å¦‚æœæ˜¯éæ‹¬å·è¿ç®—ç¬¦ï¼Œè¿˜éœ€è¦ä¸è¿ç®—ç¬¦æ ˆæ ˆé¡¶çš„è¿ç®—ç¬¦æ¯”è¾ƒä¼˜å…ˆçº§ï¼š å¦‚æœè¿ç®—ç¬¦æ ˆæ ˆé¡¶çš„è¿ç®—ç¬¦æ˜¯æ‹¬å·ï¼Œåˆ™å°†å½“å‰è¿ç®—ç¬¦ç›´æ¥å­˜å…¥è¿ç®—ç¬¦æ ˆä¸­ï¼› å¦‚æœå½“å‰è¿ç®—ç¬¦æ¯”è¿ç®—ç¬¦æ ˆæ ˆé¡¶çš„è¿ç®—ç¬¦ä¼˜å…ˆçº§æ›´é«˜æ—¶ï¼Œåˆ™ç›´æ¥å­˜å…¥è¿ç®—ç¬¦æ ˆä¸­ï¼› å¦‚æœå½“å‰è¿ç®—ç¬¦æ¯”è¿ç®—ç¬¦æ ˆæ ˆé¡¶çš„è¿ç®—ç¬¦ä¼˜å…ˆçº§æ›´ä½æˆ–ç›¸ç­‰æ—¶ï¼Œåˆ™è¾“å‡ºæ ˆé¡¶è¿ç®—ç¬¦åˆ°æ“ä½œæ•°æ ˆï¼Œç„¶åå°†å½“å‰è¿ç®—ç¬¦å‹å…¥æ“ä½œç¬¦æ ˆï¼› å½“è¡¨è¾¾å¼è¯»å–å®Œåï¼Œå°†è¿ç®—ç¬¦æ ˆä¸­çš„è¿ç®—ç¬¦ä¾æ¬¡å‡ºæ ˆåˆ°æ“ä½œæ•°æ ˆä¸­ï¼Œç›´åˆ°è¿ç®—ç¬¦æ ˆä¸ºç©ºã€‚ ç»è¿‡ä¸Šè¿°æ­¥éª¤åï¼Œåˆ™å¯ä»¥å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢æˆé€†æ³¢å…°è¡¨è¾¾å¼ï¼Œéšåå¯¹é€†æ³¢å…°è¡¨è¾¾å¼åšè¿ç®—å¾—åˆ°è¡¨è¾¾å¼çš„ç»“æœï¼š\nä»å·¦å‘å³éå†é€†æ³¢å…°è¡¨è¾¾å¼ï¼› è‹¥è¯»å–çš„æ˜¯æ“ä½œæ•°ï¼Œå°†æ“ä½œæ•°å­˜å…¥æ ˆä¸­ï¼› è‹¥è¯»å–çš„æ˜¯è¿ç®—ç¬¦ï¼Œåˆ™å¯¹æ ˆé¡¶çš„ä¸¤ä¸ªæ“ä½œæ•°æ‰§è¡Œè¯¥è¿ç®—ï¼Œç„¶åå°†è¿ç®—ç»“æœå­˜å…¥æ ˆä¸­ï¼› é‡å¤ä¸Šè¿°çš„æ­¥éª¤ 1~3ï¼Œæœ€ç»ˆæ ˆä¸­çš„å…ƒç´ å³ä¸ºç»“æœå€¼ã€‚ ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/stack-basic.html","title":"æ ˆçš„ç®€å•è®¤è¯†"},{"content":"é“¾è¡¨æ˜¯ä¸¤å¤§ç‰©ç†å­˜å‚¨ç»“æ„ä¹‹ä¸€ï¼Œä¸æ•°ç»„ä½¿ç”¨ä¸€ç»„è¿ç»­çš„å†…å­˜ç©ºé—´ä¸åŒï¼Œé“¾è¡¨é€šè¿‡é“¾æ¥çš„æ–¹å¼å°†é›¶æ•£çš„å†…å­˜ç©ºé—´ä¸²è”èµ·æ¥ä½¿ç”¨ï¼Œæ˜¯çº¿æ€§è¡¨çš„å¦ä¸€ç§å­˜å‚¨æ–¹å¼ã€‚\nè®¤è¯†é“¾è¡¨ é“¾è¡¨å’Œæ•°ç»„ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªçº¿æ€§è¡¨ç»“æ„ï¼Œä½†æœ‰ä¸€ç‚¹ä¸æ•°ç»„ä¸åŒï¼Œé“¾è¡¨ä¸ä½¿ç”¨è¿ç»­çš„å†…å­˜ç©ºé—´è¿›è¡Œå­˜å‚¨ï¼Œè€Œæ˜¯é€šè¿‡ä¸²è”çš„æ–¹å¼è¿æ¥å…ƒç´ ã€‚\nå› æ­¤ï¼Œé“¾è¡¨å…‹æœäº†æ•°ç»„éœ€è¦é¢„å…ˆçŸ¥é“æ•°æ®å¤§å°çš„ç¼ºç‚¹ï¼Œå¹¶ä¸”èƒ½å……åˆ†åˆ©ç”¨è®¡ç®—æœºå†…å­˜ç©ºé—´ï¼Œå®ç°çµæ´»çš„å†…å­˜åŠ¨æ€ç®¡ç†ã€‚\nä½†é“¾è¡¨ä¹Ÿå¤±å»äº†é«˜æ•ˆå­˜å–çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶ï¼Œç”±äºå¢åŠ äº†ç»“ç‚¹çš„æŒ‡é’ˆåŸŸï¼Œç©ºé—´å¼€é”€ç›¸è¾ƒäºæ•°ç»„ä¼šæ›´å¤§ã€‚\né“¾è¡¨çš„æ¦‚å¿µ é“¾è¡¨é€šè¿‡æŒ‡é’ˆå°†é›¶æ•£çš„å†…å­˜å—ä¸²è”åœ¨ä¸€èµ·ï¼Œè¿™é‡Œçš„å†…å­˜å—è¢«ç§°ä¸ºé“¾è¡¨çš„ ç»“ç‚¹ã€‚\nç»“ç‚¹é™¤äº†å­˜å‚¨æ•°æ®ä¹‹å¤–ï¼Œè¿˜ä¼šå­˜å‚¨ä¸‹ä¸€ä¸ªç»“ç‚¹çš„åœ°å€ï¼Œè¿™ä¸ªè®°å½•ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€çš„æŒ‡é’ˆè¢«ç§°ä¸º åç»§æŒ‡é’ˆã€‚åœ¨åŒå‘é“¾è¡¨ä¸­ï¼Œç»“ç‚¹è¿˜ä¼šå­˜å‚¨ä¸Šä¸€ä¸ªç»“ç‚¹çš„åœ°å€ï¼Œè¿™ä¸ªè®°å½•ä¸Šä¸€ä¸ªç»“ç‚¹åœ°å€çš„æŒ‡é’ˆè¢«ç§°ä¸º å‰é©±æŒ‡é’ˆã€‚\né“¾è¡¨ä¸­å­˜åœ¨ä¸¤ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ç»“ç‚¹ï¼Œåˆ†åˆ«æ˜¯ç¬¬ä¸€ä¸ªç»“ç‚¹å’Œæœ€åä¸€ä¸ªç»“ç‚¹ã€‚å› æ­¤ä¹Ÿç»™è¿™ä¸¤ä¸ªç»“ç‚¹å–äº†åç§°ï¼Œç¬¬ä¸€ä¸ªç»“ç‚¹è¢«ç§°ä¸º å¤´ç»“ç‚¹ï¼Œæœ€åä¸€ä¸ªç»“ç‚¹è¢«ç§°ä¸º å°¾ç»“ç‚¹ã€‚\nä½æ•ˆå­˜å– å°†é“¾è¡¨å’Œæ•°ç»„ä½œæ¯”è¾ƒï¼Œæ•°ç»„å…·æœ‰é«˜æ•ˆå­˜å–çš„ä¼˜ç‚¹ï¼Œè€Œé“¾è¡¨æ˜¯æ˜¯å­˜å–æ•ˆç‡éå¸¸ä½çš„æ•°æ®ç»“æ„ã€‚\nè¿™é‡Œçš„å­˜å–æŒ‡çš„æ˜¯é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼å»è®¿é—®æ•°æ®ï¼Œé“¾è¡¨æ— æ³•åƒæ•°ç»„ä¸€æ ·ä½¿ç”¨å¯»å€å…¬å¼ï¼Œåªèƒ½é€šè¿‡å¤´ç»“ç‚¹ä½œä¸ºå…¥å£ï¼Œæ ¹æ®æŒ‡é’ˆä¸€ä¸ªç»“ç‚¹ä¸€ä¸ªç»“ç‚¹åœ°ä¾æ¬¡éå†ï¼Œç›´åˆ°æ‰¾åˆ°å¯¹åº”çš„ç»“ç‚¹ã€‚\nç»¼åˆè®¡ç®—ä¸‹æ¥ï¼Œé“¾è¡¨åšéšæœºè®¿é—®çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œæ•ˆç‡æ¯”æ•°ç»„ä½å¾—å¤šã€‚\né«˜æ•ˆå¢åˆ  è™½ç„¶é“¾è¡¨åœ¨éšæœºå­˜å–æ–¹é¢æ²¡æœ‰æ•°ç»„é«˜æ•ˆï¼Œä½†åœ¨æ’å…¥ã€åˆ é™¤ç»“ç‚¹çš„æ—¶å€™ï¼Œæ•ˆç‡æ¯”æ•°ç»„é«˜å¾ˆå¤šã€‚\nå‡è®¾ï¼Œè¦åœ¨é“¾è¡¨ä¸­æ’å…¥ä¸€ä¸ªç»“ç‚¹ï¼Œåœ¨çŸ¥é“æ’å…¥ä½ç½®çš„å‰åä¸¤ä¸ªç›¸é‚»ç»“ç‚¹çš„å‰æä¸‹ï¼Œåªéœ€å°†æ–°ç»“ç‚¹çš„åç»§æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œç„¶åå°†ä¸Šä¸€ä¸ªç»“ç‚¹çš„åç»§æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªæ–°ç»“ç‚¹ï¼Œå³å¯å®Œæˆæ’å…¥ç»“ç‚¹çš„æ“ä½œã€‚åˆ é™¤ç»“ç‚¹ä¹Ÿæ˜¯ç±»ä¼¼çš„æ“ä½œï¼Œéå¸¸æ–¹ä¾¿ã€‚\nä½†æ˜¯ï¼Œé“¾è¡¨æ’å…¥ã€åˆ é™¤ç»“ç‚¹çš„é«˜æ•ˆç‡ä¾é äºçŸ¥é“æ“ä½œä½ç½®çš„ç›¸é‚»ç»“ç‚¹ï¼Œå¦åˆ™ä»éœ€è¦ä»å¤´ç»“ç‚¹å¼€å§‹å¯»æ‰¾åˆ°å¯¹åº”ä½ç½®ï¼Œè¿™æ ·çš„æ•ˆç‡ä¼šéå¸¸ä½ã€‚\näº”èŠ±å…«é—¨çš„é“¾è¡¨ é“¾è¡¨æœ‰å¾ˆå¤šä¸åŒçš„ç±»å‹ï¼Œåœ¨ä¸Šé¢è¯´çš„éƒ½æ˜¯æœ€ç®€å•çš„å•å‘é“¾è¡¨ï¼Œå¤æ‚ä¸€ç‚¹çš„è¿˜æœ‰åŒå‘é“¾è¡¨ã€å¾ªç¯é“¾è¡¨ç­‰ç­‰ã€‚\nå•å‘é“¾è¡¨ å•å‘é“¾è¡¨æ˜¯æœ€ç®€å•çš„é“¾è¡¨ç»“æ„ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªåŸŸï¼Œä¸€ä¸ªä¿¡æ¯åŸŸå’Œä¸€ä¸ªæŒ‡é’ˆåŸŸã€‚\nä¿¡æ¯åŸŸå­˜å‚¨å®é™…çš„æ•°æ®ï¼ŒæŒ‡é’ˆåŸŸå­˜å‚¨ä¸‹ä¸€ä¸ªç»“ç‚¹ä½ç½®ã€‚\nåœ¨å®é™…ç¼–ç ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œä¼šä½¿ç”¨å“¨å…µç»“ç‚¹å æ®å¤´ç»“ç‚¹çš„ä½ç½®ï¼Œå…¶ä¿¡æ¯åŸŸæ˜¯ç©ºçš„ï¼ŒæŒ‡é’ˆåŸŸå­˜å‚¨å®é™…çš„å¤´ç»“ç‚¹æ‰€åœ¨ä½ç½®ï¼Œå°¾ç»“ç‚¹çš„æŒ‡é’ˆåŸŸä¸€èˆ¬ä¼šæ˜¯ NULL åœ°å€ã€‚\nåŒå‘é“¾è¡¨ åŒå‘é“¾è¡¨åœ¨å•å‘é“¾è¡¨çš„åŸºç¡€ä¸Šå¤šå¢åŠ äº†ä¸€ä¸ªæŒ‡é’ˆåŸŸï¼Œè¿™ä¸ªæ–°å¢åŠ çš„æŒ‡é’ˆåŸŸä¼šå­˜å‚¨ä¸Šä¸€ä¸ªç»“ç‚¹æ‰€åœ¨ä½ç½®ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åŒå‘é“¾è¡¨ä¸­ï¼Œé™¤å¤´ç»“ç‚¹å¤–ï¼Œä»»æ„ç»“ç‚¹éƒ½å¯ä»¥è®¿é—®åˆ°ä¸Šä¸€ä¸ªç»“ç‚¹ï¼Œå› æ­¤ç§°ä¸ºåŒå‘é“¾è¡¨ã€‚\nåŒç«¯é“¾è¡¨ åŒç«¯é“¾è¡¨ä¸åŒå‘é“¾è¡¨æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ä¸ªæ¦‚å¿µã€‚\nåŒç«¯é“¾è¡¨æ˜¯åœ¨å•å‘é“¾è¡¨çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†å°¾ç»“ç‚¹çš„å¼•ç”¨ã€‚æ‹¥æœ‰è¿™ä¸ªå¼•ç”¨çš„åŒç«¯é“¾è¡¨åœ¨å°¾éƒ¨æ’å…¥ç»“ç‚¹æ—¶ç‰¹åˆ«æ–¹ä¾¿ï¼Œå› æ­¤å¸¸è¢«ç”¨ä½œå®ç°é“¾å¼é˜Ÿåˆ—ã€‚\nè™½ç„¶åŒç«¯é“¾è¡¨å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨å°¾éƒ¨æ’å…¥ç»“ç‚¹ï¼Œä½†ç”±äºæ— æ³•å¿«æ·åœ°è·å–å€’æ•°ç¬¬äºŒä¸ªç»“ç‚¹ï¼Œå› æ­¤ä»ç„¶ä¸èƒ½æ–¹ä¾¿åœ°åˆ é™¤å°¾ç»“ç‚¹ï¼Œè‹¥éœ€è¦æ­¤åŠŸèƒ½å¯ä»¥é åŒå‘é“¾è¡¨å®ç°ã€‚\nå¾ªç¯é“¾è¡¨ å¾ªç¯é“¾è¡¨æ˜¯ä¸€ä¸ªå¤´ç»“ç‚¹å’Œå°¾ç»“ç‚¹è¿æ¥åœ¨ä¸€èµ·çš„ç‰¹æ®Šé“¾è¡¨ï¼Œé€šè¿‡å•å‘é“¾è¡¨æˆ–åŒå‘é“¾è¡¨éƒ½èƒ½å¤Ÿå®ç°ã€‚\nå¾ªç¯é“¾è¡¨çš„ä¼˜ç‚¹å°±æ˜¯ä»é“¾è¡¨çš„å°¾ç»“ç‚¹åˆ°å¤´ç»“ç‚¹éå¸¸æ–¹ä¾¿ï¼Œä¹Ÿæ–¹ä¾¿å¤„ç†å…·æœ‰ç¯å½¢ç»“æ„ç‰¹ç‚¹çš„æ•°æ®ï¼Œå¦‚çº¦ç‘Ÿå¤«é—®é¢˜ã€‚\nå—çŠ¶é“¾è¡¨ å¿«çŠ¶é“¾è¡¨æœ¬èº«æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œä½†æ˜¯é“¾å¼å­˜å‚¨çš„å¹¶ä¸æ˜¯ä¸€èˆ¬çš„æ•°æ®ï¼Œè€Œæ˜¯ç”±ä¸€äº›æ•°æ®ç»„æˆçš„é¡ºåºè¡¨ç»“ç‚¹ï¼Œè¿™äº›ç»“ç‚¹ä¹Ÿè¢«ç§°ä½œå—ã€‚\nå—çŠ¶é“¾è¡¨é€šè¿‡ä½¿ç”¨å¯å˜çš„é¡ºåºè¡¨çš„é•¿åº¦å’Œç‰¹æ®Šçš„æ’å…¥ã€åˆ é™¤çš„æ–¹å¼ï¼Œå¯ä»¥è¾¾åˆ° $O(\\sqrt{N})$ çš„æ—¶é—´å¤æ‚åº¦ã€‚\nå—çŠ¶é“¾è¡¨çš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯ç›¸å¯¹æ™®é€šé“¾è¡¨æ¥è¯´æ›´èŠ‚çœå†…å­˜ï¼Œå› ä¸ºä¸ç”¨ä¿å­˜æŒ‡å‘æ¯ä¸€ä¸ªæ•°æ®ç»“ç‚¹çš„æŒ‡é’ˆã€‚\nå¸¸è§é—®é¢˜ æ•°ç»„å’Œé“¾è¡¨ ä»…ç‰¹æ€§å’Œæ•ˆç‡è€Œè¨€ï¼Œæ•°ç»„æ‹¥æœ‰é«˜æ•ˆéšæœºå­˜å–çš„ç‰¹æ€§ï¼Œé“¾è¡¨åœ¨æ’å…¥ã€åˆ é™¤ç»“ç‚¹æ—¶æ•ˆç‡æ›´é«˜ã€‚å› æ­¤ï¼Œç»å¸¸åˆ©ç”¨ä¸‹æ ‡è®¿é—®å…ƒç´ å¯ä»¥ä½¿ç”¨æ•°ç»„ï¼Œç»å¸¸æ’å…¥ã€åˆ é™¤å…ƒç´ å¯ä»¥ä½¿ç”¨é“¾è¡¨ã€‚\nä½†æ˜¯ï¼Œä¸èƒ½ä»…ä»…åªç”¨å¤æ‚åº¦åˆ†æå†³å®šä½¿ç”¨å“ªç§æ•°æ®ç»“æ„ã€‚æ•°ç»„ç®€å•æ˜“ç”¨ï¼Œè€Œä¸”èƒ½å¤Ÿå€ŸåŠ© CPU ç¼“å­˜æœºåˆ¶é¢„è¯»æ•°ç»„ä¸­çš„æ•°æ®ï¼›è€Œé“¾è¡¨åœ¨å†…å­˜ä¸­ä¸æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œå¯¹ CPU ç¼“å­˜ä¸å‹å¥½ï¼Œæ²¡åŠæ³•æœ‰æ•ˆé¢„è¯»ã€‚\næ•°ç»„çš„ç¼ºç‚¹æ˜¯æ•°æ®å¤§å°å›ºå®šï¼Œè€Œä¸”ä¸€ç»å£°æ˜è¦å ç”¨æ•´å—è¿ç»­å†…å­˜ç©ºé—´ï¼Œå¦‚æœå£°æ˜çš„æ•°ç»„è¿‡å¤§ï¼Œç³»ç»Ÿå¯èƒ½æ²¡æœ‰è¶³å¤Ÿçš„è¿ç»­å†…å­˜ç©ºé—´åˆ†é…ç»™å®ƒã€‚å³ä½¿æ˜¯åœ¨ Java ä¸­ä½¿ç”¨å¯ä»¥åŠ¨æ€æ‰©å®¹çš„ ArrayList ç±»å‹ï¼Œä¹Ÿå­˜åœ¨æ‰©å®¹è€—æ—¶çš„é—®é¢˜ã€‚è€Œé“¾è¡¨æœ¬èº«æ²¡æœ‰è¿™æ ·çš„é™åˆ¶ï¼Œå¤©ç”Ÿæ”¯æŒåŠ¨æ€æ‰©å®¹ã€‚\nå®ç°æŠ€å·§ ç¼–å†™ä¸€ä¸ªæ­£ç¡®çš„é“¾è¡¨æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œä½†æ˜¯å…¶ä¸­ä¹Ÿæœ‰ä»¥ä¸‹æŠ€å·§å¯ä»¥å‚è€ƒï¼š\nç†è§£æŒ‡é’ˆæˆ–å¼•ç”¨çš„å«ä¹‰ã€‚å°†æŸä¸ªå˜é‡èµ‹å€¼ç»™æŒ‡é’ˆï¼Œå®é™…ä¸Šå°±æ˜¯å°†è¿™ä¸ªå˜é‡çš„åœ°å€èµ‹å€¼ç»™æŒ‡é’ˆï¼Œæˆ–è€…åè¿‡æ¥è¯´ï¼ŒæŒ‡é’ˆä¸­å­˜å‚¨äº†è¿™ä¸ªå˜é‡çš„å†…å­˜åœ°å€ï¼Œè¿™ä¸ªå†…å­˜åœ°å€å­˜å‚¨è¿™ä¸ªå˜é‡ï¼Œé€šè¿‡æŒ‡é’ˆèƒ½æ‰¾åˆ°è¿™ä¸ªå˜é‡ è­¦æƒ•æŒ‡é’ˆä¸¢å¤±ã€‚æ’å…¥ç»“ç‚¹æ—¶ï¼Œå…ˆå°†æ’å…¥ç»“ç‚¹çš„åç»§æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œå†æŠŠå‰ä¸€ä¸ªç»“ç‚¹çš„æŒ‡é’ˆæŒ‡å‘æ’å…¥ç»“ç‚¹ï¼Œè¿™æ ·æ‰ä¸ä¼šä¸¢å¤±æŒ‡é’ˆ é¿å…å†…å­˜æ³„æ¼ã€‚åˆ é™¤ç»“ç‚¹æ—¶ï¼Œè¦è®°å¾—æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ç©ºé—´ åˆ©ç”¨å“¨å…µç®€åŒ–å®ç°éš¾åº¦ã€‚åœ¨å®é™…å¼€å‘å½“ä¸­ï¼Œå¦‚æœå‘ç©ºé“¾è¡¨ä¸­æ’å…¥ç¬¬ä¸€ä¸ªç»“ç‚¹çš„æ—¶å€™ï¼Œè¿˜éœ€è¦åˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦å·²ç»å­˜åœ¨å¤´ç»“ç‚¹ï¼ŒåµŒå…¥ä»£ç æ¯”è¾ƒä¸¥é‡ï¼›ä½†æ˜¯ï¼Œå¦‚æœå¢åŠ ä¸€ä¸ªå“¨å…µç»“ç‚¹ï¼Œå“¨å…µç»“ç‚¹çš„åç»§æŒ‡é’ˆæŒ‡å‘å¤´ç»“ç‚¹ï¼Œåˆ™å¯ä»¥çœç•¥è¿™ä¸€æ­¥æ“ä½œ é‡ç‚¹ç•™æ„è¾¹ç•Œæ¡ä»¶å¤„ç†ã€‚å½“é“¾è¡¨ä¸ºç©ºçš„æ—¶å€™ï¼Œä»£ç æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼Ÿå½“é“¾è¡¨åªæœ‰ä¸€ä¸ªç»“ç‚¹çš„æ—¶å€™ï¼Œä»£ç æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œç­‰ç­‰ ä¸¾ä¾‹ç”»å›¾ï¼Œè¾…åŠ©æ€è€ƒã€‚é“¾è¡¨çš„æŒ‡é’ˆæŒ‡å‘ä¼šæ¯”è¾ƒå¤æ‚ï¼Œè¿™ç§æƒ…å†µå¯ä»¥é€šè¿‡ä¸¾ä¾‹ç”»å›¾çš„åŠæ³•å°†å„ç§æƒ…å†µåˆ—ä¸¾å‡ºæ¥ï¼Œè¿™æ ·æ€è·¯ä¼šæ›´åŠ æ¸…æ™° å¤šå†™å¤šç»ƒï¼Œç†Ÿèƒ½ç”Ÿå·§ã€‚å†™é“¾è¡¨ä»£ç æ˜¯éå¸¸è€ƒéªŒé€»è¾‘æ€ç»´èƒ½åŠ›çš„ï¼Œå¤šå¤šå°è¯•ç»ƒä¹ å¯ä»¥æé«˜é€»è¾‘æ€ç»´èƒ½åŠ› ","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/linked-list-basic.html","title":"é“¾è¡¨çš„ç®€å•è®¤è¯†"},{"content":"æ•°ç»„æ˜¯æœ€åŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿæ˜¯ä¸¤å¤§ç‰©ç†å­˜å‚¨ç»“æ„ä¹‹ä¸€ï¼Œåªæœ‰æ·±åˆ»ç†è§£äº†æ•°ç»„çš„æ¦‚å¿µå’Œç‰¹æ€§ï¼Œæ‰èƒ½ç®—æ˜¯è¿ˆå…¥å­¦ä¹ æ•°æ®ç»“æ„çš„æ®¿å ‚ï¼Œæ‰èƒ½å°†æŠ½è±¡çš„æ•°æ®ç»“æ„æ˜ å°„åˆ°ä»£ç å½“ä¸­ã€‚\nç†è§£æ•°ç»„ æ•°ç»„æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ çº¿æ€§è¡¨ æ•°æ®ç»“æ„ï¼Œå®ƒç”¨ä¸€ç»„ è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ¥å­˜å‚¨ä¸€ç»„å…·æœ‰ ç›¸åŒç±»å‹çš„æ•°æ®ã€‚\nçº¿æ€§è¡¨ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œçº¿æ€§è¡¨å°±æ˜¯æ•°æ®æ’æˆä¸€æ¡çº¿ä¸€æ ·çš„ç»“æ„ï¼Œåœ¨çº¿æ€§è¡¨ä¸­ï¼Œæ¯ä¸ªæ•°æ®éƒ½åªæœ‰å‰åä¸¤ä¸ªæ–¹å‘ã€‚\nä¸çº¿æ€§è¡¨ç›¸å¯¹çš„æ˜¯éçº¿æ€§è¡¨ç»“æ„ï¼Œåœ¨éçº¿æ€§è¡¨ä¸­ï¼Œæ¯ä¸ªæ•°æ®ä¼šå­˜åœ¨å¤šä¸ªæ–¹å‘ï¼Œæ•°æ®ä¹‹é—´ä¸ä»…ä»…åªæ˜¯ç®€å•çš„å‰åå…³ç³»ï¼Œè€Œæ˜¯å‘ˆç°å‘æ•£å‹çš„å…³ç³»ã€‚\nè¿ç»­çš„å†…å­˜ç©ºé—´ åœ¨æ•°ç»„ä¸­ï¼Œå­˜å‚¨æ•°æ®çš„å†…å­˜ç©ºé—´æ˜¯è¿ç»­çš„ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€æ®µå†…å­˜ç©ºé—´æ ‡æ˜ç”¨äºå­˜å‚¨æ•°ç»„å…ƒç´ ï¼Œåˆ™è¿™ä¸€ç‰‡ç©ºé—´åªä¼šå­˜å‚¨æ•°ç»„å…ƒç´ ï¼Œä¸ä¼šå†æ‹†åˆ†å‡ºæ¥å­˜å‚¨å…¶ä»–çš„æ•°æ®ã€‚\nç›¸åŒç±»å‹çš„æ•°æ® åœ¨æ•°ç»„çš„åŸå§‹å®šä¹‰ä¸­ï¼Œæ•°ç»„åªèƒ½å­˜å‚¨ç›¸åŒç±»å‹çš„æ•°æ®ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å ç”¨çš„å†…å­˜ç©ºé—´éƒ½èƒ½ä¿æŒä¸€è‡´ã€‚\næ•°ç»„çš„å¢åˆ æŸ¥æ”¹ è®¨è®ºæ•°ç»„çš„å¢åˆ æŸ¥æ”¹ï¼Œä»æ•ˆç‡çš„è§’åº¦ä¸ŠåŒºåˆ†ï¼Œä¸»è¦å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šé«˜æ•ˆå­˜å–ã€ä½æ•ˆå¢åˆ ã€‚\né«˜æ•ˆå­˜å– è¿™é‡Œçš„â€œå­˜å–â€æŒ‡çš„æ˜¯é€šè¿‡ä¸‹æ ‡è®¿é—®æ•°ç»„å…ƒç´ ï¼Œç„¶åå¯¹è¿™ä¸ªå…ƒç´ åšå­˜å–æ“ä½œã€‚\næ•°ç»„èƒ½åšåˆ°é«˜æ•ˆå­˜å‚¨çš„æ ¹æœ¬åŸå› åœ¨äºï¼Œå…¶æ‹¥æœ‰â€œè¿ç»­çš„å†…å­˜ç©ºé—´â€å’Œâ€œç›¸åŒç±»å‹çš„æ•°æ®â€è¿™ä¸¤ä¸ªé™åˆ¶ã€‚æ­£å› ä¸ºè¿™ä¸¤ä¸ªé™åˆ¶ï¼Œè®¡ç®—æœºå¯ä»¥é€šè¿‡ä¸€ä¸ªå¯»å€å…¬å¼æ¥å¯»æ‰¾æ•°ç»„å…ƒç´ çš„åœ°å€ï¼Œå¦‚ä¸‹æ˜¯å¯»å€å…¬å¼çš„ç®€å•ç†è§£ï¼š\naddress[i] = base_address + data_type_size * i å…¶ä¸­ï¼Œbase_address è¡¨ç¤ºæ•°ç»„çš„èµ·å§‹åœ°å€ï¼Œdata_type_size è¡¨ç¤ºæ¯ä¸ªå…ƒç´ å ç”¨çš„ç©ºé—´å¤§å°ã€‚\nç®€å•çš„ç†è§£å°±æ˜¯ï¼Œç”±äºå­˜å‚¨æ•°ç»„å…ƒç´ çš„å†…å­˜ç©ºé—´æ˜¯è¿ç»­çš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç›¸å¯¹äºèµ·å§‹ä½ç½®çš„åç§»é‡å³å¯æ‰¾åˆ°æ•°ç»„å…ƒç´ ï¼Œåˆå› ä¸ºæ•°ç»„ä¸­å­˜å‚¨çš„éƒ½æ˜¯ç›¸åŒç±»å‹çš„å…ƒç´ ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹æ ‡è®¡ç®—æ¯ä¸€ä¸ªå…ƒç´ çš„ç›¸å¯¹åç§»é‡ã€‚\né€šè¿‡å¯»å€å…¬å¼ï¼Œæ•°ç»„å¯ä»¥é€šè¿‡ä¸‹æ ‡å¿«é€ŸæŸ¥æ‰¾åˆ°æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå…¶æ—¶é—´å¤æ‚åº¦èƒ½è¾¾åˆ° $O(1)$ã€‚\nä½æ•ˆå¢åˆ  è™½ç„¶æ•°ç»„å¯ä»¥é€šè¿‡ä¸‹æ ‡å®ç°é«˜æ•ˆçš„éšæœºå­˜å–ï¼Œä½†æ˜¯å¯¹æ•°ç»„åšæ’å…¥ã€åˆ é™¤æ“ä½œéå¸¸ä½æ•ˆã€‚\nè¿™é‡Œçš„ä½æ•ˆä½“ç°åœ¨æ’å…¥å…ƒç´ æˆ–åˆ é™¤å…ƒç´ ä¹‹åï¼Œéœ€è¦å¯¹æ•°ç»„ä¸­çš„å…¶ä»–å…ƒç´ åšæ¬ç§»æ“ä½œï¼Œä»¥ä¿è¯æ•°ç»„å…ƒç´ çš„è¿ç»­æ€§ã€‚\nåœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ä¸­ï¼Œå‡è®¾è¦åœ¨ç¬¬ k ä¸ªä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸æ˜¯ä¿®æ”¹å…ƒç´ çš„æ“ä½œï¼Œä¸èƒ½ç›´æ¥æ›¿æ¢æ‰ç¬¬ k ä¸ªå…ƒç´ ï¼Œè€Œæ˜¯éœ€è¦ä¾æ¬¡å°†ç¬¬ k ä¸ªåŠä¹‹åçš„å…ƒç´ éƒ½å¾€åæŒªä¸€ä½ï¼Œç„¶åæ‰èƒ½åœ¨ç¬¬ k ä¸ªä½ç½®ä¸Šå­˜å…¥è¿™ä¸ªå…ƒç´ ã€‚\nåˆ é™¤å…ƒç´ å’Œæ’å…¥å…ƒç´ ç±»ä¼¼ï¼Œä¸ºäº†é¿å…åˆ é™¤å…ƒç´ ä¹‹åå¯¼è‡´æ•°ç»„ä¸­é—´å‡ºç°ç©ºæ´ï¼Œéœ€è¦å°†åˆ é™¤ä½ç½®ä¹‹åçš„å…ƒç´ å¾€å‰æŒªä¸€ä½ã€‚\né€šè¿‡è®¡ç®—å¾—çŸ¥ï¼Œæ•°ç»„æ’å…¥ã€åˆ é™¤å…ƒç´ çš„æœ€å¥½æ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ã€æœ€åæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚\nç‰¹æ®Šæ•°ç»„ äºŒç»´æ•°ç»„ äºŒç»´æ•°ç»„æŒ‡çš„æ˜¯ä»¥æ•°ç»„ä½œä¸ºæ•°ç»„å…ƒç´ çš„æ•°ç»„ï¼Œå³â€œæ•°ç»„çš„æ•°ç»„â€ï¼Œåˆè¢«ç§°ä¸ºçŸ©é˜µã€‚\nä»å­˜å‚¨ç»“æ„ä¸Šçœ‹ï¼Œå°†æ™®é€šçš„ä¸€ç»´æ•°ç»„çœ‹ä½œæ˜¯ä¸€ä¸ªå¦‚åŒç›´çº¿çš„çº¿æ€§è¡¨ï¼ŒäºŒç»´æ•°ç»„å°±å¯ä»¥çœ‹ä½œæ˜¯å¤šä¸ªçº¿æ€§è¡¨å¹¶æ’çš„å¹³é¢ã€‚\nç¨€ç–æ•°ç»„ åœ¨æ•°ç»„ä¸­ï¼Œè‹¥ä¸º 0 çš„å…ƒç´ æ•°ç›®è¿œè¿œå¤šäºé 0 å…ƒç´ ï¼Œå¹¶ä¸”é 0 å…ƒç´ åˆ†å¸ƒæ²¡æœ‰è§„å¾‹æ—¶ï¼Œåˆ™å¯ä»¥ç”¨ç¨€ç–æ•°ç»„ä¿å­˜è¯¥æ•°ç»„çš„å…ƒç´ ã€‚\nå¯¹äºäºŒç»´æ•°ç»„ï¼Œè¡Œå’Œåˆ—å¯ä»¥ä½œä¸ºå…ƒç´ çš„åæ ‡ï¼Œé€šè¿‡åæ ‡å¯ä»¥ç¡®å®šä¸€ä¸ªå…ƒç´ çš„ä½ç½®ï¼Œç¨€ç–æ•°ç»„å°±æ˜¯é€šè¿‡å­˜å‚¨åæ ‡å’Œå…ƒç´ å€¼ä»¥ä¿è¯é‡æ–°è½¬æ¢å›äºŒç»´æ•°ç»„ã€‚\nç¨€ç–æ•°ç»„é€šå¸¸æ˜¯ç”¨ä½œå‡å°‘å­˜å‚¨ç©ºé—´æµªè´¹ï¼Œå‹ç¼©æ•°ç»„è§„æ¨¡ï¼Œåªä¿å­˜æœ‰ç”¨æ•°æ®ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æ—¶é—´æ¢ç©ºé—´çš„åº”ç”¨ã€‚\nå¸¸è§é—®é¢˜ æ•°ç»„è¶Šç•Œ è™½ç„¶æ•°ç»„å¯ä»¥é€šè¿‡å¯»å€å…¬å¼åšåˆ°é«˜æ•ˆéšæœºè®¿é—®ï¼Œä½†æ˜¯è¿™å¹¶æ²¡æœ‰é™åˆ¶ä½¿ç”¨è¶…å‡ºæ•°ç»„é•¿åº¦çš„ä¸‹æ ‡è®¿é—®æ•°ç»„ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠè®¿é—®çš„æ•°ç»„ä¸‹æ ‡è¶…å‡ºæ•°ç»„é•¿åº¦çš„æƒ…å†µç§°ä¸ºæ•°ç»„è¶Šç•Œã€‚\nåœ¨ C è¯­è¨€ä¸­ï¼Œç¼–è¯‘å™¨ä¸ä¼šæ£€æµ‹å‡ºæ•°ç»„è¶Šç•Œçš„é—®é¢˜ï¼Œå¦‚æœå‡ºç°æ•°ç»„è¶Šç•Œçš„æƒ…å†µè€Œåˆæ²¡å¤„ç†çš„è¯ï¼Œæå¯èƒ½å‡ºç°å¦‚ä»£ç è¿›å…¥æ­»å¾ªç¯ç­‰ä¸å¯é¢„çŸ¥çš„æƒ…å†µã€‚\nint main(int argc, char* argv[]) { int i = 0; int arr[3] = {0}; for(; i\u0026lt;=3; i++){ arr[i] = 0; printf(\u0026quot;hello world\\n\u0026quot;); } return 0; } å¦‚ä¸Šè¿°ä»£ç ï¼Œåœ¨å­—èŠ‚å¯¹é½å’Œå†…å­˜åˆ†é…çš„ç‰¹æ€§ä¸‹ï¼Œå…ˆåå®šä¹‰çš„ i å’Œ arr å…±å æ®äº† 8 ä¸ªå­—èŠ‚ï¼Œè¡¨ç°ä¸º {arr[0], arr[1], arr[2], i} çš„å½¢å¼ï¼Œå½“å¾ªç¯åˆ°ä¸‹æ ‡ä¸º 3 æ—¶ï¼Œå®é™… arr[3] æŒ‡å‘çš„å°±æ˜¯ i æ‰€åœ¨åœ°å€ï¼Œä¼šå‡ºç° arr[3] = i = 3ï¼Œä»¥è‡³äºä»£ç è¿è¡Œè¿›å…¥æ­»å¾ªç¯ã€‚\nç›¸æ¯”è¾ƒä¸‹ï¼Œä½¿ç”¨ Java ä¼šæ›´åŠ å®‰å…¨ï¼ŒJava ä¸ä¼šæŠŠæ£€æŸ¥æ•°ç»„è¶Šç•Œçš„å·¥ä½œä¸¢ç»™ç¨‹åºå‘˜æ¥åšï¼Œå…¶æœ¬èº«å°±ä¼šåšè¶Šç•Œæ£€æŸ¥ï¼Œå¦‚æœå‡ºç°é”™è¯¯ä¼šæŠ›å‡º java.lang.ArrayIndexOutOfBoundsException å¼‚å¸¸ï¼Œè€Œä¸æ˜¯å‡ºç°æ­»å¾ªç¯ã€‚\nå®¹å™¨å’Œæ•°ç»„ è¿™é‡Œè¯´çš„å®¹å™¨æŒ‡çš„æ˜¯å°è£…äº†æ•°ç»„çš„æ“ä½œæ–¹æ³•ã€å¹¶ä¸”æ”¯æŒåŠ¨æ€æ‰©å®¹çš„å®¹å™¨ç±»ï¼Œæ¯”å¦‚ Java ä¸­çš„ ArrayList ç±»ã€‚\nä¸åŸç”Ÿæ•°ç»„ç›¸æ¯”ï¼Œè™½ç„¶ ArrayList æ‹¥æœ‰éå¸¸å¤§çš„ä¼˜åŠ¿ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰åœ°æ–¹éƒ½ä½¿ç”¨ ArrayList è€Œä¸æ˜¯æ•°ç»„ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ•°ç»„ä¼šæ›´æ–¹ä¾¿ã€æ›´æœ‰æ•ˆç‡ã€‚\nåœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œå¯ä»¥é€‰æ‹©åŸç”Ÿæ•°ç»„ï¼š\nè¿½æ±‚æè‡´æ€§èƒ½ã€‚Java çš„ ArrayList ä¸æ”¯æŒå­˜å‚¨åŸºæœ¬ç±»å‹ï¼Œè€Œæ˜¯å­˜å‚¨åŸºæœ¬ç±»å‹å°è£…åçš„å¯¹è±¡ï¼Œè‡ªåŠ¨è£…ç®±ã€æ‹†ç®±ä¼šæœ‰ä¸€å®šçš„æ€§èƒ½æ¶ˆè€— æ“ä½œç®€å•ï¼Œä»…ä½¿ç”¨åŸç”ŸåŠŸèƒ½ã€‚è™½ç„¶ ArrayList æä¾›äº†éå¸¸å¤šé¢å¤–çš„åŠŸèƒ½ï¼Œä½†ä¹Ÿé¢å¤–å¢åŠ äº†é£é™©ï¼Œä½¿ç”¨åŸç”Ÿæ•°ç»„æ›´ç®€å•ä¾¿æ· ä» 0 å¼€å§‹ç¼–å· æ•°ç»„çš„ä¸‹æ ‡ä» 0 å¼€å§‹ç¼–å·å¯ä»¥é€šè¿‡æ•°ç»„çš„å¯»å€å…¬å¼æ¥å›ç­”ã€‚\nåœ¨ C è¯­è¨€ä¸­ï¼Œæ•°ç»„çš„ä¸‹æ ‡ä¸æ˜¯æŒ‡æ•°ç»„çš„ç¬¬å‡ ä¸ªå…ƒç´ ï¼Œè€Œæ˜¯æŒ‡æ•°ç»„å…ƒç´ çš„åç§»ã€‚\nå¦‚æœä½¿ç”¨ 0 ä½œä¸ºæ•°ç»„çš„èµ·å§‹ä¸‹æ ‡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸‹è¿°çš„è¡¨è¾¾å¼ä½œä¸ºå¯»å€å…¬å¼ï¼š\naddress[i] = base_address + data_type_size * i å¦‚æœä½¿ç”¨ 1 ä½œä¸ºæ•°ç»„çš„èµ·å§‹ä¸‹æ ‡ï¼Œå°†ä¸èƒ½ç›´æ¥ä½¿ç”¨ä¸Šé¢çš„å¯»å€å…¬å¼ï¼Œè€Œæ˜¯éœ€è¦ä¿®æ”¹å¦‚ä¸‹ï¼š\naddress[i] = base_address + data_type_size * (i - 1) åœ¨å¯¹æ¯”å‰åä¸¤ä¸ªå¯»å€å…¬å¼ä¹‹åï¼Œä½¿ç”¨ 1 ä½œä¸ºèµ·å§‹ä¸‹æ ‡çš„å¯»å€å…¬å¼ä¼šæ¯”ä½¿ç”¨ 0 ä½œä¸ºèµ·å§‹ä¸‹æ ‡çš„å¯»å€å…¬å¼å¤šä¸€ä¸ªç®€å•çš„å‡æ³•æŒ‡ä»¤ã€‚\nå¯¹äºéå¸¸åº•å±‚çš„ç¨‹åºæ¥è¯´ï¼Œå³ä½¿åªæ˜¯å¤šå‡ºä¸€ä¸ªç®€å•çš„å‡æ³•æŒ‡ä»¤ï¼Œä¹Ÿæ˜¯ä¸€ç§æ€§èƒ½çš„æŸè€—ï¼Œä¸ºäº†åšåˆ°æè‡´ä¼˜åŒ–ï¼Œé€‰æ‹© 0 ä½œä¸ºèµ·å§‹ä¸‹æ ‡ä¼šæ›´å¥½ã€‚\nå½“ç„¶è¿˜æœ‰ä¸€ä¸ªå†å²åŸå› ï¼ŒC è¯­è¨€ä½¿ç”¨äº† 0 ä½œä¸ºæ•°ç»„çš„èµ·å§‹ä¸‹æ ‡ï¼Œåç»­å‡ºç°çš„ç¼–ç¨‹è¯­è¨€éƒ½çº·çº·ä»¿æ•ˆï¼Œè¿™ä¹Ÿç®—æ˜¯ä¸ºäº†ç»Ÿä¸€ï¼Œé™ä½ç¨‹åºå‘˜çš„å­¦ä¹ æˆæœ¬ã€‚\n","permalink":"https://fatedeity.cn/posts/data-structure-algorithm/array-basic.html","title":"æ•°ç»„çš„ç®€å•è®¤è¯†"}]